import{a as _,r as Y}from"./react-12b51ca5.js";var C=function(i,r){return Number(i.toFixed(r))},Vi=function(i,r){return typeof i=="number"?i:r},S=function(i,r,e){e&&typeof e=="function"&&e(i,r)},Qi=function(i){return-Math.cos(i*Math.PI)/2+.5},Ri=function(i){return i},Fi=function(i){return i*i},ji=function(i){return i*(2-i)},qi=function(i){return i<.5?2*i*i:-1+(4-2*i)*i},Ui=function(i){return i*i*i},Gi=function(i){return--i*i*i+1},Ji=function(i){return i<.5?4*i*i*i:(i-1)*(2*i-2)*(2*i-2)+1},$i=function(i){return i*i*i*i},xi=function(i){return 1- --i*i*i*i},Ii=function(i){return i<.5?8*i*i*i*i:1-8*--i*i*i*i},ie=function(i){return i*i*i*i*i},ee=function(i){return 1+--i*i*i*i*i},ne=function(i){return i<.5?16*i*i*i*i*i:1+16*--i*i*i*i*i},ci={easeOut:Qi,linear:Ri,easeInQuad:Fi,easeOutQuad:ji,easeInOutQuad:qi,easeInCubic:Ui,easeOutCubic:Gi,easeInOutCubic:Ji,easeInQuart:$i,easeOutQuart:xi,easeInOutQuart:Ii,easeInQuint:ie,easeOutQuint:ee,easeInOutQuint:ne},gi=function(i){typeof i=="number"&&cancelAnimationFrame(i)},T=function(i){i.mounted&&(gi(i.animation),i.animate=!1,i.animation=null,i.velocity=null)};function Si(i,r,e,n){if(i.mounted){var o=new Date().getTime(),a=1;T(i),i.animation=function(){if(!i.mounted)return gi(i.animation);var t=new Date().getTime()-o,l=t/e,s=ci[r],d=s(l);t>=e?(n(a),i.animation=null):i.animation&&(n(d),requestAnimationFrame(i.animation))},requestAnimationFrame(i.animation)}}function re(i){var r=i.scale,e=i.positionX,n=i.positionY;return!(Number.isNaN(r)||Number.isNaN(e)||Number.isNaN(n))}function A(i,r,e,n){var o=re(r);if(!(!i.mounted||!o)){var a=i.setTransformState,t=i.transformState,l=t.scale,s=t.positionX,d=t.positionY,u=r.scale-l,f=r.positionX-s,v=r.positionY-d;e===0?a(r.scale,r.positionX,r.positionY):Si(i,n,e,function(p){var m=l+u*p,h=s+f*p,g=d+v*p;a(m,h,g)})}}function oe(i,r,e){var n=i.offsetWidth,o=i.offsetHeight,a=r.offsetWidth,t=r.offsetHeight,l=a*e,s=t*e,d=n-l,u=o-s;return{wrapperWidth:n,wrapperHeight:o,newContentWidth:l,newDiffWidth:d,newContentHeight:s,newDiffHeight:u}}var ae=function(i,r,e,n,o,a,t){var l=i>r?e*(t?1:.5):0,s=n>o?a*(t?1:.5):0,d=i-r-l,u=l,f=n-o-s,v=s;return{minPositionX:d,maxPositionX:u,minPositionY:f,maxPositionY:v}},I=function(i,r){var e=i.wrapperComponent,n=i.contentComponent,o=i.setup.centerZoomedOut;if(!e||!n)throw new Error("Components are not mounted");var a=oe(e,n,r),t=a.wrapperWidth,l=a.wrapperHeight,s=a.newContentWidth,d=a.newDiffWidth,u=a.newContentHeight,f=a.newDiffHeight,v=ae(t,s,d,l,u,f,!!o);return v},J=function(i,r,e,n){return n?i<r?C(r,2):i>e?C(e,2):C(i,2):C(i,2)},O=function(i,r){var e=I(i,r);return i.bounds=e,e};function V(i,r,e,n,o,a,t){var l=e.minPositionX,s=e.minPositionY,d=e.maxPositionX,u=e.maxPositionY,f=0,v=0;t&&(f=o,v=a);var p=J(i,l-f,d+f,n),m=J(r,s-v,u+v,n);return{x:p,y:m}}function Q(i,r,e,n,o,a){var t=i.transformState,l=t.scale,s=t.positionX,d=t.positionY,u=n-l;if(typeof r!="number"||typeof e!="number")return console.error("Mouse X and Y position were not provided!"),{x:s,y:d};var f=s-r*u,v=d-e*u,p=V(f,v,o,a,0,0,null);return p}function H(i,r,e,n,o){var a=o?n:0,t=r-a;return!Number.isNaN(e)&&i>=e?e:!Number.isNaN(r)&&i<=t?t:i}var si=function(i,r){var e=i.setup.panning.excluded,n=i.isInitialized,o=i.wrapperComponent,a=r.target,t="shadowRoot"in a&&"composedPath"in r,l=t?r.composedPath().some(function(u){return u instanceof Element?o==null?void 0:o.contains(u):!1}):o==null?void 0:o.contains(a),s=n&&a&&l;if(!s)return!1;var d=R(a,e);return!d},ui=function(i){var r=i.isInitialized,e=i.isPanning,n=i.setup,o=n.panning.disabled,a=r&&e&&!o;return!!a},te=function(i,r){var e=i.transformState,n=e.positionX,o=e.positionY;i.isPanning=!0;var a=r.clientX,t=r.clientY;i.startCoords={x:a-n,y:t-o}},le=function(i,r){var e=r.touches,n=i.transformState,o=n.positionX,a=n.positionY;i.isPanning=!0;var t=e.length===1;if(t){var l=e[0].clientX,s=e[0].clientY;i.startCoords={x:l-o,y:s-a}}};function se(i){var r=i.transformState,e=r.positionX,n=r.positionY,o=r.scale,a=i.setup,t=a.disabled,l=a.limitToBounds,s=a.centerZoomedOut,d=i.wrapperComponent;if(!(t||!d||!i.bounds)){var u=i.bounds,f=u.maxPositionX,v=u.minPositionX,p=u.maxPositionY,m=u.minPositionY,h=e>f||e<v,g=n>p||n<m,P=e>f?d.offsetWidth:i.setup.minPositionX||0,b=n>p?d.offsetHeight:i.setup.minPositionY||0,w=Q(i,P,b,o,i.bounds,l||s),E=w.x,y=w.y;return{scale:o,positionX:h?E:e,positionY:g?y:n}}}function wi(i,r,e,n,o){var a=i.setup.limitToBounds,t=i.wrapperComponent,l=i.bounds,s=i.transformState,d=s.scale,u=s.positionX,f=s.positionY;if(!(t===null||l===null||r===u&&e===f)){var v=V(r,e,l,a,n,o,t),p=v.x,m=v.y;i.setTransformState(d,p,m)}}var ue=function(i,r,e){var n=i.startCoords,o=i.transformState,a=i.setup.panning,t=a.lockAxisX,l=a.lockAxisY,s=o.positionX,d=o.positionY;if(!n)return{x:s,y:d};var u=r-n.x,f=e-n.y,v=t?s:u,p=l?d:f;return{x:v,y:p}},N=function(i,r){var e=i.setup,n=i.transformState,o=n.scale,a=e.minScale,t=e.disablePadding;return r>0&&o>=a&&!t?r:0},de=function(i){var r=i.mounted,e=i.setup,n=e.disabled,o=e.velocityAnimation,a=i.transformState.scale,t=o.disabled,l=!t||a>1||!n||r;return!!l},fe=function(i){var r=i.mounted,e=i.velocity,n=i.bounds,o=i.setup,a=o.disabled,t=o.velocityAnimation,l=i.transformState.scale,s=t.disabled,d=!s||l>1||!a||r;return!(!d||!e||!n)};function ve(i,r){var e=i.setup.velocityAnimation,n=e.equalToMove,o=e.animationTime,a=e.sensitivity;return n?o*r*a:o}function di(i,r,e,n,o,a,t,l,s,d){if(o){if(r>t&&e>t){var u=t+(i-t)*d;return u>s?s:u<t?t:u}if(r<a&&e<a){var u=a+(i-a)*d;return u<l?l:u>a?a:u}}return n?r:J(i,a,t,o)}function pe(i,r){var e=1;return r?Math.min(e,i.offsetWidth/window.innerWidth):e}function me(i,r){var e=de(i);if(e){var n=i.lastMousePosition,o=i.velocityTime,a=i.setup,t=i.wrapperComponent,l=a.velocityAnimation.equalToMove,s=Date.now();if(n&&o&&t){var d=pe(t,l),u=r.x-n.x,f=r.y-n.y,v=u/d,p=f/d,m=s-o,h=u*u+f*f,g=Math.sqrt(h)/m;i.velocity={velocityX:v,velocityY:p,total:g}}i.lastMousePosition=r,i.velocityTime=s}}function he(i){var r=i.velocity,e=i.bounds,n=i.setup,o=i.wrapperComponent,a=fe(i);if(!(!a||!r||!e||!o)){var t=r.velocityX,l=r.velocityY,s=r.total,d=e.maxPositionX,u=e.minPositionX,f=e.maxPositionY,v=e.minPositionY,p=n.limitToBounds,m=n.alignmentAnimation,h=n.zoomAnimation,g=n.panning,P=g.lockAxisY,b=g.lockAxisX,w=h.animationType,E=m.sizeX,y=m.sizeY,k=m.velocityAlignmentTime,z=k,B=ve(i,s),D=Math.max(B,z),W=N(i,E),Z=N(i,y),L=W*o.offsetWidth/100,ni=Z*o.offsetHeight/100,_i=d+L,Di=u-L,Wi=f+ni,Oi=v-ni,ri=i.transformState,Ni=new Date().getTime();Si(i,w,D,function(ki){var F=i.transformState,Bi=F.scale,j=F.positionX,q=F.positionY,Zi=new Date().getTime()-Ni,Mi=Zi/z,Hi=ci[m.animationType],oi=1-Hi(Math.min(1,Mi)),ai=1-ki,ti=j+t*ai,li=q+l*ai,Li=di(ti,ri.positionX,j,b,p,u,d,Di,_i,oi),Ki=di(li,ri.positionY,q,P,p,v,f,Oi,Wi,oi);(j!==ti||q!==li)&&i.setTransformState(Bi,Li,Ki)})}}function fi(i,r){var e=i.transformState.scale;T(i),O(i,e),window.TouchEvent!==void 0&&r instanceof TouchEvent?le(i,r):te(i,r)}function Pi(i){var r=i.transformState.scale,e=i.setup,n=e.minScale,o=e.alignmentAnimation,a=o.disabled,t=o.sizeX,l=o.sizeY,s=o.animationTime,d=o.animationType,u=a||r<n||!t&&!l;if(!u){var f=se(i);f&&A(i,f,s,d)}}function vi(i,r,e){var n=i.startCoords,o=i.setup,a=o.alignmentAnimation,t=a.sizeX,l=a.sizeY;if(n){var s=ue(i,r,e),d=s.x,u=s.y,f=N(i,t),v=N(i,l);me(i,{x:d,y:u}),wi(i,d,u,f,v)}}function ce(i){if(i.isPanning){var r=i.setup.panning.velocityDisabled,e=i.velocity,n=i.wrapperComponent,o=i.contentComponent;i.isPanning=!1,i.animate=!1,i.animation=null;var a=n==null?void 0:n.getBoundingClientRect(),t=o==null?void 0:o.getBoundingClientRect(),l=(a==null?void 0:a.width)||0,s=(a==null?void 0:a.height)||0,d=(t==null?void 0:t.width)||0,u=(t==null?void 0:t.height)||0,f=l<d||s<u,v=!r&&e&&(e==null?void 0:e.total)>.1&&f;v?he(i):Pi(i)}}function ii(i,r,e,n){var o=i.setup,a=o.minScale,t=o.maxScale,l=o.limitToBounds,s=H(C(r,2),a,t,0,!1),d=O(i,s),u=Q(i,e,n,s,d,l),f=u.x,v=u.y;return{scale:s,positionX:f,positionY:v}}function bi(i,r,e){var n=i.transformState.scale,o=i.wrapperComponent,a=i.setup,t=a.minScale,l=a.limitToBounds,s=a.zoomAnimation,d=s.disabled,u=s.animationTime,f=s.animationType,v=d||n>=t;if((n>=1||l)&&Pi(i),!(v||!o||!i.mounted)){var p=r||o.offsetWidth/2,m=e||o.offsetHeight/2,h=ii(i,t,p,m);h&&A(i,h,u,f)}}var X=function(){return X=Object.assign||function(r){for(var e,n=1,o=arguments.length;n<o;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},X.apply(this,arguments)};function pi(i,r,e){if(e||arguments.length===2)for(var n=0,o=r.length,a;n<o;n++)(a||!(n in r))&&(a||(a=Array.prototype.slice.call(r,0,n)),a[n]=r[n]);return i.concat(a||Array.prototype.slice.call(r))}var K={previousScale:1,scale:1,positionX:0,positionY:0},M={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,allowLeftClickPan:!0,allowMiddleClickPan:!0,allowRightClickPan:!0,wheelPanning:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},Ci=function(i){var r,e,n,o;return{previousScale:(r=i.initialScale)!==null&&r!==void 0?r:K.scale,scale:(e=i.initialScale)!==null&&e!==void 0?e:K.scale,positionX:(n=i.initialPositionX)!==null&&n!==void 0?n:K.positionX,positionY:(o=i.initialPositionY)!==null&&o!==void 0?o:K.positionY}},mi=function(i){var r=X({},M);return Object.keys(i).forEach(function(e){var n=typeof i[e]<"u",o=typeof M[e]<"u";if(o&&n){var a=Object.prototype.toString.call(M[e]),t=a==="[object Object]",l=a==="[object Array]";t?r[e]=X(X({},M[e]),i[e]):l?r[e]=pi(pi([],M[e],!0),i[e],!0):r[e]=i[e]}}),r},yi=function(i,r,e){var n=i.transformState.scale,o=i.wrapperComponent,a=i.setup,t=a.maxScale,l=a.minScale,s=a.zoomAnimation,d=a.smooth,u=s.size;if(!o)throw new Error("Wrapper is not mounted");var f=d?n*Math.exp(r*e):n+r*e,v=H(C(f,3),l,t,u,!1);return v};function Ti(i,r,e,n,o){var a=i.wrapperComponent,t=i.transformState,l=t.scale,s=t.positionX,d=t.positionY;if(!a)return console.error("No WrapperComponent found");var u=a.offsetWidth,f=a.offsetHeight,v=(u/2-s)/l,p=(f/2-d)/l,m=yi(i,r,e),h=ii(i,m,v,p);if(!h)return console.error("Error during zoom event. New transformation state was not calculated.");A(i,h,n,o)}function Yi(i,r,e,n){var o=i.setup,a=i.wrapperComponent,t=o.limitToBounds,l=Ci(i.props),s=i.transformState,d=s.scale,u=s.positionX,f=s.positionY;if(a){var v=I(i,l.scale),p=V(l.positionX,l.positionY,v,t,0,0,a),m={scale:l.scale,positionX:p.x,positionY:p.y};d===l.scale&&u===l.positionX&&f===l.positionY||(n==null||n(),A(i,m,r,e))}}function ge(i,r,e,n){var o=i.getBoundingClientRect(),a=r.getBoundingClientRect(),t=e.getBoundingClientRect(),l=a.x*n.scale,s=a.y*n.scale;return{x:(o.x-t.x+l)/n.scale,y:(o.y-t.y+s)/n.scale}}function Se(i,r,e){var n=i.wrapperComponent,o=i.contentComponent,a=i.transformState,t=i.setup,l=t.limitToBounds,s=t.minScale,d=t.maxScale;if(!n||!o)return a;var u=n.getBoundingClientRect(),f=r.getBoundingClientRect(),v=ge(r,n,o,a),p=v.x,m=v.y,h=f.width/a.scale,g=f.height/a.scale,P=n.offsetWidth/h,b=n.offsetHeight/g,w=H(e||Math.min(P,b),s,d,0,!1),E=(u.width-h*w)/2,y=(u.height-g*w)/2,k=(u.left-p)*w+E,z=(u.top-m)*w+y,B=I(i,w),D=V(k,z,B,l,0,0,n),W=D.x,Z=D.y;return{positionX:W,positionY:Z,scale:w}}var we=function(i){return function(r,e,n){r===void 0&&(r=.5),e===void 0&&(e=300),n===void 0&&(n="easeOut"),Ti(i,1,r,e,n)}},Pe=function(i){return function(r,e,n){r===void 0&&(r=.5),e===void 0&&(e=300),n===void 0&&(n="easeOut"),Ti(i,-1,r,e,n)}},be=function(i){return function(r,e,n,o,a){o===void 0&&(o=300),a===void 0&&(a="easeOut");var t=i.transformState,l=t.positionX,s=t.positionY,d=t.scale,u=i.wrapperComponent,f=i.contentComponent,v=i.setup.disabled;if(!(v||!u||!f)){var p={positionX:Number.isNaN(r)?l:r,positionY:Number.isNaN(e)?s:e,scale:Number.isNaN(n)?d:n};A(i,p,o,a)}}},Ce=function(i){return function(r,e){r===void 0&&(r=200),e===void 0&&(e="easeOut"),Yi(i,r,e)}},ye=function(i){return function(r,e,n){e===void 0&&(e=200),n===void 0&&(n="easeOut");var o=i.transformState,a=i.wrapperComponent,t=i.contentComponent;if(a&&t){var l=Xi(r||o.scale,a,t);A(i,l,e,n)}}},Te=function(i){return function(r,e,n,o){n===void 0&&(n=600),o===void 0&&(o="easeOut"),T(i);var a=i.wrapperComponent,t=typeof r=="string"?document.getElementById(r):r;if(a&&t&&a.contains(t)){var l=Se(i,t,e);A(i,l,n,o)}}},$=function(i){return{instance:i,zoomIn:we(i),zoomOut:Pe(i),setTransform:be(i),resetTransform:Ce(i),centerView:ye(i),zoomToElement:Te(i)}},Ye=function(i){return{instance:i,state:i.transformState}},c=function(i){var r={};return Object.assign(r,Ye(i)),Object.assign(r,$(i)),r},U=!1;function G(){try{var i={get passive(){return U=!0,!1}};return i}catch{return U=!1,U}}var R=function(i,r){return r.some(function(e){return i.matches("".concat(e,", .").concat(e,", ").concat(e," *, .").concat(e," *"))})},x=function(i){i&&clearTimeout(i)},Xe=function(i,r,e){return"translate(".concat(i,"px, ").concat(r,"px) scale(").concat(e,")")},Xi=function(i,r,e){var n=e.offsetWidth*i,o=e.offsetHeight*i,a=(r.offsetWidth-n)/2,t=(r.offsetHeight-o)/2;return{scale:i,positionX:a,positionY:t}};function Ae(i){return function(r){i.forEach(function(e){typeof e=="function"?e(r):e!=null&&(e.current=r)})}}var Ee=function(i,r){var e=i.setup.wheel,n=e.disabled,o=e.wheelDisabled,a=e.touchPadDisabled,t=e.excluded,l=i.isInitialized,s=i.isPanning,d=r.target,u=l&&!s&&!n&&d;if(!u||o&&!r.ctrlKey||a&&r.ctrlKey)return!1;var f=R(d,t);return!f},ze=function(i){return i?i.deltaY<0?1:-1:0};function _e(i,r){var e=ze(i),n=Vi(r,e);return n}function Ai(i,r,e){var n=r.getBoundingClientRect(),o=0,a=0;if("clientX"in i)o=(i.clientX-n.left)/e,a=(i.clientY-n.top)/e;else{var t=i.touches[0];o=(t.clientX-n.left)/e,a=(t.clientY-n.top)/e}return(Number.isNaN(o)||Number.isNaN(a))&&console.error("No mouse or touch offset found"),{x:o,y:a}}var De=function(i,r,e,n,o){var a=i.transformState.scale,t=i.wrapperComponent,l=i.setup,s=l.maxScale,d=l.minScale,u=l.zoomAnimation,f=l.disablePadding,v=u.size,p=u.disabled;if(!t)throw new Error("Wrapper is not mounted");var m=a+r*e;if(o)return m;var h=n?!1:!p,g=H(C(m,3),d,s,v,h&&!f);return g},We=function(i,r){var e=i.previousWheelEvent,n=i.transformState.scale,o=i.setup,a=o.maxScale,t=o.minScale;return e?n<a||n>t||Math.sign(e.deltaY)!==Math.sign(r.deltaY)||e.deltaY>0&&e.deltaY<r.deltaY||e.deltaY<0&&e.deltaY>r.deltaY||Math.sign(e.deltaY)!==Math.sign(r.deltaY):!1},Oe=function(i,r){var e=i.setup.pinch,n=e.disabled,o=e.excluded,a=i.isInitialized,t=r.target,l=a&&!n&&t;if(!l)return!1;var s=R(t,o);return!s},Ne=function(i){var r=i.setup.pinch.disabled,e=i.isInitialized,n=i.pinchStartDistance,o=e&&!r&&n;return!!o},ke=function(i,r,e){var n=e.getBoundingClientRect(),o=i.touches,a=C(o[0].clientX-n.left,5),t=C(o[0].clientY-n.top,5),l=C(o[1].clientX-n.left,5),s=C(o[1].clientY-n.top,5);return{x:(a+l)/2/r,y:(t+s)/2/r}},Ei=function(i){return Math.sqrt(Math.pow(i.touches[0].pageX-i.touches[1].pageX,2)+Math.pow(i.touches[0].pageY-i.touches[1].pageY,2))},Be=function(i,r){var e=i.pinchStartScale,n=i.pinchStartDistance,o=i.setup,a=o.maxScale,t=o.minScale,l=o.zoomAnimation,s=o.disablePadding,d=l.size,u=l.disabled;if(!e||n===null||!r)throw new Error("Pinch touches distance was not provided");if(r<0)return i.transformState.scale;var f=r/n,v=f*e;return H(C(v,2),t,a,d,!u&&!s)},Ze=160,Me=100,He=function(i,r){var e=i.props,n=e.onWheelStart,o=e.onZoomStart;i.wheelStopEventTimer||(T(i),S(c(i),r,n),S(c(i),r,o))},Le=function(i,r){var e=i.props,n=e.onWheel,o=e.onZoom,a=i.contentComponent,t=i.setup,l=i.transformState,s=l.scale,d=t.limitToBounds,u=t.centerZoomedOut,f=t.zoomAnimation,v=t.wheel,p=t.disablePadding,m=t.smooth,h=f.size,g=f.disabled,P=v.step,b=v.smoothStep;if(!a)throw new Error("Component not mounted");r.preventDefault(),r.stopPropagation();var w=_e(r,null),E=m?b*Math.abs(r.deltaY):P,y=De(i,w,E,!r.ctrlKey);if(s!==y){var k=O(i,y),z=Ai(r,a,s),B=g||h===0||u||p,D=d&&B,W=Q(i,z.x,z.y,y,k,D),Z=W.x,L=W.y;i.previousWheelEvent=r,i.setTransformState(y,Z,L),S(c(i),r,n),S(c(i),r,o)}},Ke=function(i,r){var e=i.props,n=e.onWheelStop,o=e.onZoomStop;x(i.wheelAnimationTimer),i.wheelAnimationTimer=setTimeout(function(){i.mounted&&(bi(i,r.x,r.y),i.wheelAnimationTimer=null)},Me);var a=We(i,r);a&&(x(i.wheelStopEventTimer),i.wheelStopEventTimer=setTimeout(function(){i.mounted&&(i.wheelStopEventTimer=null,S(c(i),r,n),S(c(i),r,o))},Ze))},Ve=function(i,r){var e=Ei(r);i.pinchStartDistance=e,i.lastDistance=e,i.pinchStartScale=i.transformState.scale,i.isPanning=!1,T(i)},Qe=function(i,r){var e=i.contentComponent,n=i.pinchStartDistance,o=i.transformState.scale,a=i.setup,t=a.limitToBounds,l=a.centerZoomedOut,s=a.zoomAnimation,d=s.disabled,u=s.size;if(!(n===null||!e)){var f=ke(r,o,e);if(!(!Number.isFinite(f.x)||!Number.isFinite(f.y))){var v=Ei(r),p=Be(i,v);if(p!==o){var m=O(i,p),h=d||u===0||l,g=t&&h,P=Q(i,f.x,f.y,p,m,g),b=P.x,w=P.y;i.pinchMidpoint=f,i.lastDistance=v,i.setTransformState(p,b,w)}}}},Re=function(i){var r=i.pinchMidpoint;i.velocity=null,i.lastDistance=null,i.pinchMidpoint=null,i.pinchStartScale=null,i.pinchStartDistance=null,bi(i,r==null?void 0:r.x,r==null?void 0:r.y)},zi=function(i,r){var e=i.props.onZoomStop,n=i.setup.doubleClick.animationTime;x(i.doubleClickStopEventTimer),i.doubleClickStopEventTimer=setTimeout(function(){i.doubleClickStopEventTimer=null,S(c(i),r,e)},n)},Fe=function(i,r){var e=i.props,n=e.onZoomStart,o=e.onZoom,a=i.setup.doubleClick,t=a.animationTime,l=a.animationType;S(c(i),r,n),Yi(i,t,l,function(){return S(c(i),r,o)}),zi(i,r)};function je(i,r){return i==="toggle"?r===1?1:-1:i==="zoomOut"?-1:1}function qe(i,r){var e=i.setup,n=i.doubleClickStopEventTimer,o=i.transformState,a=i.contentComponent,t=o.scale,l=i.props,s=l.onZoomStart,d=l.onZoom,u=e.doubleClick,f=u.disabled,v=u.mode,p=u.step,m=u.animationTime,h=u.animationType;if(!f&&!n){if(v==="reset")return Fe(i,r);if(!a)return console.error("No ContentComponent found");var g=je(v,i.transformState.scale),P=yi(i,g,p);if(t!==P){S(c(i),r,s);var b=Ai(r,a,t),w=ii(i,P,b.x,b.y);if(!w)return console.error("Error during zoom event. New transformation state was not calculated.");S(c(i),r,d),A(i,w,m,h),zi(i,r)}}}var Ue=function(i,r){var e=i.isInitialized,n=i.setup,o=i.wrapperComponent,a=n.doubleClick,t=a.disabled,l=a.excluded,s=r.target,d=o==null?void 0:o.contains(s),u=e&&s&&d&&!t;if(!u)return!1;var f=R(s,l);return!f},Ge=function(){function i(r){var e=this;this.mounted=!0,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.isWheelPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){e.initializeWindowEvents()},this.unmount=function(){e.cleanupWindowEvents()},this.update=function(n){e.props=n,O(e,e.transformState.scale),e.setup=mi(n)},this.initializeWindowEvents=function(){var n,o,a=G(),t=(n=e.wrapperComponent)===null||n===void 0?void 0:n.ownerDocument,l=t==null?void 0:t.defaultView;(o=e.wrapperComponent)===null||o===void 0||o.addEventListener("wheel",e.onWheelPanning,a),l==null||l.addEventListener("mousedown",e.onPanningStart,a),l==null||l.addEventListener("mousemove",e.onPanning,a),l==null||l.addEventListener("mouseup",e.onPanningStop,a),t==null||t.addEventListener("mouseleave",e.clearPanning,a),l==null||l.addEventListener("keyup",e.setKeyUnPressed,a),l==null||l.addEventListener("keydown",e.setKeyPressed,a)},this.cleanupWindowEvents=function(){var n,o,a=G(),t=(n=e.wrapperComponent)===null||n===void 0?void 0:n.ownerDocument,l=t==null?void 0:t.defaultView;l==null||l.removeEventListener("mousedown",e.onPanningStart,a),l==null||l.removeEventListener("mousemove",e.onPanning,a),l==null||l.removeEventListener("mouseup",e.onPanningStop,a),t==null||t.removeEventListener("mouseleave",e.clearPanning,a),l==null||l.removeEventListener("keyup",e.setKeyUnPressed,a),l==null||l.removeEventListener("keydown",e.setKeyPressed,a),document.removeEventListener("mouseleave",e.clearPanning,a),T(e),(o=e.observer)===null||o===void 0||o.disconnect()},this.handleInitializeWrapperEvents=function(n){var o=G();n.addEventListener("wheel",e.onWheelZoom,o),n.addEventListener("dblclick",e.onDoubleClick,o),n.addEventListener("touchstart",e.onTouchPanningStart,o),n.addEventListener("touchmove",e.onTouchPanning,o),n.addEventListener("touchend",e.onTouchPanningStop,o)},this.handleInitialize=function(n){var o=e.setup.centerOnInit;e.applyTransformation(),e.onInitCallbacks.forEach(function(a){return a(c(e))}),o&&(e.setCenter(),e.observer=new ResizeObserver(function(){var a;e.onInitCallbacks.forEach(function(t){return t(c(e))}),e.setCenter(),(a=e.observer)===null||a===void 0||a.disconnect()}),e.observer.observe(n))},this.onWheelZoom=function(n){var o=e.setup.disabled;if(!o){var a=Ee(e,n);if(a){var t=e.isPressingKeys(e.setup.wheel.activationKeys);t&&(He(e,n),Le(e,n),Ke(e,n))}}},this.onWheelPanning=function(n){var o=e.setup,a=o.disabled,t=o.wheel,l=o.panning;if(!(!e.wrapperComponent||!e.contentComponent||a||!t.wheelDisabled||l.disabled||!l.wheelPanning||n.ctrlKey)){n.preventDefault(),n.stopPropagation();var s=e.transformState,d=s.positionX,u=s.positionY,f=d-n.deltaX,v=u-n.deltaY,p=l.lockAxisX?d:f,m=l.lockAxisY?u:v,h=e.setup.alignmentAnimation,g=h.sizeX,P=h.sizeY,b=N(e,g),w=N(e,P);p===d&&m===u||wi(e,p,m,b,w)}},this.onPanningStart=function(n){var o=e.setup.disabled,a=e.props.onPanningStart;if(!o){var t=si(e,n);if(t){var l=e.isPressingKeys(e.setup.panning.activationKeys);l&&(n.button===0&&!e.setup.panning.allowLeftClickPan||n.button===1&&!e.setup.panning.allowMiddleClickPan||n.button===2&&!e.setup.panning.allowRightClickPan||(n.preventDefault(),n.stopPropagation(),T(e),fi(e,n),S(c(e),n,a)))}}},this.onPanning=function(n){var o=e.setup.disabled,a=e.props.onPanning;if(!o){var t=ui(e);if(t){var l=e.isPressingKeys(e.setup.panning.activationKeys);l&&(n.preventDefault(),n.stopPropagation(),vi(e,n.clientX,n.clientY),S(c(e),n,a))}}},this.onPanningStop=function(n){var o=e.props.onPanningStop;e.isPanning&&(ce(e),S(c(e),n,o))},this.onPinchStart=function(n){var o=e.setup.disabled,a=e.props,t=a.onPinchingStart,l=a.onZoomStart;if(!o){var s=Oe(e,n);s&&(Ve(e,n),T(e),S(c(e),n,t),S(c(e),n,l))}},this.onPinch=function(n){var o=e.setup.disabled,a=e.props,t=a.onPinching,l=a.onZoom;if(!o){var s=Ne(e);s&&(n.preventDefault(),n.stopPropagation(),Qe(e,n),S(c(e),n,t),S(c(e),n,l))}},this.onPinchStop=function(n){var o=e.props,a=o.onPinchingStop,t=o.onZoomStop;e.pinchStartScale&&(Re(e),S(c(e),n,a),S(c(e),n,t))},this.onTouchPanningStart=function(n){var o=e.setup.disabled,a=e.props.onPanningStart;if(!o){var t=si(e,n);if(t){var l=e.lastTouch&&+new Date-e.lastTouch<200;if(l&&n.touches.length===1)e.onDoubleClick(n);else{e.lastTouch=+new Date,T(e);var s=n.touches,d=s.length===1,u=s.length===2;d&&(T(e),fi(e,n),S(c(e),n,a)),u&&e.onPinchStart(n)}}}},this.onTouchPanning=function(n){var o=e.setup.disabled,a=e.props.onPanning;if(e.isPanning&&n.touches.length===1){if(o)return;var t=ui(e);if(!t)return;n.preventDefault(),n.stopPropagation();var l=n.touches[0];vi(e,l.clientX,l.clientY),S(c(e),n,a)}else n.touches.length>1&&e.onPinch(n)},this.onTouchPanningStop=function(n){e.onPanningStop(n),e.onPinchStop(n)},this.onDoubleClick=function(n){var o=e.setup.disabled;if(!o){var a=Ue(e,n);a&&qe(e,n)}},this.clearPanning=function(n){e.isPanning&&e.onPanningStop(n)},this.setKeyPressed=function(n){e.pressedKeys[n.key]=!0},this.setKeyUnPressed=function(n){e.pressedKeys[n.key]=!1},this.isPressingKeys=function(n){return n.length?!!n.find(function(o){return e.pressedKeys[o]}):!0},this.setTransformState=function(n,o,a){var t=e.props.onTransformed;if(!Number.isNaN(n)&&!Number.isNaN(o)&&!Number.isNaN(a)){n!==e.transformState.scale&&(e.transformState.previousScale=e.transformState.scale,e.transformState.scale=n),e.transformState.positionX=o,e.transformState.positionY=a,e.applyTransformation();var l=c(e);e.onChangeCallbacks.forEach(function(s){return s(l)}),S(l,{scale:n,positionX:o,positionY:a},t)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(e.wrapperComponent&&e.contentComponent){var n=Xi(e.transformState.scale,e.wrapperComponent,e.contentComponent);e.setTransformState(n.scale,n.positionX,n.positionY)}},this.handleTransformStyles=function(n,o,a){return e.props.customTransform?e.props.customTransform(n,o,a):Xe(n,o,a)},this.applyTransformation=function(){if(!(!e.mounted||!e.contentComponent)){var n=e.transformState,o=n.scale,a=n.positionX,t=n.positionY,l=e.handleTransformStyles(a,t,o);e.contentComponent.style.transform=l}},this.getContext=function(){return c(e)},this.onChange=function(n){return e.onChangeCallbacks.has(n)||e.onChangeCallbacks.add(n),function(){e.onChangeCallbacks.delete(n)}},this.onInit=function(n){return e.onInitCallbacks.has(n)||e.onInitCallbacks.add(n),function(){e.onInitCallbacks.delete(n)}},this.init=function(n,o){e.cleanupWindowEvents(),e.wrapperComponent=n,e.contentComponent=o,O(e,e.transformState.scale),e.handleInitializeWrapperEvents(n),e.handleInitialize(o),e.initializeWindowEvents(),e.isInitialized=!0;var a=c(e);S(a,void 0,e.props.onInit)},this.props=r,this.setup=mi(this.props),this.transformState=Ci(this.props)}return i}(),ei=_.createContext(null),Je=function(i,r){return typeof i=="function"?i(r):i},en=_.forwardRef(function(i,r){var e=Y.useRef(new Ge(i)).current,n=Je(i.children,$(e));return Y.useImperativeHandle(r,function(){return $(e)},[e]),Y.useEffect(function(){e.update(i)},[e,i]),_.createElement(ei.Provider,{value:e},n)});_.forwardRef(function(i,r){var e=Y.useRef(null),n=Y.useContext(ei);return Y.useEffect(function(){return n.onChange(function(o){if(e.current){var a=0,t=0;e.current.style.transform=n.handleTransformStyles(a,t,1/o.instance.transformState.scale)}})},[n]),_.createElement("div",X({},i,{ref:Ae([e,r])}))});function $e(i,r){r===void 0&&(r={});var e=r.insertAt;if(!(!i||typeof document>"u")){var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",e==="top"&&n.firstChild?n.insertBefore(o,n.firstChild):n.appendChild(o),o.styleSheet?o.styleSheet.cssText=i:o.appendChild(document.createTextNode(i))}}var xe=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,hi={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};$e(xe);var nn=function(i){var r=i.children,e=i.wrapperClass,n=e===void 0?"":e,o=i.contentClass,a=o===void 0?"":o,t=i.wrapperStyle,l=i.contentStyle,s=i.wrapperProps,d=s===void 0?{}:s,u=i.contentProps,f=u===void 0?{}:u,v=Y.useContext(ei),p=v.init,m=v.cleanupWindowEvents,h=Y.useRef(null),g=Y.useRef(null);return Y.useEffect(function(){var P=h.current,b=g.current;return P!==null&&b!==null&&p&&(p==null||p(P,b)),function(){m==null||m()}},[]),_.createElement("div",X({},d,{ref:h,className:"react-transform-wrapper ".concat(hi.wrapper," ").concat(n),style:t}),_.createElement("div",X({},f,{ref:g,className:"react-transform-component ".concat(hi.content," ").concat(a),style:l}),r))};export{en as T,nn as a};
