import{E as C,r as i,j as a,C as w,B as n,a7 as z,b1 as I,aO as v,b2 as p}from"./.pnpm-e6eae8df.js";import{p as x}from"./product-bd632fca.js";import"./index-479552fe.js";const $="http://localhost:3009",L=()=>{const d=C(),[h,c]=i.useState(!1),[m,_]=i.useState(""),[g,b]=i.useState("productName"),[S,r]=i.useState({list:[],total:0,page:1,pageSize:5}),{list:f,total:j,page:l,pageSize:u}=S,o=async(t,e)=>{r({page:t}),c(!0);let s;m?s=await x(t,e,m,g):s=await x(t,e),s.code==200&&(c(!1),r(s.data))};i.useEffect(()=>{o(l,u)},[]);const y=[{title:"序号",key:"_id",width:80,align:"center",render:(t,e,s)=>s+1},{title:"商品名称",dataIndex:"name"},{title:"主图",dataIndex:"coverImg",render:(t,e)=>a.jsx(I,{src:e.coverImg,alt:e.name,style:{width:60}})},{title:"价格",dataIndex:"price",render(t){return`￥${t}`}},{title:"是否在售",dataIndex:"onSale",render:(t,e)=>e.onSale?"在售":"已下架"},{title:"商品描述",dataIndex:"desc"},{title:"操作",render:(t,e,s)=>a.jsxs("div",{children:[a.jsx(n,{type:"primary",size:"small",onClick:()=>{d(`/module/product/detail?id=${e._id}`)},children:"修改"}),a.jsx(v,{title:"确定删除此项",onCancel:()=>{},onConfirm:()=>{p.info(`删除： _id=${e._id}`)},children:a.jsx(n,{type:"dashed",size:"small",style:{margin:"0 1rem"},children:"删除"})}),a.jsx(n,{size:"small",onClick:()=>{p.info(`修改在售： _id=${e._id}`)},children:e.onSale?"下架":"上架"})]})}];return a.jsx("div",{children:a.jsx(w,{title:"商品列表",extra:a.jsx(n,{type:"primary",size:"small",onClick:()=>{d("/module/product/detail")},children:"新增"}),children:a.jsx(z,{bordered:!0,rowKey:"_id",loading:h,rowClassName:t=>t!=null&&t.onSale?"":"bg-red",columns:y,dataSource:f,pagination:{current:l,total:j,defaultPageSize:u,showSizeChanger:!0,pageSizeOptions:["3","5","10","15"],showQuickJumper:!0,onChange:o,onShowSizeChange:(t,e)=>{r({pageSize:e}),o(l,e)}}})})})};export{L as default,$ as serverUrl};
