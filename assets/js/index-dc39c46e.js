import{T as Z,c as ee,a as te}from"./Tree-27289865.js";import{a as g,i as q,cR as ne,k as se,cS as oe,t as G,c0 as F,r as f,c4 as re,cT as ce,cU as le}from"./index-6ab6cade.js";import{f as J,c as ae,a as ie}from"./conductUtil-0f9ba3c8.js";import{u as de,S as fe}from"./iconUtil-3c2f21e2.js";const z=4;function ue(n){const{dropPosition:c,dropLevelOffset:r,prefixCls:t,indent:s,direction:e="ltr"}=n,o=e==="ltr"?"left":"right",l=e==="ltr"?"right":"left",a={[o]:-r*s+z,[l]:0};switch(c){case-1:a.top=-3;break;case 1:a.bottom=-3;break;default:a.bottom=-3,a[o]=s+z;break}return g.createElement("div",{style:a,className:`${t}-drop-indicator`})}const pe=g.forwardRef((n,c)=>{var r;const{getPrefixCls:t,direction:s,virtual:e,tree:o}=g.useContext(q),{prefixCls:l,className:a,showIcon:d=!1,showLine:v,switcherIcon:N,switcherLoadingIcon:S,blockNode:P=!1,children:D,checkable:O=!1,selectable:C=!0,draggable:b,motion:w,style:I}=n,y=t("tree",l),R=t(),T=w??Object.assign(Object.assign({},ne(R)),{motionAppear:!1}),$=Object.assign(Object.assign({},n),{checkable:O,selectable:C,showIcon:d,motion:T,blockNode:P,showLine:!!v,dropIndicatorRender:ue}),[x,u,h]=de(y),[,K]=se(),E=K.paddingXS/2+(((r=K.Tree)===null||r===void 0?void 0:r.titleHeight)||K.controlHeightSM),_=g.useMemo(()=>{if(!b)return!1;let i={};switch(typeof b){case"function":i.nodeDraggable=b;break;case"object":i=Object.assign({},b);break}return i.icon!==!1&&(i.icon=i.icon||g.createElement(oe,null)),i},[b]),p=i=>g.createElement(fe,{prefixCls:y,switcherIcon:N,switcherLoadingIcon:S,treeNodeProps:i,showLine:v});return x(g.createElement(Z,Object.assign({itemHeight:E,ref:c,virtual:e},$,{style:Object.assign(Object.assign({},o==null?void 0:o.style),I),prefixCls:y,className:G({[`${y}-icon-hide`]:!d,[`${y}-block-node`]:P,[`${y}-unselectable`]:!C,[`${y}-rtl`]:s==="rtl"},o==null?void 0:o.className,a,u,h),direction:s,checkable:O&&g.createElement("span",{className:`${y}-checkbox-inner`}),selectable:C,switcherIcon:p,draggable:_}),D))}),Q=pe,V=0,A=1,B=2;function H(n,c,r){const{key:t,children:s}=r;function e(o){const l=o[t],a=o[s];c(l,o)!==!1&&H(a||[],c,r)}n.forEach(e)}function ye(n){let{treeData:c,expandedKeys:r,startKey:t,endKey:s,fieldNames:e}=n;const o=[];let l=V;if(t&&t===s)return[t];if(!t||!s)return[];function a(d){return d===t||d===s}return H(c,d=>{if(l===B)return!1;if(a(d)){if(o.push(d),l===V)l=A;else if(l===A)return l=B,!1}else l===A&&o.push(d);return r.includes(d)},J(e)),o}function L(n,c,r){const t=F(c),s=[];return H(n,(e,o)=>{const l=t.indexOf(e);return l!==-1&&(s.push(o),t.splice(l,1)),!!t.length},J(r)),s}var U=globalThis&&globalThis.__rest||function(n,c){var r={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&c.indexOf(t)<0&&(r[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,t=Object.getOwnPropertySymbols(n);s<t.length;s++)c.indexOf(t[s])<0&&Object.prototype.propertyIsEnumerable.call(n,t[s])&&(r[t[s]]=n[t[s]]);return r};function me(n){const{isLeaf:c,expanded:r}=n;return c?f.createElement(re,null):r?f.createElement(ce,null):f.createElement(le,null)}function X(n){let{treeData:c,children:r}=n;return c||ie(r)}const xe=(n,c)=>{var{defaultExpandAll:r,defaultExpandParent:t,defaultExpandedKeys:s}=n,e=U(n,["defaultExpandAll","defaultExpandParent","defaultExpandedKeys"]);const o=f.useRef(null),l=f.useRef(null),a=()=>{const{keyEntities:x}=ae(X(e));let u;return r?u=Object.keys(x):t?u=ee(e.expandedKeys||s||[],x):u=e.expandedKeys||s||[],u},[d,v]=f.useState(e.selectedKeys||e.defaultSelectedKeys||[]),[N,S]=f.useState(()=>a());f.useEffect(()=>{"selectedKeys"in e&&v(e.selectedKeys)},[e.selectedKeys]),f.useEffect(()=>{"expandedKeys"in e&&S(e.expandedKeys)},[e.expandedKeys]);const P=(x,u)=>{var h;return"expandedKeys"in e||S(x),(h=e.onExpand)===null||h===void 0?void 0:h.call(e,x,u)},D=(x,u)=>{var h;const{multiple:K,fieldNames:E}=e,{node:_,nativeEvent:p}=u,{key:i=""}=_,j=X(e),k=Object.assign(Object.assign({},u),{selected:!0}),W=(p==null?void 0:p.ctrlKey)||(p==null?void 0:p.metaKey),Y=p==null?void 0:p.shiftKey;let m;K&&W?(m=x,o.current=i,l.current=m,k.selectedNodes=L(j,m,E)):K&&Y?(m=Array.from(new Set([].concat(F(l.current||[]),F(ye({treeData:j,expandedKeys:N,startKey:i,endKey:o.current,fieldNames:E}))))),k.selectedNodes=L(j,m,E)):(m=[i],o.current=i,l.current=m,k.selectedNodes=L(j,m,E)),(h=e.onSelect)===null||h===void 0||h.call(e,m,k),"selectedKeys"in e||v(m)},{getPrefixCls:O,direction:C}=f.useContext(q),{prefixCls:b,className:w,showIcon:I=!0,expandAction:y="click"}=e,R=U(e,["prefixCls","className","showIcon","expandAction"]),T=O("tree",b),$=G(`${T}-directory`,{[`${T}-directory-rtl`]:C==="rtl"},w);return f.createElement(Q,Object.assign({icon:me,ref:c,blockNode:!0},R,{showIcon:I,expandAction:y,prefixCls:T,className:$,expandedKeys:N,selectedKeys:d,onSelect:D,onExpand:P}))},he=f.forwardRef(xe),ge=he,M=Q;M.DirectoryTree=ge;M.TreeNode=te;const Oe=M;export{Oe as T};
//# sourceMappingURL=index-dc39c46e.js.map
