{"version":3,"file":"addPolice-228ddb45.js","sources":["../../../src/config/regular.ts","../../../src/views/system/userManage2/addPolice.tsx"],"sourcesContent":["// 常用的正则规则配置\n\nexport const regExpConfig = {\n  IDcard:\n    /^[1-9]\\d{7}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])\\d{3}$|^[1-9]\\d{5}[1-9]\\d{3}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])\\d{3}([0-9]|X)$/, // 身份证\n  mobile: /^1([3|4|5|7|8|])\\d{9}$/, // 手机号码\n  telephone: /^(\\(\\d{3,4}\\)|\\d{3,4}-|\\s)?\\d{7,14}$/, // 固定电话\n  num: /^[0-9]*$/, // 数字\n  phoneNo: /(^1([3|4|5|7|8|])\\d{9}$)|(^(\\(\\d{3,4}\\)|\\d{3,4}-|\\s)?\\d{7,14}$)/, // 电话或者手机\n  policeNo: /^[0-9A-Za-z]{4,10}$/, // 账号4-10位数字或字母组成\n  pwd: /^[0-9A-Za-z]{6,16}$/, // 密码由6-16位数字或者字母组成\n  isNumAlpha: /^[0-9A-Za-z]*$/, // 字母或数字\n  isAlpha: /^[a-zA-Z]*$/, // 是否字母\n  isNumAlphaCn: /^[0-9a-zA-Z\\u4E00-\\uFA29]*$/, // 是否数字或字母或汉字\n  isPostCode: /^[\\d-]*$/i, // 是否邮编\n  isNumAlphaUline: /^[0-9a-zA-Z_]*$/, // 是否数字、字母或下划线\n  isNumAndThanZero: /^([1-9]\\d*(\\.\\d+)?|0)$/, // 是否为整数且大于0/^[1-9]\\d*(\\.\\d+)?$/\n  isNormalEncode: /^(\\w||[\\u4e00-\\u9fa5]){0,}$/, // 是否为非特殊字符（包括数字字母下划线中文）\n  isTableName: /^[a-zA-Z][A-Za-z0-9#$_-]{0,29}$/, // 表名\n  isInt: /^-?\\d+$/, // 整数\n  isTableOtherName: /^[\\u4e00-\\u9fa5]{0,20}$/, // 别名\n  // isText_30: /^(\\W|\\w{1,2}){0,15}$/, // 正则\n  // isText_20: /^(\\W|\\w{1,2}){0,10}$/, // 正则\n  isText_30: /^(\\W|\\w{1}){0,30}$/, // 匹配30个字符，字符可以使字母、数字、下划线、非字母，一个汉字算1个字符\n  isText_50: /^(\\W|\\w{1}){0,50}$/, // 匹配50个字符，字符可以使字母、数字、下划线、非字母，一个汉字算1个字符\n  isText_20: /^(\\W|\\w{1}){0,20}$/, // 匹配20个字符，字符可以使字母、数字、下划线、非字母，一个汉字算1个字符\n  isText_100: /^(\\W|\\w{1}){0,100}$/, // 匹配100个字符，字符可以使字母、数字、下划线、非字母，一个汉字算1个字符\n  isText_250: /^(\\W|\\w{1}){0,250}$/, // 匹配250个字符，字符可以使字母、数字、下划线、非字母，一个汉字算1个字符\n  isNotChina: /^[^\\u4e00-\\u9fa5]{0,}$/, // 不为中文  IDcard: /^[1-9]\\d{7}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])\\d{3}$|^[1-9]\\d{5}[1-9]\\d{3}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])\\d{3}([0-9]|X)$/, // 身份证\n  IDcardAndAdmin:\n    /^(([1-9]\\d{7}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])\\d{3}$|^[1-9]\\d{5}[1-9]\\d{3}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])\\d{3}([0-9]|X))|(admin))$/, // 身份证或者是admin账号\n  IDcardTrim:\n    /^\\s*(([1-9]\\d{7}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])\\d{3})|([1-9]\\d{5}[1-9]\\d{3}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])\\d{3}([0-9]|X))|(admin))\\s*$/, // 身份证\n  num1: /^[1-9]*$/, // 数字\n  companyNO: /^qqb_[0-9a-zA-Z_]{1,}$/, // 公司人员账号\n  imgType: /image\\/(png|jpg|jpeg|gif)$/, // 上传图片类型\n  isChina: /^[\\u4e00-\\u9fa5]{2,8}$/,\n  isNozeroNumber: /^\\+?[1-9]\\d*$/, // 大于零的正整数\n  float: /^\\d+(\\.?|(\\.\\d+)?)$/ // 匹配正整数或者小数 或者0.这个特殊值\n};\n","import { fetchUserAdd, fetchUserDetailUpdate } from \"@/api/modules/system/userManage2\";\nimport { regExpConfig } from \"@/config/regular\";\nimport { message } from \"@/hooks/useMessage\";\nimport { Button, Drawer, Form, Input, Select } from \"antd\";\nimport React, { ReactNode, useEffect, useState } from \"react\";\nconst FormItem = Form.Item;\nconst { Option } = Select;\n\nexport default function AddPolice(props: any) {\n  const [loading, setloading] = useState(false);\n\n  const { form } = props;\n\n  useEffect(() => {\n    return () => {\n      form.resetFields();\n    };\n  });\n\n  const handleSubmit = () => {\n    const values = props.form.getFieldsValue();\n    setloading(true);\n    if (props.type === \"edit\") {\n      fetchUserDetailUpdate({ ...values, deptCode: props.deptId, id: props.currPeopleId }).then((res: any) => {\n        message.success(res.msg);\n        props.handleOk();\n      });\n      setloading(false);\n    } else {\n      fetchUserAdd({ ...values, deptCode: props.deptId }).then((res: any) => {\n        message.success(res.msg);\n        props.handleOk();\n      });\n      setloading(false);\n    }\n  };\n\n  const formItemLayout = {\n    labelCol: { span: 5 },\n    wrapperCol: { span: 17 }\n  };\n  const footer: any = () => {\n    return (\n      <React.Fragment>\n        <Button type=\"primary\" onClick={handleSubmit} loading={loading}>\n          确定\n        </Button>\n        <Button type=\"primary\" onClick={props.onCancel}>\n          取消\n        </Button>\n      </React.Fragment>\n    );\n  };\n  const { visible, type, title, roleList, values, deptId, currPeopleId, onCancel, handleOk } = props;\n  console.log(\"Drawer props：\", props);\n  return (\n    <Drawer open={visible} title={title} onClose={onCancel} footer={footer} className=\"modal-header modal-body\">\n      <div className=\"modalcontent\">\n        <Form\n          form={form}\n          layout=\"horizontal\"\n          onFinish={handleSubmit}\n          initialValues={{\n            chineseName: type === \"add\" ? \"\" : values.chineseName,\n            idcardNo: type === \"add\" ? \"\" : values.idcardNo,\n            policeCode: type === \"add\" ? \"\" : values.policeCode,\n            username: type === \"add\" ? \"\" : values.username,\n            password: type === \"add\" ? \"\" : values.password,\n            phoneNo: type === \"add\" ? \"\" : values.phoneNo,\n            shortPhoneNo: type === \"add\" ? \"\" : values.shortPhoneNo,\n            post: type === \"add\" ? \"\" : values.post,\n            roleIds: type === \"add\" ? \"\" : values.roleIds\n          }}\n        >\n          <FormItem\n            name=\"chineseName\"\n            {...formItemLayout}\n            label=\"名称\"\n            hasFeedback\n            rules={[{ required: true, message: \"请输入名称\" }]}\n          >\n            <Input placeholder=\"请输入名称\" />\n          </FormItem>\n          <FormItem\n            name=\"idcardNo\"\n            {...formItemLayout}\n            label=\"身份证\"\n            hasFeedback\n            rules={[\n              { required: true, message: \"请输入身份证号\" },\n              { pattern: regExpConfig.IDcard, message: \"身份证号格式不正确\" }\n            ]}\n          >\n            <Input placeholder=\"请输入身份证号\" disabled={props.type === \"edit\"} />\n          </FormItem>\n          <FormItem\n            name=\"policeCode\"\n            {...formItemLayout}\n            label=\"警号\"\n            hasFeedback\n            rules={[\n              { required: true, message: \"请输入警号\" },\n              { pattern: regExpConfig.policeNo, message: \"请输入4-10位数字或字母\" }\n            ]}\n          >\n            <Input placeholder=\"请输入警号\" />\n          </FormItem>\n          <FormItem\n            name=\"username\"\n            {...formItemLayout}\n            label=\"登陆用户名\"\n            hasFeedback\n            rules={[\n              { required: true, message: \"请输入4-10位数字或字母\" },\n              { pattern: regExpConfig.policeNo, message: \"请输入4-10位数字或字母\" }\n            ]}\n          >\n            <Input placeholder=\"请输入登陆用户名\" disabled={props.type === \"edit\"} />\n          </FormItem>\n          {/* <FormItem name=\"password\" style={{ position: \"absolute\", zIndex: -10 }}>\n            <input type=\"password\" />\n          </FormItem> */}\n          {props.type === \"edit\" ? (\n            <FormItem\n              name=\"password\"\n              {...formItemLayout}\n              label=\"修改密码\"\n              rules={[{ pattern: regExpConfig.pwd, message: \"请输入6-16位数字或者字母\" }]}\n            >\n              <Input type=\"password\" placeholder=\"不改密码此项为空\" />\n            </FormItem>\n          ) : (\n            <FormItem\n              name=\"password\"\n              {...formItemLayout}\n              label=\"登陆密码\"\n              hasFeedback\n              rules={[\n                { required: true, message: \"密码请输入6-16位数字或者字母\" },\n                { pattern: regExpConfig.pwd, message: \"密码请输入6-16位数字或者字母\" }\n              ]}\n            >\n              <Input placeholder=\"请输入密码\" type=\"password\" />\n            </FormItem>\n          )}\n          <FormItem\n            name=\"phoneNo\"\n            {...formItemLayout}\n            label=\"手机号码\"\n            hasFeedback\n            rules={[\n              { required: true, message: \"请输入手机号码\" },\n              { pattern: regExpConfig.mobile, message: \"手机号码格式不正确\" }\n            ]}\n          >\n            <Input placeholder=\"请输入手机号码\" />\n          </FormItem>\n          <FormItem name=\"shortPhoneNo\" {...formItemLayout} label=\"手机短号\" hasFeedback>\n            <Input placeholder=\"请输入手机短号\" />\n          </FormItem>\n          <FormItem name=\"post\" {...formItemLayout} label=\"职务\" hasFeedback>\n            <Input placeholder=\"请输入职务\" />\n          </FormItem>\n          <FormItem\n            name=\"roleIds\"\n            {...formItemLayout}\n            label=\"角色\"\n            hasFeedback\n            rules={[{ required: true, message: \"请选择用户的角色\" }]}\n          >\n            <Select mode=\"multiple\" placeholder=\"请选择用户的角色\" showSearch>\n              {roleList.map((item: any) => (\n                <Option key={item.role_name} value={`${item.id}`}>\n                  {item.role_name}\n                </Option>\n              ))}\n            </Select>\n          </FormItem>\n          <Button className=\"hide\" type=\"primary\" htmlType=\"submit\">\n            确定\n          </Button>\n        </Form>\n      </div>\n    </Drawer>\n  );\n}\n"],"names":["regExpConfig","IDcard","mobile","telephone","num","phoneNo","policeNo","pwd","isNumAlpha","isAlpha","isNumAlphaCn","isPostCode","isNumAlphaUline","isNumAndThanZero","isNormalEncode","isTableName","isInt","isTableOtherName","isText_30","isText_50","isText_20","isText_100","isText_250","isNotChina","IDcardAndAdmin","IDcardTrim","num1","companyNO","imgType","isChina","isNozeroNumber","float","FormItem","Form","Option","Select","AddPolice","props","loading","setloading","useState","form","useEffect","handleSubmit","values","fetchUserDetailUpdate","res","message","fetchUserAdd","formItemLayout","footer","jsxs","React","jsx","Button","visible","type","title","roleList","deptId","currPeopleId","onCancel","handleOk","Drawer","Input","item"],"mappings":"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"}