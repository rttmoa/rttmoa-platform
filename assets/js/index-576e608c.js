import{r as n,j as i,aU as p}from"./.pnpm-e6eae8df.js";const x=(l=100)=>new Promise(s=>{setTimeout(()=>{s(!0)},l)}),m=[{id:624748504,title:"活动名称一",readonly:"活动名称一",decs:"这个活动真好玩",state:"open",created_at:"1590486176000",update_at:"1590486176000"},{id:624691228,title:"活动名称二",readonly:"活动名称二",decs:"这个活动真好玩",state:"closed",created_at:"1590481162000",update_at:"1590481162000"},{id:624691229,title:"活动名称二",readonly:"活动名称二",decs:"这个活动真好玩",state:"closed",created_at:"1590481162000",update_at:"1590481162000"},{id:624691230,title:"活动名称二",readonly:"活动名称二",decs:"这个活动真好玩",state:"closed",created_at:"1590481162000",update_at:"1590481162000"}],b=()=>{const[l,s]=n.useState([]),[o,u]=n.useState([]),c=[{title:"活动名称",dataIndex:"title",tooltip:"只读，使用form.getFieldValue获取不到值",formItemProps:(t,{rowIndex:e})=>({rules:e>1?[{required:!0,message:"此项为必填项"}]:[]}),editable:(t,e,a)=>a!==0,width:"15%"},{title:"活动名称二",dataIndex:"readonly",tooltip:"只读，使用form.getFieldValue可以获取到值",width:"15%"},{title:"状态",key:"state",dataIndex:"state",valueType:"select",valueEnum:{all:{text:"全部",status:"Default"},open:{text:"未解决",status:"Error"},closed:{text:"已解决",status:"Success"}}},{title:"描述",dataIndex:"decs",fieldProps:(t,{rowKey:e,rowIndex:a})=>t.getFieldValue([e||"","title"])==="不好玩"?{disabled:!0}:a>9?{disabled:!0}:{}},{title:"活动时间",dataIndex:"created_at",valueType:"date"},{title:"操作",valueType:"option",width:200,render:(t,e,a,d)=>[i.jsx("a",{onClick:()=>{var r;(r=d==null?void 0:d.startEditable)==null||r.call(d,e.id)},children:"编辑"},"editable"),i.jsx("a",{onClick:()=>{u(o.filter(r=>r.id!==e.id))},children:"删除"},"delete")]}];return i.jsx(p,{rowKey:"id",headerTitle:"使用 EditTable",className:"ant-pro-table-scroll",scroll:{x:1e3,y:"100%"},bordered:!0,cardBordered:!0,pagination:!1,recordCreatorProps:{position:"bottom",record:()=>({id:(Math.random()*1e6).toFixed(0)})},loading:!1,columns:c,request:async()=>({data:m,total:5,success:!0}),value:o,onChange:u,editable:{type:"multiple",editableKeys:l,onSave:async(t,e,a)=>{await x(2e3)},onChange:s}})};export{b as default};
