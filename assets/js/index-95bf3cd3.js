import{u as Z,T as ee,S as te,c as ne,a as se}from"./iconUtil-ce3fda51.js";import{d as h,q as G,co as oe,v as re,cp as ce,G as J,bX as F,r as d,cq as le,cr as ie,cs as ae}from"./index-4c9f8422.js";import{f as Q,c as de,a as fe}from"./conductUtil-60bd2953.js";const q=4;function ue(s){const{dropPosition:c,dropLevelOffset:o,prefixCls:t,indent:r,direction:e="ltr"}=s,n=e==="ltr"?"left":"right",i=e==="ltr"?"right":"left",l={[n]:-o*r+q,[i]:0};switch(c){case-1:l.top=-3;break;case 1:l.bottom=-3;break;default:l.bottom=-3,l[n]=r+q;break}return h.createElement("div",{style:l,className:`${t}-drop-indicator`})}const pe=h.forwardRef((s,c)=>{var o;const{getPrefixCls:t,direction:r,virtual:e,tree:n}=h.useContext(G),{prefixCls:i,className:l,showIcon:T=!1,showLine:E,switcherIcon:N,switcherLoadingIcon:S,blockNode:P=!1,children:I,checkable:O=!1,selectable:K=!0,draggable:g,motion:C,style:D}=s,p=t("tree",i),R=t(),w=C??Object.assign(Object.assign({},oe(R)),{motionAppear:!1}),$=Object.assign(Object.assign({},s),{checkable:O,selectable:K,showIcon:T,motion:w,blockNode:P,showLine:!!E,dropIndicatorRender:ue}),[x,f,m]=Z(p),[,b]=re(),v=b.paddingXS/2+(((o=b.Tree)===null||o===void 0?void 0:o.titleHeight)||b.controlHeightSM),_=h.useMemo(()=>{if(!g)return!1;let a={};switch(typeof g){case"function":a.nodeDraggable=g;break;case"object":a=Object.assign({},g);break}return a.icon!==!1&&(a.icon=a.icon||h.createElement(ce,null)),a},[g]),u=a=>h.createElement(te,{prefixCls:p,switcherIcon:N,switcherLoadingIcon:S,treeNodeProps:a,showLine:E});return x(h.createElement(ee,Object.assign({itemHeight:v,ref:c,virtual:e},$,{style:Object.assign(Object.assign({},n==null?void 0:n.style),D),prefixCls:p,className:J({[`${p}-icon-hide`]:!T,[`${p}-block-node`]:P,[`${p}-unselectable`]:!K,[`${p}-rtl`]:r==="rtl"},n==null?void 0:n.className,l,f,m),direction:r,checkable:O&&h.createElement("span",{className:`${p}-checkbox-inner`}),selectable:K,switcherIcon:u,draggable:_}),I))}),U=pe,z=0,A=1,V=2;function H(s,c,o){const{key:t,children:r}=o;function e(n){const i=n[t],l=n[r];c(i,n)!==!1&&H(l||[],c,o)}s.forEach(e)}function ye({treeData:s,expandedKeys:c,startKey:o,endKey:t,fieldNames:r}){const e=[];let n=z;if(o&&o===t)return[o];if(!o||!t)return[];function i(l){return l===o||l===t}return H(s,l=>{if(n===V)return!1;if(i(l)){if(e.push(l),n===z)n=A;else if(n===A)return n=V,!1}else n===A&&e.push(l);return c.includes(l)},Q(r)),e}function L(s,c,o){const t=F(c),r=[];return H(s,(e,n)=>{const i=t.indexOf(e);return i!==-1&&(r.push(n),t.splice(i,1)),!!t.length},Q(o)),r}var X=globalThis&&globalThis.__rest||function(s,c){var o={};for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&c.indexOf(t)<0&&(o[t]=s[t]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(s);r<t.length;r++)c.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(s,t[r])&&(o[t[r]]=s[t[r]]);return o};function xe(s){const{isLeaf:c,expanded:o}=s;return c?d.createElement(le,null):o?d.createElement(ie,null):d.createElement(ae,null)}function B({treeData:s,children:c}){return s||fe(c)}const me=(s,c)=>{var{defaultExpandAll:o,defaultExpandParent:t,defaultExpandedKeys:r}=s,e=X(s,["defaultExpandAll","defaultExpandParent","defaultExpandedKeys"]);const n=d.useRef(null),i=d.useRef(null),l=()=>{const{keyEntities:x}=de(B(e));let f;return o?f=Object.keys(x):t?f=ne(e.expandedKeys||r||[],x):f=e.expandedKeys||r||[],f},[T,E]=d.useState(e.selectedKeys||e.defaultSelectedKeys||[]),[N,S]=d.useState(()=>l());d.useEffect(()=>{"selectedKeys"in e&&E(e.selectedKeys)},[e.selectedKeys]),d.useEffect(()=>{"expandedKeys"in e&&S(e.expandedKeys)},[e.expandedKeys]);const P=(x,f)=>{var m;return"expandedKeys"in e||S(x),(m=e.onExpand)===null||m===void 0?void 0:m.call(e,x,f)},I=(x,f)=>{var m;const{multiple:b,fieldNames:v}=e,{node:_,nativeEvent:u}=f,{key:a=""}=_,j=B(e),k=Object.assign(Object.assign({},f),{selected:!0}),W=(u==null?void 0:u.ctrlKey)||(u==null?void 0:u.metaKey),Y=u==null?void 0:u.shiftKey;let y;b&&W?(y=x,n.current=a,i.current=y,k.selectedNodes=L(j,y,v)):b&&Y?(y=Array.from(new Set([].concat(F(i.current||[]),F(ye({treeData:j,expandedKeys:N,startKey:a,endKey:n.current,fieldNames:v}))))),k.selectedNodes=L(j,y,v)):(y=[a],n.current=a,i.current=y,k.selectedNodes=L(j,y,v)),(m=e.onSelect)===null||m===void 0||m.call(e,y,k),"selectedKeys"in e||E(y)},{getPrefixCls:O,direction:K}=d.useContext(G),{prefixCls:g,className:C,showIcon:D=!0,expandAction:p="click"}=e,R=X(e,["prefixCls","className","showIcon","expandAction"]),w=O("tree",g),$=J(`${w}-directory`,{[`${w}-directory-rtl`]:K==="rtl"},C);return d.createElement(U,Object.assign({icon:xe,ref:c,blockNode:!0},R,{showIcon:D,expandAction:p,prefixCls:w,className:$,expandedKeys:N,selectedKeys:T,onSelect:I,onExpand:P}))},he=d.forwardRef(me),ge=he,M=U;M.DirectoryTree=ge;M.TreeNode=se;const Oe=M;export{Oe as T};
//# sourceMappingURL=index-95bf3cd3.js.map
