import{r as x,z as Y,X as c,S as Be,d as L,W as te,c1 as tt,Y as ce,Z as F,bm as nt,b$ as Se,c0 as Ue,bj as we,bk as dt,de as lt,df as st,d0 as ct,dg as D,br as Ne,c$ as ut}from"./index-f751f953.js";import{L as ft}from"./List-f96a4af3.js";import{g as H,b as U,d as Pe,e as at,f as je,h as Ie,i as $e,a as vt,c as gt}from"./conductUtil-242f4494.js";var Fe=x.createContext(null),yt=x.createContext({}),ht=function(r){for(var y=r.prefixCls,e=r.level,d=r.isStart,v=r.isEnd,C="".concat(y,"-indent-unit"),t=[],o=0;o<e;o+=1)t.push(x.createElement("span",{key:o,className:Y(C,c(c({},"".concat(C,"-start"),d[o]),"".concat(C,"-end"),v[o]))}));return x.createElement("span",{"aria-hidden":"true",className:"".concat(y,"-indent")},t)};const pt=x.memo(ht);var Kt=["eventKey","className","style","dragOver","dragOverGapTop","dragOverGapBottom","isLeaf","isStart","isEnd","expanded","selected","checked","halfChecked","loading","domRef","active","data","onMouseMove","selectable"],qe="open",Ge="close",mt="---",Le=function(r){var y,e,d=r.eventKey,v=r.className,C=r.style,t=r.dragOver,o=r.dragOverGapTop,n=r.dragOverGapBottom,l=r.isLeaf,f=r.isStart,p=r.isEnd,g=r.expanded,N=r.selected,k=r.checked,s=r.halfChecked,u=r.loading,b=r.domRef,h=r.active,m=r.data,S=r.onMouseMove,E=r.selectable,O=Be(r,Kt),a=L.useContext(Fe),T=L.useContext(yt),M=L.useRef(null),R=L.useState(!1),I=te(R,2),A=I[0],_=I[1],w=L.useMemo(function(){var P;return!!(a.disabled||r.disabled||(P=T.nodeDisabled)!==null&&P!==void 0&&P.call(T,m))},[a.disabled,r.disabled,T.nodeDisabled,m]),W=L.useMemo(function(){return!a.checkable||r.checkable===!1?!1:a.checkable},[a.checkable,r.checkable]),B=function(K){w||a.onNodeSelect(K,U(r))},ne=function(K){w||!W||r.disableCheckbox||a.onNodeCheck(K,U(r),!k)},ke=L.useMemo(function(){return typeof E=="boolean"?E:a.selectable},[E,a.selectable]),fe=function(K){a.onNodeClick(K,U(r)),ke?B(K):ne(K)},ve=function(K){a.onNodeDoubleClick(K,U(r))},ae=function(K){a.onNodeMouseEnter(K,U(r))},q=function(K){a.onNodeMouseLeave(K,U(r))},re=function(K){a.onNodeContextMenu(K,U(r))},j=L.useMemo(function(){return!!(a.draggable&&(!a.draggable.nodeDraggable||a.draggable.nodeDraggable(m)))},[a.draggable,m]),ge=function(K){K.stopPropagation(),_(!0),a.onNodeDragStart(K,r);try{K.dataTransfer.setData("text/plain","")}catch{}},Ce=function(K){K.preventDefault(),K.stopPropagation(),a.onNodeDragEnter(K,r)},J=function(K){K.preventDefault(),K.stopPropagation(),a.onNodeDragOver(K,r)},xe=function(K){K.stopPropagation(),a.onNodeDragLeave(K,r)},ye=function(K){K.stopPropagation(),_(!1),a.onNodeDragEnd(K,r)},Q=function(K){K.preventDefault(),K.stopPropagation(),_(!1),a.onNodeDrop(K,r)},oe=function(K){u||a.onNodeExpand(K,U(r))},Ee=L.useMemo(function(){var P=H(a.keyEntities,d)||{},K=P.children;return!!(K||[]).length},[a.keyEntities,d]),z=L.useMemo(function(){return l===!1?!1:l||!a.loadData&&!Ee||a.loadData&&r.loaded&&!Ee},[l,a.loadData,Ee,r.loaded]);L.useEffect(function(){u||typeof a.loadData=="function"&&g&&!z&&!r.loaded&&a.onNodeLoad(U(r))},[u,a.loadData,a.onNodeLoad,g,z,r]);var Re=L.useMemo(function(){var P;return(P=a.draggable)!==null&&P!==void 0&&P.icon?L.createElement("span",{className:"".concat(a.prefixCls,"-draggable-icon")},a.draggable.icon):null},[a.draggable]),he=function(K){var V=r.switcherIcon||a.switcherIcon;return typeof V=="function"?V(F(F({},r),{},{isLeaf:K})):V},Oe=function(){if(z){var K=he(!0);return K!==!1?L.createElement("span",{className:Y("".concat(a.prefixCls,"-switcher"),"".concat(a.prefixCls,"-switcher-noop"))},K):null}var V=he(!1);return V!==!1?L.createElement("span",{onClick:oe,className:Y("".concat(a.prefixCls,"-switcher"),"".concat(a.prefixCls,"-switcher_").concat(g?qe:Ge))},V):null},be=L.useMemo(function(){if(!W)return null;var P=typeof W!="boolean"?W:null;return L.createElement("span",{className:Y("".concat(a.prefixCls,"-checkbox"),c(c(c({},"".concat(a.prefixCls,"-checkbox-checked"),k),"".concat(a.prefixCls,"-checkbox-indeterminate"),!k&&s),"".concat(a.prefixCls,"-checkbox-disabled"),w||r.disableCheckbox)),onClick:ne,role:"checkbox","aria-checked":s?"mixed":k,"aria-disabled":w||r.disableCheckbox,"aria-label":"Select ".concat(typeof r.title=="string"?r.title:"tree node")},P)},[W,k,s,w,r.disableCheckbox,r.title]),pe=L.useMemo(function(){return z?null:g?qe:Ge},[z,g]),Ke=L.useMemo(function(){return L.createElement("span",{className:Y("".concat(a.prefixCls,"-iconEle"),"".concat(a.prefixCls,"-icon__").concat(pe||"docu"),c({},"".concat(a.prefixCls,"-icon_loading"),u))})},[a.prefixCls,pe,u]),$=L.useMemo(function(){var P=!!a.draggable,K=!r.disabled&&P&&a.dragOverNodeKey===d;return K?a.dropIndicatorRender({dropPosition:a.dropPosition,dropLevelOffset:a.dropLevelOffset,indent:a.indent,prefixCls:a.prefixCls,direction:a.direction}):null},[a.dropPosition,a.dropLevelOffset,a.indent,a.prefixCls,a.direction,a.draggable,a.dragOverNodeKey,a.dropIndicatorRender]),G=L.useMemo(function(){var P=r.title,K=P===void 0?mt:P,V="".concat(a.prefixCls,"-node-content-wrapper"),_e;if(a.showIcon){var Te=r.icon||a.icon;_e=Te?L.createElement("span",{className:Y("".concat(a.prefixCls,"-iconEle"),"".concat(a.prefixCls,"-icon__customize"))},typeof Te=="function"?Te(r):Te):Ke}else a.loadData&&u&&(_e=Ke);var Me;return typeof K=="function"?Me=K(m):a.titleRender?Me=a.titleRender(m):Me=K,L.createElement("span",{ref:M,title:typeof K=="string"?K:"",className:Y(V,"".concat(V,"-").concat(pe||"normal"),c({},"".concat(a.prefixCls,"-node-selected"),!w&&(N||A))),onMouseEnter:ae,onMouseLeave:q,onContextMenu:re,onClick:fe,onDoubleClick:ve},_e,L.createElement("span",{className:"".concat(a.prefixCls,"-title")},Me),$)},[a.prefixCls,a.showIcon,r,a.icon,Ke,a.titleRender,m,pe,ae,q,re,fe,ve]),X=tt(O,{aria:!0,data:!0}),me=H(a.keyEntities,d)||{},ie=me.level,De=p[p.length-1],de=!w&&j,le=a.draggingNodeKey===d,se=E!==void 0?{"aria-selected":!!E}:void 0;return L.createElement("div",ce({ref:b,role:"treeitem","aria-expanded":l?void 0:g,className:Y(v,"".concat(a.prefixCls,"-treenode"),(e={},c(c(c(c(c(c(c(c(c(c(e,"".concat(a.prefixCls,"-treenode-disabled"),w),"".concat(a.prefixCls,"-treenode-switcher-").concat(g?"open":"close"),!l),"".concat(a.prefixCls,"-treenode-checkbox-checked"),k),"".concat(a.prefixCls,"-treenode-checkbox-indeterminate"),s),"".concat(a.prefixCls,"-treenode-selected"),N),"".concat(a.prefixCls,"-treenode-loading"),u),"".concat(a.prefixCls,"-treenode-active"),h),"".concat(a.prefixCls,"-treenode-leaf-last"),De),"".concat(a.prefixCls,"-treenode-draggable"),j),"dragging",le),c(c(c(c(c(c(c(e,"drop-target",a.dropTargetKey===d),"drop-container",a.dropContainerKey===d),"drag-over",!w&&t),"drag-over-gap-top",!w&&o),"drag-over-gap-bottom",!w&&n),"filter-node",(y=a.filterTreeNode)===null||y===void 0?void 0:y.call(a,U(r))),"".concat(a.prefixCls,"-treenode-leaf"),z))),style:C,draggable:de,onDragStart:de?ge:void 0,onDragEnter:j?Ce:void 0,onDragOver:j?J:void 0,onDragLeave:j?xe:void 0,onDrop:j?Q:void 0,onDragEnd:j?ye:void 0,onMouseMove:S},se,X),L.createElement(pt,{prefixCls:a.prefixCls,level:ie,isStart:f,isEnd:p}),Re,Oe(),be,G)};Le.isTreeNode=1;function Z(i,r){if(!i)return[];var y=i.slice(),e=y.indexOf(r);return e>=0&&y.splice(e,1),y}function ee(i,r){var y=(i||[]).slice();return y.indexOf(r)===-1&&y.push(r),y}function He(i){return i.split("-")}function Nt(i,r){var y=[],e=H(r,i);function d(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];v.forEach(function(C){var t=C.key,o=C.children;y.push(t),d(o)})}return d(e.children),y}function kt(i){if(i.parent){var r=He(i.pos);return Number(r[r.length-1])===i.parent.children.length-1}return!1}function Ct(i){var r=He(i.pos);return Number(r[r.length-1])===0}function Ve(i,r,y,e,d,v,C,t,o,n){var l,f=i.clientX,p=i.clientY,g=i.target.getBoundingClientRect(),N=g.top,k=g.height,s=(n==="rtl"?-1:1)*(((d==null?void 0:d.x)||0)-f),u=(s-12)/e,b=o.filter(function(W){var B;return(B=t[W])===null||B===void 0||(B=B.children)===null||B===void 0?void 0:B.length}),h=H(t,y.eventKey);if(p<N+k/2){var m=C.findIndex(function(W){return W.key===h.key}),S=m<=0?0:m-1,E=C[S].key;h=H(t,E)}var O=h.key,a=h,T=h.key,M=0,R=0;if(!b.includes(O))for(var I=0;I<u&&kt(h);I+=1)h=h.parent,R+=1;var A=r.data,_=h.node,w=!0;return Ct(h)&&h.level===0&&p<N+k/2&&v({dragNode:A,dropNode:_,dropPosition:-1})&&h.key===y.eventKey?M=-1:(a.children||[]).length&&b.includes(T)?v({dragNode:A,dropNode:_,dropPosition:0})?M=0:w=!1:R===0?u>-1.5?v({dragNode:A,dropNode:_,dropPosition:1})?M=1:w=!1:v({dragNode:A,dropNode:_,dropPosition:0})?M=0:v({dragNode:A,dropNode:_,dropPosition:1})?M=1:w=!1:v({dragNode:A,dropNode:_,dropPosition:1})?M=1:w=!1,{dropPosition:M,dropLevelOffset:R,dropTargetKey:h.key,dropTargetPos:h.pos,dragOverNodeKey:T,dropContainerKey:M===0?null:((l=h.parent)===null||l===void 0?void 0:l.key)||null,dropAllowed:w}}function Ye(i,r){if(i){var y=r.multiple;return y?i.slice():i.length?[i[0]]:i}}function Ae(i){if(!i)return null;var r;if(Array.isArray(i))r={checkedKeys:i,halfCheckedKeys:void 0};else if(nt(i)==="object")r={checkedKeys:i.checked||void 0,halfCheckedKeys:i.halfChecked||void 0};else return Se(!1,"`checkedKeys` is not an array or an object"),null;return r}function ze(i,r){var y=new Set;function e(d){if(!y.has(d)){var v=H(r,d);if(v){y.add(d);var C=v.parent,t=v.node;t.disabled||C&&e(C.key)}}}return(i||[]).forEach(function(d){e(d)}),Ue(y)}var xt=function(r){var y=r.dropPosition,e=r.dropLevelOffset,d=r.indent,v={pointerEvents:"none",position:"absolute",right:0,backgroundColor:"red",height:2};switch(y){case-1:v.top=0,v.left=-e*d;break;case 1:v.bottom=0,v.left=-e*d;break;case 0:v.bottom=0,v.left=d;break}return L.createElement("div",{style:v})};function rt(i){if(i==null)throw new TypeError("Cannot destructure "+i)}function Et(i,r){var y=x.useState(!1),e=te(y,2),d=e[0],v=e[1];we(function(){if(d)return i(),function(){r()}},[d]),we(function(){return v(!0),function(){v(!1)}},[])}var bt=["className","style","motion","motionNodes","motionType","onMotionStart","onMotionEnd","active","treeNodeRequiredProps"],Dt=x.forwardRef(function(i,r){var y=i.className,e=i.style,d=i.motion,v=i.motionNodes,C=i.motionType,t=i.onMotionStart,o=i.onMotionEnd,n=i.active,l=i.treeNodeRequiredProps,f=Be(i,bt),p=x.useState(!0),g=te(p,2),N=g[0],k=g[1],s=x.useContext(Fe),u=s.prefixCls,b=v&&C!=="hide";we(function(){v&&b!==N&&k(b)},[v]);var h=function(){v&&t()},m=x.useRef(!1),S=function(){v&&!m.current&&(m.current=!0,o())};Et(h,S);var E=function(a){b===a&&S()};return v?x.createElement(dt,ce({ref:r,visible:N},d,{motionAppear:C==="show",onVisibleChanged:E}),function(O,a){var T=O.className,M=O.style;return x.createElement("div",{ref:a,className:Y("".concat(u,"-treenode-motion"),T),style:M},v.map(function(R){var I=Object.assign({},(rt(R.data),R.data)),A=R.title,_=R.key,w=R.isStart,W=R.isEnd;delete I.children;var B=Pe(_,l);return x.createElement(Le,ce({},I,B,{title:A,active:n,data:R.data,key:_,isStart:w,isEnd:W}))}))}):x.createElement(Le,ce({domRef:r,className:y,style:e},f,{active:n}))});function St(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],y=i.length,e=r.length;if(Math.abs(y-e)!==1)return{add:!1,key:null};function d(v,C){var t=new Map;v.forEach(function(n){t.set(n,!0)});var o=C.filter(function(n){return!t.has(n)});return o.length===1?o[0]:null}return y<e?{add:!0,key:d(i,r)}:{add:!1,key:d(r,i)}}function Xe(i,r,y){var e=i.findIndex(function(t){return t.key===y}),d=i[e+1],v=r.findIndex(function(t){return t.key===y});if(d){var C=r.findIndex(function(t){return t.key===d.key});return r.slice(v+1,C)}return r.slice(v+1)}var Pt=["prefixCls","data","selectable","checkable","expandedKeys","selectedKeys","checkedKeys","loadedKeys","loadingKeys","halfCheckedKeys","keyEntities","disabled","dragging","dragOverNodeKey","dropPosition","motion","height","itemHeight","virtual","scrollWidth","focusable","activeItem","focused","tabIndex","onKeyDown","onFocus","onBlur","onActiveChange","onListChangeStart","onListChangeEnd"],Ze={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},Ot=function(){},ue="RC_TREE_MOTION_".concat(Math.random()),We={key:ue},ot={key:ue,level:0,index:0,pos:"0",node:We,nodes:[We]},Je={parent:null,children:[],pos:ot.pos,data:We,title:null,key:ue,isStart:[],isEnd:[]};function Qe(i,r,y,e){return r===!1||!y?i:i.slice(0,Math.ceil(y/e)+1)}function et(i){var r=i.key,y=i.pos;return at(r,y)}function Tt(i){for(var r=String(i.data.key),y=i;y.parent;)y=y.parent,r="".concat(y.data.key," > ").concat(r);return r}var Mt=x.forwardRef(function(i,r){var y=i.prefixCls,e=i.data;i.selectable,i.checkable;var d=i.expandedKeys,v=i.selectedKeys,C=i.checkedKeys,t=i.loadedKeys,o=i.loadingKeys,n=i.halfCheckedKeys,l=i.keyEntities,f=i.disabled,p=i.dragging,g=i.dragOverNodeKey,N=i.dropPosition,k=i.motion,s=i.height,u=i.itemHeight,b=i.virtual,h=i.scrollWidth,m=i.focusable,S=i.activeItem,E=i.focused,O=i.tabIndex,a=i.onKeyDown,T=i.onFocus,M=i.onBlur,R=i.onActiveChange,I=i.onListChangeStart,A=i.onListChangeEnd,_=Be(i,Pt),w=x.useRef(null),W=x.useRef(null);x.useImperativeHandle(r,function(){return{scrollTo:function(G){w.current.scrollTo(G)},getIndentWidth:function(){return W.current.offsetWidth}}});var B=x.useState(d),ne=te(B,2),ke=ne[0],fe=ne[1],ve=x.useState(e),ae=te(ve,2),q=ae[0],re=ae[1],j=x.useState(e),ge=te(j,2),Ce=ge[0],J=ge[1],xe=x.useState([]),ye=te(xe,2),Q=ye[0],oe=ye[1],Ee=x.useState(null),z=te(Ee,2),Re=z[0],he=z[1],Oe=x.useRef(e);Oe.current=e;function be(){var $=Oe.current;re($),J($),oe([]),he(null),A()}we(function(){fe(d);var $=St(ke,d);if($.key!==null)if($.add){var G=q.findIndex(function(le){var se=le.key;return se===$.key}),X=Qe(Xe(q,e,$.key),b,s,u),me=q.slice();me.splice(G+1,0,Je),J(me),oe(X),he("show")}else{var ie=e.findIndex(function(le){var se=le.key;return se===$.key}),De=Qe(Xe(e,q,$.key),b,s,u),de=e.slice();de.splice(ie+1,0,Je),J(de),oe(De),he("hide")}else q!==e&&(re(e),J(e))},[d,e]),x.useEffect(function(){p||be()},[p]);var pe=k?Ce:e,Ke={expandedKeys:d,selectedKeys:v,loadedKeys:t,loadingKeys:o,checkedKeys:C,halfCheckedKeys:n,dragOverNodeKey:g,dropPosition:N,keyEntities:l};return x.createElement(x.Fragment,null,E&&S&&x.createElement("span",{style:Ze,"aria-live":"assertive"},Tt(S)),x.createElement("div",null,x.createElement("input",{style:Ze,disabled:m===!1||f,tabIndex:m!==!1?O:null,onKeyDown:a,onFocus:T,onBlur:M,value:"",onChange:Ot,"aria-label":"for screen reader"})),x.createElement("div",{className:"".concat(y,"-treenode"),"aria-hidden":!0,style:{position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden",border:0,padding:0}},x.createElement("div",{className:"".concat(y,"-indent")},x.createElement("div",{ref:W,className:"".concat(y,"-indent-unit")}))),x.createElement(ft,ce({},_,{data:pe,itemKey:et,height:s,fullHeight:!1,virtual:b,itemHeight:u,scrollWidth:h,prefixCls:"".concat(y,"-list"),ref:w,role:"tree",onVisibleChange:function(G){G.every(function(X){return et(X)!==ue})&&be()}}),function($){var G=$.pos,X=Object.assign({},(rt($.data),$.data)),me=$.title,ie=$.key,De=$.isStart,de=$.isEnd,le=at(ie,G);delete X.key,delete X.children;var se=Pe(le,Ke);return x.createElement(Dt,ce({},X,se,{title:me,active:!!S&&ie===S.key,pos:G,data:$.data,isStart:De,isEnd:de,motion:k,motionNodes:ie===ue?Q:null,motionType:Re,onMotionStart:I,onMotionEnd:be,treeNodeRequiredProps:Ke,onMouseMove:function(){R(null)}}))}))}),wt=10,it=function(i){lt(y,i);var r=st(y);function y(){var e;ct(this,y);for(var d=arguments.length,v=new Array(d),C=0;C<d;C++)v[C]=arguments[C];return e=r.call.apply(r,[this].concat(v)),c(D(e),"destroyed",!1),c(D(e),"delayedDragEnterLogic",void 0),c(D(e),"loadingRetryTimes",{}),c(D(e),"state",{keyEntities:{},indent:null,selectedKeys:[],checkedKeys:[],halfCheckedKeys:[],loadedKeys:[],loadingKeys:[],expandedKeys:[],draggingNodeKey:null,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null,treeData:[],flattenNodes:[],focused:!1,activeKey:null,listChanging:!1,prevProps:null,fieldNames:je()}),c(D(e),"dragStartMousePosition",null),c(D(e),"dragNodeProps",null),c(D(e),"currentMouseOverDroppableNodeKey",null),c(D(e),"listRef",x.createRef()),c(D(e),"onNodeDragStart",function(t,o){var n=e.state,l=n.expandedKeys,f=n.keyEntities,p=e.props.onDragStart,g=o.eventKey;e.dragNodeProps=o,e.dragStartMousePosition={x:t.clientX,y:t.clientY};var N=Z(l,g);e.setState({draggingNodeKey:g,dragChildrenKeys:Nt(g,f),indent:e.listRef.current.getIndentWidth()}),e.setExpandedKeys(N),window.addEventListener("dragend",e.onWindowDragEnd),p==null||p({event:t,node:U(o)})}),c(D(e),"onNodeDragEnter",function(t,o){var n=e.state,l=n.expandedKeys,f=n.keyEntities,p=n.dragChildrenKeys,g=n.flattenNodes,N=n.indent,k=e.props,s=k.onDragEnter,u=k.onExpand,b=k.allowDrop,h=k.direction,m=o.pos,S=o.eventKey;if(e.currentMouseOverDroppableNodeKey!==S&&(e.currentMouseOverDroppableNodeKey=S),!e.dragNodeProps){e.resetDragState();return}var E=Ve(t,e.dragNodeProps,o,N,e.dragStartMousePosition,b,g,f,l,h),O=E.dropPosition,a=E.dropLevelOffset,T=E.dropTargetKey,M=E.dropContainerKey,R=E.dropTargetPos,I=E.dropAllowed,A=E.dragOverNodeKey;if(p.includes(T)||!I){e.resetDragState();return}if(e.delayedDragEnterLogic||(e.delayedDragEnterLogic={}),Object.keys(e.delayedDragEnterLogic).forEach(function(_){clearTimeout(e.delayedDragEnterLogic[_])}),e.dragNodeProps.eventKey!==o.eventKey&&(t.persist(),e.delayedDragEnterLogic[m]=window.setTimeout(function(){if(e.state.draggingNodeKey!==null){var _=Ue(l),w=H(f,o.eventKey);w&&(w.children||[]).length&&(_=ee(l,o.eventKey)),e.props.hasOwnProperty("expandedKeys")||e.setExpandedKeys(_),u==null||u(_,{node:U(o),expanded:!0,nativeEvent:t.nativeEvent})}},800)),e.dragNodeProps.eventKey===T&&a===0){e.resetDragState();return}e.setState({dragOverNodeKey:A,dropPosition:O,dropLevelOffset:a,dropTargetKey:T,dropContainerKey:M,dropTargetPos:R,dropAllowed:I}),s==null||s({event:t,node:U(o),expandedKeys:l})}),c(D(e),"onNodeDragOver",function(t,o){var n=e.state,l=n.dragChildrenKeys,f=n.flattenNodes,p=n.keyEntities,g=n.expandedKeys,N=n.indent,k=e.props,s=k.onDragOver,u=k.allowDrop,b=k.direction;if(e.dragNodeProps){var h=Ve(t,e.dragNodeProps,o,N,e.dragStartMousePosition,u,f,p,g,b),m=h.dropPosition,S=h.dropLevelOffset,E=h.dropTargetKey,O=h.dropContainerKey,a=h.dropTargetPos,T=h.dropAllowed,M=h.dragOverNodeKey;l.includes(E)||!T||(e.dragNodeProps.eventKey===E&&S===0?e.state.dropPosition===null&&e.state.dropLevelOffset===null&&e.state.dropTargetKey===null&&e.state.dropContainerKey===null&&e.state.dropTargetPos===null&&e.state.dropAllowed===!1&&e.state.dragOverNodeKey===null||e.resetDragState():m===e.state.dropPosition&&S===e.state.dropLevelOffset&&E===e.state.dropTargetKey&&O===e.state.dropContainerKey&&a===e.state.dropTargetPos&&T===e.state.dropAllowed&&M===e.state.dragOverNodeKey||e.setState({dropPosition:m,dropLevelOffset:S,dropTargetKey:E,dropContainerKey:O,dropTargetPos:a,dropAllowed:T,dragOverNodeKey:M}),s==null||s({event:t,node:U(o)}))}}),c(D(e),"onNodeDragLeave",function(t,o){e.currentMouseOverDroppableNodeKey===o.eventKey&&!t.currentTarget.contains(t.relatedTarget)&&(e.resetDragState(),e.currentMouseOverDroppableNodeKey=null);var n=e.props.onDragLeave;n==null||n({event:t,node:U(o)})}),c(D(e),"onWindowDragEnd",function(t){e.onNodeDragEnd(t,null,!0),window.removeEventListener("dragend",e.onWindowDragEnd)}),c(D(e),"onNodeDragEnd",function(t,o){var n=e.props.onDragEnd;e.setState({dragOverNodeKey:null}),e.cleanDragState(),n==null||n({event:t,node:U(o)}),e.dragNodeProps=null,window.removeEventListener("dragend",e.onWindowDragEnd)}),c(D(e),"onNodeDrop",function(t,o){var n,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,f=e.state,p=f.dragChildrenKeys,g=f.dropPosition,N=f.dropTargetKey,k=f.dropTargetPos,s=f.dropAllowed;if(s){var u=e.props.onDrop;if(e.setState({dragOverNodeKey:null}),e.cleanDragState(),N!==null){var b=F(F({},Pe(N,e.getTreeNodeRequiredProps())),{},{active:((n=e.getActiveItem())===null||n===void 0?void 0:n.key)===N,data:H(e.state.keyEntities,N).node}),h=p.includes(N);Se(!h,"Can not drop to dragNode's children node. This is a bug of rc-tree. Please report an issue.");var m=He(k),S={event:t,node:U(b),dragNode:e.dragNodeProps?U(e.dragNodeProps):null,dragNodesKeys:[e.dragNodeProps.eventKey].concat(p),dropToGap:g!==0,dropPosition:g+Number(m[m.length-1])};l||u==null||u(S),e.dragNodeProps=null}}}),c(D(e),"cleanDragState",function(){var t=e.state.draggingNodeKey;t!==null&&e.setState({draggingNodeKey:null,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null}),e.dragStartMousePosition=null,e.currentMouseOverDroppableNodeKey=null}),c(D(e),"triggerExpandActionExpand",function(t,o){var n=e.state,l=n.expandedKeys,f=n.flattenNodes,p=o.expanded,g=o.key,N=o.isLeaf;if(!(N||t.shiftKey||t.metaKey||t.ctrlKey)){var k=f.filter(function(u){return u.key===g})[0],s=U(F(F({},Pe(g,e.getTreeNodeRequiredProps())),{},{data:k.data}));e.setExpandedKeys(p?Z(l,g):ee(l,g)),e.onNodeExpand(t,s)}}),c(D(e),"onNodeClick",function(t,o){var n=e.props,l=n.onClick,f=n.expandAction;f==="click"&&e.triggerExpandActionExpand(t,o),l==null||l(t,o)}),c(D(e),"onNodeDoubleClick",function(t,o){var n=e.props,l=n.onDoubleClick,f=n.expandAction;f==="doubleClick"&&e.triggerExpandActionExpand(t,o),l==null||l(t,o)}),c(D(e),"onNodeSelect",function(t,o){var n=e.state.selectedKeys,l=e.state,f=l.keyEntities,p=l.fieldNames,g=e.props,N=g.onSelect,k=g.multiple,s=o.selected,u=o[p.key],b=!s;b?k?n=ee(n,u):n=[u]:n=Z(n,u);var h=n.map(function(m){var S=H(f,m);return S?S.node:null}).filter(Boolean);e.setUncontrolledState({selectedKeys:n}),N==null||N(n,{event:"select",selected:b,node:o,selectedNodes:h,nativeEvent:t.nativeEvent})}),c(D(e),"onNodeCheck",function(t,o,n){var l=e.state,f=l.keyEntities,p=l.checkedKeys,g=l.halfCheckedKeys,N=e.props,k=N.checkStrictly,s=N.onCheck,u=o.key,b,h={event:"check",node:o,checked:n,nativeEvent:t.nativeEvent};if(k){var m=n?ee(p,u):Z(p,u),S=Z(g,u);b={checked:m,halfChecked:S},h.checkedNodes=m.map(function(R){return H(f,R)}).filter(Boolean).map(function(R){return R.node}),e.setUncontrolledState({checkedKeys:m})}else{var E=Ie([].concat(Ue(p),[u]),!0,f),O=E.checkedKeys,a=E.halfCheckedKeys;if(!n){var T=new Set(O);T.delete(u);var M=Ie(Array.from(T),{checked:!1,halfCheckedKeys:a},f);O=M.checkedKeys,a=M.halfCheckedKeys}b=O,h.checkedNodes=[],h.checkedNodesPositions=[],h.halfCheckedKeys=a,O.forEach(function(R){var I=H(f,R);if(I){var A=I.node,_=I.pos;h.checkedNodes.push(A),h.checkedNodesPositions.push({node:A,pos:_})}}),e.setUncontrolledState({checkedKeys:O},!1,{halfCheckedKeys:a})}s==null||s(b,h)}),c(D(e),"onNodeLoad",function(t){var o,n=t.key,l=e.state.keyEntities,f=H(l,n);if(!(f!=null&&(o=f.children)!==null&&o!==void 0&&o.length)){var p=new Promise(function(g,N){e.setState(function(k){var s=k.loadedKeys,u=s===void 0?[]:s,b=k.loadingKeys,h=b===void 0?[]:b,m=e.props,S=m.loadData,E=m.onLoad;if(!S||u.includes(n)||h.includes(n))return null;var O=S(t);return O.then(function(){var a=e.state.loadedKeys,T=ee(a,n);E==null||E(T,{event:"load",node:t}),e.setUncontrolledState({loadedKeys:T}),e.setState(function(M){return{loadingKeys:Z(M.loadingKeys,n)}}),g()}).catch(function(a){if(e.setState(function(M){return{loadingKeys:Z(M.loadingKeys,n)}}),e.loadingRetryTimes[n]=(e.loadingRetryTimes[n]||0)+1,e.loadingRetryTimes[n]>=wt){var T=e.state.loadedKeys;Se(!1,"Retry for `loadData` many times but still failed. No more retry."),e.setUncontrolledState({loadedKeys:ee(T,n)}),g()}N(a)}),{loadingKeys:ee(h,n)}})});return p.catch(function(){}),p}}),c(D(e),"onNodeMouseEnter",function(t,o){var n=e.props.onMouseEnter;n==null||n({event:t,node:o})}),c(D(e),"onNodeMouseLeave",function(t,o){var n=e.props.onMouseLeave;n==null||n({event:t,node:o})}),c(D(e),"onNodeContextMenu",function(t,o){var n=e.props.onRightClick;n&&(t.preventDefault(),n({event:t,node:o}))}),c(D(e),"onFocus",function(){var t=e.props.onFocus;e.setState({focused:!0});for(var o=arguments.length,n=new Array(o),l=0;l<o;l++)n[l]=arguments[l];t==null||t.apply(void 0,n)}),c(D(e),"onBlur",function(){var t=e.props.onBlur;e.setState({focused:!1}),e.onActiveChange(null);for(var o=arguments.length,n=new Array(o),l=0;l<o;l++)n[l]=arguments[l];t==null||t.apply(void 0,n)}),c(D(e),"getTreeNodeRequiredProps",function(){var t=e.state,o=t.expandedKeys,n=t.selectedKeys,l=t.loadedKeys,f=t.loadingKeys,p=t.checkedKeys,g=t.halfCheckedKeys,N=t.dragOverNodeKey,k=t.dropPosition,s=t.keyEntities;return{expandedKeys:o||[],selectedKeys:n||[],loadedKeys:l||[],loadingKeys:f||[],checkedKeys:p||[],halfCheckedKeys:g||[],dragOverNodeKey:N,dropPosition:k,keyEntities:s}}),c(D(e),"setExpandedKeys",function(t){var o=e.state,n=o.treeData,l=o.fieldNames,f=$e(n,t,l);e.setUncontrolledState({expandedKeys:t,flattenNodes:f},!0)}),c(D(e),"onNodeExpand",function(t,o){var n=e.state.expandedKeys,l=e.state,f=l.listChanging,p=l.fieldNames,g=e.props,N=g.onExpand,k=g.loadData,s=o.expanded,u=o[p.key];if(!f){var b=n.includes(u),h=!s;if(Se(s&&b||!s&&!b,"Expand state not sync with index check"),n=h?ee(n,u):Z(n,u),e.setExpandedKeys(n),N==null||N(n,{node:o,expanded:h,nativeEvent:t.nativeEvent}),h&&k){var m=e.onNodeLoad(o);m&&m.then(function(){var S=$e(e.state.treeData,n,p);e.setUncontrolledState({flattenNodes:S})}).catch(function(){var S=e.state.expandedKeys,E=Z(S,u);e.setExpandedKeys(E)})}}}),c(D(e),"onListChangeStart",function(){e.setUncontrolledState({listChanging:!0})}),c(D(e),"onListChangeEnd",function(){setTimeout(function(){e.setUncontrolledState({listChanging:!1})})}),c(D(e),"onActiveChange",function(t){var o=e.state.activeKey,n=e.props,l=n.onActiveChange,f=n.itemScrollOffset,p=f===void 0?0:f;o!==t&&(e.setState({activeKey:t}),t!==null&&e.scrollTo({key:t,offset:p}),l==null||l(t))}),c(D(e),"getActiveItem",function(){var t=e.state,o=t.activeKey,n=t.flattenNodes;return o===null?null:n.find(function(l){var f=l.key;return f===o})||null}),c(D(e),"offsetActiveKey",function(t){var o=e.state,n=o.flattenNodes,l=o.activeKey,f=n.findIndex(function(N){var k=N.key;return k===l});f===-1&&t<0&&(f=n.length),f=(f+t+n.length)%n.length;var p=n[f];if(p){var g=p.key;e.onActiveChange(g)}else e.onActiveChange(null)}),c(D(e),"onKeyDown",function(t){var o=e.state,n=o.activeKey,l=o.expandedKeys,f=o.checkedKeys,p=o.fieldNames,g=e.props,N=g.onKeyDown,k=g.checkable,s=g.selectable;switch(t.which){case Ne.UP:{e.offsetActiveKey(-1),t.preventDefault();break}case Ne.DOWN:{e.offsetActiveKey(1),t.preventDefault();break}}var u=e.getActiveItem();if(u&&u.data){var b=e.getTreeNodeRequiredProps(),h=u.data.isLeaf===!1||!!(u.data[p.children]||[]).length,m=U(F(F({},Pe(n,b)),{},{data:u.data,active:!0}));switch(t.which){case Ne.LEFT:{h&&l.includes(n)?e.onNodeExpand({},m):u.parent&&e.onActiveChange(u.parent.key),t.preventDefault();break}case Ne.RIGHT:{h&&!l.includes(n)?e.onNodeExpand({},m):u.children&&u.children.length&&e.onActiveChange(u.children[0].key),t.preventDefault();break}case Ne.ENTER:case Ne.SPACE:{k&&!m.disabled&&m.checkable!==!1&&!m.disableCheckbox?e.onNodeCheck({},m,!f.includes(n)):!k&&s&&!m.disabled&&m.selectable!==!1&&e.onNodeSelect({},m);break}}}N==null||N(t)}),c(D(e),"setUncontrolledState",function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!e.destroyed){var l=!1,f=!0,p={};Object.keys(t).forEach(function(g){if(e.props.hasOwnProperty(g)){f=!1;return}l=!0,p[g]=t[g]}),l&&(!o||f)&&e.setState(F(F({},p),n))}}),c(D(e),"scrollTo",function(t){e.listRef.current.scrollTo(t)}),e}return ut(y,[{key:"componentDidMount",value:function(){this.destroyed=!1,this.onUpdated()}},{key:"componentDidUpdate",value:function(){this.onUpdated()}},{key:"onUpdated",value:function(){var d=this.props,v=d.activeKey,C=d.itemScrollOffset,t=C===void 0?0:C;v!==void 0&&v!==this.state.activeKey&&(this.setState({activeKey:v}),v!==null&&this.scrollTo({key:v,offset:t}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("dragend",this.onWindowDragEnd),this.destroyed=!0}},{key:"resetDragState",value:function(){this.setState({dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})}},{key:"render",value:function(){var d=this.state,v=d.focused,C=d.flattenNodes,t=d.keyEntities,o=d.draggingNodeKey,n=d.activeKey,l=d.dropLevelOffset,f=d.dropContainerKey,p=d.dropTargetKey,g=d.dropPosition,N=d.dragOverNodeKey,k=d.indent,s=this.props,u=s.prefixCls,b=s.className,h=s.style,m=s.showLine,S=s.focusable,E=s.tabIndex,O=E===void 0?0:E,a=s.selectable,T=s.showIcon,M=s.icon,R=s.switcherIcon,I=s.draggable,A=s.checkable,_=s.checkStrictly,w=s.disabled,W=s.motion,B=s.loadData,ne=s.filterTreeNode,ke=s.height,fe=s.itemHeight,ve=s.scrollWidth,ae=s.virtual,q=s.titleRender,re=s.dropIndicatorRender,j=s.onContextMenu,ge=s.onScroll,Ce=s.direction,J=s.rootClassName,xe=s.rootStyle,ye=tt(this.props,{aria:!0,data:!0}),Q;I&&(nt(I)==="object"?Q=I:typeof I=="function"?Q={nodeDraggable:I}:Q={});var oe={prefixCls:u,selectable:a,showIcon:T,icon:M,switcherIcon:R,draggable:Q,draggingNodeKey:o,checkable:A,checkStrictly:_,disabled:w,keyEntities:t,dropLevelOffset:l,dropContainerKey:f,dropTargetKey:p,dropPosition:g,dragOverNodeKey:N,indent:k,direction:Ce,dropIndicatorRender:re,loadData:B,filterTreeNode:ne,titleRender:q,onNodeClick:this.onNodeClick,onNodeDoubleClick:this.onNodeDoubleClick,onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,onNodeLoad:this.onNodeLoad,onNodeMouseEnter:this.onNodeMouseEnter,onNodeMouseLeave:this.onNodeMouseLeave,onNodeContextMenu:this.onNodeContextMenu,onNodeDragStart:this.onNodeDragStart,onNodeDragEnter:this.onNodeDragEnter,onNodeDragOver:this.onNodeDragOver,onNodeDragLeave:this.onNodeDragLeave,onNodeDragEnd:this.onNodeDragEnd,onNodeDrop:this.onNodeDrop};return x.createElement(Fe.Provider,{value:oe},x.createElement("div",{className:Y(u,b,J,c(c(c({},"".concat(u,"-show-line"),m),"".concat(u,"-focused"),v),"".concat(u,"-active-focused"),n!==null)),style:xe},x.createElement(Mt,ce({ref:this.listRef,prefixCls:u,style:h,data:C,disabled:w,selectable:a,checkable:!!A,motion:W,dragging:o!==null,height:ke,itemHeight:fe,virtual:ae,focusable:S,focused:v,tabIndex:O,activeItem:this.getActiveItem(),onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onActiveChange:this.onActiveChange,onListChangeStart:this.onListChangeStart,onListChangeEnd:this.onListChangeEnd,onContextMenu:j,onScroll:ge,scrollWidth:ve},this.getTreeNodeRequiredProps(),ye))))}}],[{key:"getDerivedStateFromProps",value:function(d,v){var C=v.prevProps,t={prevProps:d};function o(O){return!C&&d.hasOwnProperty(O)||C&&C[O]!==d[O]}var n,l=v.fieldNames;if(o("fieldNames")&&(l=je(d.fieldNames),t.fieldNames=l),o("treeData")?n=d.treeData:o("children")&&(Se(!1,"`children` of Tree is deprecated. Please use `treeData` instead."),n=vt(d.children)),n){t.treeData=n;var f=gt(n,{fieldNames:l});t.keyEntities=F(c({},ue,ot),f.keyEntities)}var p=t.keyEntities||v.keyEntities;if(o("expandedKeys")||C&&o("autoExpandParent"))t.expandedKeys=d.autoExpandParent||!C&&d.defaultExpandParent?ze(d.expandedKeys,p):d.expandedKeys;else if(!C&&d.defaultExpandAll){var g=F({},p);delete g[ue];var N=[];Object.keys(g).forEach(function(O){var a=g[O];a.children&&a.children.length&&N.push(a.key)}),t.expandedKeys=N}else!C&&d.defaultExpandedKeys&&(t.expandedKeys=d.autoExpandParent||d.defaultExpandParent?ze(d.defaultExpandedKeys,p):d.defaultExpandedKeys);if(t.expandedKeys||delete t.expandedKeys,n||t.expandedKeys){var k=$e(n||v.treeData,t.expandedKeys||v.expandedKeys,l);t.flattenNodes=k}if(d.selectable&&(o("selectedKeys")?t.selectedKeys=Ye(d.selectedKeys,d):!C&&d.defaultSelectedKeys&&(t.selectedKeys=Ye(d.defaultSelectedKeys,d))),d.checkable){var s;if(o("checkedKeys")?s=Ae(d.checkedKeys)||{}:!C&&d.defaultCheckedKeys?s=Ae(d.defaultCheckedKeys)||{}:n&&(s=Ae(d.checkedKeys)||{checkedKeys:v.checkedKeys,halfCheckedKeys:v.halfCheckedKeys}),s){var u=s,b=u.checkedKeys,h=b===void 0?[]:b,m=u.halfCheckedKeys,S=m===void 0?[]:m;if(!d.checkStrictly){var E=Ie(h,!0,p);h=E.checkedKeys,S=E.halfCheckedKeys}t.checkedKeys=h,t.halfCheckedKeys=S}}return o("loadedKeys")&&(t.loadedKeys=d.loadedKeys),t}}]),y}(x.Component);c(it,"defaultProps",{prefixCls:"rc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:xt,allowDrop:function(){return!0},expandAction:!1});c(it,"TreeNode",Le);export{it as T,yt as U,rt as _,Le as a,Z as b,ze as c,ee as d};
//# sourceMappingURL=Tree-0072d5c0.js.map
