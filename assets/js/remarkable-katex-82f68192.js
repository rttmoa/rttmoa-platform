import{a as A}from"./@ant-design-63539318.js";import{r as v}from"./katex-18ede783.js";const M=(h,p)=>{const u="\\",m="$",i=(p||{}).delimiter||m;if(i.length!==1)throw new Error("invalid delimiter");const x=v(),b=(r,n)=>x.renderToString(r,{displayMode:n,throwOnError:!1}),d=(r,n,k)=>{let a=!1,e=r.bMarks[n]+r.tShift[n],c=r.eMarks[n];if(e+1>c)return!1;const f=r.src.charAt(e);if(f!==i)return!1;let o=e;e=r.skipChars(e,f);let t=e-o;if(t!==2)return!1;let l=n;for(;++l,!(l>=k||(e=o=r.bMarks[l]+r.tShift[l],c=r.eMarks[l],e<c&&r.tShift[l]<r.blkIndent));)if(r.src.charAt(e)===i&&!(r.tShift[l]-r.blkIndent>=4)&&(e=r.skipChars(e,f),!(e-o<t)&&(e=r.skipSpaces(e),!(e<c)))){a=!0;break}t=r.tShift[n],r.line=l+(a?1:0);const s=r.getLines(n+1,l,t,!0).replace(/[ \n]+/g," ").trim();return r.tokens.push({type:"katex",params:null,content:s,lines:[n,r.line],level:r.level,block:!0}),!0},g=(r,n)=>{const k=r.pos,a=r.posMax;let e=k;if(r.src.charAt(e)!==i)return!1;for(++e;e<a&&r.src.charAt(e)===i;)++e;const c=r.src.slice(k,e);if(c.length>2)return!1;const f=e;let o=0;for(;e<a;){const t=r.src.charAt(e);if(t==="{"&&(e==0||r.src.charAt(e-1)!=u))o+=1;else if(t==="}"&&(e==0||r.src.charAt(e-1)!=u)){if(o-=1,o<0)return!1}else if(t===i&&o===0){const l=e;let s=e+1;for(;s<a&&r.src.charAt(s)===i;)++s;if(s-l===c.length){if(!n){const S=r.src.slice(f,l).replace(/[ \n]+/g," ").trim();r.push({type:"katex",content:S,block:c.length>1,level:r.level})}return r.pos=s,!0}}e+=1}return n||(r.pending+=c),r.pos+=c.length,!0};h.inline.ruler.push("katex",g,p),h.block.ruler.push("katex",d,p),h.renderer.rules.katex=(r,n)=>b(r[n].content,r[n].block),h.renderer.rules.katex.delimiter=i};var w=M;const C=A(w);export{C as r};
