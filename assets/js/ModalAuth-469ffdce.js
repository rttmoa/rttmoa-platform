import{aw as d,r as e,j as s,a9 as b,aj as F}from"./index-f751f953.js";import{r as O}from"./roleManage-3e83cde6.js";import{T as k}from"./index-a443db60.js";import"./useMultipleSelect-e72ee447.js";import"./Pagination-3b2f15f4.js";import"./zh_CN-f51ae7db.js";import"./index-d5c7de5c.js";import"./Select-8ced64f0.js";import"./List-f96a4af3.js";import"./useShowArrow-041c890e.js";import"./useIcons-2d7ebba2.js";import"./index-ebc51cb7.js";import"./index-72ce5474.js";import"./index-faeef1e6.js";import"./useBubbleLock-76e3efc3.js";const J=f=>{const{modalIsOpenAuth:n,setModalIsOpenAuth:l}=f,[a]=d.useForm(),p=e.useRef(),[h,i]=e.useState([]),[r,o]=e.useState([]),[x,u]=e.useState(null),[I,m]=e.useState({});e.useEffect(()=>{n?S():(i([]),o([]),m({}),u(!1))},[n]);let t={authorize_time:"91919950866",authorize_user_name:"汤杰",create_time:"1678994140970",id:2,key:2,menus:"/home/index",role_name:"前端开发",status:2};const S=async()=>{const c=await O(t.id),C=[],_=[];if(c.data.length>0){const w=c.data;for(let j=0;j<w.length;j++){const g=w[j],y={key:g.user_id,title:g.user_name,status:g.status};y.status===1&&_.push(y.key),C.push(y)}}i(C),o(_),m(t),u(!1)},A=()=>{t.id,a.resetFields(),l(!1)};return s.jsx(b,{title:"用户授权",width:800,open:n,onOk:A,onCancel:()=>{a.resetFields(),l(!1)},children:s.jsx(D,{form:a,isClose:x,detailUserInfo:I,targetKeys:r,transferData:h,patchUserInfo:c=>{o(c)},ref:p})})};function D({form:f,isClose:n,detailUserInfo:l,targetKeys:a,transferData:p,patchUserInfo:h,ref:i}){const[r,o]=e.useState(11),x=()=>(o(r+1),r);e.useImperativeHandle(i,()=>({status:r,statusValue:x}));const u=(t,S)=>S.title.indexOf(t)>-1,I=t=>{h(t)},m={labelCol:{span:5},wrapperCol:{span:18}};return s.jsxs(d,{form:f,layout:"horizontal",...m,initialValues:{transfer:a},children:[s.jsx(d.Item,{name:"role_name3",label:"角色名称",children:s.jsx(F,{disabled:!0,maxLength:8,placeholder:l.role_name})}),s.jsx(d.Item,{name:"transfer",label:"选择用户：",children:s.jsx(k,{listStyle:{width:200,height:400},dataSource:p,showSearch:!0,titles:["待选用户","已选用户"],filterOption:u,targetKeys:a,onChange:I,render:t=>t.title})})]})}export{J as default};
//# sourceMappingURL=ModalAuth-469ffdce.js.map
