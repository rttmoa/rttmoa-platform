import{r as t,t as F,p as N,d5 as ot,q as lt,o as ze,n as H,aY as Fe,E as G,ca as Lt,cb as _t,d6 as Tt,aU as me,i as zt,cF as Qe,cR as et}from"./index-4a9fd3ee.js";var st=t.forwardRef(function(e,u){var o=e.height,l=e.offsetY,v=e.offsetX,g=e.children,f=e.prefixCls,s=e.onInnerResize,M=e.innerProps,d=e.rtl,R=e.extra,n={},m={display:"flex",flexDirection:"column"};return l!==void 0&&(n={height:o,position:"relative",overflow:"hidden"},m=F(F({},m),{},N(N(N(N(N({transform:"translateY(".concat(l,"px)")},d?"marginRight":"marginLeft",-v),"position","absolute"),"left",0),"right",0),"top",0))),t.createElement("div",{style:n},t.createElement(ot,{onResize:function(h){var c=h.offsetHeight;c&&s&&s()}},t.createElement("div",lt({style:m,className:ze(N({},"".concat(f,"-holder-inner"),f)),ref:u},M),g,R)))});st.displayName="Filler";function Dt(e){var u=e.children,o=e.setRef,l=t.useCallback(function(v){o(v)},[]);return t.cloneElement(u,{ref:l})}function Ct(e,u,o,l,v,g,f,s){var M=s.getKey;return e.slice(u,o+1).map(function(d,R){var n=u+R,m=f(d,n,{style:{width:l},offsetX:v}),i=M(d);return t.createElement(Dt,{key:i,setRef:function(c){return g(d,c)}},m)})}function Ht(e,u,o){var l=e.length,v=u.length,g,f;if(l===0&&v===0)return null;l<v?(g=e,f=u):(g=u,f=e);var s={__EMPTY_ITEM__:!0};function M(h){return h!==void 0?o(h):s}for(var d=null,R=Math.abs(l-v)!==1,n=0;n<f.length;n+=1){var m=M(g[n]),i=M(f[n]);if(m!==i){d=n,R=R||m!==M(f[n+1]);break}}return d===null?null:{index:d,multiple:R}}function Pt(e,u,o){var l=t.useState(e),v=H(l,2),g=v[0],f=v[1],s=t.useState(null),M=H(s,2),d=M[0],R=M[1];return t.useEffect(function(){var n=Ht(g||[],e||[],u);(n==null?void 0:n.index)!==void 0&&(o==null||o(n.index),R(e[n.index])),f(e)},[e]),[d]}var tt=(typeof navigator>"u"?"undefined":Fe(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const ct=function(e,u,o,l){var v=t.useRef(!1),g=t.useRef(null);function f(){clearTimeout(g.current),v.current=!0,g.current=setTimeout(function(){v.current=!1},50)}var s=t.useRef({top:e,bottom:u,left:o,right:l});return s.current.top=e,s.current.bottom=u,s.current.left=o,s.current.right=l,function(M,d){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=M?d<0&&s.current.left||d>0&&s.current.right:d<0&&s.current.top||d>0&&s.current.bottom;return R&&n?(clearTimeout(g.current),v.current=!1):(!n||v.current)&&f(),!v.current&&n}};function It(e,u,o,l,v,g,f){var s=t.useRef(0),M=t.useRef(null),d=t.useRef(null),R=t.useRef(!1),n=ct(u,o,l,v);function m(S,E){if(G.cancel(M.current),!n(!1,E)){var w=S;if(!w._virtualHandled)w._virtualHandled=!0;else return;s.current+=E,d.current=E,tt||w.preventDefault(),M.current=G(function(){var Y=R.current?10:1;f(s.current*Y,!1),s.current=0})}}function i(S,E){f(E,!0),tt||S.preventDefault()}var h=t.useRef(null),c=t.useRef(null);function b(S){if(e){G.cancel(c.current),c.current=G(function(){h.current=null},2);var E=S.deltaX,w=S.deltaY,Y=S.shiftKey,O=E,x=w;(h.current==="sx"||!h.current&&Y&&w&&!E)&&(O=w,x=0,h.current="sx");var X=Math.abs(O),D=Math.abs(x);h.current===null&&(h.current=g&&X>D?"x":"y"),h.current==="y"?m(S,x):i(S,O)}}function y(S){e&&(R.current=S.detail===d.current)}return[b,y]}function Nt(e,u,o,l){var v=t.useMemo(function(){return[new Map,[]]},[e,o.id,l]),g=H(v,2),f=g[0],s=g[1],M=function(R){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:R,m=f.get(R),i=f.get(n);if(m===void 0||i===void 0)for(var h=e.length,c=s.length;c<h;c+=1){var b,y=e[c],S=u(y);f.set(S,c);var E=(b=o.get(S))!==null&&b!==void 0?b:l;if(s[c]=(s[c-1]||0)+E,S===R&&(m=c),S===n&&(i=c),m!==void 0&&i!==void 0)break}return{top:s[m-1]||0,bottom:s[i]}};return M}var Ot=function(){function e(){_t(this,e),N(this,"maps",void 0),N(this,"id",0),N(this,"diffKeys",new Set),this.maps=Object.create(null)}return Lt(e,[{key:"set",value:function(o,l){this.maps[o]=l,this.id+=1,this.diffKeys.add(o)}},{key:"get",value:function(o){return this.maps[o]}},{key:"resetRecord",value:function(){this.diffKeys.clear()}},{key:"getRecord",value:function(){return this.diffKeys}}]),e}();function rt(e){var u=parseFloat(e);return isNaN(u)?0:u}function kt(e,u,o){var l=t.useState(0),v=H(l,2),g=v[0],f=v[1],s=t.useRef(new Map),M=t.useRef(new Ot),d=t.useRef(0);function R(){d.current+=1}function n(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;R();var h=function(){s.current.forEach(function(y,S){if(y&&y.offsetParent){var E=Tt(y),w=E.offsetHeight,Y=getComputedStyle(E),O=Y.marginTop,x=Y.marginBottom,X=rt(O),D=rt(x),W=w+X+D;M.current.get(S)!==W&&M.current.set(S,W)}}),f(function(y){return y+1})};if(i)h();else{d.current+=1;var c=d.current;Promise.resolve().then(function(){c===d.current&&h()})}}function m(i,h){var c=e(i),b=s.current.get(c);h?(s.current.set(c,h),n()):s.current.delete(c),!b!=!h&&(h?u==null||u(i):o==null||o(i))}return t.useEffect(function(){return R},[]),[m,n,M.current,g]}var nt=14/15;function $t(e,u,o){var l=t.useRef(!1),v=t.useRef(0),g=t.useRef(0),f=t.useRef(null),s=t.useRef(null),M,d=function(i){if(l.current){var h=Math.ceil(i.touches[0].pageX),c=Math.ceil(i.touches[0].pageY),b=v.current-h,y=g.current-c,S=Math.abs(b)>Math.abs(y);S?v.current=h:g.current=c;var E=o(S,S?b:y,!1,i);E&&i.preventDefault(),clearInterval(s.current),E&&(s.current=setInterval(function(){S?b*=nt:y*=nt;var w=Math.floor(S?b:y);(!o(S,w,!0)||Math.abs(w)<=.1)&&clearInterval(s.current)},16))}},R=function(){l.current=!1,M()},n=function(i){M(),i.touches.length===1&&!l.current&&(l.current=!0,v.current=Math.ceil(i.touches[0].pageX),g.current=Math.ceil(i.touches[0].pageY),f.current=i.target,f.current.addEventListener("touchmove",d,{passive:!1}),f.current.addEventListener("touchend",R,{passive:!0}))};M=function(){f.current&&(f.current.removeEventListener("touchmove",d),f.current.removeEventListener("touchend",R))},me(function(){return e&&u.current.addEventListener("touchstart",n,{passive:!0}),function(){var m;(m=u.current)===null||m===void 0||m.removeEventListener("touchstart",n),M(),clearInterval(s.current)}},[e])}function at(e){return Math.floor(Math.pow(e,.5))}function $e(e,u){var o="touches"in e?e.touches[0]:e;return o[u?"pageX":"pageY"]-window[u?"scrollX":"scrollY"]}function Ft(e,u,o){t.useEffect(function(){var l=u.current;if(e&&l){var v=!1,g,f,s=function(){G.cancel(g)},M=function m(){s(),g=G(function(){o(f),m()})},d=function(i){var h=i;h._virtualHandled||(h._virtualHandled=!0,v=!0)},R=function(){v=!1,s()},n=function(i){if(v){var h=$e(i,!1),c=l.getBoundingClientRect(),b=c.top,y=c.bottom;if(h<=b){var S=b-h;f=-at(S),M()}else if(h>=y){var E=h-y;f=at(E),M()}else s()}};return l.addEventListener("mousedown",d),l.ownerDocument.addEventListener("mouseup",R),l.ownerDocument.addEventListener("mousemove",n),function(){l.removeEventListener("mousedown",d),l.ownerDocument.removeEventListener("mouseup",R),l.ownerDocument.removeEventListener("mousemove",n),s()}}},[e])}var Yt=10;function Xt(e,u,o,l,v,g,f,s){var M=t.useRef(),d=t.useState(null),R=H(d,2),n=R[0],m=R[1];return me(function(){if(n&&n.times<Yt){if(!e.current){m(function(P){return F({},P)});return}g();var i=n.targetAlign,h=n.originAlign,c=n.index,b=n.offset,y=e.current.clientHeight,S=!1,E=i,w=null;if(y){for(var Y=i||h,O=0,x=0,X=0,D=Math.min(u.length-1,c),W=0;W<=D;W+=1){var j=v(u[W]);x=O;var ee=o.get(j);X=x+(ee===void 0?l:ee),O=X}for(var te=Y==="top"?b:y-b,C=D;C>=0;C-=1){var ne=v(u[C]),k=o.get(ne);if(k===void 0){S=!0;break}if(te-=k,te<=0)break}switch(Y){case"top":w=x-b;break;case"bottom":w=X-y+b;break;default:{var Z=e.current.scrollTop,B=Z+y;x<Z?E="top":X>B&&(E="bottom")}}w!==null&&f(w),w!==n.lastTop&&(S=!0)}S&&m(F(F({},n),{},{times:n.times+1,targetAlign:E,lastTop:w}))}},[n,e.current]),function(i){if(i==null){s();return}if(G.cancel(M.current),typeof i=="number")f(i);else if(i&&Fe(i)==="object"){var h,c=i.align;"index"in i?h=i.index:h=u.findIndex(function(S){return v(S)===i.key});var b=i.offset,y=b===void 0?0:b;m({times:0,index:h,offset:y,originAlign:c})}}}var it=t.forwardRef(function(e,u){var o=e.prefixCls,l=e.rtl,v=e.scrollOffset,g=e.scrollRange,f=e.onStartMove,s=e.onStopMove,M=e.onScroll,d=e.horizontal,R=e.spinSize,n=e.containerSize,m=e.style,i=e.thumbStyle,h=t.useState(!1),c=H(h,2),b=c[0],y=c[1],S=t.useState(null),E=H(S,2),w=E[0],Y=E[1],O=t.useState(null),x=H(O,2),X=x[0],D=x[1],W=!l,j=t.useRef(),ee=t.useRef(),te=t.useState(!1),C=H(te,2),ne=C[0],k=C[1],Z=t.useRef(),B=function(){clearTimeout(Z.current),k(!0),Z.current=setTimeout(function(){k(!1)},3e3)},P=g-n||0,le=n-R||0,T=t.useMemo(function(){if(v===0||P===0)return 0;var $=v/P;return $*le},[v,P,le]),J=function(L){L.stopPropagation(),L.preventDefault()},ae=t.useRef({top:T,dragging:b,pageY:w,startTop:X});ae.current={top:T,dragging:b,pageY:w,startTop:X};var ie=function(L){y(!0),Y($e(L,d)),D(ae.current.top),f(),L.stopPropagation(),L.preventDefault()};t.useEffect(function(){var $=function(ue){ue.preventDefault()},L=j.current,V=ee.current;return L.addEventListener("touchstart",$,{passive:!1}),V.addEventListener("touchstart",ie,{passive:!1}),function(){L.removeEventListener("touchstart",$),V.removeEventListener("touchstart",ie)}},[]);var Se=t.useRef();Se.current=P;var se=t.useRef();se.current=le,t.useEffect(function(){if(b){var $,L=function(ue){var ce=ae.current,pe=ce.dragging,Me=ce.pageY,be=ce.startTop;G.cancel($);var ye=j.current.getBoundingClientRect(),Q=n/(d?ye.width:ye.height);if(pe){var fe=($e(ue,d)-Me)*Q,ve=be;!W&&d?ve-=fe:ve+=fe;var Ee=Se.current,xe=se.current,De=xe?ve/xe:0,U=Math.ceil(De*Ee);U=Math.max(U,0),U=Math.min(U,Ee),$=G(function(){M(U,d)})}},V=function(){y(!1),s()};return window.addEventListener("mousemove",L,{passive:!0}),window.addEventListener("touchmove",L,{passive:!0}),window.addEventListener("mouseup",V,{passive:!0}),window.addEventListener("touchend",V,{passive:!0}),function(){window.removeEventListener("mousemove",L),window.removeEventListener("touchmove",L),window.removeEventListener("mouseup",V),window.removeEventListener("touchend",V),G.cancel($)}}},[b]),t.useEffect(function(){return B(),function(){clearTimeout(Z.current)}},[v]),t.useImperativeHandle(u,function(){return{delayHidden:B}});var I="".concat(o,"-scrollbar"),K={position:"absolute",visibility:ne?null:"hidden"},A={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return d?(K.height=8,K.left=0,K.right=0,K.bottom=0,A.height="100%",A.width=R,W?A.left=T:A.right=T):(K.width=8,K.top=0,K.bottom=0,W?K.right=0:K.left=0,A.width="100%",A.height=R,A.top=T),t.createElement("div",{ref:j,className:ze(I,N(N(N({},"".concat(I,"-horizontal"),d),"".concat(I,"-vertical"),!d),"".concat(I,"-visible"),ne)),style:F(F({},K),m),onMouseDown:J,onMouseMove:B},t.createElement("div",{ref:ee,className:ze("".concat(I,"-thumb"),N({},"".concat(I,"-thumb-moving"),b)),style:F(F({},A),i),onMouseDown:ie}))}),Wt=20;function ut(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=e/u*e;return isNaN(o)&&(o=0),o=Math.max(o,Wt),Math.floor(o)}var Bt=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles"],Kt=[],Vt={overflowY:"auto",overflowAnchor:"none"};function jt(e,u){var o=e.prefixCls,l=o===void 0?"rc-virtual-list":o,v=e.className,g=e.height,f=e.itemHeight,s=e.fullHeight,M=s===void 0?!0:s,d=e.style,R=e.data,n=e.children,m=e.itemKey,i=e.virtual,h=e.direction,c=e.scrollWidth,b=e.component,y=b===void 0?"div":b,S=e.onScroll,E=e.onVirtualScroll,w=e.onVisibleChange,Y=e.innerProps,O=e.extraRender,x=e.styles,X=zt(e,Bt),D=t.useCallback(function(a){return typeof m=="function"?m(a):a==null?void 0:a[m]},[m]),W=kt(D,null,null),j=H(W,4),ee=j[0],te=j[1],C=j[2],ne=j[3],k=!!(i!==!1&&g&&f),Z=t.useMemo(function(){return Object.values(C.maps).reduce(function(a,r){return a+r},0)},[C.id,C.maps]),B=k&&R&&(Math.max(f*R.length,Z)>g||!!c),P=h==="rtl",le=ze(l,N({},"".concat(l,"-rtl"),P),v),T=R||Kt,J=t.useRef(),ae=t.useRef(),ie=t.useRef(),Se=t.useState(0),se=H(Se,2),I=se[0],K=se[1],A=t.useState(0),$=H(A,2),L=$[0],V=$[1],Re=t.useState(!1),ue=H(Re,2),ce=ue[0],pe=ue[1],Me=function(){pe(!0)},be=function(){pe(!1)},ye={getKey:D};function Q(a){K(function(r){var p;typeof a=="function"?p=a(r):p=a;var _=mt(p);return J.current.scrollTop=_,_})}var fe=t.useRef({start:0,end:T.length}),ve=t.useRef(),Ee=Pt(T,D),xe=H(Ee,1),De=xe[0];ve.current=De;var U=t.useMemo(function(){if(!k)return{scrollHeight:void 0,start:0,end:T.length-1,offset:void 0};if(!B){var a;return{scrollHeight:((a=ae.current)===null||a===void 0?void 0:a.offsetHeight)||0,start:0,end:T.length-1,offset:void 0}}for(var r=0,p,_,z,Te=T.length,ge=0;ge<Te;ge+=1){var xt=T[ge],wt=D(xt),Je=C.get(wt),ke=r+(Je===void 0?f:Je);ke>=I&&p===void 0&&(p=ge,_=r),ke>I+g&&z===void 0&&(z=ge),r=ke}return p===void 0&&(p=0,_=0,z=Math.ceil(g/f)),z===void 0&&(z=T.length-1),z=Math.min(z+1,T.length-1),{scrollHeight:r,start:p,end:z,offset:_}},[B,k,I,T,ne,g]),re=U.scrollHeight,oe=U.start,de=U.end,Ye=U.offset;fe.current.start=oe,fe.current.end=de,t.useLayoutEffect(function(){var a=C.getRecord();if(a.size===1){var r=Array.from(a)[0],p=D(T[oe]);if(p===r){var _=C.get(r),z=_-f;Q(function(Te){return Te+z})}}C.resetRecord()},[re]);var ft=t.useState({width:0,height:g}),Xe=H(ft,2),q=Xe[0],vt=Xe[1],dt=function(r){vt({width:r.offsetWidth,height:r.offsetHeight})},We=t.useRef(),Be=t.useRef(),ht=t.useMemo(function(){return ut(q.width,c)},[q.width,c]),gt=t.useMemo(function(){return ut(q.height,re)},[q.height,re]),Ce=re-g,He=t.useRef(Ce);He.current=Ce;function mt(a){var r=a;return Number.isNaN(He.current)||(r=Math.min(r,He.current)),r=Math.max(r,0),r}var we=I<=0,Le=I>=Ce,Ke=L<=0,Ve=L>=c,St=ct(we,Le,Ke,Ve),Pe=function(){return{x:P?-L:L,y:I}},Ie=t.useRef(Pe()),_e=Qe(function(a){if(E){var r=F(F({},Pe()),a);(Ie.current.x!==r.x||Ie.current.y!==r.y)&&(E(r),Ie.current=r)}});function je(a,r){var p=a;r?(et.flushSync(function(){V(p)}),_e()):Q(p)}function Rt(a){var r=a.currentTarget.scrollTop;r!==I&&Q(r),S==null||S(a),_e()}var Ne=function(r){var p=r,_=c?c-q.width:0;return p=Math.max(p,0),p=Math.min(p,_),p},pt=Qe(function(a,r){r?(et.flushSync(function(){V(function(p){var _=p+(P?-a:a);return Ne(_)})}),_e()):Q(function(p){var _=p+a;return _})}),Mt=It(k,we,Le,Ke,Ve,!!c,pt),Ae=H(Mt,2),Oe=Ae[0],Ue=Ae[1];$t(k,J,function(a,r,p,_){var z=_;return St(a,r,p)?!1:!z||!z._virtualHandled?(z&&(z._virtualHandled=!0),Oe({preventDefault:function(){},deltaX:a?r:0,deltaY:a?0:r}),!0):!1}),Ft(B,J,function(a){Q(function(r){return r+a})}),me(function(){function a(p){var _=we&&p.detail<0,z=Le&&p.detail>0;k&&!_&&!z&&p.preventDefault()}var r=J.current;return r.addEventListener("wheel",Oe,{passive:!1}),r.addEventListener("DOMMouseScroll",Ue,{passive:!0}),r.addEventListener("MozMousePixelScroll",a,{passive:!1}),function(){r.removeEventListener("wheel",Oe),r.removeEventListener("DOMMouseScroll",Ue),r.removeEventListener("MozMousePixelScroll",a)}},[k,we,Le]),me(function(){if(c){var a=Ne(L);V(a),_e({x:a})}},[q.width,c]);var Ge=function(){var r,p;(r=We.current)===null||r===void 0||r.delayHidden(),(p=Be.current)===null||p===void 0||p.delayHidden()},qe=Xt(J,T,C,f,D,function(){return te(!0)},Q,Ge);t.useImperativeHandle(u,function(){return{nativeElement:ie.current,getScrollInfo:Pe,scrollTo:function(r){function p(_){return _&&Fe(_)==="object"&&("left"in _||"top"in _)}p(r)?(r.left!==void 0&&V(Ne(r.left)),qe(r.top)):qe(r)}}}),me(function(){if(w){var a=T.slice(oe,de+1);w(a,T)}},[oe,de,T]);var bt=Nt(T,D,C,f),yt=O==null?void 0:O({start:oe,end:de,virtual:B,offsetX:L,offsetY:Ye,rtl:P,getSize:bt}),Et=Ct(T,oe,de,c,L,ee,n,ye),he=null;g&&(he=F(N({},M?"height":"maxHeight",g),Vt),k&&(he.overflowY="hidden",c&&(he.overflowX="hidden"),ce&&(he.pointerEvents="none")));var Ze={};return P&&(Ze.dir="rtl"),t.createElement("div",lt({ref:ie,style:F(F({},d),{},{position:"relative"}),className:le},Ze,X),t.createElement(ot,{onResize:dt},t.createElement(y,{className:"".concat(l,"-holder"),style:he,ref:J,onScroll:Rt,onMouseEnter:Ge},t.createElement(st,{prefixCls:l,height:re,offsetX:L,offsetY:Ye,scrollWidth:c,onInnerResize:te,ref:ae,innerProps:Y,rtl:P,extra:yt},Et))),B&&re>g&&t.createElement(it,{ref:We,prefixCls:l,scrollOffset:I,scrollRange:re,rtl:P,onScroll:je,onStartMove:Me,onStopMove:be,spinSize:gt,containerSize:q.height,style:x==null?void 0:x.verticalScrollBar,thumbStyle:x==null?void 0:x.verticalScrollBarThumb}),B&&c>q.width&&t.createElement(it,{ref:Be,prefixCls:l,scrollOffset:L,scrollRange:c,rtl:P,onScroll:je,onStartMove:Me,onStopMove:be,spinSize:ht,containerSize:q.width,horizontal:!0,style:x==null?void 0:x.horizontalScrollBar,thumbStyle:x==null?void 0:x.horizontalScrollBarThumb}))}var At=t.forwardRef(jt);At.displayName="List";export{At as L};
