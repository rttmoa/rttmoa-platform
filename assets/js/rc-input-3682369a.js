import{g as Ee}from"./@ant-design-63539318.js";import{f as ve,b as S,h as de,d as _,c as me,e as ce,g as Ce}from"./@babel-c46ce09a.js";import{c as x}from"./classnames-3ded05b8.js";import{r as E,a as m}from"./react-12b51ca5.js";import{h as Se,G as Ne}from"./rc-util-8976b5fa.js";function be(e){return!!(e.addonBefore||e.addonAfter)}function we(e){return!!(e.prefix||e.suffix||e.allowClear)}function fe(e,n,i,d){if(i){var r=n;if(n.type==="click"){var f=e.cloneNode(!0);r=Object.create(n,{target:{value:f},currentTarget:{value:f}}),f.value="",i(r);return}if(e.type!=="file"&&d!==void 0){var c=e.cloneNode(!0);r=Object.create(n,{target:{value:c},currentTarget:{value:c}}),c.value=d,i(r);return}i(r)}}function pe(e,n){if(e){e.focus(n);var i=n||{},d=i.cursor;if(d){var r=e.value.length;switch(d){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(r,r);break;default:e.setSelectionRange(0,r)}}}}var ge=function(n){var i,d,r=n.inputElement,f=n.children,c=n.prefixCls,O=n.prefix,R=n.suffix,N=n.addonBefore,F=n.addonAfter,Y=n.className,Z=n.style,D=n.disabled,M=n.readOnly,ee=n.focused,K=n.triggerFocus,g=n.allowClear,L=n.value,ne=n.handleReset,b=n.hidden,u=n.classes,t=n.classNames,A=n.dataAttrs,h=n.styles,v=n.components,W=f??r,ae=(v==null?void 0:v.affixWrapper)||"span",$=(v==null?void 0:v.groupWrapper)||"span",P=(v==null?void 0:v.wrapper)||"span",s=(v==null?void 0:v.groupAddon)||"span",j=E.useRef(null),te=function(V){var J;(J=j.current)!==null&&J!==void 0&&J.contains(V.target)&&(K==null||K())},G=we(n),y=E.cloneElement(W,{value:L,className:x(W.props.className,!G&&(t==null?void 0:t.variant))||null});if(G){var C,k=null;if(g){var z,U=!D&&!M&&L,B="".concat(c,"-clear-icon"),oe=ve(g)==="object"&&g!==null&&g!==void 0&&g.clearIcon?g.clearIcon:"âœ–";k=m.createElement("span",{onClick:ne,onMouseDown:function(V){return V.preventDefault()},className:x(B,(z={},S(z,"".concat(B,"-hidden"),!U),S(z,"".concat(B,"-has-suffix"),!!R),z)),role:"button",tabIndex:-1},oe)}var l="".concat(c,"-affix-wrapper"),I=x(l,(C={},S(C,"".concat(c,"-disabled"),D),S(C,"".concat(l,"-disabled"),D),S(C,"".concat(l,"-focused"),ee),S(C,"".concat(l,"-readonly"),M),S(C,"".concat(l,"-input-with-clear-btn"),R&&g&&L),C),u==null?void 0:u.affixWrapper,t==null?void 0:t.affixWrapper,t==null?void 0:t.variant),q=(R||g)&&m.createElement("span",{className:x("".concat(c,"-suffix"),t==null?void 0:t.suffix),style:h==null?void 0:h.suffix},k,R);y=m.createElement(ae,de({className:I,style:h==null?void 0:h.affixWrapper,onClick:te},A==null?void 0:A.affixWrapper,{ref:j}),O&&m.createElement("span",{className:x("".concat(c,"-prefix"),t==null?void 0:t.prefix),style:h==null?void 0:h.prefix},O),y,q)}if(be(n)){var H="".concat(c,"-group"),T="".concat(H,"-addon"),X="".concat(H,"-wrapper"),re=x("".concat(c,"-wrapper"),H,u==null?void 0:u.wrapper,t==null?void 0:t.wrapper),le=x(X,S({},"".concat(X,"-disabled"),D),u==null?void 0:u.group,t==null?void 0:t.groupWrapper);y=m.createElement($,{className:le},m.createElement(P,{className:re},N&&m.createElement(s,{className:T},N),y,F&&m.createElement(s,{className:T},F)))}return m.cloneElement(y,{className:x((i=y.props)===null||i===void 0?void 0:i.className,Y)||null,style:_(_({},(d=y.props)===null||d===void 0?void 0:d.style),Z),hidden:b})},Re=["show"];function Fe(e,n){return E.useMemo(function(){var i={};n&&(i.show=ve(n)==="object"&&n.formatter?n.formatter:!!n),i=_(_({},i),e);var d=i,r=d.show,f=me(d,Re);return _(_({},f),{},{show:!!r,showFormatter:typeof r=="function"?r:void 0,strategy:f.strategy||function(c){return c.length}})},[e,n])}var Ae=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","count","type","classes","classNames","styles","onCompositionStart","onCompositionEnd"],Be=E.forwardRef(function(e,n){var i=e.autoComplete,d=e.onChange,r=e.onFocus,f=e.onBlur,c=e.onPressEnter,O=e.onKeyDown,R=e.prefixCls,N=R===void 0?"rc-input":R,F=e.disabled,Y=e.htmlSize,Z=e.className,D=e.maxLength,M=e.suffix,ee=e.showCount,K=e.count,g=e.type,L=g===void 0?"text":g,ne=e.classes,b=e.classNames,u=e.styles,t=e.onCompositionStart,A=e.onCompositionEnd,h=me(e,Ae),v=E.useState(!1),W=ce(v,2),ae=W[0],$=W[1],P=E.useRef(!1),s=E.useRef(null),j=function(a){s.current&&pe(s.current,a)},te=Se(e.defaultValue,{value:e.value}),G=ce(te,2),y=G[0],C=G[1],k=y==null?"":String(y),z=E.useState(null),U=ce(z,2),B=U[0],oe=U[1],l=Fe(K,ee),I=l.max||D,q=l.strategy(k),H=!!I&&q>I;E.useImperativeHandle(n,function(){return{focus:j,blur:function(){var a;(a=s.current)===null||a===void 0||a.blur()},setSelectionRange:function(a,w,Q){var p;(p=s.current)===null||p===void 0||p.setSelectionRange(a,w,Q)},select:function(){var a;(a=s.current)===null||a===void 0||a.select()},input:s.current}}),E.useEffect(function(){$(function(o){return o&&F?!1:o})},[F]);var T=function(a,w,Q){var p=w;if(!P.current&&l.exceedFormatter&&l.max&&l.strategy(w)>l.max){if(p=l.exceedFormatter(w,{max:l.max}),w!==p){var ue,se;oe([((ue=s.current)===null||ue===void 0?void 0:ue.selectionStart)||0,((se=s.current)===null||se===void 0?void 0:se.selectionEnd)||0])}}else if(Q.source==="compositionEnd")return;C(p),s.current&&fe(s.current,a,d,p)};E.useEffect(function(){if(B){var o;(o=s.current)===null||o===void 0||o.setSelectionRange.apply(o,Ce(B))}},[B]);var X=function(a){T(a,a.target.value,{source:"change"})},re=function(a){P.current=!1,T(a,a.currentTarget.value,{source:"compositionEnd"}),A==null||A(a)},le=function(a){c&&a.key==="Enter"&&c(a),O==null||O(a)},ie=function(a){$(!0),r==null||r(a)},V=function(a){$(!1),f==null||f(a)},J=function(a){C(""),j(),s.current&&fe(s.current,a,d)},he=H&&"".concat(N,"-out-of-range"),ye=function(){var a=Ne(e,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames"]);return m.createElement("input",de({autoComplete:i},a,{onChange:X,onFocus:ie,onBlur:V,onKeyDown:le,className:x(N,S({},"".concat(N,"-disabled"),F),b==null?void 0:b.input),style:u==null?void 0:u.input,ref:s,size:Y,type:L,onCompositionStart:function(Q){P.current=!0,t==null||t(Q)},onCompositionEnd:re}))},xe=function(){var a=Number(I)>0;if(M||l.show){var w=l.showFormatter?l.showFormatter({value:k,count:q,maxLength:I}):"".concat(q).concat(a?" / ".concat(I):"");return m.createElement(m.Fragment,null,l.show&&m.createElement("span",{className:x("".concat(N,"-show-count-suffix"),S({},"".concat(N,"-show-count-has-suffix"),!!M),b==null?void 0:b.count),style:_({},u==null?void 0:u.count)},w),M)}return null};return m.createElement(ge,de({},h,{prefixCls:N,className:x(Z,he),handleReset:J,value:k,focused:ae,triggerFocus:j,suffix:xe(),disabled:F,classes:ne,classNames:b,styles:u}),ye())});const Ie=Object.freeze(Object.defineProperty({__proto__:null,BaseInput:ge,default:Be},Symbol.toStringTag,{value:"Module"})),ke=Ee(Ie);export{ge as B,Be as I,fe as a,ke as r,pe as t,Fe as u};
