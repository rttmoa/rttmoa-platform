import{u as C,r,j as a,B as o,m as u}from"./index-113fc74b.js";import{p as x}from"./product-1f4c599d.js";import{C as w}from"./index-7df010ed.js";import{T as z}from"./Table-8c30211f.js";import{I}from"./index-2995b242.js";import{P as v}from"./index-bda54c8e.js";import"./index-9b1d98d0.js";import"./styleChecker-ab7f2164.js";import"./addEventListener-96eadba0.js";import"./List-8daded26.js";import"./Tree-3563fbcf.js";import"./conductUtil-ec1c0eb4.js";import"./useMultipleSelect-ebde533a.js";import"./Pagination-b9ef814f.js";import"./zh_CN-f51ae7db.js";import"./index-b494d425.js";import"./Select-8f23d9ed.js";import"./useShowArrow-13591fe1.js";import"./useIcons-e7e876d7.js";import"./index-0e665a55.js";import"./index-c0237b1c.js";import"./index-b96fcc2a.js";import"./useBubbleLock-1d80bc36.js";import"./index-f62b1770.js";import"./index-e9919bb2.js";import"./iconUtil-1cf5f036.js";import"./useLazyKVMap-e86d9680.js";import"./Image-4cda65d6.js";const at="http://localhost:3009",it=()=>{const m=C(),[h,d]=r.useState(!1),[p,_]=r.useState(""),[g,k]=r.useState("productName"),[f,s]=r.useState({list:[],total:0,page:1,pageSize:5}),{list:S,total:j,page:n,pageSize:c}=f,l=async(e,t)=>{s({page:e}),d(!0);let i;p?i=await x(e,t,p,g):i=await x(e,t),i.code==200&&(d(!1),s(i.data))};r.useEffect(()=>{l(n,c)},[]);const y=[{title:"序号",key:"_id",width:80,align:"center",render:(e,t,i)=>i+1},{title:"商品名称",dataIndex:"name"},{title:"主图",dataIndex:"coverImg",render:(e,t)=>a.jsx(I,{src:t.coverImg,alt:t.name,style:{width:60}})},{title:"价格",dataIndex:"price",render(e){return`￥${e}`}},{title:"是否在售",dataIndex:"onSale",render:(e,t)=>t.onSale?"在售":"已下架"},{title:"商品描述",dataIndex:"desc"},{title:"操作",render:(e,t,i)=>a.jsxs("div",{children:[a.jsx(o,{type:"primary",size:"small",onClick:()=>{m(`/module/product/detail?id=${t._id}`)},children:"修改"}),a.jsx(v,{title:"确定删除此项",onCancel:()=>{},onConfirm:()=>{u.info(`删除： _id=${t._id}`)},children:a.jsx(o,{type:"dashed",size:"small",style:{margin:"0 1rem"},children:"删除"})}),a.jsx(o,{size:"small",onClick:()=>{u.info(`修改在售： _id=${t._id}`)},children:t.onSale?"下架":"上架"})]})}];return a.jsx("div",{children:a.jsx(w,{title:"商品列表",extra:a.jsx(o,{type:"primary",size:"small",onClick:()=>{m("/module/product/detail")},children:"新增"}),children:a.jsx(z,{bordered:!0,rowKey:"_id",loading:h,rowClassName:e=>e!=null&&e.onSale?"":"bg-red",columns:y,dataSource:S,pagination:{current:n,total:j,defaultPageSize:c,showSizeChanger:!0,pageSizeOptions:["3","5","10","15"],showQuickJumper:!0,onChange:l,onShowSizeChange:(e,t)=>{s({pageSize:t}),l(n,t)}}})})})};export{it as default,at as serverUrl};
//# sourceMappingURL=index-737a46c6.js.map
