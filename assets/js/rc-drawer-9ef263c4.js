import{h as A,d as c,e as le,b as ue}from"./@babel-c46ce09a.js";import{P as be}from"./@rc-component-60bdd203.js";import{e as ge,d as Ee,D as xe,K as re,b as ce}from"./rc-util-8976b5fa.js";import{r as a}from"./react-12b51ca5.js";import{c as $}from"./classnames-3ded05b8.js";import{C as de}from"./rc-motion-25d44171.js";var ve=a.createContext(null),ye=a.createContext({}),Re=function(n){var v=n.prefixCls,C=n.className,f=n.style,u=n.children,i=n.containerRef,d=n.id,g=n.onMouseEnter,h=n.onMouseOver,E=n.onMouseLeave,L=n.onClick,x=n.onKeyDown,s=n.onKeyUp,R={onMouseEnter:g,onMouseOver:h,onMouseLeave:E,onClick:L,onKeyDown:x,onKeyUp:s},S=a.useContext(ye),k=S.panel,_=ge(k,i);return a.createElement(a.Fragment,null,a.createElement("div",A({id:d,className:$("".concat(v,"-content"),C),style:c({},f),"aria-modal":"true",role:"dialog",ref:_},R),u))};function fe(e){return typeof e=="string"&&String(Number(e))===e?(Ee(!1,"Invalid value type of `width` or `height` which should be number type instead."),Number(e)):e}var me={width:0,height:0,overflow:"hidden",outline:"none",position:"absolute"};function Se(e,n){var v,C,f,u=e.prefixCls,i=e.open,d=e.placement,g=e.inline,h=e.push,E=e.forceRender,L=e.autoFocus,x=e.keyboard,s=e.classNames,R=e.rootClassName,S=e.rootStyle,k=e.zIndex,_=e.className,H=e.id,z=e.style,w=e.motion,X=e.width,Y=e.height,j=e.children,p=e.mask,W=e.maskClosable,q=e.maskMotion,G=e.maskClassName,T=e.maskStyle,U=e.afterOpenChange,D=e.onClose,I=e.onMouseEnter,J=e.onMouseOver,Q=e.onMouseLeave,B=e.onClick,Z=e.onKeyDown,ee=e.onKeyUp,r=e.styles,K=a.useRef(),m=a.useRef(),F=a.useRef();a.useImperativeHandle(n,function(){return K.current});var ne=function(l){var O=l.keyCode,P=l.shiftKey;switch(O){case re.TAB:{if(O===re.TAB){if(!P&&document.activeElement===F.current){var te;(te=m.current)===null||te===void 0||te.focus({preventScroll:!0})}else if(P&&document.activeElement===m.current){var oe;(oe=F.current)===null||oe===void 0||oe.focus({preventScroll:!0})}}break}case re.ESC:{D&&x&&(l.stopPropagation(),D(l));break}}};a.useEffect(function(){if(i&&L){var t;(t=K.current)===null||t===void 0||t.focus({preventScroll:!0})}},[i]);var ae=a.useState(!1),V=le(ae,2),ie=V[0],N=V[1],o=a.useContext(ve),y;h===!1?y={distance:0}:h===!0?y={}:y=h||{};var M=(v=(C=(f=y)===null||f===void 0?void 0:f.distance)!==null&&C!==void 0?C:o==null?void 0:o.pushDistance)!==null&&v!==void 0?v:180,Ce=a.useMemo(function(){return{pushDistance:M,push:function(){N(!0)},pull:function(){N(!1)}}},[M]);a.useEffect(function(){if(i){var t;o==null||(t=o.push)===null||t===void 0||t.call(o)}else{var l;o==null||(l=o.pull)===null||l===void 0||l.call(o)}},[i]),a.useEffect(function(){return function(){var t;o==null||(t=o.pull)===null||t===void 0||t.call(o)}},[]);var he=p&&a.createElement(de,A({key:"mask"},q,{visible:i}),function(t,l){var O=t.className,P=t.style;return a.createElement("div",{className:$("".concat(u,"-mask"),O,s==null?void 0:s.mask,G),style:c(c(c({},P),T),r==null?void 0:r.mask),onClick:W&&i?D:void 0,ref:l})}),ke=typeof w=="function"?w(d):w,b={};if(ie&&M)switch(d){case"top":b.transform="translateY(".concat(M,"px)");break;case"bottom":b.transform="translateY(".concat(-M,"px)");break;case"left":b.transform="translateX(".concat(M,"px)");break;default:b.transform="translateX(".concat(-M,"px)");break}d==="left"||d==="right"?b.width=fe(X):b.height=fe(Y);var we={onMouseEnter:I,onMouseOver:J,onMouseLeave:Q,onClick:B,onKeyDown:Z,onKeyUp:ee},Me=a.createElement(de,A({key:"panel"},ke,{visible:i,forceRender:E,onVisibleChanged:function(l){U==null||U(l)},removeOnLeave:!1,leavedClassName:"".concat(u,"-content-wrapper-hidden")}),function(t,l){var O=t.className,P=t.style;return a.createElement("div",A({className:$("".concat(u,"-content-wrapper"),s==null?void 0:s.wrapper,O),style:c(c(c({},b),P),r==null?void 0:r.wrapper)},xe(e,{data:!0})),a.createElement(Re,A({id:H,containerRef:l,prefixCls:u,className:$(_,s==null?void 0:s.content),style:c(c({},z),r==null?void 0:r.content)},we),j))}),se=c({},S);return k&&(se.zIndex=k),a.createElement(ve.Provider,{value:Ce},a.createElement("div",{className:$(u,"".concat(u,"-").concat(d),R,ue(ue({},"".concat(u,"-open"),i),"".concat(u,"-inline"),g)),style:se,tabIndex:-1,ref:K,onKeyDown:ne},he,a.createElement("div",{tabIndex:0,ref:m,style:me,"aria-hidden":"true","data-sentinel":"start"}),Me,a.createElement("div",{tabIndex:0,ref:F,style:me,"aria-hidden":"true","data-sentinel":"end"})))}var De=a.forwardRef(Se),Ue=function(n){var v=n.open,C=v===void 0?!1:v,f=n.prefixCls,u=f===void 0?"rc-drawer":f,i=n.placement,d=i===void 0?"right":i,g=n.autoFocus,h=g===void 0?!0:g,E=n.keyboard,L=E===void 0?!0:E,x=n.width,s=x===void 0?378:x,R=n.mask,S=R===void 0?!0:R,k=n.maskClosable,_=k===void 0?!0:k,H=n.getContainer,z=n.forceRender,w=n.afterOpenChange,X=n.destroyOnClose,Y=n.onMouseEnter,j=n.onMouseOver,p=n.onMouseLeave,W=n.onClick,q=n.onKeyDown,G=n.onKeyUp,T=n.panelRef,U=a.useState(!1),D=le(U,2),I=D[0],J=D[1],Q=a.useState(!1),B=le(Q,2),Z=B[0],ee=B[1];ce(function(){ee(!0)},[]);var r=Z?C:!1,K=a.useRef(),m=a.useRef();ce(function(){r&&(m.current=document.activeElement)},[r]);var F=function(N){var o;if(J(N),w==null||w(N),!N&&m.current&&!((o=K.current)!==null&&o!==void 0&&o.contains(m.current))){var y;(y=m.current)===null||y===void 0||y.focus({preventScroll:!0})}},ne=a.useMemo(function(){return{panel:T}},[T]);if(!z&&!I&&!r&&X)return null;var ae={onMouseEnter:Y,onMouseOver:j,onMouseLeave:p,onClick:W,onKeyDown:q,onKeyUp:G},V=c(c({},n),{},{open:r,prefixCls:u,placement:d,autoFocus:h,keyboard:L,width:s,mask:S,maskClosable:_,inline:H===!1,afterOpenChange:F,ref:K},ae);return a.createElement(ye.Provider,{value:ne},a.createElement(be,{open:r||z||I,autoDestroy:!1,getContainer:H,autoLock:S&&(r||I)},a.createElement(De,V)))};export{Ue as D};
