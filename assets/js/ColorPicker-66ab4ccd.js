import{r as f,X as L,d as o,G as k,Y as G,$ as K,dA as j,dB as F,dC as I,W as Q,dD as U,dE as V,Z as B,dF as ee,dG as te,dH as re}from"./index-83fc08b5.js";function ne(t){var e="touches"in t?t.touches[0]:t,r=document.documentElement.scrollLeft||document.body.scrollLeft||window.pageXOffset,u=document.documentElement.scrollTop||document.body.scrollTop||window.pageYOffset;return{pageX:e.pageX-r,pageY:e.pageY-u}}function W(t){var e=t.targetRef,r=t.containerRef,u=t.direction,n=t.onDragChange,a=t.onDragChangeComplete,v=t.calculate,c=t.color,d=t.disabledDrag,p=f.useState({x:0,y:0}),h=L(p,2),C=h[0],x=h[1],g=f.useRef(null),m=f.useRef(null);f.useEffect(function(){x(v())},[c]),f.useEffect(function(){return function(){document.removeEventListener("mousemove",g.current),document.removeEventListener("mouseup",m.current),document.removeEventListener("touchmove",g.current),document.removeEventListener("touchend",m.current),g.current=null,m.current=null}},[]);var E=function(l){var i=ne(l),X=i.pageX,Y=i.pageY,y=r.current.getBoundingClientRect(),_=y.x,O=y.y,$=y.width,T=y.height,N=e.current.getBoundingClientRect(),M=N.width,w=N.height,A=M/2,P=w/2,D=Math.max(0,Math.min(X-_,$))-A,s=Math.max(0,Math.min(Y-O,T))-P,z={x:D,y:u==="x"?C.y:s};if(M===0&&w===0||M!==w)return!1;n==null||n(z)},R=function(l){l.preventDefault(),E(l)},b=function(l){l.preventDefault(),document.removeEventListener("mousemove",g.current),document.removeEventListener("mouseup",m.current),document.removeEventListener("touchmove",g.current),document.removeEventListener("touchend",m.current),g.current=null,m.current=null,a==null||a()},H=function(l){document.removeEventListener("mousemove",g.current),document.removeEventListener("mouseup",m.current),!d&&(E(l),document.addEventListener("mousemove",R),document.addEventListener("mouseup",b),document.addEventListener("touchmove",R),document.addEventListener("touchend",b),g.current=R,m.current=b)};return[C,H]}var Z=function(e){var r=e.size,u=r===void 0?"default":r,n=e.color,a=e.prefixCls;return o.createElement("div",{className:k("".concat(a,"-handler"),G({},"".concat(a,"-handler-sm"),u==="small")),style:{backgroundColor:n}})},q=function(e){var r=e.children,u=e.style,n=e.prefixCls;return o.createElement("div",{className:"".concat(n,"-palette"),style:K({position:"relative"},u)},r)},J=f.forwardRef(function(t,e){var r=t.children,u=t.x,n=t.y;return o.createElement("div",{ref:e,style:{position:"absolute",left:"".concat(u,"%"),top:"".concat(n,"%"),zIndex:1,transform:"translate(-50%, -50%)"}},r)}),ae=function(e){var r=e.color,u=e.onChange,n=e.prefixCls,a=e.onChangeComplete,v=e.disabled,c=f.useRef(),d=f.useRef(),p=f.useRef(r),h=j(function(E){var R=F({offset:E,targetRef:d,containerRef:c,color:r});p.current=R,u(R)}),C=W({color:r,containerRef:c,targetRef:d,calculate:function(){return I(r)},onDragChange:h,onDragChangeComplete:function(){return a==null?void 0:a(p.current)},disabledDrag:v}),x=L(C,2),g=x[0],m=x[1];return o.createElement("div",{ref:c,className:"".concat(n,"-select"),onMouseDown:m,onTouchStart:m},o.createElement(q,{prefixCls:n},o.createElement(J,{x:g.x,y:g.y,ref:d},o.createElement(Z,{color:r.toRgbString(),prefixCls:n})),o.createElement("div",{className:"".concat(n,"-saturation"),style:{backgroundColor:"hsl(".concat(r.toHsb().h,",100%, 50%)"),backgroundImage:"linear-gradient(0deg, #000, transparent),linear-gradient(90deg, #fff, hsla(0, 0%, 100%, 0))"}})))},oe=function(e,r){var u=Q(e,{value:r}),n=L(u,2),a=n[0],v=n[1],c=f.useMemo(function(){return U(a)},[a]);return[c,v]},le=function(e){var r=e.colors,u=e.children,n=e.direction,a=n===void 0?"to right":n,v=e.type,c=e.prefixCls,d=f.useMemo(function(){return r.map(function(p,h){var C=U(p);return v==="alpha"&&h===r.length-1&&(C=new V(C.setA(1))),C.toRgbString()}).join(",")},[r,v]);return o.createElement("div",{className:"".concat(c,"-gradient"),style:{position:"absolute",inset:0,background:"linear-gradient(".concat(a,", ").concat(d,")")}},u)},ce=function(e){var r=e.prefixCls,u=e.colors,n=e.disabled,a=e.onChange,v=e.onChangeComplete,c=e.color,d=e.type,p=f.useRef(),h=f.useRef(),C=f.useRef(c),x=function(i){return d==="hue"?i.getHue():i.a*100},g=j(function(l){var i=F({offset:l,targetRef:h,containerRef:p,color:c,type:d});C.current=i,a(x(i))}),m=W({color:c,targetRef:h,containerRef:p,calculate:function(){return I(c,d)},onDragChange:g,onDragChangeComplete:function(){v(x(C.current))},direction:"x",disabledDrag:n}),E=L(m,2),R=E[0],b=E[1],H=o.useMemo(function(){if(d==="hue"){var l=c.toHsb();l.s=1,l.b=1,l.a=1;var i=new V(l);return i}return c},[c,d]),S=o.useMemo(function(){return u.map(function(l){return"".concat(l.color," ").concat(l.percent,"%")})},[u]);return o.createElement("div",{ref:p,className:k("".concat(r,"-slider"),"".concat(r,"-slider-").concat(d)),onMouseDown:b,onTouchStart:b},o.createElement(q,{prefixCls:r},o.createElement(J,{x:R.x,y:R.y,ref:h},o.createElement(Z,{size:"small",color:H.toHexString(),prefixCls:r})),o.createElement(le,{colors:S,type:d,prefixCls:r})))};function ue(t){return f.useMemo(function(){var e=t||{},r=e.slider;return[r||ce]},[t])}var ie=[{color:"rgb(255, 0, 0)",percent:0},{color:"rgb(255, 255, 0)",percent:17},{color:"rgb(0, 255, 0)",percent:33},{color:"rgb(0, 255, 255)",percent:50},{color:"rgb(0, 0, 255)",percent:67},{color:"rgb(255, 0, 255)",percent:83},{color:"rgb(255, 0, 0)",percent:100}],de=f.forwardRef(function(t,e){var r=t.value,u=t.defaultValue,n=t.prefixCls,a=n===void 0?te:n,v=t.onChange,c=t.onChangeComplete,d=t.className,p=t.style,h=t.panelRender,C=t.disabledAlpha,x=C===void 0?!1:C,g=t.disabled,m=g===void 0?!1:g,E=t.components,R=ue(E),b=L(R,1),H=b[0],S=oe(u||re,r),l=L(S,2),i=l[0],X=l[1],Y=f.useMemo(function(){return i.setA(1).toRgbString()},[i]),y=function(s,z){r||X(s),v==null||v(s,z)},_=function(s){return new V(i.setHue(s))},O=function(s){return new V(i.setA(s/100))},$=function(s){y(_(s),{type:"hue",value:s})},T=function(s){y(O(s),{type:"alpha",value:s})},N=function(s){c&&c(_(s))},M=function(s){c&&c(O(s))},w=k("".concat(a,"-panel"),d,G({},"".concat(a,"-panel-disabled"),m)),A={prefixCls:a,disabled:m,color:i},P=o.createElement(o.Fragment,null,o.createElement(ae,B({onChange:y},A,{onChangeComplete:c})),o.createElement("div",{className:"".concat(a,"-slider-container")},o.createElement("div",{className:k("".concat(a,"-slider-group"),G({},"".concat(a,"-slider-group-disabled-alpha"),x))},o.createElement(H,B({},A,{type:"hue",colors:ie,min:0,max:359,value:i.getHue(),onChange:$,onChangeComplete:N})),!x&&o.createElement(H,B({},A,{type:"alpha",colors:[{percent:0,color:"rgba(255, 0, 4, 0)"},{percent:100,color:Y}],min:0,max:100,value:i.a*100,onChange:T,onChangeComplete:M}))),o.createElement(ee,{color:i.toRgbString(),prefixCls:a})));return o.createElement("div",{className:w,style:p,ref:e},typeof h=="function"?h(P):P)});export{de as C};
//# sourceMappingURL=ColorPicker-66ab4ccd.js.map
