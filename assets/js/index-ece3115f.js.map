{"version":3,"file":"index-ece3115f.js","sources":["../../../src/hooks/useEyeDropper.ts","../../../src/views/feat/colorPicker/index.tsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\n\ninterface EyeDropperResult {\n  color: string;\n  isEnabled: boolean;\n  openEyeDropper: () => void;\n  cancelEyeDropper: () => void;\n}\n\n// todo use Hooks 设置 取色器\n// todo 常用功能：取色器\nconst useEyeDropper = (): EyeDropperResult => {\n  const [color, setColor] = useState<string>(\"\");\n  const [isEnabled, setIsEnabled] = useState<boolean>(true);\n\n  useEffect(() => {\n    // Check if EyeDropper API is supported\n    if (!window.EyeDropper) {\n      setIsEnabled(false);\n    }\n  }, []);\n\n  const abortController = new AbortController();\n\n  const openEyeDropper = async () => {\n    if (!window.EyeDropper) {\n      console.log(\"EyeDropper API is not supported in this browser.\");\n      return;\n    }\n    // Create a new EyeDropper instance\n    const eyeDropper = new window.EyeDropper();\n\n    // Open the EyeDropper\n    try {\n      const result = await eyeDropper.open({ signal: abortController.signal });\n      setColor(result.sRGBHex);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const cancelEyeDropper = () => {\n    abortController.abort();\n  };\n\n  return { color, isEnabled, openEyeDropper, cancelEyeDropper };\n};\n\nexport default useEyeDropper;\n","import { Button, Input, Space, Alert, Divider, Typography, Card } from \"antd\";\nimport useEyeDropper from \"@/hooks/useEyeDropper\";\n\nconst { Link } = Typography;\n\nconst ColorPicker: React.FC = () => {\n  const { color, isEnabled, openEyeDropper } = useEyeDropper();\n\n  const message = (\n    <span>\n      通过 EyeDropper API 实现，官方文档请查看 ：\n      <Link href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/EyeDropper\" target=\"_blank\">\n        https://developer.mozilla.org/zh-CN/docs/Web/API/EyeDropper\n      </Link>\n    </span>\n  );\n\n  return (\n    <Card>\n      <Alert message={message} type=\"success\" showIcon />\n\n      <Divider />\n\n      {isEnabled ? (\n        <>\n          <Space.Compact style={{ width: \"350px\" }}>\n            <Input placeholder=\"The color picked up by the color picker\" value={color} />\n            <Button type=\"primary\" onClick={openEyeDropper}>\n              Open\n            </Button>\n          </Space.Compact>\n          <br />\n          <div style={{ width: 200, height: 200, backgroundColor: color, margin: \"0 auto\" }}></div>\n        </>\n      ) : (\n        <Button type=\"primary\" disabled>\n          当前浏览器不支持 EyeDropper API，请切换到 Chrome / Edge\n        </Button>\n      )}\n    </Card>\n  );\n};\n\nexport default ColorPicker;\n"],"names":["useEyeDropper","color","setColor","useState","isEnabled","setIsEnabled","useEffect","window","EyeDropper","abortController","AbortController","openEyeDropper","eyeDropper","result","open","signal","sRGBHex","cancelEyeDropper","abort","Link","Typography","ColorPicker","message","Card","jsx","Alert","Divider","jsxs","Fragment","Space","Input","Button"],"mappings":"sQAWA,MAAMA,EAAgBA,IAAwB,CAC5C,KAAM,CAACC,EAAOC,CAAQ,EAAIC,WAAiB,EAAE,EACvC,CAACC,EAAWC,CAAY,EAAIF,WAAkB,EAAI,EAExDG,EAAAA,UAAU,IAAM,CAETC,OAAOC,YACVH,EAAa,EAAK,CAEtB,EAAG,CAAE,CAAA,EAEC,MAAAI,EAAkB,IAAIC,gBAuB5B,MAAO,CAAET,MAAAA,EAAOG,UAAAA,EAAWO,eArBJ,SAAY,CAC7B,GAAA,CAACJ,OAAOC,WAEV,OAGI,MAAAI,EAAa,IAAIL,OAAOC,WAG1B,GAAA,CACI,MAAAK,EAAS,MAAMD,EAAWE,KAAK,CAAEC,OAAQN,EAAgBM,MAAO,CAAC,EACvEb,EAASW,EAAOG,OAAO,OACT,CAEhB,GAOyCC,iBAJlBA,IAAM,CAC7BR,EAAgBS,MAAM,GAI1B,EC3CM,CAAE,KAAAC,CAAS,EAAAC,EAEXC,EAAwB,IAAM,CAClC,KAAM,CAAE,MAAApB,EAAO,UAAAG,EAAW,eAAAO,GAAmBX,EAAc,EAErDsB,SACH,OAAK,CAAA,SAAA,CAAA,uCAEHH,EAAK,CAAA,KAAK,8DAA8D,OAAO,SAAS,SAEzF,8DAAA,CACF,CAAA,CAAA,EAGF,cACGI,EACC,CAAA,SAAA,CAAAC,EAAA,IAACC,EAAM,CAAA,QAAAH,EAAkB,KAAK,UAAU,SAAQ,GAAC,QAEhDI,EAAQ,EAAA,EAERtB,EAEGuB,EAAA,KAAAC,WAAA,CAAA,SAAA,CAAAD,OAACE,EAAM,QAAN,CAAc,MAAO,CAAE,MAAO,OAC7B,EAAA,SAAA,CAAAL,EAAA,IAACM,EAAM,CAAA,YAAY,0CAA0C,MAAO7B,EAAO,QAC1E8B,EAAO,CAAA,KAAK,UAAU,QAASpB,EAAgB,SAEhD,OAAA,CAAA,EACF,QACC,KAAG,EAAA,EACHa,EAAAA,IAAA,MAAA,CAAI,MAAO,CAAE,MAAO,IAAK,OAAQ,IAAK,gBAAiBvB,EAAO,OAAQ,QAAY,CAAA,CAAA,CAAA,CAAA,CACrF,EAECuB,EAAAA,IAAAO,EAAA,CAAO,KAAK,UAAU,SAAQ,GAAC,SAEhC,6CAAA,CAEJ,CAAA,CAAA,CAEJ"}