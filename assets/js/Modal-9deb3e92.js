import{r as u,j as e,aa as L,B as f,ax as a,R as V,C as n,ak as o,ay as F}from"./index-83fc08b5.js";import{R as b}from"./index-8964c188.js";import{T as M}from"./index-3e38651e.js";import"./index-98ca97a3.js";import"./useBubbleLock-f91bb637.js";import"./TreeSelect-872bd2b8.js";import"./Select-f081463e.js";import"./List-4fbd63eb.js";import"./conductUtil-56fe35d0.js";import"./createForOfIteratorHelper-305d5ff2.js";import"./Tree-9c29a1c4.js";import"./useShowArrow-9f714a76.js";import"./useIcons-efffd204.js";import"./iconUtil-b5b117df.js";import"./index-29642d9d.js";const U=I=>{const{form:p,menuList:v,modalTitle:_,modalType:s,modalIsVisible:q,modalMenuInfo:l,setModalIsVisible:T,handleModalSubmit:m}=I,[t,d]=u.useState("是"),[c,h]=u.useState("");u.useEffect(()=>{p.setFieldsValue({isTop:s==="create"||(l==null?void 0:l.parent_id)==0?"是":"否",parent_id:s==="create"?null:l==null?void 0:l.parent_id,email:s==="create"?null:l==null?void 0:l.email,leader:s==="create"?null:l==null?void 0:l.leader,name:s==="create"?null:l==null?void 0:l.name,phone:s==="create"?null:l==null?void 0:l.phone,sort:s==="create"?null:l==null?void 0:l.sort,status:s==="create"?"启用":l==null?void 0:l.status}),d(s==="create"||(l==null?void 0:l.parent_id)==0?"是":"否"),h(s==="create"?"":l==null?void 0:l.parent_id)},[l,s]);const x=(r,S)=>r==null?void 0:r.map(i=>{const g={value:i.name||null,label:i.name||null};return i.children&&i.children.length&&(g.children=x(i.children)),g}),w=x(v),j=()=>{T(!1)},y=()=>{p.submit()},C=()=>{const r=p.getFieldsValue();r.isTop=t,t=="是"&&(r.parent_id=0),t=="否"&&(r.parent_id=c),s=="edit"&&(r._id=l.unique),r.parent_id,m&&m(s,r)};return e.jsx(L,{title:_,width:800,open:q,onCancel:j,footer:[e.jsx(f,{loading:!1,onClick:j,children:"取消"}),e.jsx(f,{type:"primary",loading:!1,onClick:y,children:"提交"},"link")],children:e.jsx(a,{form:p,onFinish:C,layout:"horizontal",size:"middle",labelCol:{span:6},wrapperCol:{span:16},children:e.jsxs(V,{gutter:16,children:[e.jsx(n,{span:12,children:e.jsx(a.Item,{label:"部门名称",name:"name",rules:[{required:!0,message:"必填：部门名称"}],children:e.jsx(o,{variant:"outlined",placeholder:"请输入部门名称",maxLength:30})})}),e.jsx(n,{span:12,children:e.jsx(a.Item,{label:"部门排序",name:"sort",rules:[{required:!0,message:"必填：部门排序"}],children:e.jsx(F,{variant:"outlined",placeholder:"请输入",maxLength:30})})}),e.jsx(n,{span:12,children:e.jsx(a.Item,{label:"负责人",name:"leader",rules:[{required:!1,message:""}],children:e.jsx(o,{variant:"outlined",placeholder:"请输入负责人",maxLength:30})})}),e.jsx(n,{span:12,children:e.jsx(a.Item,{label:"联系电话",name:"phone",rules:[{required:!1,message:""}],children:e.jsx(o,{variant:"outlined",placeholder:"请输入联系电话",maxLength:30})})}),e.jsx(n,{span:12,children:e.jsx(a.Item,{label:"邮箱",name:"email",rules:[{required:!1,message:""}],children:e.jsx(o,{variant:"outlined",placeholder:"请输入邮箱",maxLength:30})})}),e.jsx(n,{span:12,children:e.jsx(a.Item,{label:"部门状态",name:"status",rules:[{required:!1,message:""}],children:e.jsx(b.Group,{name:"radiogroup",defaultValue:"启用",options:[{value:"启用",label:"启用"},{value:"停用",label:"停用"}]})})}),e.jsx(n,{span:24,pull:3,children:e.jsx(a.Item,{label:"部门描述",name:"desc",rules:[{required:!1,message:""}],children:e.jsx(o.TextArea,{rows:3,placeholder:"请输入部门描述",maxLength:6})})}),e.jsx(n,{span:24,pull:3,children:e.jsx(a.Item,{label:"是否顶级部门",name:"isTop",rules:[{required:!0,message:""}],children:e.jsx(b.Group,{options:["是","否"],defaultValue:"是",onChange:r=>{d(r.target.value)},value:t})})}),t=="是"&&e.jsx(n,{span:24,pull:3,children:e.jsx(a.Item,{})}),t=="否"&&e.jsx(n,{span:24,pull:3,children:e.jsx(a.Item,{label:"上级部门",name:"parent_id",rules:[{required:!0,message:"必须：上级部门"}],children:e.jsx(M,{style:{width:"100%"},value:c,placeholder:"请选择上级部门",allowClear:!0,onChange:r=>{h(r)},treeData:w,dropdownStyle:{maxHeight:500,overflow:"auto"},className:"custom-tree-dropdown"})})})]})})})};export{U as default};
//# sourceMappingURL=Modal-9deb3e92.js.map
