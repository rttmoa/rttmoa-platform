import{r as c,c0 as _,j as K,a7 as j}from"./.pnpm-e6eae8df.js";const M=(e,n)=>{const a=c.useRef();c.useEffect(()=>{a.current=n},[n]),c.useEffect(()=>{if(!!!(typeof window<"u"&&window.document&&window.document.createElement)||!window.addEventListener)return;const h=u=>a.current(u);return window.addEventListener(e,h),()=>{window.removeEventListener(e,h)}},[e])},s=_,P={add:(...e)=>e.reduce((n,a)=>Number(s.format(s.chain(s.bignumber(n)).add(s.bignumber(a)).done()))),subtract:(...e)=>e.reduce((n,a)=>Number(s.format(s.chain(s.bignumber(n)).subtract(s.bignumber(a)).done()))),multiply:(...e)=>e.reduce((n,a)=>Number(s.format(s.chain(s.bignumber(n)).multiply(s.bignumber(a)).done()))),divide:(...e)=>e.reduce((n,a)=>Number(s.format(s.chain(s.bignumber(n)).divide(s.bignumber(a)).done())))};function H(e){const{id:n,heghtAuto:a=!1,xScroll:y=!1,yScroll:h=!1,scroll:u,dataSource:g,columns:x,pagination:f,selectedRowKeys:R,rowSelection:C,updateSelectedItem:b,updatePage:p}=e,[W,k]=c.useState({}),z=g==null?void 0:g.length,[v,I]=c.useState(u==null?void 0:u.x),[B,L]=c.useState(u==null?void 0:u.y);c.useEffect(()=>{if(y&&n){const t=document.getElementById(n);if(t){const i=e.columns.filter(o=>o.width).map(o=>Number(o.width)).reduce((o,w)=>o+w,0),l=e.columns.filter(o=>!o.width).map(o=>o.title.toString().length),r=(Math.max(...l)+1)*12+8*2+2,d=l.length*r;I(Math.max(t.getBoundingClientRect().width,i+d))}}},[y,n]);const S=c.useCallback(()=>{if(h&&n){const t=document.getElementById(n);if(t){const i=t.getElementsByClassName("ant-table-thead")[0];if(i){const l=t.getBoundingClientRect().height,r=i.getBoundingClientRect().height,d=P.subtract(l,r);L(d),setTimeout(()=>{const o=t.getElementsByClassName("ant-table-body")[0];o&&(o.style.height=d+"px");const w=t.getElementsByClassName("ant-table-placeholder")[0];w&&(w.style.height=d+"px")},30)}}}},[h,n,z]);c.useEffect(()=>{S()},[S]),M("resize",S);const N=c.useCallback((t,i)=>{if(C==="checkbox")e.selectedRowKeys,e.selectedIds,e.selectedItem;else{let l=[i];const r=e.selectedRowKeys;if(r&&r[0]===i)return;b&&b(l,t||{})}},[]),T=c.useCallback((t,i)=>{let l=C,r=[];l==="checkbox"&&(i.forEach(d=>{r.push(d.id)}),k({selectedRowKeys:t,selectedIds:r,selectedItem:i[0]})),b&&b(t,i[0],r)},[]),E={type:"radio",selectedRowKeys:R,onChange:T,onSelect:(t,i,l)=>{}};let m=C;return[!1,null].includes(m)?m=!1:m==="checkbox"?E.type="checkbox":m="radio",K.jsx(j,{...e,bordered:!0,size:"small",columns:x,dataSource:g,rowSelection:m?E:void 0,onRow:(t,i)=>({onClick(){m&&N(t,i)}}),scroll:{x:v,y:B},pagination:{size:"small",onChange:(t,i)=>p&&p(t,i),onShowSizeChange:(t,i)=>{},current:f.page,pageSize:f.pageSize,pageSizeOptions:["3","5","10","15","20","30","50"],total:f.totalCount,showTotal:()=>`共 ${f.totalCount} 条`,showQuickJumper:!0,showSizeChanger:!0}})}export{H as T};
