import{u as oe,a as me,b as pe,c as Pe,d as ve,e as ge}from"./@react-hook-02d17d07.js";import{r as g}from"./react-12b51ca5.js";import{O as G,m as z,r as ye,c as Re}from"./@essentials-eb570bce.js";import{t as se}from"./trie-memoize-0729506e.js";import{R as Ce}from"./@juggle-41516555.js";import{r as ee}from"./raf-schd-5404ed65.js";const R=0,v=1,we=2,Le=0,$=1;function be(t,e,n){let i=t.list,s;for(;i;){if(i.index===n)return!1;if(e>i.high)break;s=i,i=i.next}return s||(t.list={index:n,high:e,next:i}),s&&(s.next={index:n,high:e,next:s.next}),!0}function Me(t,e){let n=t.list;if(n.index===e)return n.next===null?Le:(t.list=n.next,$);let i=n;for(n=n.next;n!==null;){if(n.index===e)return i.next=n.next,$;i=n,n=n.next}}const h={low:0,max:0,high:0,C:we,P:void 0,R:void 0,L:void 0,list:void 0};h.P=h;h.L=h;h.R=h;function M(t){const e=t.high;t.L===h&&t.R===h?t.max=e:t.L===h?t.max=Math.max(t.R.max,e):t.R===h?t.max=Math.max(t.L.max,e):t.max=Math.max(Math.max(t.L.max,t.R.max),e)}function H(t){let e=t;for(;e.P!==h;)M(e.P),e=e.P}function x(t,e){if(e.R===h)return;const n=e.R;e.R=n.L,n.L!==h&&(n.L.P=e),n.P=e.P,e.P===h?t.root=n:e===e.P.L?e.P.L=n:e.P.R=n,n.L=e,e.P=n,M(e),M(n)}function O(t,e){if(e.L===h)return;const n=e.L;e.L=n.R,n.R!==h&&(n.R.P=e),n.P=e.P,e.P===h?t.root=n:e===e.P.R?e.P.R=n:e.P.L=n,n.R=e,e.P=n,M(e),M(n)}function N(t,e,n){e.P===h?t.root=n:e===e.P.L?e.P.L=n:e.P.R=n,n.P=e.P}function Te(t,e){let n;for(;e!==h&&e.C===v;)e===e.P.L?(n=e.P.R,n.C===R&&(n.C=v,e.P.C=R,x(t,e.P),n=e.P.R),n.L.C===v&&n.R.C===v?(n.C=R,e=e.P):(n.R.C===v&&(n.L.C=v,n.C=R,O(t,n),n=e.P.R),n.C=e.P.C,e.P.C=v,n.R.C=v,x(t,e.P),e=t.root)):(n=e.P.L,n.C===R&&(n.C=v,e.P.C=R,O(t,e.P),n=e.P.L),n.R.C===v&&n.L.C===v?(n.C=R,e=e.P):(n.L.C===v&&(n.R.C=v,n.C=R,x(t,n),n=e.P.L),n.C=e.P.C,e.P.C=v,n.L.C=v,O(t,e.P),e=t.root));e.C=v}function Se(t){for(;t.L!==h;)t=t.L;return t}function Ee(t,e){let n;for(;e.P.C===R;)e.P===e.P.P.L?(n=e.P.P.R,n.C===R?(e.P.C=v,n.C=v,e.P.P.C=R,e=e.P.P):(e===e.P.R&&(e=e.P,x(t,e)),e.P.C=v,e.P.P.C=R,O(t,e.P.P))):(n=e.P.P.L,n.C===R?(e.P.C=v,n.C=v,e.P.P.C=R,e=e.P.P):(e===e.P.L&&(e=e.P,O(t,e)),e.P.C=v,e.P.P.C=R,x(t,e.P.P)));t.root.C=v}function Ie(){const t={root:h,size:0},e={};return{insert(n,i,s){let o=t.root,r=h;for(;o!==h&&(r=o,n!==r.low);)n<o.low?o=o.L:o=o.R;if(n===r.low&&r!==h){if(!be(r,i,s))return;r.high=Math.max(r.high,i),M(r),H(r),e[s]=r,t.size++;return}const c={low:n,high:i,max:i,C:R,P:r,L:h,R:h,list:{index:s,high:i,next:null}};r===h?t.root=c:(c.low<r.low?r.L=c:r.R=c,H(c)),Ee(t,c),e[s]=c,t.size++},remove(n){const i=e[n];if(i===void 0)return;delete e[n];const s=Me(i,n);if(s===void 0)return;if(s===$){i.high=i.list.high,M(i),H(i),t.size--;return}let o=i,r=o.C,c;i.L===h?(c=i.R,N(t,i,i.R)):i.R===h?(c=i.L,N(t,i,i.L)):(o=Se(i.R),r=o.C,c=o.R,o.P===i?c.P=o:(N(t,o,o.R),o.R=i.R,o.R.P=o),N(t,i,o),o.L=i.L,o.L.P=o,o.C=i.C),M(c),H(c),r===v&&Te(t,c),t.size--},search(n,i,s){const o=[t.root];for(;o.length!==0;){const r=o.pop();if(!(r===h||n>r.max)&&(r.L!==h&&o.push(r.L),r.R!==h&&o.push(r.R),r.low<=i&&r.high>=n)){let c=r.list;for(;c!==null;)c.high>=n&&s(c.index,r.low),c=c.next}}},get size(){return t.size}}}const q=new WeakMap;function re(){const t=g.useState(xe)[1];return g.useRef(()=>t({})).current}const xe={},_=g.createElement;function Oe(t){let{positioner:e,resizeObserver:n,items:i,as:s="div",id:o,className:r,style:c,role:d="grid",tabIndex:l=0,containerRef:a,itemAs:m="div",itemStyle:u,itemHeightEstimate:f=300,itemKey:p=je,overscanBy:P=2,scrollTop:C,isScrolling:y,height:w,render:S,onRender:A}=t,E=0,T;const le=re(),Y=Ne(e,n),D=i.length,{columnWidth:k,columnCount:ae,range:fe,estimateHeight:ue,size:de,shortestColumn:he}=e,W=de(),J=he(),U=[],Q=d==="list"?"listitem":d==="grid"?"gridcell":void 0,K=oe(A);P=w*P;const V=C+P,B=J<V&&W<D;if(fe(Math.max(0,C-P/2),V,(L,b,j)=>{const I=i[L],F=p(I,L),Z={top:j,left:b,width:k,writingMode:"horizontal-tb",position:"absolute"};typeof process<"u",U.push(_(m,{key:F,ref:Y(L),role:Q,style:typeof u=="object"&&u!==null?Object.assign({},Z,u):Z},ne(S,L,I,k))),T===void 0?(E=L,T=L):(E=Math.min(E,L),T=Math.max(T,L))}),B){const L=Math.min(D-W,Math.ceil((C+P-J)/f*ae));let b=W;const j=He(k);for(;b<W+L;b++){const I=i[b],F=p(I,b);typeof process<"u",U.push(_(m,{key:F,ref:Y(b),role:Q,style:typeof u=="object"?Object.assign({},j,u):j},ne(S,b,I,k)))}}g.useEffect(()=>{typeof K.current=="function"&&T!==void 0&&K.current(E,T,i),te="1"},[E,T,i,K]),g.useEffect(()=>{B&&le()},[B,e]);const X=ke(y,ue(D,f));return _(s,{ref:a,key:te,id:o,role:d,className:r,tabIndex:l,style:typeof c=="object"?We(X,c):X,children:U})}let te="0";const ne=se([G,{},WeakMap,G],(t,e,n,i)=>_(t,{index:e,data:n,width:i})),ke=z((t,e)=>({position:"relative",width:"100%",maxWidth:"100%",height:Math.ceil(e),maxHeight:Math.ceil(e),willChange:t?"contents":void 0,pointerEvents:t?"none":void 0})),ce=(t,e)=>t[0]===e[0]&&t[1]===e[1],We=z((t,e)=>Object.assign({},t,e),ce);function je(t,e){return e}const He=z(t=>({width:t,zIndex:-1e3,visibility:"hidden",position:"absolute",writingMode:"horizontal-tb"}),(t,e)=>t[0]===e[0]),Ne=z((t,e)=>n=>i=>{i!==null&&(e&&(e.observe(i),q.set(i,n)),t.get(n)===void 0&&t.set(n,i.offsetHeight))},ce);function _e(t,e){t===void 0&&(t=0),e===void 0&&(e=12);const n=me(e),[i,s]=g.useState(!1),o=g.useRef(0);return g.useEffect(()=>{o.current===1&&s(!0);let r=!1;const c=ye(()=>{r||s(!1)},40+1e3/e);return o.current=1,()=>{r=!0,Re(c)}},[e,n]),{scrollTop:Math.max(0,n-t),isScrolling:i}}function ze(t){const{scrollTop:e,isScrolling:n}=_e(t.offset,t.scrollFps);return Oe({scrollTop:e,isScrolling:n,positioner:t.positioner,resizeObserver:t.resizeObserver,items:t.items,onRender:t.onRender,as:t.as,id:t.id,className:t.className,style:t.style,role:t.role,tabIndex:t.tabIndex,containerRef:t.containerRef,itemAs:t.itemAs,itemStyle:t.itemStyle,itemHeightEstimate:t.itemHeightEstimate,itemKey:t.itemKey,overscanBy:t.overscanBy,height:t.height,render:t.render})}function Ae(t,e){e===void 0&&(e=De);const[n,i]=g.useState({offset:0,width:0});return pe(()=>{const{current:s}=t;if(s!==null){let o=0,r=s;do o+=r.offsetTop||0,r=r.offsetParent;while(r);(o!==n.offset||s.offsetWidth!==n.width)&&i({offset:o,width:s.offsetWidth})}},e),n}const De=[];function Ue(t,e){let{width:n,columnWidth:i=200,columnGutter:s=0,rowGutter:o,columnCount:r,maxColumnCount:c}=t;e===void 0&&(e=$e);const d=()=>{const[p,P]=Fe(n,i,s,r,c);return Ke(P,p,s,o??s)},l=g.useRef();l.current===void 0&&(l.current=d());const a=g.useRef(e),m=[n,i,s,o,r,c],u=g.useRef(m),f=!m.every((p,P)=>u.current[P]===p);if(typeof process<"u",f||!e.every((p,P)=>a.current[P]===p)){const p=l.current,P=d();if(a.current=e,u.current=m,f){const C=p.size();for(let y=0;y<C;y++){const w=p.get(y);P.set(y,w!==void 0?w.height:0)}}l.current=P}return l.current}const Ke=function(t,e,n,i){n===void 0&&(n=0),i===void 0&&(i=n);const s=Ie(),o=new Array(t),r=[],c=new Array(t);for(let d=0;d<t;d++)o[d]=0,c[d]=[];return{columnCount:t,columnWidth:e,set:function(d,l){l===void 0&&(l=0);let a=0;for(let u=1;u<o.length;u++)o[u]<o[a]&&(a=u);const m=o[a]||0;o[a]=m+l+i,c[a].push(d),r[d]={left:a*(e+n),top:m,height:l,column:a},s.insert(m,m+l,d)},get:d=>r[d],update:d=>{const l=new Array(t);let a=0,m=0;for(;a<d.length-1;a++){const u=d[a],f=r[u];f.height=d[++a],s.remove(u),s.insert(f.top,f.top+f.height,u),l[f.column]=l[f.column]===void 0?u:Math.min(u,l[f.column])}for(a=0;a<l.length;a++){if(l[a]===void 0)continue;const u=c[a],f=Be(u,l[a]),p=c[a][f],P=r[p];for(o[a]=P.top+P.height+i,m=f+1;m<u.length;m++){const C=u[m],y=r[C];y.top=o[a],o[a]=y.top+y.height+i,s.remove(C),s.insert(y.top,y.top+y.height,C)}}},range:(d,l,a)=>s.search(d,l,(m,u)=>a(m,r[m].left,u)),estimateHeight:(d,l)=>{const a=Math.max(0,Math.max.apply(null,o));return d===s.size?a:a+Math.ceil((d-s.size)/t)*l},shortestColumn:()=>o.length>1?Math.min.apply(null,o):o[0]||0,size(){return s.size},all(){return r}}},Be=(t,e)=>{let n=0,i=t.length-1;for(;n<=i;){const s=n+i>>>1,o=t[s];if(o===e)return s;o<=e?n=s+1:i=s-1}return-1},Fe=function(t,e,n,i,s){return t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=8),i=i||Math.min(Math.floor((t+n)/(e+n)),s||1/0)||1,[Math.floor((t-n*(i-1))/i),i]},$e=[],qe=typeof window<"u"&&"ResizeObserver"in window?window.ResizeObserver:Ce;function Ye(t){const e=re(),n=Qe(t,e);function i(){return n.disconnect()}return g.useEffect(()=>i,[n]),n}function Je(t){t.cancel()}const Qe=se([WeakMap],(t,e)=>{const n=[],i=ee(()=>{n.length>0&&(t.update(n),e(n)),n.length=0}),s=l=>{const a=l.offsetHeight;if(a>0){const m=q.get(l);if(m!==void 0){const u=t.get(m);u!==void 0&&a!==u.height&&n.push(m,a)}}i()},o=new Map,r=l=>{let a=0;for(;a<l.length;a++){const m=l[a],u=q.get(m.target);if(u===void 0)continue;let f=o.get(u);f||(f=ee(s),o.set(u,f)),f(m.target)}},c=new qe(r),d=c.disconnect.bind(c);return c.disconnect=()=>{d(),o.forEach(Je)},c});function Ve(t,e){var n;const{align:i="top",element:s=typeof window<"u"&&window,offset:o=0,height:r=typeof window<"u"?window.innerHeight:0}=e,c=oe({positioner:t,element:s,align:i,offset:o,height:r}),d=g.useRef(()=>{const f=c.current.element;return f&&"current"in f?f.current:f}).current,[l,a]=g.useReducer((f,p)=>{const P={position:f.position,index:f.index,prevTop:f.prevTop};if(p.type==="scrollToIndex"){var C;return{position:c.current.positioner.get((C=p.value)!==null&&C!==void 0?C:-1),index:p.value,prevTop:void 0}}else if(p.type==="setPosition")P.position=p.value;else if(p.type==="setPrevTop")P.prevTop=p.value;else if(p.type==="reset")return ie;return P},ie),m=Pe(a,15);ve(d(),"scroll",()=>{if(!l.position&&l.index){const f=c.current.positioner.get(l.index);f&&a({type:"setPosition",value:f})}});const u=l.index!==void 0&&((n=c.current.positioner.get(l.index))===null||n===void 0?void 0:n.top);return g.useEffect(()=>{const f=d();if(!f)return;const{height:p,align:P,offset:C,positioner:y}=c.current;if(l.position){let w=l.position.top;P==="bottom"?w=w-p+l.position.height:P==="center"&&(w-=(p-l.position.height)/2),f.scrollTo(0,Math.max(0,w+=C));let S=!1;const A=setTimeout(()=>!S&&a({type:"reset"}),400);return()=>{S=!0,clearTimeout(A)}}else if(l.index!==void 0){let w=y.shortestColumn()/y.size()*l.index;l.prevTop&&(w=Math.max(w,l.prevTop+p)),f.scrollTo(0,w),m({type:"setPrevTop",value:w})}},[u,l,c,d,m]),g.useRef(f=>{a({type:"scrollToIndex",value:f})}).current}const ie={index:void 0,position:void 0,prevTop:void 0},Xe=g.createElement;function ot(t){const e=g.useRef(null),n=ge({initialWidth:t.ssrWidth,initialHeight:t.ssrHeight}),i=Ae(e,n),s=Object.assign({offset:i.offset,width:i.width||n[0],height:n[1],containerRef:e},t);s.positioner=Ue(s),s.resizeObserver=Ye(s.positioner);const o=Ve(s.positioner,{height:s.height,offset:i.offset,align:typeof t.scrollToIndex=="object"?t.scrollToIndex.align:void 0}),r=t.scrollToIndex&&(typeof t.scrollToIndex=="number"?t.scrollToIndex:t.scrollToIndex.index);return g.useEffect(()=>{r!==void 0&&o(r)},[r,o]),Xe(ze,s)}export{ot as M};
