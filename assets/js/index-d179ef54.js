import{u as C,r,j as a,B as s,am as u}from"./index-f77a2189.js";import{p as x}from"./product-06798aad.js";import{C as w}from"./index-06473150.js";import{T as z}from"./Table-d908ce94.js";import{I}from"./index-045f6f9f.js";import{P as v}from"./index-edf5fcc5.js";import"./Skeleton-c1cd4f3a.js";import"./styleChecker-a4bf52b3.js";import"./List-7060b1db.js";import"./iconUtil-d73dc3f5.js";import"./conductUtil-626b5303.js";import"./index-3511637a.js";import"./index-e1c30737.js";import"./index-d4bff64c.js";import"./index-a13146b5.js";import"./index-78cce5ed.js";import"./useIcons-a0a55a5d.js";import"./index-ab20f1a6.js";const G="http://localhost:3009",H=()=>{const d=C(),[h,m]=r.useState(!1),[p,_]=r.useState(""),[g,k]=r.useState("productName"),[f,o]=r.useState({list:[],total:0,page:1,pageSize:5}),{list:S,total:j,page:n,pageSize:c}=f,l=async(t,e)=>{o({page:t}),m(!0);let i;p?i=await x(t,e,p,g):i=await x(t,e),i.code==200&&(m(!1),o(i.data))};r.useEffect(()=>{l(n,c)},[]);const y=[{title:"序号",key:"_id",width:80,align:"center",render:(t,e,i)=>i+1},{title:"商品名称",dataIndex:"name"},{title:"主图",dataIndex:"coverImg",render:(t,e)=>a.jsx(I,{src:e.coverImg,alt:e.name,style:{width:60}})},{title:"价格",dataIndex:"price",render(t){return`￥${t}`}},{title:"是否在售",dataIndex:"onSale",render:(t,e)=>e.onSale?"在售":"已下架"},{title:"商品描述",dataIndex:"desc"},{title:"操作",render:(t,e,i)=>a.jsxs("div",{children:[a.jsx(s,{type:"primary",size:"small",onClick:()=>{d(`/module/product/detail?id=${e._id}`)},children:"修改"}),a.jsx(v,{title:"确定删除此项",onCancel:()=>{},onConfirm:()=>{u.info(`删除： _id=${e._id}`)},children:a.jsx(s,{type:"dashed",size:"small",style:{margin:"0 1rem"},children:"删除"})}),a.jsx(s,{size:"small",onClick:()=>{u.info(`修改在售： _id=${e._id}`)},children:e.onSale?"下架":"上架"})]})}];return a.jsx("div",{children:a.jsx(w,{title:"商品列表",extra:a.jsx(s,{type:"primary",size:"small",onClick:()=>{d("/module/product/detail")},children:"新增"}),children:a.jsx(z,{bordered:!0,rowKey:"_id",loading:h,rowClassName:t=>t!=null&&t.onSale?"":"bg-red",columns:y,dataSource:S,pagination:{current:n,total:j,defaultPageSize:c,showSizeChanger:!0,pageSizeOptions:["3","5","10","15"],showQuickJumper:!0,onChange:l,onShowSizeChange:(t,e)=>{o({pageSize:e}),l(n,e)}}})})})};export{H as default,G as serverUrl};
//# sourceMappingURL=index-d179ef54.js.map
