const b="npm2url/dist/index.cjs",N={jsdelivr:t=>`https://cdn.jsdelivr.net/npm/${t}`,unpkg:t=>`https://unpkg.com/${t}`};async function j(t,e){const r=await fetch(t,{signal:e});if(!r.ok)throw r;await r.text()}class Y{constructor(){this.providers={...N},this.provider="jsdelivr"}async getFastestProvider(e=5e3,r=b){const n=new AbortController;let s=0;try{return await new Promise((i,o)=>{Promise.all(Object.entries(this.providers).map(async([c,S])=>{try{await j(S(r),n.signal),i(c)}catch{}})).then(()=>o(new Error("All providers failed"))),s=setTimeout(o,e,new Error("Timed out"))})}finally{n.abort(),clearTimeout(s)}}async findFastestProvider(e,r){return this.provider=await this.getFastestProvider(e,r),this.provider}setProvider(e,r){r?this.providers[e]=r:delete this.providers[e]}getFullUrl(e,r=this.provider){if(e.includes("://"))return e;const n=this.providers[r];if(!n)throw new Error(`Provider ${r} not found`);return n(e)}}class G{constructor(){this.listeners=[]}tap(e){return this.listeners.push(e),()=>this.revoke(e)}revoke(e){const r=this.listeners.indexOf(e);r>=0&&this.listeners.splice(r,1)}revokeAll(){this.listeners.splice(0)}call(...e){for(const r of this.listeners)r(...e)}}const A={"&":"&amp;","<":"&lt;",'"':"&quot;"};function d(t){return t.replace(/[&<"]/g,e=>A[e])}function E(t){return t.replace(/<(\/script>)/g,"\\x3c$2")}function p(t,e){const r=e?Object.entries(e).map(([n,s])=>{if(!(s==null||s===!1))return n=` ${d(n)}`,s===!0?n:`${n}="${d(s)}"`}).filter(Boolean).join(""):"";return`<${t}${r}>`}function T(t){return`</${t}>`}function a(t,e,r){return e==null?p(t,r):p(t,r)+(e||"")+T(t)}function $(t,e){const r=e.map(n=>typeof n=="function"?n.toString():JSON.stringify(n??null)).join(",");return`(${t.toString()})(${r})`}function K(t,e){return t.map(r=>{if(r.type==="script"){const{textContent:n,...s}=r.data;return a("script",n||"",s)}if(r.type==="iife"){const{fn:n,getParams:s}=r.data;return a("script",E($(n,(s==null?void 0:s(e))||[])))}return""})}function W(t){return t.map(e=>e.type==="stylesheet"?a("link",null,{rel:"stylesheet",...e.data}):a("style",e.data))}const k=Math.random().toString(36).slice(2,8);let h=0;function X(){return h+=1,`mm-${k}-${h}`}function Q(){}function Z(t,e){const r=(n,s)=>e(n,()=>{var i;(i=n.children)==null||i.forEach(o=>{r(o,n)})},s);r(t)}function tt(t,...e){const r=(t||"").split(" ").filter(Boolean);return e.forEach(n=>{n&&r.indexOf(n)<0&&r.push(n)}),r.join(" ")}function et(t){if(typeof t=="string"){const r=t;t=n=>n.tagName===r}const e=t;return function(){let n=Array.from(this.childNodes);return e&&(n=n.filter(s=>e(s))),n}}function rt(t,e){return(...r)=>e(t,...r)}function P(){const t={};return t.promise=new Promise((e,r)=>{t.resolve=e,t.reject=r}),t}function C(t){const e={};return function(...n){const s=`${n[0]}`;let i=e[s];return i||(i={value:t(...n)},e[s]=i),i.value}}/*! @gera2ld/jsx-dom v2.2.2 | ISC License */const m=1,w=2,x="http://www.w3.org/2000/svg",l="http://www.w3.org/1999/xlink",F={show:l,actuate:l,href:l},O=t=>typeof t=="string"||typeof t=="number",I=t=>(t==null?void 0:t.vtype)===m,_=t=>(t==null?void 0:t.vtype)===w;function L(t,e,...r){return e=Object.assign({},e,{children:r.length===1?r[0]:r}),M(t,e)}function M(t,e){let r;if(typeof t=="string")r=m;else if(typeof t=="function")r=w;else throw new Error("Invalid VNode type");return{vtype:r,type:t,props:e}}function H(t){return t.children}const V={isSvg:!1};function y(t,e){Array.isArray(e)||(e=[e]),e=e.filter(Boolean),e.length&&t.append(...e)}function J(t,e,r){for(const n in e)if(!(n==="key"||n==="children"||n==="ref"))if(n==="dangerouslySetInnerHTML")t.innerHTML=e[n].__html;else if(n==="innerHTML"||n==="textContent"||n==="innerText"||n==="value"&&["textarea","select"].includes(t.tagName)){const s=e[n];s!=null&&(t[n]=s)}else n.startsWith("on")?t[n.toLowerCase()]=e[n]:D(t,n,e[n],r.isSvg)}const U={className:"class",labelFor:"for"};function D(t,e,r,n){if(e=U[e]||e,r===!0)t.setAttribute(e,"");else if(r===!1)t.removeAttribute(e);else{const s=n?F[e]:void 0;s!==void 0?t.setAttributeNS(s,e,r):t.setAttribute(e,r)}}function B(t){return t.reduce((e,r)=>e.concat(r),[])}function u(t,e){return Array.isArray(t)?B(t.map(r=>u(r,e))):f(t,e)}function f(t,e=V){if(t==null||typeof t=="boolean")return null;if(t instanceof Node)return t;if(_(t)){const{type:r,props:n}=t;if(r===H){const i=document.createDocumentFragment();if(n.children){const o=u(n.children,e);y(i,o)}return i}const s=r(n);return f(s,e)}if(O(t))return document.createTextNode(`${t}`);if(I(t)){let r;const{type:n,props:s}=t;if(!e.isSvg&&n==="svg"&&(e=Object.assign({},e,{isSvg:!0})),e.isSvg?r=document.createElementNS(x,n):r=document.createElement(n),J(r,s,e),s.children){let o=e;e.isSvg&&n==="foreignObject"&&(o=Object.assign({},o,{isSvg:!1}));const c=u(s.children,o);c!=null&&y(r,c)}const{ref:i}=s;return typeof i=="function"&&i(r),r}throw new Error("mount: Invalid Vnode!")}function z(t){return f(t)}function v(...t){return z(L(...t))}const q=C(t=>{document.head.append(v("link",{rel:"preload",as:"script",href:t}))}),g={};async function R(t,e){var r;const n=t.type==="script"&&((r=t.data)==null?void 0:r.src)||"";if(t.loaded||(t.loaded=g[n]),!t.loaded){const s=P();if(t.loaded=s.promise,t.type==="script"&&(document.head.append(v("script",{...t.data,onLoad:()=>s.resolve(),onError:s.reject})),n?g[n]=t.loaded:s.resolve()),t.type==="iife"){const{fn:i,getParams:o}=t.data;i(...(o==null?void 0:o(e))||[]),s.resolve()}}await t.loaded}async function nt(t,e){t.forEach(r=>{var n;r.type==="script"&&((n=r.data)!=null&&n.src)&&q(r.data.src)}),e={getMarkmap:()=>window.markmap,...e};for(const r of t)await R(r,e)}function st(t){return{type:"script",data:{src:t}}}function it(t){return{type:"stylesheet",data:{href:t}}}export{G as H,Y as U,K as a,st as b,it as c,tt as d,Z as e,et as f,X as g,nt as l,Q as n,W as p,rt as w};
