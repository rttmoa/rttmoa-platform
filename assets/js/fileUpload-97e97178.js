import{r as n,j as t,M as b,B as O,G as P,N as S,O as z,m as w,P as C}from"./index-23197e8f.js";let I=[{uid:"1",name:"xxx.png",status:"uploading",url:"http://www.baidu.com/xxx.png",percent:33},{uid:"2",name:"yyy.png",status:"done",url:"	https://designer.mocky.io/static/media/chi-hang-leong-hehYcAGhbmY-unsplash.6914f9ac.jpg"},{uid:"3",name:"zzz.png",status:"error",response:"Server Error 500",url:"	https://designer.mocky.io/static/media/chi-hang-leong-hehYcAGhbmY-unsplash.6914f9ac.jpg"}],R=l=>new Promise((i,c)=>{const s=new FileReader;s.readAsDataURL(l),s.onload=()=>i(s.result),s.onerror=u=>c(u)});const k=()=>{const[l,i]=n.useState(!1),[c,s]=n.useState(""),[u,f]=n.useState(""),[d,x]=n.useState(I),[v,p]=n.useState(!1),j={fileList:d,name:"file",action:"https://run.mocky.io/v3/435e224c-44fb-4773-9faf-380c5e6a2188",headers:{authorization:"authorization-text"},onChange(e){if(x(e.fileList),e.file.status=="uploading"){p(!0);return}e.file.status==="done"?(p(!1),w.success(`${e.file.name} file uploaded successfully`)):e.file.status==="error"&&(p(!1),w.error(`${e.file.name} file upload failed.`))},onRemove(e){const m=d.indexOf(e),g=d.slice(m);g.splice(m,1),x(g)},beforeUpload(e,m){if(e.type==="image/jpg"||e.type,e.size/1024/1024<2)return e.type.includes("image")?new Promise(L=>{const h=new FileReader;h.readAsDataURL(e),h.onload=()=>{const a=document.createElement("img");a.src=h.result,a.onload=()=>{const o=document.createElement("canvas");o.width=a.naturalWidth,o.height=a.naturalHeight;const r=o.getContext("2d");r.drawImage(a,0,0),r.fillStyle="red",r.textBaseline="middle",r.font="33px Arial",r.fillText("Watermark",20,20),o.toBlob(F=>L(F))}}}):!0},progress:{strokeColor:{"0%":"#108ee9","100%":"#87d068"},size:3,format:e=>e&&`${parseFloat(e.toFixed(2))}%`},multiple:!0,maxCount:15,listType:"picture-card",showUploadList:{showRemoveIcon:!0,removeIcon:t.jsx(C,{onClick:e=>console.log(e,"custom removeIcon event")})},onPreview:async function(e){!e.url&&!e.preview&&(e.preview=await R(e.originFileObj)),s(e.url||e.preview),i(!0),f(e.name||e.url.substring(e.url.lastIndexOf("/")+1))}},y=()=>i(!1);return t.jsx(t.Fragment,{children:t.jsxs("div",{children:[t.jsx("h3",{children:t.jsx("b",{children:"文件上传"})}),t.jsx(b,{...j,children:t.jsx(O,{icon:v?t.jsx(P,{}):t.jsx(S,{})})}),t.jsx(z,{open:l,title:u,footer:null,onCancel:y,children:t.jsx("img",{alt:"example",style:{width:"100%"},src:c})})]})})};export{k as default};
