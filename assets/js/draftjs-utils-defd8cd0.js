import{aj as N}from"./@ant-design-63539318.js";import{r as _}from"./draft-js-4a534bd1.js";import{r as F}from"./immutable-c67c16cb.js";var z={exports:{}},A;function J(){return A||(A=1,function(K,q){(function(j,w){K.exports=w(_(),F())})(typeof self<"u"?self:N,function(j,w){return function(C){function o(a){if(d[a])return d[a].exports;var l=d[a]={i:a,l:!1,exports:{}};return C[a].call(l.exports,l,l.exports,o),l.l=!0,l.exports}var d={};return o.m=C,o.c=d,o.d=function(a,l,b){o.o(a,l)||Object.defineProperty(a,l,{configurable:!1,enumerable:!0,get:b})},o.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(l,"a",l),l},o.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},o.p="",o(o.s=3)}([function(C,o){C.exports=j},function(C,o,d){function a(e){var t=e.getSelection(),n=e.getCurrentContent(),r=t.getStartKey(),i=t.getEndKey(),c=n.getBlockMap();return c.toSeq().skipUntil(function(g,f){return f===r}).takeUntil(function(g,f){return f===i}).concat([[i,c.get(i)]])}function l(e){return a(e).toList()}function b(e){if(e)return l(e).get(0)}function L(e){if(e){var t=b(e),n=e.getCurrentContent(),r=n.getBlockMap().toSeq().toList(),i=0;if(r.forEach(function(c,g){c.get("key")===t.get("key")&&(i=g-1)}),i>-1)return r.get(i)}}function E(e){return e?e.getCurrentContent().getBlockMap().toList():new B.List}function s(e){var t=l(e);if(!t.some(function(n){return n.type!==t.get(0).type}))return t.get(0).type}function u(e){var t=S.RichUtils.tryToRemoveBlockStyle(e);return t?S.EditorState.push(e,t,"change-block-type"):e}function m(e){var t="",n=e.getSelection(),r=n.getAnchorOffset(),i=n.getFocusOffset(),c=l(e);if(c.size>0){if(n.getIsBackward()){var g=r;r=i,i=g}for(var f=0;f<c.size;f+=1){var p=f===0?r:0,y=f===c.size-1?i:c.get(f).getText().length;t+=c.get(f).getText().slice(p,y)}}return t}function R(e){var t=e.getCurrentContent(),n=e.getSelection(),r=S.Modifier.removeRange(t,n,"forward"),i=r.getSelectionAfter(),c=r.getBlockForKey(i.getStartKey());return r=S.Modifier.insertText(r,i,`
`,c.getInlineStyleAt(i.getStartOffset()),null),S.EditorState.push(e,r,"insert-fragment")}function M(e){var t=S.Modifier.splitBlock(e.getCurrentContent(),e.getSelection());return u(S.EditorState.push(e,t,"split-block"))}function v(e){var t=e.getCurrentContent().getBlockMap().toList(),n=e.getSelection().merge({anchorKey:t.first().get("key"),anchorOffset:0,focusKey:t.last().get("key"),focusOffset:t.last().getLength()}),r=S.Modifier.removeRange(e.getCurrentContent(),n,"forward");return S.EditorState.push(e,r,"remove-range")}function I(e,t){var n=S.Modifier.setBlockData(e.getCurrentContent(),e.getSelection(),t);return S.EditorState.push(e,n,"change-block-data")}function k(e){var t=new B.Map({}),n=l(e);if(n&&n.size>0)for(var r=0;r<n.size;r+=1){var i=function(c){var g=n.get(c).getData();if(!g||g.size===0)return t=t.clear(),"break";if(c===0)t=g;else if(t.forEach(function(f,p){g.get(p)&&g.get(p)===f||(t=t.delete(p))}),t.size===0)return t=t.clear(),"break"}(r);if(i==="break")break}return t}Object.defineProperty(o,"__esModule",{value:!0}),o.blockRenderMap=void 0,o.getSelectedBlocksMap=a,o.getSelectedBlocksList=l,o.getSelectedBlock=b,o.getBlockBeforeSelectedBlock=L,o.getAllBlocks=E,o.getSelectedBlocksType=s,o.removeSelectedBlocksStyle=u,o.getSelectionText=m,o.addLineBreakRemovingSelection=R,o.insertNewUnstyledBlock=M,o.clearEditorContent=v,o.setBlockData=I,o.getSelectedBlocksMetadata=k;var S=d(0),B=d(6),O=(0,B.Map)({code:{element:"pre"}});o.blockRenderMap=S.DefaultDraftBlockRenderMap.merge(O)},function(C,o,d){function a(s){if(s){var u=s.getType();return u==="unordered-list-item"||u==="ordered-list-item"}return!1}function l(s,u,m){var R=s.getSelection(),M=s.getCurrentContent(),v=M.getBlockMap(),I=(0,E.getSelectedBlocksMap)(s).map(function(k){var S=k.getDepth()+u;return S=Math.max(0,Math.min(S,m)),k.set("depth",S)});return v=v.merge(I),M.merge({blockMap:v,selectionBefore:R,selectionAfter:R})}function b(s,u,m){var R=s.getSelection(),M=void 0;M=R.getIsBackward()?R.getFocusKey():R.getAnchorKey();var v=s.getCurrentContent(),I=v.getBlockForKey(M),k=I.getType();if(k!=="unordered-list-item"&&k!=="ordered-list-item")return s;var S=v.getBlockBefore(M);if(!S||S.getType()!==k)return s;var B=I.getDepth();if(u===1&&B===m)return s;var O=Math.min(S.getDepth()+1,m),e=l(s,u,O);return L.EditorState.push(s,e,"adjust-depth")}Object.defineProperty(o,"__esModule",{value:!0}),o.isListBlock=a,o.changeDepth=b;var L=d(0),E=d(1)},function(C,o,d){C.exports=d(4)},function(C,o,d){var a=d(5),l=d(1),b=d(7),L=function(s){return s&&s.__esModule?s:{default:s}}(b),E=d(2);C.exports={getSelectedBlocksMap:l.getSelectedBlocksMap,getSelectedBlocksList:l.getSelectedBlocksList,getSelectedBlock:l.getSelectedBlock,getBlockBeforeSelectedBlock:l.getBlockBeforeSelectedBlock,getAllBlocks:l.getAllBlocks,getSelectedBlocksType:l.getSelectedBlocksType,removeSelectedBlocksStyle:l.removeSelectedBlocksStyle,getSelectionText:l.getSelectionText,addLineBreakRemovingSelection:l.addLineBreakRemovingSelection,insertNewUnstyledBlock:l.insertNewUnstyledBlock,clearEditorContent:l.clearEditorContent,setBlockData:l.setBlockData,getSelectedBlocksMetadata:l.getSelectedBlocksMetadata,blockRenderMap:l.blockRenderMap,getEntityRange:a.getEntityRange,getCustomStyleMap:a.getCustomStyleMap,toggleCustomInlineStyle:a.toggleCustomInlineStyle,getSelectionEntity:a.getSelectionEntity,extractInlineStyle:a.extractInlineStyle,removeAllInlineStyles:a.removeAllInlineStyles,getSelectionInlineStyle:a.getSelectionInlineStyle,getSelectionCustomInlineStyle:a.getSelectionCustomInlineStyle,handleNewLine:L.default,isListBlock:E.isListBlock,changeDepth:E.changeDepth}},function(C,o,d){function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){var t=e.getSelection();if(t.isCollapsed()){var n={},r=e.getCurrentInlineStyle().toList().toJS();if(r)return["BOLD","ITALIC","UNDERLINE","STRIKETHROUGH","CODE","SUPERSCRIPT","SUBSCRIPT"].forEach(function(p){n[p]=r.indexOf(p)>=0}),n}var i=t.getStartOffset(),c=t.getEndOffset(),g=(0,S.getSelectedBlocksList)(e);if(g.size>0){var f=function(){for(var p={BOLD:!0,ITALIC:!0,UNDERLINE:!0,STRIKETHROUGH:!0,CODE:!0,SUPERSCRIPT:!0,SUBSCRIPT:!0},y=0;y<g.size;y+=1){var h=y===0?i:0,T=y===g.size-1?c:g.get(y).getText().length;h===T&&h===0?(h=1,T=2):h===T&&(h-=1);for(var U=h;U<T;U+=1)(function(D){var x=g.get(y).getInlineStyleAt(D);["BOLD","ITALIC","UNDERLINE","STRIKETHROUGH","CODE","SUPERSCRIPT","SUBSCRIPT"].forEach(function(P){p[P]=p[P]&&x.get(P)===P})})(U)}return{v:p}}();if((f===void 0?"undefined":I(f))==="object")return f.v}return{}}function b(e){var t=void 0,n=e.getSelection(),r=n.getStartOffset(),i=n.getEndOffset();r===i&&r===0?i=1:r===i&&(r-=1);for(var c=(0,S.getSelectedBlock)(e),g=r;g<i;g+=1){var f=c.getEntityAt(g);if(!f){t=void 0;break}if(g===r)t=f;else if(t!==f){t=void 0;break}}return t}function L(e,t){var n=(0,S.getSelectedBlock)(e),r=void 0;return n.findEntityRanges(function(i){return i.get("entity")===t},function(i,c){r={start:i,end:c,text:n.get("text").slice(i,c)}}),r}function E(e,t,n){var r=e.getSelection(),i=Object.keys(B[t]).reduce(function(p,y){return k.Modifier.removeInlineStyle(p,r,y)},e.getCurrentContent()),c=k.EditorState.push(e,i,"changeinline-style"),g=e.getCurrentInlineStyle();if(r.isCollapsed()&&(c=g.reduce(function(p,y){return k.RichUtils.toggleInlineStyle(p,y)},c)),t==="SUPERSCRIPT"||t=="SUBSCRIPT")g.has(n)||(c=k.RichUtils.toggleInlineStyle(c,n));else{var f=t==="bgcolor"?"backgroundColor":t;g.has(f+"-"+n)||(c=k.RichUtils.toggleInlineStyle(c,t.toLowerCase()+"-"+n),O(t,f,n))}return c}function s(e){e&&e.getCurrentContent().getBlockMap().map(function(t){return t.get("characterList")}).toList().flatten().forEach(function(t){t&&t.indexOf("color-")===0?O("color","color",t.substr(6)):t&&t.indexOf("bgcolor-")===0?O("bgcolor","backgroundColor",t.substr(8)):t&&t.indexOf("fontsize-")===0?O("fontSize","fontSize",+t.substr(9)):t&&t.indexOf("fontfamily-")===0&&O("fontFamily","fontFamily",t.substr(11))})}function u(e,t,n){var r=e.getInlineStyleAt(n).toList(),i=r.filter(function(c){return c.startsWith(t.toLowerCase())});if(i&&i.size>0)return i.get(0)}function m(e,t){var n=e.getCurrentInlineStyle().toList(),r=n.filter(function(i){return i.startsWith(t.toLowerCase())});if(r&&r.size>0)return r.get(0)}function R(e,t){if(e&&t&&t.length>0){var n=function(){var r=e.getSelection(),i={};if(r.isCollapsed())return t.forEach(function(y){i[y]=m(e,y)}),{v:i};var c=r.getStartOffset(),g=r.getEndOffset(),f=(0,S.getSelectedBlocksList)(e);if(f.size>0){for(var p=0;p<f.size;p+=1)(function(y){var h=y===0?c:0,T=y===f.size-1?g:f.get(y).getText().length;h===T&&h===0?(h=1,T=2):h===T&&(h-=1);for(var U=h;U<T;U+=1)(function(D){D===h?t.forEach(function(x){i[x]=u(f.get(y),x,D)}):t.forEach(function(x){i[x]&&i[x]!==u(f.get(y),x,D)&&(i[x]=void 0)})})(U)})(p);return{v:i}}}();if((n===void 0?"undefined":I(n))==="object")return n.v}return{}}function M(e){var t=e.getCurrentInlineStyle(),n=e.getCurrentContent();return t.forEach(function(r){n=k.Modifier.removeInlineStyle(n,e.getSelection(),r)}),k.EditorState.push(e,n,"change-inline-style")}Object.defineProperty(o,"__esModule",{value:!0}),o.getCustomStyleMap=void 0;var v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},I=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};o.getSelectionInlineStyle=l,o.getSelectionEntity=b,o.getEntityRange=L,o.toggleCustomInlineStyle=E,o.extractInlineStyle=s,o.getSelectionCustomInlineStyle=R,o.removeAllInlineStyles=M;var k=d(0),S=d(1),B={color:{},bgcolor:{},fontSize:{},fontFamily:{},CODE:{fontFamily:"monospace",wordWrap:"break-word",background:"#f1f1f1",borderRadius:3,padding:"1px 3px"},SUPERSCRIPT:{fontSize:11,position:"relative",top:-8,display:"inline-flex"},SUBSCRIPT:{fontSize:11,position:"relative",bottom:-8,display:"inline-flex"}},O=function(e,t,n){B[e][e.toLowerCase()+"-"+n]=a({},""+t,n)};o.getCustomStyleMap=function(){return v({},B.color,B.bgcolor,B.fontSize,B.fontFamily,{CODE:B.CODE,SUPERSCRIPT:B.SUPERSCRIPT,SUBSCRIPT:B.SUBSCRIPT})}},function(C,o){C.exports=w},function(C,o,d){function a(u){var m=u.getSelection();if(m.isCollapsed()){var R=u.getCurrentContent(),M=m.getStartKey(),v=R.getBlockForKey(M);if(!(0,s.isListBlock)(v)&&v.getType()!=="unstyled"&&v.getLength()===m.getStartOffset())return(0,E.insertNewUnstyledBlock)(u);if((0,s.isListBlock)(v)&&v.getLength()===0){var I=v.getDepth();if(I===0)return(0,E.removeSelectedBlocksStyle)(u);if(I>0)return(0,s.changeDepth)(u,-1,I)}}}function l(u){return u.which===13&&(u.getModifierState("Shift")||u.getModifierState("Alt")||u.getModifierState("Control"))}function b(u,m){return l(m)?u.getSelection().isCollapsed()?L.RichUtils.insertSoftNewline(u):(0,E.addLineBreakRemovingSelection)(u):a(u)}Object.defineProperty(o,"__esModule",{value:!0}),o.default=b;var L=d(0),E=d(1),s=d(2)}])})}(z)),z.exports}export{J as r};
