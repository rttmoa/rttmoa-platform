import{r as t,$ as N,Y as C,cI as ct,Z as ft,G as ze,X as H,bn as Xe,a5 as G,d0 as Tt,d1 as zt,bk as Re,V as Dt,dA as rt,cQ as nt}from"./index-83fc08b5.js";var vt=t.forwardRef(function(e,o){var u=e.height,l=e.offsetY,h=e.offsetX,S=e.children,f=e.prefixCls,s=e.onInnerResize,b=e.innerProps,g=e.rtl,R=e.extra,n={},m={display:"flex",flexDirection:"column"};return l!==void 0&&(n={height:u,position:"relative",overflow:"hidden"},m=N(N({},m),{},C(C(C(C(C({transform:"translateY(".concat(l,"px)")},g?"marginRight":"marginLeft",-h),"position","absolute"),"left",0),"right",0),"top",0))),t.createElement("div",{style:n},t.createElement(ct,{onResize:function(v){var c=v.offsetHeight;c&&s&&s()}},t.createElement("div",ft({style:m,className:ze(C({},"".concat(f,"-holder-inner"),f)),ref:o},b),S,R)))});vt.displayName="Filler";function Ct(e){var o=e.children,u=e.setRef,l=t.useCallback(function(h){u(h)},[]);return t.cloneElement(o,{ref:l})}function Ht(e,o,u,l,h,S,f,s){var b=s.getKey;return e.slice(o,u+1).map(function(g,R){var n=o+R,m=f(g,n,{style:{width:l},offsetX:h}),a=b(g);return t.createElement(Ct,{key:a,setRef:function(c){return S(g,c)}},m)})}function Pt(e,o,u){var l=e.length,h=o.length,S,f;if(l===0&&h===0)return null;l<h?(S=e,f=o):(S=o,f=e);var s={__EMPTY_ITEM__:!0};function b(v){return v!==void 0?u(v):s}for(var g=null,R=Math.abs(l-h)!==1,n=0;n<f.length;n+=1){var m=b(S[n]),a=b(f[n]);if(m!==a){g=n,R=R||m!==b(f[n+1]);break}}return g===null?null:{index:g,multiple:R}}function It(e,o,u){var l=t.useState(e),h=H(l,2),S=h[0],f=h[1],s=t.useState(null),b=H(s,2),g=b[0],R=b[1];return t.useEffect(function(){var n=Pt(S||[],e||[],o);(n==null?void 0:n.index)!==void 0&&(u==null||u(n.index),R(e[n.index])),f(e)},[e]),[g]}var at=(typeof navigator>"u"?"undefined":Xe(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const dt=function(e,o,u,l){var h=t.useRef(!1),S=t.useRef(null);function f(){clearTimeout(S.current),h.current=!0,S.current=setTimeout(function(){h.current=!1},50)}var s=t.useRef({top:e,bottom:o,left:u,right:l});return s.current.top=e,s.current.bottom=o,s.current.left=u,s.current.right=l,function(b,g){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=b?g<0&&s.current.left||g>0&&s.current.right:g<0&&s.current.top||g>0&&s.current.bottom;return R&&n?(clearTimeout(S.current),h.current=!1):(!n||h.current)&&f(),!h.current&&n}};function Ot(e,o,u,l,h,S,f){var s=t.useRef(0),b=t.useRef(null),g=t.useRef(null),R=t.useRef(!1),n=dt(o,u,l,h);function m(d,y){if(G.cancel(b.current),!n(!1,y)){var w=d;if(!w._virtualHandled)w._virtualHandled=!0;else return;s.current+=y,g.current=y,at||w.preventDefault(),b.current=G(function(){var I=R.current?10:1;f(s.current*I,!1),s.current=0})}}function a(d,y){f(y,!0),at||d.preventDefault()}var v=t.useRef(null),c=t.useRef(null);function M(d){if(e){G.cancel(c.current),c.current=G(function(){v.current=null},2);var y=d.deltaX,w=d.deltaY,I=d.shiftKey,O=y,x=w;(v.current==="sx"||!v.current&&I&&w&&!y)&&(O=w,x=0,v.current="sx");var $=Math.abs(O),F=Math.abs(x);v.current===null&&(v.current=S&&$>F?"x":"y"),v.current==="y"?m(d,x):a(d,O)}}function E(d){e&&(R.current=d.detail===g.current)}return[M,E]}function $t(e,o,u,l){var h=t.useMemo(function(){return[new Map,[]]},[e,u.id,l]),S=H(h,2),f=S[0],s=S[1],b=function(R){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:R,m=f.get(R),a=f.get(n);if(m===void 0||a===void 0)for(var v=e.length,c=s.length;c<v;c+=1){var M,E=e[c],d=o(E);f.set(d,c);var y=(M=u.get(d))!==null&&M!==void 0?M:l;if(s[c]=(s[c-1]||0)+y,d===R&&(m=c),d===n&&(a=c),m!==void 0&&a!==void 0)break}return{top:s[m-1]||0,bottom:s[a]}};return b}var kt=function(){function e(){zt(this,e),C(this,"maps",void 0),C(this,"id",0),C(this,"diffRecords",new Map),this.maps=Object.create(null)}return Tt(e,[{key:"set",value:function(u,l){this.diffRecords.set(u,this.maps[u]),this.maps[u]=l,this.id+=1}},{key:"get",value:function(u){return this.maps[u]}},{key:"resetRecord",value:function(){this.diffRecords.clear()}},{key:"getRecord",value:function(){return this.diffRecords}}]),e}();function it(e){var o=parseFloat(e);return isNaN(o)?0:o}function Nt(e,o,u){var l=t.useState(0),h=H(l,2),S=h[0],f=h[1],s=t.useRef(new Map),b=t.useRef(new kt),g=t.useRef(0);function R(){g.current+=1}function n(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;R();var v=function(){var E=!1;s.current.forEach(function(d,y){if(d&&d.offsetParent){var w=d.offsetHeight,I=getComputedStyle(d),O=I.marginTop,x=I.marginBottom,$=it(O),F=it(x),V=w+$+F;b.current.get(y)!==V&&(b.current.set(y,V),E=!0)}}),E&&f(function(d){return d+1})};if(a)v();else{g.current+=1;var c=g.current;Promise.resolve().then(function(){c===g.current&&v()})}}function m(a,v){var c=e(a),M=s.current.get(c);v?(s.current.set(c,v),n()):s.current.delete(c),!M!=!v&&(v?o==null||o(a):u==null||u(a))}return t.useEffect(function(){return R},[]),[m,n,b.current,S]}var ut=14/15;function Bt(e,o,u){var l=t.useRef(!1),h=t.useRef(0),S=t.useRef(0),f=t.useRef(null),s=t.useRef(null),b,g=function(a){if(l.current){var v=Math.ceil(a.touches[0].pageX),c=Math.ceil(a.touches[0].pageY),M=h.current-v,E=S.current-c,d=Math.abs(M)>Math.abs(E);d?h.current=v:S.current=c;var y=u(d,d?M:E,!1,a);y&&a.preventDefault(),clearInterval(s.current),y&&(s.current=setInterval(function(){d?M*=ut:E*=ut;var w=Math.floor(d?M:E);(!u(d,w,!0)||Math.abs(w)<=.1)&&clearInterval(s.current)},16))}},R=function(){l.current=!1,b()},n=function(a){b(),a.touches.length===1&&!l.current&&(l.current=!0,h.current=Math.ceil(a.touches[0].pageX),S.current=Math.ceil(a.touches[0].pageY),f.current=a.target,f.current.addEventListener("touchmove",g,{passive:!1}),f.current.addEventListener("touchend",R,{passive:!0}))};b=function(){f.current&&(f.current.removeEventListener("touchmove",g),f.current.removeEventListener("touchend",R))},Re(function(){return e&&o.current.addEventListener("touchstart",n,{passive:!0}),function(){var m;(m=o.current)===null||m===void 0||m.removeEventListener("touchstart",n),b(),clearInterval(s.current)}},[e])}function ot(e){return Math.floor(Math.pow(e,.5))}function Fe(e,o){var u="touches"in e?e.touches[0]:e;return u[o?"pageX":"pageY"]-window[o?"scrollX":"scrollY"]}function Yt(e,o,u){t.useEffect(function(){var l=o.current;if(e&&l){var h=!1,S,f,s=function(){G.cancel(S)},b=function m(){s(),S=G(function(){u(f),m()})},g=function(a){if(!(a.target.draggable||a.button!==0)){var v=a;v._virtualHandled||(v._virtualHandled=!0,h=!0)}},R=function(){h=!1,s()},n=function(a){if(h){var v=Fe(a,!1),c=l.getBoundingClientRect(),M=c.top,E=c.bottom;if(v<=M){var d=M-v;f=-ot(d),b()}else if(v>=E){var y=v-E;f=ot(y),b()}else s()}};return l.addEventListener("mousedown",g),l.ownerDocument.addEventListener("mouseup",R),l.ownerDocument.addEventListener("mousemove",n),function(){l.removeEventListener("mousedown",g),l.ownerDocument.removeEventListener("mouseup",R),l.ownerDocument.removeEventListener("mousemove",n),s()}}},[e])}var Ft=10;function Xt(e,o,u,l,h,S,f,s){var b=t.useRef(),g=t.useState(null),R=H(g,2),n=R[0],m=R[1];return Re(function(){if(n&&n.times<Ft){if(!e.current){m(function(re){return N({},re)});return}S();var a=n.targetAlign,v=n.originAlign,c=n.index,M=n.offset,E=e.current.clientHeight,d=!1,y=a,w=null;if(E){for(var I=a||v,O=0,x=0,$=0,F=Math.min(o.length-1,c),V=0;V<=F;V+=1){var B=h(o[V]);x=O;var q=u.get(B);$=x+(q===void 0?l:q),O=$}for(var A=I==="top"?M:E-M,J=F;J>=0;J-=1){var ee=h(o[J]),P=u.get(ee);if(P===void 0){d=!0;break}if(A-=P,A<=0)break}switch(I){case"top":w=x-M;break;case"bottom":w=$-E+M;break;default:{var te=e.current.scrollTop,k=te+E;x<te?y="top":$>k&&(y="bottom")}}w!==null&&f(w),w!==n.lastTop&&(d=!0)}d&&m(N(N({},n),{},{times:n.times+1,targetAlign:y,lastTop:w}))}},[n,e.current]),function(a){if(a==null){s();return}if(G.cancel(b.current),typeof a=="number")f(a);else if(a&&Xe(a)==="object"){var v,c=a.align;"index"in a?v=a.index:v=o.findIndex(function(d){return h(d)===a.key});var M=a.offset,E=M===void 0?0:M;m({times:0,index:v,offset:E,originAlign:c})}}}var lt=t.forwardRef(function(e,o){var u=e.prefixCls,l=e.rtl,h=e.scrollOffset,S=e.scrollRange,f=e.onStartMove,s=e.onStopMove,b=e.onScroll,g=e.horizontal,R=e.spinSize,n=e.containerSize,m=e.style,a=e.thumbStyle,v=e.showScrollBar,c=t.useState(!1),M=H(c,2),E=M[0],d=M[1],y=t.useState(null),w=H(y,2),I=w[0],O=w[1],x=t.useState(null),$=H(x,2),F=$[0],V=$[1],B=!l,q=t.useRef(),A=t.useRef(),J=t.useState(v),ee=H(J,2),P=ee[0],te=ee[1],k=t.useRef(),re=function(){v===!0||v===!1||(clearTimeout(k.current),te(!0),k.current=setTimeout(function(){te(!1)},3e3))},j=S-n||0,X=n-R||0,oe=t.useMemo(function(){if(h===0||j===0)return 0;var Y=h/j;return Y*X},[h,j,X]),_=function(T){T.stopPropagation(),T.preventDefault()},K=t.useRef({top:oe,dragging:E,pageY:I,startTop:F});K.current={top:oe,dragging:E,pageY:I,startTop:F};var le=function(T){d(!0),O(Fe(T,g)),V(K.current.top),f(),T.stopPropagation(),T.preventDefault()};t.useEffect(function(){var Y=function(he){he.preventDefault()},T=q.current,z=A.current;return T.addEventListener("touchstart",Y,{passive:!1}),z.addEventListener("touchstart",le,{passive:!1}),function(){T.removeEventListener("touchstart",Y),z.removeEventListener("touchstart",le)}},[]);var ve=t.useRef();ve.current=j;var pe=t.useRef();pe.current=X,t.useEffect(function(){if(E){var Y,T=function(he){var se=K.current,De=se.dragging,be=se.pageY,Me=se.startTop;G.cancel(Y);var ge=q.current.getBoundingClientRect(),Ce=n/(g?ge.width:ge.height);if(De){var Z=(Fe(he,g)-be)*Ce,ce=Me;!B&&g?ce-=Z:ce+=Z;var Ee=ve.current,ye=pe.current,He=ye?ce/ye:0,ae=Math.ceil(He*Ee);ae=Math.max(ae,0),ae=Math.min(ae,Ee),Y=G(function(){b(ae,g)})}},z=function(){d(!1),s()};return window.addEventListener("mousemove",T,{passive:!0}),window.addEventListener("touchmove",T,{passive:!0}),window.addEventListener("mouseup",z,{passive:!0}),window.addEventListener("touchend",z,{passive:!0}),function(){window.removeEventListener("mousemove",T),window.removeEventListener("touchmove",T),window.removeEventListener("mouseup",z),window.removeEventListener("touchend",z),G.cancel(Y)}}},[E]),t.useEffect(function(){return re(),function(){clearTimeout(k.current)}},[h]),t.useImperativeHandle(o,function(){return{delayHidden:re}});var U="".concat(u,"-scrollbar"),W={position:"absolute",visibility:P?null:"hidden"},de={position:"absolute",borderRadius:99,background:"var(--rc-virtual-list-scrollbar-bg, rgba(0, 0, 0, 0.5))",cursor:"pointer",userSelect:"none"};return g?(Object.assign(W,{height:8,left:0,right:0,bottom:0}),Object.assign(de,C({height:"100%",width:R},B?"left":"right",oe))):(Object.assign(W,C({width:8,top:0,bottom:0},B?"right":"left",0)),Object.assign(de,{width:"100%",height:R,top:oe})),t.createElement("div",{ref:q,className:ze(U,C(C(C({},"".concat(U,"-horizontal"),g),"".concat(U,"-vertical"),!g),"".concat(U,"-visible"),P)),style:N(N({},W),m),onMouseDown:_,onMouseMove:re},t.createElement("div",{ref:A,className:ze("".concat(U,"-thumb"),C({},"".concat(U,"-thumb-moving"),E)),style:N(N({},de),a),onMouseDown:le}))}),Wt=20;function st(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,u=e/o*e;return isNaN(u)&&(u=0),u=Math.max(u,Wt),Math.floor(u)}var jt=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles","showScrollBar"],Vt=[],At={overflowY:"auto",overflowAnchor:"none"};function Kt(e,o){var u=e.prefixCls,l=u===void 0?"rc-virtual-list":u,h=e.className,S=e.height,f=e.itemHeight,s=e.fullHeight,b=s===void 0?!0:s,g=e.style,R=e.data,n=e.children,m=e.itemKey,a=e.virtual,v=e.direction,c=e.scrollWidth,M=e.component,E=M===void 0?"div":M,d=e.onScroll,y=e.onVirtualScroll,w=e.onVisibleChange,I=e.innerProps,O=e.extraRender,x=e.styles,$=e.showScrollBar,F=$===void 0?"optional":$,V=Dt(e,jt),B=t.useCallback(function(i){return typeof m=="function"?m(i):i==null?void 0:i[m]},[m]),q=Nt(B,null,null),A=H(q,4),J=A[0],ee=A[1],P=A[2],te=A[3],k=!!(a!==!1&&S&&f),re=t.useMemo(function(){return Object.values(P.maps).reduce(function(i,r){return i+r},0)},[P.id,P.maps]),j=k&&R&&(Math.max(f*R.length,re)>S||!!c),X=v==="rtl",oe=ze(l,C({},"".concat(l,"-rtl"),X),h),_=R||Vt,K=t.useRef(),le=t.useRef(),ve=t.useRef(),pe=t.useState(0),U=H(pe,2),W=U[0],de=U[1],Y=t.useState(0),T=H(Y,2),z=T[0],ne=T[1],he=t.useState(!1),se=H(he,2),De=se[0],be=se[1],Me=function(){be(!0)},ge=function(){be(!1)},Ce={getKey:B};function Z(i){de(function(r){var p;typeof i=="function"?p=i(r):p=i;var L=pt(p);return K.current.scrollTop=L,L})}var ce=t.useRef({start:0,end:_.length}),Ee=t.useRef(),ye=It(_,B),He=H(ye,1),ae=He[0];Ee.current=ae;var we=t.useMemo(function(){if(!k)return{scrollHeight:void 0,start:0,end:_.length-1,offset:void 0};if(!j){var i;return{scrollHeight:((i=le.current)===null||i===void 0?void 0:i.offsetHeight)||0,start:0,end:_.length-1,offset:void 0}}for(var r=0,p,L,D,Te=_.length,ue=0;ue<Te;ue+=1){var Be=_[ue],_t=B(Be),tt=P.get(_t),Ye=r+(tt===void 0?f:tt);Ye>=W&&p===void 0&&(p=ue,L=r),Ye>W+S&&D===void 0&&(D=ue),r=Ye}return p===void 0&&(p=0,L=0,D=Math.ceil(S/f)),D===void 0&&(D=_.length-1),D=Math.min(D+1,_.length-1),{scrollHeight:r,start:p,end:D,offset:L}},[j,k,W,_,te,S]),ie=we.scrollHeight,fe=we.start,Se=we.end,We=we.offset;ce.current.start=fe,ce.current.end=Se,t.useLayoutEffect(function(){var i=P.getRecord();if(i.size===1){var r=Array.from(i.keys())[0],p=i.get(r),L=_[fe];if(L&&p===void 0){var D=B(L);if(D===r){var Te=P.get(r),ue=Te-f;Z(function(Be){return Be+ue})}}}P.resetRecord()},[ie]);var ht=t.useState({width:0,height:S}),je=H(ht,2),Q=je[0],gt=je[1],St=function(r){gt({width:r.offsetWidth,height:r.offsetHeight})},Ve=t.useRef(),Ae=t.useRef(),mt=t.useMemo(function(){return st(Q.width,c)},[Q.width,c]),Rt=t.useMemo(function(){return st(Q.height,ie)},[Q.height,ie]),Pe=ie-S,Ie=t.useRef(Pe);Ie.current=Pe;function pt(i){var r=i;return Number.isNaN(Ie.current)||(r=Math.min(r,Ie.current)),r=Math.max(r,0),r}var xe=W<=0,Le=W>=Pe,Ke=z<=0,Ge=z>=c,bt=dt(xe,Le,Ke,Ge),Oe=function(){return{x:X?-z:z,y:W}},$e=t.useRef(Oe()),_e=rt(function(i){if(y){var r=N(N({},Oe()),i);($e.current.x!==r.x||$e.current.y!==r.y)&&(y(r),$e.current=r)}});function Ue(i,r){var p=i;r?(nt.flushSync(function(){ne(p)}),_e()):Z(p)}function Mt(i){var r=i.currentTarget.scrollTop;r!==W&&Z(r),d==null||d(i),_e()}var ke=function(r){var p=r,L=c?c-Q.width:0;return p=Math.max(p,0),p=Math.min(p,L),p},Et=rt(function(i,r){r?(nt.flushSync(function(){ne(function(p){var L=p+(X?-i:i);return ke(L)})}),_e()):Z(function(p){var L=p+i;return L})}),yt=Ot(k,xe,Le,Ke,Ge,!!c,Et),Ze=H(yt,2),Ne=Ze[0],Qe=Ze[1];Bt(k,K,function(i,r,p,L){var D=L;return bt(i,r,p)?!1:!D||!D._virtualHandled?(D&&(D._virtualHandled=!0),Ne({preventDefault:function(){},deltaX:i?r:0,deltaY:i?0:r}),!0):!1}),Yt(j,K,function(i){Z(function(r){return r+i})}),Re(function(){function i(p){var L=xe&&p.detail<0,D=Le&&p.detail>0;k&&!L&&!D&&p.preventDefault()}var r=K.current;return r.addEventListener("wheel",Ne,{passive:!1}),r.addEventListener("DOMMouseScroll",Qe,{passive:!0}),r.addEventListener("MozMousePixelScroll",i,{passive:!1}),function(){r.removeEventListener("wheel",Ne),r.removeEventListener("DOMMouseScroll",Qe),r.removeEventListener("MozMousePixelScroll",i)}},[k,xe,Le]),Re(function(){if(c){var i=ke(z);ne(i),_e({x:i})}},[Q.width,c]);var qe=function(){var r,p;(r=Ve.current)===null||r===void 0||r.delayHidden(),(p=Ae.current)===null||p===void 0||p.delayHidden()},Je=Xt(K,_,P,f,B,function(){return ee(!0)},Z,qe);t.useImperativeHandle(o,function(){return{nativeElement:ve.current,getScrollInfo:Oe,scrollTo:function(r){function p(L){return L&&Xe(L)==="object"&&("left"in L||"top"in L)}p(r)?(r.left!==void 0&&ne(ke(r.left)),Je(r.top)):Je(r)}}}),Re(function(){if(w){var i=_.slice(fe,Se+1);w(i,_)}},[fe,Se,_]);var wt=$t(_,B,P,f),xt=O==null?void 0:O({start:fe,end:Se,virtual:j,offsetX:z,offsetY:We,rtl:X,getSize:wt}),Lt=Ht(_,fe,Se,c,z,J,n,Ce),me=null;S&&(me=N(C({},b?"height":"maxHeight",S),At),k&&(me.overflowY="hidden",c&&(me.overflowX="hidden"),De&&(me.pointerEvents="none")));var et={};return X&&(et.dir="rtl"),t.createElement("div",ft({ref:ve,style:N(N({},g),{},{position:"relative"}),className:oe},et,V),t.createElement(ct,{onResize:St},t.createElement(E,{className:"".concat(l,"-holder"),style:me,ref:K,onScroll:Mt,onMouseEnter:qe},t.createElement(vt,{prefixCls:l,height:ie,offsetX:z,offsetY:We,scrollWidth:c,onInnerResize:ee,ref:le,innerProps:I,rtl:X,extra:xt},Lt))),j&&ie>S&&t.createElement(lt,{ref:Ve,prefixCls:l,scrollOffset:W,scrollRange:ie,rtl:X,onScroll:Ue,onStartMove:Me,onStopMove:ge,spinSize:Rt,containerSize:Q.height,style:x==null?void 0:x.verticalScrollBar,thumbStyle:x==null?void 0:x.verticalScrollBarThumb,showScrollBar:F}),j&&c>Q.width&&t.createElement(lt,{ref:Ae,prefixCls:l,scrollOffset:z,scrollRange:c,rtl:X,onScroll:Ue,onStartMove:Me,onStopMove:ge,spinSize:mt,containerSize:Q.width,horizontal:!0,style:x==null?void 0:x.horizontalScrollBar,thumbStyle:x==null?void 0:x.horizontalScrollBarThumb,showScrollBar:F}))}var Gt=t.forwardRef(Kt);Gt.displayName="List";export{Gt as L};
//# sourceMappingURL=List-4fbd63eb.js.map
