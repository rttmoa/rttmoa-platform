import{d as u,h as M,e as F}from"./@babel-c46ce09a.js";import{P as fe}from"./@rc-component-60bdd203.js";import{r as n,a as f}from"./react-12b51ca5.js";import{c as x}from"./classnames-3ded05b8.js";import{e as de,B as me,D as ve,W as J,K as Q}from"./rc-util-8976b5fa.js";import{C as te}from"./rc-motion-25d44171.js";var ae=n.createContext({});function Z(e,a,t){var o=a;return!o&&t&&(o="".concat(e,"-").concat(t)),o}function p(e,a){var t=e["page".concat(a?"Y":"X","Offset")],o="scroll".concat(a?"Top":"Left");if(typeof t!="number"){var l=e.document;t=l.documentElement[o],typeof t!="number"&&(t=l.body[o])}return t}function Ce(e){var a=e.getBoundingClientRect(),t={left:a.left,top:a.top},o=e.ownerDocument,l=o.defaultView||o.parentWindow;return t.left+=p(l),t.top+=p(l,!0),t}const ye=n.memo(function(e){var a=e.children;return a},function(e,a){var t=a.shouldUpdate;return!t});var ee={width:0,height:0,overflow:"hidden",outline:"none"},be=f.forwardRef(function(e,a){var t=e.prefixCls,o=e.className,l=e.style,i=e.title,m=e.ariaId,d=e.footer,v=e.closable,R=e.closeIcon,y=e.onClose,g=e.children,b=e.bodyStyle,N=e.bodyProps,k=e.modalRender,w=e.onMouseDown,A=e.onMouseUp,U=e.holderRef,P=e.visible,O=e.forceRender,C=e.width,I=e.height,s=e.classNames,c=e.styles,z=f.useContext(ae),B=z.panel,j=de(U,B),$=n.useRef(),V=n.useRef();f.useImperativeHandle(a,function(){return{focus:function(){var S;(S=$.current)===null||S===void 0||S.focus()},changeActive:function(S){var W=document,K=W.activeElement;S&&K===V.current?$.current.focus():!S&&K===$.current&&V.current.focus()}}});var h={};C!==void 0&&(h.width=C),I!==void 0&&(h.height=I);var E;d&&(E=f.createElement("div",{className:x("".concat(t,"-footer"),s==null?void 0:s.footer),style:u({},c==null?void 0:c.footer)},d));var D;i&&(D=f.createElement("div",{className:x("".concat(t,"-header"),s==null?void 0:s.header),style:u({},c==null?void 0:c.header)},f.createElement("div",{className:"".concat(t,"-title"),id:m},i)));var _;v&&(_=f.createElement("button",{type:"button",onClick:y,"aria-label":"Close",className:"".concat(t,"-close")},R||f.createElement("span",{className:"".concat(t,"-close-x")})));var T=f.createElement("div",{className:x("".concat(t,"-content"),s==null?void 0:s.content),style:c==null?void 0:c.content},_,D,f.createElement("div",M({className:x("".concat(t,"-body"),s==null?void 0:s.body),style:u(u({},b),c==null?void 0:c.body)},N),g),E);return f.createElement("div",{key:"dialog-element",role:"dialog","aria-labelledby":i?m:null,"aria-modal":"true",ref:j,style:u(u({},l),h),className:x(t,o),onMouseDown:w,onMouseUp:A},f.createElement("div",{tabIndex:0,ref:$,style:ee,"aria-hidden":"true"}),f.createElement(ye,{shouldUpdate:P||O},k?k(T):T),f.createElement("div",{tabIndex:0,ref:V,style:ee,"aria-hidden":"true"}))}),ne=n.forwardRef(function(e,a){var t=e.prefixCls,o=e.title,l=e.style,i=e.className,m=e.visible,d=e.forceRender,v=e.destroyOnClose,R=e.motionName,y=e.ariaId,g=e.onVisibleChanged,b=e.mousePosition,N=n.useRef(),k=n.useState(),w=F(k,2),A=w[0],U=w[1],P={};A&&(P.transformOrigin=A);function O(){var C=Ce(N.current);U(b?"".concat(b.x-C.left,"px ").concat(b.y-C.top,"px"):"")}return n.createElement(te,{visible:m,onVisibleChanged:g,onAppearPrepare:O,onEnterPrepare:O,forceRender:d,motionName:R,removeOnLeave:v,ref:N},function(C,I){var s=C.className,c=C.style;return n.createElement(be,M({},e,{ref:a,title:o,ariaId:y,prefixCls:t,holderRef:I,style:u(u(u({},c),l),P),className:x(i,s)}))})});ne.displayName="Content";function Ne(e){var a=e.prefixCls,t=e.style,o=e.visible,l=e.maskProps,i=e.motionName,m=e.className;return n.createElement(te,{key:"mask",visible:o,motionName:i,leavedClassName:"".concat(a,"-mask-hidden")},function(d,v){var R=d.className,y=d.style;return n.createElement("div",M({ref:v,style:u(u({},y),t),className:x("".concat(a,"-mask"),R,m)},l))})}function he(e){var a=e.prefixCls,t=a===void 0?"rc-dialog":a,o=e.zIndex,l=e.visible,i=l===void 0?!1:l,m=e.keyboard,d=m===void 0?!0:m,v=e.focusTriggerAfterClose,R=v===void 0?!0:v,y=e.wrapStyle,g=e.wrapClassName,b=e.wrapProps,N=e.onClose,k=e.afterOpenChange,w=e.afterClose,A=e.transitionName,U=e.animation,P=e.closable,O=P===void 0?!0:P,C=e.mask,I=C===void 0?!0:C,s=e.maskTransitionName,c=e.maskAnimation,z=e.maskClosable,B=z===void 0?!0:z,j=e.maskStyle,$=e.maskProps,V=e.rootClassName,h=e.classNames,E=e.styles,D=n.useRef(),_=n.useRef(),T=n.useRef(),H=n.useState(i),S=F(H,2),W=S[0],K=S[1],oe=me();function le(){J(_.current,document.activeElement)||(D.current=document.activeElement)}function ie(){if(!J(_.current,document.activeElement)){var r;(r=T.current)===null||r===void 0||r.focus()}}function re(r){if(r)ie();else{if(K(!1),I&&D.current&&R){try{D.current.focus({preventScroll:!0})}catch{}D.current=null}W&&(w==null||w())}k==null||k(r)}function X(r){N==null||N(r)}var L=n.useRef(!1),Y=n.useRef(),se=function(){clearTimeout(Y.current),L.current=!0},ce=function(){Y.current=setTimeout(function(){L.current=!1})},G=null;B&&(G=function(q){L.current?L.current=!1:_.current===q.target&&X(q)});function ue(r){if(d&&r.keyCode===Q.ESC){r.stopPropagation(),X(r);return}i&&r.keyCode===Q.TAB&&T.current.changeActive(!r.shiftKey)}return n.useEffect(function(){i&&(K(!0),le())},[i]),n.useEffect(function(){return function(){clearTimeout(Y.current)}},[]),n.createElement("div",M({className:x("".concat(t,"-root"),V)},ve(e,{data:!0})),n.createElement(Ne,{prefixCls:t,visible:I&&i,motionName:Z(t,s,c),style:u(u({zIndex:o},j),E==null?void 0:E.mask),maskProps:$,className:h==null?void 0:h.mask}),n.createElement("div",M({tabIndex:-1,onKeyDown:ue,className:x("".concat(t,"-wrap"),g,h==null?void 0:h.wrapper),ref:_,onClick:G,style:u(u(u({zIndex:o},y),E==null?void 0:E.wrapper),{},{display:W?null:"none"})},b),n.createElement(ne,M({},e,{onMouseDown:se,onMouseUp:ce,ref:T,closable:O,ariaId:oe,prefixCls:t,visible:i&&W,onClose:X,onVisibleChanged:re,motionName:Z(t,A,U)}))))}var Re=function(a){var t=a.visible,o=a.getContainer,l=a.forceRender,i=a.destroyOnClose,m=i===void 0?!1:i,d=a.afterClose,v=a.panelRef,R=n.useState(t),y=F(R,2),g=y[0],b=y[1],N=n.useMemo(function(){return{panel:v}},[v]);return n.useEffect(function(){t&&b(!0)},[t]),!l&&m&&!g?null:n.createElement(ae.Provider,{value:N},n.createElement(fe,{open:t||l||g,autoDestroy:!1,getContainer:o,autoLock:t||g},n.createElement(he,M({},a,{destroyOnClose:m,afterClose:function(){d==null||d(),b(!1)}}))))};Re.displayName="Dialog";export{Re as D,be as P};
