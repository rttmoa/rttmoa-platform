{"version":3,"file":"tableBasicHigt-df806812.js","sources":["../../../src/views/list/basicTable/components/tableBasicHigt.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react'\r\nimport { Button, Input, Space, Table, Tag, Tooltip } from 'antd'\r\nimport { DeleteOutlined, DownloadOutlined, EditOutlined, EyeOutlined, PlusOutlined, SearchOutlined } from '@ant-design/icons'\r\nimport type { GetProp, TableProps } from 'antd'\r\nimport qs from 'qs'\r\n\r\ntype TableRowSelection<T> = TableProps<T>['rowSelection']\r\ntype TablePaginationConfig = Exclude<GetProp<TableProps, 'pagination'>, boolean>\r\n// interface DataType {\r\n// \tkey: string\r\n// \tname: string\r\n// \tage: number\r\n// \taddress: string\r\n// \ttags: string[]\r\n// \tchildren?: DataType[]\r\n// }\r\ninterface DataType {\r\n\tgender: string\r\n\tname: {\r\n\t\ttitle: string\r\n\t\tfirst: string\r\n\t\tlast: string\r\n\t}\r\n\tlocation: {\r\n\t\tstreet: {\r\n\t\t\tnumber: number\r\n\t\t\tname: string\r\n\t\t}\r\n\t\tcity: string\r\n\t\tstate: string\r\n\t\tcountry: string\r\n\t\tpostcode: number\r\n\t\tcoordinates: {\r\n\t\t\tlatitude: string\r\n\t\t\tlongitude: string\r\n\t\t}\r\n\t\ttimezone: {\r\n\t\t\toffset: string\r\n\t\t\tdescription: string\r\n\t\t}\r\n\t}\r\n\temail: string\r\n\tlogin: {\r\n\t\tuuid: string\r\n\t\tusername: string\r\n\t\tpassword: string\r\n\t\tsalt: string\r\n\t\tmd5: string\r\n\t\tsha1: string\r\n\t\tsha256: string\r\n\t}\r\n\tdob: {\r\n\t\tdate: string\r\n\t\tage: number\r\n\t}\r\n\tregistered: {\r\n\t\tdate: string\r\n\t\tage: number\r\n\t}\r\n\tphone: string\r\n\tcell: string\r\n\tid: {\r\n\t\tname: string\r\n\t\tvalue: string\r\n\t}\r\n\tpicture: {\r\n\t\tlarge: string\r\n\t\tmedium: string\r\n\t\tthumbnail: string\r\n\t}\r\n\tnat: string\r\n}\r\n\r\ninterface TableParams {\r\n\tpagination?: TablePaginationConfig\r\n\tsortField?: string\r\n\tsortOrder?: string\r\n\tfilters?: Parameters<GetProp<TableProps, 'onChange'>>[1]\r\n}\r\n\r\nconst App: any = ({ isShow }: any) => {\r\n\tconst [data, setData] = useState<DataType[]>()\r\n\tconst [loading, setLoading] = useState(false)\r\n\t// 分页、过滤、排序、额外\r\n\tconst [tableParams, setTableParams] = useState<TableParams>({\r\n\t\tpagination: {\r\n\t\t\tcurrent: 1,\r\n\t\t\tpageSize: 10,\r\n\t\t},\r\n\t})\r\n\tconsole.log(data)\r\n\t// console.log('tableParams', tableParams)\r\n\tconst [selectedRowKeys, setSelectedRowKeys] = useState<React.Key[]>([])\r\n\r\n\tconst getRandomuserParams = (params: TableParams) => ({\r\n\t\tresults: params.pagination?.pageSize,\r\n\t\tpage: params.pagination?.current,\r\n\t\t...params,\r\n\t})\r\n\tconst fetchData = () => {\r\n\t\tsetLoading(true)\r\n\t\tfetch(`https://randomuser.me/api?${qs.stringify(getRandomuserParams(tableParams))}`)\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then(({ results }) => {\r\n\t\t\t\tsetData(results)\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t\tsetTableParams({\r\n\t\t\t\t\t...tableParams,\r\n\t\t\t\t\tpagination: {\r\n\t\t\t\t\t\t...tableParams.pagination,\r\n\t\t\t\t\t\ttotal: 200,\r\n\t\t\t\t\t\t// 200 is mock data, you should read it from server\r\n\t\t\t\t\t\t// total: data.totalCount,\r\n\t\t\t\t\t},\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tfetchData()\r\n\t}, [JSON.stringify(tableParams)])\r\n\r\n\tconst columns: TableProps<DataType>['columns'] = [\r\n\t\t{\r\n\t\t\ttitle: 'Name',\r\n\t\t\tdataIndex: ['name', 'title'],\r\n\t\t\tkey: 'name',\r\n\t\t\talign: 'center',\r\n\t\t\twidth: 100,\r\n\t\t\tfixed: 'left',\r\n\t\t\trender: text => <a>{text}</a>,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Age',\r\n\t\t\tdataIndex: ['dob', 'age'],\r\n\t\t\tkey: 'dob',\r\n\t\t\talign: 'center',\r\n\t\t\twidth: 200,\r\n\t\t\tdefaultSortOrder: 'descend',\r\n\t\t\tsorter: (a, b) => a.dob.age - b.dob.age,\r\n\t\t\tresponsive: ['lg'],\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Email',\r\n\t\t\tdataIndex: 'email',\r\n\t\t\tkey: 'email',\r\n\t\t\talign: 'center',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Phone',\r\n\t\t\tdataIndex: 'phone',\r\n\t\t\tkey: 'phone',\r\n\t\t\talign: 'center',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Cell',\r\n\t\t\tdataIndex: 'cell',\r\n\t\t\tkey: 'cell',\r\n\t\t\talign: 'center',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Nat',\r\n\t\t\tdataIndex: 'nat',\r\n\t\t\tkey: 'nat',\r\n\t\t\talign: 'center',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Address',\r\n\t\t\tdataIndex: ['location', 'timezone', 'description'],\r\n\t\t\tkey: 'address',\r\n\t\t\talign: 'center',\r\n\t\t\tresponsive: ['lg'], // 响应式\r\n\t\t\twidth: 200,\r\n\t\t\tellipsis: { showTitle: false },\r\n\t\t\trender: address => (\r\n\t\t\t\t<Tooltip placement=\"topLeft\" title={address}>\r\n\t\t\t\t\t{address}\r\n\t\t\t\t</Tooltip>\r\n\t\t\t),\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Action',\r\n\t\t\tkey: 'action',\r\n\t\t\talign: 'center',\r\n\t\t\twidth: 250,\r\n\t\t\tfixed: 'right',\r\n\t\t\trender: (_, record) => (\r\n\t\t\t\t<Space size=\"small\">\r\n\t\t\t\t\t<Button key=\"view\" type=\"link\" size=\"small\" icon={<EyeOutlined />}>\r\n\t\t\t\t\t\t查看\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button key=\"edit\" type=\"link\" size=\"small\" icon={<EditOutlined />}>\r\n\t\t\t\t\t\t编辑\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button key=\"delete\" type=\"link\" size=\"small\" danger icon={<DeleteOutlined />}>\r\n\t\t\t\t\t\t删除\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Space>\r\n\t\t\t),\r\n\t\t},\r\n\t]\r\n\r\n\tconst onChange: TableProps<DataType>['onChange'] = (pagination, filters, sorter, extra) => {\r\n\t\tconsole.log('分页、过滤、排序、额外：', pagination, filters, sorter, extra)\r\n\t\tsetTableParams({\r\n\t\t\tpagination,\r\n\t\t\tfilters,\r\n\t\t\t...sorter,\r\n\t\t})\r\n\t\t// `dataSource` is useless since `pageSize` changed\r\n\t\tif (pagination.pageSize !== tableParams.pagination?.pageSize) {\r\n\t\t\tsetData([])\r\n\t\t}\r\n\t}\r\n\r\n\tconst rowSelection: TableRowSelection<DataType> = {\r\n\t\tselectedRowKeys,\r\n\t\tonChange: (newSelectedRowKeys: React.Key[]) => {\r\n\t\t\tsetSelectedRowKeys(newSelectedRowKeys)\r\n\t\t},\r\n\t}\r\n\r\n\t// 头部\r\n\tconst Header = (\r\n\t\t<div className=\"flex flex-row-reverse\">\r\n\t\t\t<Space>\r\n\t\t\t\t<Button type=\"primary\" size=\"middle\" icon={<PlusOutlined />}>\r\n\t\t\t\t\t新建\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Button key=\"delete\" type=\"primary\" size=\"middle\" icon={<DeleteOutlined />}>\r\n\t\t\t\t\t多选删除\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Button key=\"delete\" type=\"primary\" size=\"middle\" icon={<DownloadOutlined />}>\r\n\t\t\t\t\t导出\r\n\t\t\t\t</Button>\r\n\t\t\t</Space>\r\n\t\t</div>\r\n\t)\r\n\r\n\treturn (\r\n\t\tisShow && (\r\n\t\t\t<div>\r\n\t\t\t\t<Table\r\n\t\t\t\t\tsize=\"middle\"\r\n\t\t\t\t\tbordered\r\n\t\t\t\t\ttitle={() => Header}\r\n\t\t\t\t\trowKey={record => record.login.uuid}\r\n\t\t\t\t\tcolumns={columns}\r\n\t\t\t\t\tloading={loading}\r\n\t\t\t\t\tdataSource={data}\r\n\t\t\t\t\tpagination={tableParams.pagination}\r\n\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\texpandable={{\r\n\t\t\t\t\t\texpandedRowRender: record => (\r\n\t\t\t\t\t\t\t<p style={{ margin: 0 }}>{record?.location.timezone.description || 'My name is Jim Green, I am 42 years old, living in London No. 1 Lake Park.'}</p>\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\t// 展开条件\r\n\t\t\t\t\t\trowExpandable: record => record?.name.title != '',\r\n\t\t\t\t\t}}\r\n\t\t\t\t\trowSelection={rowSelection}\r\n\t\t\t\t\tscroll={{ y: 500, x: 'calc(700px + 50%)' }}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t)\r\n\t)\r\n}\r\n\r\nexport default App\r\n"],"names":["App","isShow","data","setData","useState","loading","setLoading","tableParams","setTableParams","selectedRowKeys","setSelectedRowKeys","getRandomuserParams","params","_a","_b","fetchData","qs","res","results","useEffect","columns","text","jsx","a","b","Tooltip","address","_","record","jsxs","Space","Button","EyeOutlined","EditOutlined","DeleteOutlined","onChange","pagination","filters","sorter","extra","rowSelection","newSelectedRowKeys","Header","PlusOutlined","DownloadOutlined","Table"],"mappings":"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"}