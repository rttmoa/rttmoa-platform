import{r as t,a as wn}from"./react-12b51ca5.js";import{w as lt,p as ct,D as dn,K as I,d as st,A as dt,e as ft,b as vt,h as In,u as mt,G as gt,c as pt,t as ht}from"./rc-util-8976b5fa.js";import{c as je}from"./classnames-3ded05b8.js";import{F as bt}from"./rc-overflow-7fc9dc70.js";import"./react-dom-e71a48dd.js";import"./rc-resize-observer-5c9960e4.js";import"./rc-motion-25d44171.js";import{f as fn,e as re,d as q,b as oe,h as Ke,c as Ze,o as St,g as De}from"./@babel-c46ce09a.js";import{T as Ct}from"./@rc-component-60bdd203.js";import{L as wt}from"./rc-virtual-list-5b0902fa.js";var vn=function(e){var o=e.className,a=e.customizeIcon,i=e.customizeIconProps,r=e.children,l=e.onMouseDown,d=e.onClick,v=typeof a=="function"?a(i):a;return t.createElement("span",{className:o,onMouseDown:function(m){m.preventDefault(),l==null||l(m)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:d,"aria-hidden":!0},v!==void 0?v:t.createElement("span",{className:je(o.split(/\s+/).map(function(g){return"".concat(g,"-icon")}))},r))},yt=function(e,o,a,i,r){var l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,d=arguments.length>6?arguments[6]:void 0,v=arguments.length>7?arguments[7]:void 0,g=wn.useMemo(function(){if(fn(i)==="object")return i.clearIcon;if(r)return r},[i,r]),m=wn.useMemo(function(){return!!(!l&&i&&(a.length||d)&&!(v==="combobox"&&d===""))},[i,l,a.length,d,v]);return{allowClear:m,clearIcon:wn.createElement(vn,{className:"".concat(e,"-clear"),onMouseDown:o,customizeIcon:g},"×")}},Kn=t.createContext(null);function It(){return t.useContext(Kn)}function Et(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,e=t.useState(!1),o=re(e,2),a=o[0],i=o[1],r=t.useRef(null),l=function(){window.clearTimeout(r.current)};t.useEffect(function(){return l},[]);var d=function(g,m){l(),r.current=window.setTimeout(function(){i(g),m&&m()},n)};return[a,d,l]}function $n(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:250,e=t.useRef(null),o=t.useRef(null);t.useEffect(function(){return function(){window.clearTimeout(o.current)}},[]);function a(i){(i||e.current===null)&&(e.current=i),window.clearTimeout(o.current),o.current=window.setTimeout(function(){e.current=null},n)}return[function(){return e.current},a]}function Rt(n,e,o,a){var i=t.useRef(null);i.current={open:e,triggerOpen:o,customizedTrigger:a},t.useEffect(function(){function r(l){var d;if(!((d=i.current)!==null&&d!==void 0&&d.customizedTrigger)){var v=l.target;v.shadowRoot&&l.composed&&(v=l.composedPath()[0]||v),i.current.open&&n().filter(function(g){return g}).every(function(g){return!g.contains(v)&&g!==v})&&i.current.triggerOpen(!1)}}return window.addEventListener("mousedown",r),function(){return window.removeEventListener("mousedown",r)}},[])}var Dt=function(e,o){var a,i=e.prefixCls,r=e.id,l=e.inputElement,d=e.disabled,v=e.tabIndex,g=e.autoFocus,m=e.autoComplete,s=e.editable,O=e.activeDescendantId,u=e.value,D=e.maxLength,S=e.onKeyDown,N=e.onMouseDown,V=e.onChange,K=e.onPaste,B=e.onCompositionStart,A=e.onCompositionEnd,G=e.open,z=e.attrs,X=l||t.createElement("input",null),Y=X,le=Y.ref,H=Y.props,j=H.onKeyDown,F=H.onChange,ee=H.onMouseDown,_=H.onCompositionStart,J=H.onCompositionEnd,T=H.style;return lt(!("maxLength"in X.props)),X=t.cloneElement(X,q(q(q({type:"search"},H),{},{id:r,ref:ct(o,le),disabled:d,tabIndex:v,autoComplete:m||"off",autoFocus:g,className:je("".concat(i,"-selection-search-input"),(a=X)===null||a===void 0||(a=a.props)===null||a===void 0?void 0:a.className),role:"combobox","aria-expanded":G||!1,"aria-haspopup":"listbox","aria-owns":"".concat(r,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(r,"_list"),"aria-activedescendant":G?O:void 0},z),{},{value:s?u:"",maxLength:D,readOnly:!s,unselectable:s?null:"on",style:q(q({},T),{},{opacity:s?null:0}),onKeyDown:function(p){S(p),j&&j(p)},onMouseDown:function(p){N(p),ee&&ee(p)},onChange:function(p){V(p),F&&F(p)},onCompositionStart:function(p){B(p),_&&_(p)},onCompositionEnd:function(p){A(p),J&&J(p)},onPaste:K})),X},Wn=t.forwardRef(Dt);function Bn(n){return Array.isArray(n)?n:n!==void 0?[n]:[]}var xt=typeof window<"u"&&window.document&&window.document.documentElement,Mt=xt;function Ot(n){return n!=null}function Pt(n){return!n&&n!==0}function _n(n){return["string","number"].includes(fn(n))}function zn(n){var e=void 0;return n&&(_n(n.title)?e=n.title.toString():_n(n.label)&&(e=n.label.toString())),e}function Vt(n,e){Mt?t.useLayoutEffect(n,e):t.useEffect(n,e)}function Nt(n){var e;return(e=n.key)!==null&&e!==void 0?e:n.value}var Tn=function(e){e.preventDefault(),e.stopPropagation()},_t=function(e){var o=e.id,a=e.prefixCls,i=e.values,r=e.open,l=e.searchValue,d=e.autoClearSearchValue,v=e.inputRef,g=e.placeholder,m=e.disabled,s=e.mode,O=e.showSearch,u=e.autoFocus,D=e.autoComplete,S=e.activeDescendantId,N=e.tabIndex,V=e.removeIcon,K=e.maxTagCount,B=e.maxTagTextLength,A=e.maxTagPlaceholder,G=A===void 0?function(L){return"+ ".concat(L.length," ...")}:A,z=e.tagRender,X=e.onToggleOpen,Y=e.onRemove,le=e.onInputChange,H=e.onInputPaste,j=e.onInputKeyDown,F=e.onInputMouseDown,ee=e.onInputCompositionStart,_=e.onInputCompositionEnd,J=t.useRef(null),T=t.useState(0),E=re(T,2),p=E[0],se=E[1],fe=t.useState(!1),Te=re(fe,2),Se=Te[0],pe=Te[1],Z="".concat(a,"-selection"),Oe=r||s==="multiple"&&d===!1||s==="tags"?l:"",ne=s==="tags"||s==="multiple"&&d===!1||O&&(r||Se);Vt(function(){se(J.current.scrollWidth)},[Oe]);var Ae=function(y,M,$,k,ce){return t.createElement("span",{title:zn(y),className:je("".concat(Z,"-item"),oe({},"".concat(Z,"-item-disabled"),$))},t.createElement("span",{className:"".concat(Z,"-item-content")},M),k&&t.createElement(vn,{className:"".concat(Z,"-item-remove"),onMouseDown:Tn,onClick:ce,customizeIcon:V},"×"))},Pe=function(y,M,$,k,ce){var te=function(Ie){Tn(Ie),X(!r)};return t.createElement("span",{onMouseDown:te},z({label:M,value:y,disabled:$,closable:k,onClose:ce}))},he=function(y){var M=y.disabled,$=y.label,k=y.value,ce=!m&&!M,te=$;if(typeof B=="number"&&(typeof $=="string"||typeof $=="number")){var Ce=String(te);Ce.length>B&&(te="".concat(Ce.slice(0,B),"..."))}var Ie=function(Q){Q&&Q.stopPropagation(),Y(y)};return typeof z=="function"?Pe(k,te,M,ce,Ie):Ae(y,te,M,ce,Ie)},x=function(y){var M=typeof G=="function"?G(y):G;return Ae({title:M},M,!1)},f=t.createElement("div",{className:"".concat(Z,"-search"),style:{width:p},onFocus:function(){pe(!0)},onBlur:function(){pe(!1)}},t.createElement(Wn,{ref:v,open:r,prefixCls:a,id:o,inputElement:null,disabled:m,autoFocus:u,autoComplete:D,editable:ne,activeDescendantId:S,value:Oe,onKeyDown:j,onMouseDown:F,onChange:le,onPaste:H,onCompositionStart:ee,onCompositionEnd:_,tabIndex:N,attrs:dn(e,!0)}),t.createElement("span",{ref:J,className:"".concat(Z,"-search-mirror"),"aria-hidden":!0},Oe," ")),C=t.createElement(bt,{prefixCls:"".concat(Z,"-overflow"),data:i,renderItem:he,renderRest:x,suffix:f,itemKey:Nt,maxCount:K});return t.createElement(t.Fragment,null,C,!i.length&&!Oe&&t.createElement("span",{className:"".concat(Z,"-placeholder")},g))},Tt=function(e){var o=e.inputElement,a=e.prefixCls,i=e.id,r=e.inputRef,l=e.disabled,d=e.autoFocus,v=e.autoComplete,g=e.activeDescendantId,m=e.mode,s=e.open,O=e.values,u=e.placeholder,D=e.tabIndex,S=e.showSearch,N=e.searchValue,V=e.activeValue,K=e.maxLength,B=e.onInputKeyDown,A=e.onInputMouseDown,G=e.onInputChange,z=e.onInputPaste,X=e.onInputCompositionStart,Y=e.onInputCompositionEnd,le=e.title,H=t.useState(!1),j=re(H,2),F=j[0],ee=j[1],_=m==="combobox",J=_||S,T=O[0],E=N||"";_&&V&&!F&&(E=V),t.useEffect(function(){_&&ee(!1)},[_,V]);var p=m!=="combobox"&&!s&&!S?!1:!!E,se=le===void 0?zn(T):le,fe=t.useMemo(function(){return T?null:t.createElement("span",{className:"".concat(a,"-selection-placeholder"),style:p?{visibility:"hidden"}:void 0},u)},[T,p,u,a]);return t.createElement(t.Fragment,null,t.createElement("span",{className:"".concat(a,"-selection-search")},t.createElement(Wn,{ref:r,prefixCls:a,id:i,open:s,inputElement:o,disabled:l,autoFocus:d,autoComplete:v,editable:J,activeDescendantId:g,value:E,onKeyDown:B,onMouseDown:A,onChange:function(Se){ee(!0),G(Se)},onPaste:z,onCompositionStart:X,onCompositionEnd:Y,tabIndex:D,attrs:dn(e,!0),maxLength:_?K:void 0})),!_&&T?t.createElement("span",{className:"".concat(a,"-selection-item"),title:se,style:p?{visibility:"hidden"}:void 0},T.label):null,fe)};function At(n){return![I.ESC,I.SHIFT,I.BACKSPACE,I.TAB,I.WIN_KEY,I.ALT,I.META,I.WIN_KEY_RIGHT,I.CTRL,I.SEMICOLON,I.EQUALS,I.CAPS_LOCK,I.CONTEXT_MENU,I.F1,I.F2,I.F3,I.F4,I.F5,I.F6,I.F7,I.F8,I.F9,I.F10,I.F11,I.F12].includes(n)}var Lt=function(e,o){var a=t.useRef(null),i=t.useRef(!1),r=e.prefixCls,l=e.open,d=e.mode,v=e.showSearch,g=e.tokenWithEnter,m=e.autoClearSearchValue,s=e.onSearch,O=e.onSearchSubmit,u=e.onToggleOpen,D=e.onInputKeyDown,S=e.domRef;t.useImperativeHandle(o,function(){return{focus:function(){a.current.focus()},blur:function(){a.current.blur()}}});var N=$n(0),V=re(N,2),K=V[0],B=V[1],A=function(E){var p=E.which;(p===I.UP||p===I.DOWN)&&E.preventDefault(),D&&D(E),p===I.ENTER&&d==="tags"&&!i.current&&!l&&(O==null||O(E.target.value)),At(p)&&u(!0)},G=function(){B(!0)},z=t.useRef(null),X=function(E){s(E,!0,i.current)!==!1&&u(!0)},Y=function(){i.current=!0},le=function(E){i.current=!1,d!=="combobox"&&X(E.target.value)},H=function(E){var p=E.target.value;if(g&&z.current&&/[\r\n]/.test(z.current)){var se=z.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");p=p.replace(se,z.current)}z.current=null,X(p)},j=function(E){var p=E.clipboardData,se=p==null?void 0:p.getData("text");z.current=se||""},F=function(E){var p=E.target;if(p!==a.current){var se=document.body.style.msTouchAction!==void 0;se?setTimeout(function(){a.current.focus()}):a.current.focus()}},ee=function(E){var p=K();E.target!==a.current&&!p&&d!=="combobox"&&E.preventDefault(),(d!=="combobox"&&(!v||!p)||!l)&&(l&&m!==!1&&s("",!0,!1),u())},_={inputRef:a,onInputKeyDown:A,onInputMouseDown:G,onInputChange:H,onInputPaste:j,onInputCompositionStart:Y,onInputCompositionEnd:le},J=d==="multiple"||d==="tags"?t.createElement(_t,Ke({},e,_)):t.createElement(Tt,Ke({},e,_));return t.createElement("div",{ref:S,className:"".concat(r,"-selector"),onClick:F,onMouseDown:ee},J)},Ft=t.forwardRef(Lt),kt=["prefixCls","disabled","visible","children","popupElement","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","builtinPlacements","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],Kt=function(e){var o=e===!0?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:o,adjustY:1},htmlRegion:"scroll"},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:o,adjustY:1},htmlRegion:"scroll"},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:o,adjustY:1},htmlRegion:"scroll"},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:o,adjustY:1},htmlRegion:"scroll"}}},$t=function(e,o){var a=e.prefixCls;e.disabled;var i=e.visible,r=e.children,l=e.popupElement,d=e.animation,v=e.transitionName,g=e.dropdownStyle,m=e.dropdownClassName,s=e.direction,O=s===void 0?"ltr":s,u=e.placement,D=e.builtinPlacements,S=e.dropdownMatchSelectWidth,N=e.dropdownRender,V=e.dropdownAlign,K=e.getPopupContainer,B=e.empty,A=e.getTriggerDOMNode,G=e.onPopupVisibleChange,z=e.onPopupMouseEnter,X=Ze(e,kt),Y="".concat(a,"-dropdown"),le=l;N&&(le=N(l));var H=t.useMemo(function(){return D||Kt(S)},[D,S]),j=d?"".concat(Y,"-").concat(d):v,F=typeof S=="number",ee=t.useMemo(function(){return F?null:S===!1?"minWidth":"width"},[S,F]),_=g;F&&(_=q(q({},_),{},{width:S}));var J=t.useRef(null);return t.useImperativeHandle(o,function(){return{getPopupElement:function(){return J.current}}}),t.createElement(Ct,Ke({},X,{showAction:G?["click"]:[],hideAction:G?["click"]:[],popupPlacement:u||(O==="rtl"?"bottomRight":"bottomLeft"),builtinPlacements:H,prefixCls:Y,popupTransitionName:j,popup:t.createElement("div",{ref:J,onMouseEnter:z},le),stretch:ee,popupAlign:V,popupVisible:i,getPopupContainer:K,popupClassName:je(m,oe({},"".concat(Y,"-empty"),B)),popupStyle:_,getTriggerDOMNode:A,onPopupVisibleChange:G}),r)},Wt=t.forwardRef($t);function An(n,e){var o=n.key,a;return"value"in n&&(a=n.value),o??(a!==void 0?a:"rc-index-key-".concat(e))}function Hn(n,e){var o=n||{},a=o.label,i=o.value,r=o.options,l=o.groupLabel,d=a||(e?"children":"label");return{label:d,value:i||"value",options:r||"options",groupLabel:l||d}}function Bt(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=e.fieldNames,a=e.childrenAsData,i=[],r=Hn(o,!1),l=r.label,d=r.value,v=r.options,g=r.groupLabel;function m(s,O){Array.isArray(s)&&s.forEach(function(u){if(O||!(v in u)){var D=u[d];i.push({key:An(u,i.length),groupOption:O,data:u,label:u[l],value:D})}else{var S=u[g];S===void 0&&a&&(S=u.label),i.push({key:An(u,i.length),group:!0,data:u,label:S}),m(u[v],!0)}})}return m(n,!1),i}function En(n){var e=q({},n);return"props"in e||Object.defineProperty(e,"props",{get:function(){return st(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),e}}),e}var zt=function(e,o,a){if(!o||!o.length)return null;var i=!1,r=function d(v,g){var m=St(g),s=m[0],O=m.slice(1);if(!s)return[v];var u=v.split(s);return i=i||u.length>1,u.reduce(function(D,S){return[].concat(De(D),De(d(S,O)))},[]).filter(Boolean)},l=r(e,o);return i?typeof a<"u"?l.slice(0,a):l:null},Dn=t.createContext(null),Ht=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","suffixIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","builtinPlacements","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],Ut=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"],Rn=function(e){return e==="tags"||e==="multiple"},jt=t.forwardRef(function(n,e){var o,a,i=n.id,r=n.prefixCls,l=n.className,d=n.showSearch,v=n.tagRender,g=n.direction,m=n.omitDomProps,s=n.displayValues,O=n.onDisplayValuesChange,u=n.emptyOptions,D=n.notFoundContent,S=D===void 0?"Not Found":D,N=n.onClear,V=n.mode,K=n.disabled,B=n.loading,A=n.getInputElement,G=n.getRawInputElement,z=n.open,X=n.defaultOpen,Y=n.onDropdownVisibleChange,le=n.activeValue,H=n.onActiveValueChange,j=n.activeDescendantId,F=n.searchValue,ee=n.autoClearSearchValue,_=n.onSearch,J=n.onSearchSplit,T=n.tokenSeparators,E=n.allowClear,p=n.suffixIcon,se=n.clearIcon,fe=n.OptionList,Te=n.animation,Se=n.transitionName,pe=n.dropdownStyle,Z=n.dropdownClassName,Oe=n.dropdownMatchSelectWidth,ne=n.dropdownRender,Ae=n.dropdownAlign,Pe=n.placement,he=n.builtinPlacements,x=n.getPopupContainer,f=n.showAction,C=f===void 0?[]:f,L=n.onFocus,y=n.onBlur,M=n.onKeyUp,$=n.onKeyDown,k=n.onMouseDown,ce=Ze(n,Ht),te=Rn(V),Ce=(d!==void 0?d:te)||V==="combobox",Ie=q({},ce);Ut.forEach(function(P){delete Ie[P]}),m==null||m.forEach(function(P){delete Ie[P]});var $e=t.useState(!1),Q=re($e,2),Ye=Q[0],en=Q[1];t.useEffect(function(){en(dt())},[]);var Le=t.useRef(null),ve=t.useRef(null),xe=t.useRef(null),ie=t.useRef(null),Ve=t.useRef(null),Ne=t.useRef(!1),Ge=Et(),we=re(Ge,3),We=we[0],Be=we[1],mn=we[2];t.useImperativeHandle(e,function(){var P,w;return{focus:(P=ie.current)===null||P===void 0?void 0:P.focus,blur:(w=ie.current)===null||w===void 0?void 0:w.blur,scrollTo:function(be){var ae;return(ae=Ve.current)===null||ae===void 0?void 0:ae.scrollTo(be)}}});var ye=t.useMemo(function(){var P;if(V!=="combobox")return F;var w=(P=s[0])===null||P===void 0?void 0:P.value;return typeof w=="string"||typeof w=="number"?String(w):""},[F,V,s]),on=V==="combobox"&&typeof A=="function"&&A()||null,Me=typeof G=="function"&&G(),gn=ft(ve,Me==null||(o=Me.props)===null||o===void 0?void 0:o.ref),pn=t.useState(!1),nn=re(pn,2),rn=nn[0],Je=nn[1];vt(function(){Je(!0)},[]);var un=In(!1,{defaultValue:X,value:z}),ln=re(un,2),cn=ln[0],tn=ln[1],ue=rn?cn:!1,h=!S&&u;(K||h&&ue&&V==="combobox")&&(ue=!1);var b=h?!1:ue,c=t.useCallback(function(P){var w=P!==void 0?P:!ue;K||(tn(w),ue!==w&&(Y==null||Y(w)))},[K,ue,tn,Y]),R=t.useMemo(function(){return(T||[]).some(function(P){return[`
`,`\r
`].includes(P)})},[T]),W=t.useContext(Dn)||{},U=W.maxCount,Ee=W.rawValues,Re=function(w,me,be){if(!((Ee==null?void 0:Ee.size)>=U)){var ae=!0,ge=w;H==null||H(null);var _e=zt(w,T,U&&U-Ee.size),ze=be?null:_e;return V!=="combobox"&&ze&&(ge="",J==null||J(ze),c(!1),ae=!1),_&&ye!==ge&&_(ge,{source:me?"typing":"effect"}),ae}},Xe=function(w){!w||!w.trim()||_(w,{source:"submit"})};t.useEffect(function(){!ue&&!te&&V!=="combobox"&&Re("",!1,!1)},[ue]),t.useEffect(function(){cn&&K&&tn(!1),K&&!Ne.current&&Be(!1)},[K]);var de=$n(),Fe=re(de,2),hn=Fe[0],bn=Fe[1],xn=function(w){var me=hn(),be=w.which;if(be===I.ENTER&&(V!=="combobox"&&w.preventDefault(),ue||c(!0)),bn(!!ye),be===I.BACKSPACE&&!me&&te&&!ye&&s.length){for(var ae=De(s),ge=null,_e=ae.length-1;_e>=0;_e-=1){var ze=ae[_e];if(!ze.disabled){ae.splice(_e,1),ge=ze;break}}ge&&O(ae,{type:"remove",values:[ge]})}for(var He=arguments.length,qe=new Array(He>1?He-1:0),Ue=1;Ue<He;Ue++)qe[Ue-1]=arguments[Ue];if(ue){var sn;(sn=Ve.current)===null||sn===void 0||sn.onKeyDown.apply(sn,[w].concat(qe))}$==null||$.apply(void 0,[w].concat(qe))},an=function(w){for(var me=arguments.length,be=new Array(me>1?me-1:0),ae=1;ae<me;ae++)be[ae-1]=arguments[ae];if(ue){var ge;(ge=Ve.current)===null||ge===void 0||ge.onKeyUp.apply(ge,[w].concat(be))}M==null||M.apply(void 0,[w].concat(be))},ke=function(w){var me=s.filter(function(be){return be!==w});O(me,{type:"remove",values:[w]})},Sn=t.useRef(!1),Yn=function(){Be(!0),K||(L&&!Sn.current&&L.apply(void 0,arguments),C.includes("focus")&&c(!0)),Sn.current=!0},Jn=function(){Ne.current=!0,Be(!1,function(){Sn.current=!1,Ne.current=!1,c(!1)}),!K&&(ye&&(V==="tags"?_(ye,{source:"submit"}):V==="multiple"&&_("",{source:"blur"})),y&&y.apply(void 0,arguments))},Qe=[];t.useEffect(function(){return function(){Qe.forEach(function(P){return clearTimeout(P)}),Qe.splice(0,Qe.length)}},[]);var Qn=function(w){var me,be=w.target,ae=(me=xe.current)===null||me===void 0?void 0:me.getPopupElement();if(ae&&ae.contains(be)){var ge=setTimeout(function(){var qe=Qe.indexOf(ge);if(qe!==-1&&Qe.splice(qe,1),mn(),!Ye&&!ae.contains(document.activeElement)){var Ue;(Ue=ie.current)===null||Ue===void 0||Ue.focus()}});Qe.push(ge)}for(var _e=arguments.length,ze=new Array(_e>1?_e-1:0),He=1;He<_e;He++)ze[He-1]=arguments[He];k==null||k.apply(void 0,[w].concat(ze))},qn=t.useState({}),Zn=re(qn,2),et=Zn[1];function nt(){et({})}var Mn;Me&&(Mn=function(w){c(w)}),Rt(function(){var P;return[Le.current,(P=xe.current)===null||P===void 0?void 0:P.getPopupElement()]},b,c,!!Me);var tt=t.useMemo(function(){return q(q({},n),{},{notFoundContent:S,open:ue,triggerOpen:b,id:i,showSearch:Ce,multiple:te,toggleOpen:c})},[n,S,b,ue,i,Ce,te,c]),On=!!p||B,Pn;On&&(Pn=t.createElement(vn,{className:je("".concat(r,"-arrow"),oe({},"".concat(r,"-arrow-loading"),B)),customizeIcon:p,customizeIconProps:{loading:B,searchValue:ye,open:ue,focused:We,showSearch:Ce}}));var at=function(){var w;N==null||N(),(w=ie.current)===null||w===void 0||w.focus(),O([],{type:"clear",values:s}),Re("",!1,!1)},Vn=yt(r,at,s,E,se,K,ye,V),ot=Vn.allowClear,rt=Vn.clearIcon,it=t.createElement(fe,{ref:Ve}),ut=je(r,l,(a={},oe(a,"".concat(r,"-focused"),We),oe(a,"".concat(r,"-multiple"),te),oe(a,"".concat(r,"-single"),!te),oe(a,"".concat(r,"-allow-clear"),E),oe(a,"".concat(r,"-show-arrow"),On),oe(a,"".concat(r,"-disabled"),K),oe(a,"".concat(r,"-loading"),B),oe(a,"".concat(r,"-open"),ue),oe(a,"".concat(r,"-customize-input"),on),oe(a,"".concat(r,"-show-search"),Ce),a)),Nn=t.createElement(Wt,{ref:xe,disabled:K,prefixCls:r,visible:b,popupElement:it,animation:Te,transitionName:Se,dropdownStyle:pe,dropdownClassName:Z,direction:g,dropdownMatchSelectWidth:Oe,dropdownRender:ne,dropdownAlign:Ae,placement:Pe,builtinPlacements:he,getPopupContainer:x,empty:u,getTriggerDOMNode:function(){return ve.current},onPopupVisibleChange:Mn,onPopupMouseEnter:nt},Me?t.cloneElement(Me,{ref:gn}):t.createElement(Ft,Ke({},n,{domRef:ve,prefixCls:r,inputElement:on,ref:ie,id:i,showSearch:Ce,autoClearSearchValue:ee,mode:V,activeDescendantId:j,tagRender:v,values:s,open:ue,onToggleOpen:c,activeValue:le,searchValue:ye,onSearch:Re,onSearchSubmit:Xe,onRemove:ke,tokenWithEnter:R}))),Cn;return Me?Cn=Nn:Cn=t.createElement("div",Ke({className:ut},Ie,{ref:Le,onMouseDown:Qn,onKeyDown:xn,onKeyUp:an,onFocus:Yn,onBlur:Jn}),We&&!ue&&t.createElement("span",{"aria-live":"polite",style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0}},"".concat(s.map(function(P){var w=P.label,me=P.value;return["number","string"].includes(fn(w))?w:me}).join(", "))),Nn,Pn,ot&&rt),t.createElement(Kn.Provider,{value:tt},Cn)}),Un=function(){return null};Un.isSelectOptGroup=!0;var jn=function(){return null};jn.isSelectOption=!0;function Gt(){return/(mac\sos|macintosh)/i.test(navigator.appVersion)}var Xt=["disabled","title","children","style","className"];function Ln(n){return typeof n=="string"||typeof n=="number"}var Yt=function(e,o){var a=It(),i=a.prefixCls,r=a.id,l=a.open,d=a.multiple,v=a.mode,g=a.searchValue,m=a.toggleOpen,s=a.notFoundContent,O=a.onPopupScroll,u=t.useContext(Dn),D=u.maxCount,S=u.flattenOptions,N=u.onActiveValue,V=u.defaultActiveFirstOption,K=u.onSelect,B=u.menuItemSelectedIcon,A=u.rawValues,G=u.fieldNames,z=u.virtual,X=u.direction,Y=u.listHeight,le=u.listItemHeight,H=u.optionRender,j="".concat(i,"-item"),F=mt(function(){return S},[l,S],function(x,f){return f[0]&&x[1]!==f[1]}),ee=t.useRef(null),_=t.useMemo(function(){return d&&typeof D<"u"&&(A==null?void 0:A.size)>=D},[d,D,A==null?void 0:A.size]),J=function(f){f.preventDefault()},T=function(f){var C;(C=ee.current)===null||C===void 0||C.scrollTo(typeof f=="number"?{index:f}:f)},E=function(f){for(var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,L=F.length,y=0;y<L;y+=1){var M=(f+y*C+L)%L,$=F[M]||{},k=$.group,ce=$.data;if(!k&&!(ce!=null&&ce.disabled)&&!_)return M}return-1},p=t.useState(function(){return E(0)}),se=re(p,2),fe=se[0],Te=se[1],Se=function(f){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;Te(f);var L={source:C?"keyboard":"mouse"},y=F[f];if(!y){N(null,-1,L);return}N(y.value,f,L)};t.useEffect(function(){Se(V!==!1?E(0):-1)},[F.length,g]);var pe=t.useCallback(function(x){return A.has(x)&&v!=="combobox"},[v,De(A).toString(),A.size]);t.useEffect(function(){var x=setTimeout(function(){if(!d&&l&&A.size===1){var C=Array.from(A)[0],L=F.findIndex(function(y){var M=y.data;return M.value===C});L!==-1&&(Se(L),T(L))}});if(l){var f;(f=ee.current)===null||f===void 0||f.scrollTo(void 0)}return function(){return clearTimeout(x)}},[l,g]);var Z=function(f){f!==void 0&&K(f,{selected:!A.has(f)}),d||m(!1)};if(t.useImperativeHandle(o,function(){return{onKeyDown:function(f){var C=f.which,L=f.ctrlKey;switch(C){case I.N:case I.P:case I.UP:case I.DOWN:{var y=0;if(C===I.UP?y=-1:C===I.DOWN?y=1:Gt()&&L&&(C===I.N?y=1:C===I.P&&(y=-1)),y!==0){var M=E(fe+y,y);T(M),Se(M,!0)}break}case I.ENTER:{var $,k=F[fe];k&&!(k!=null&&($=k.data)!==null&&$!==void 0&&$.disabled)&&!_?Z(k.value):Z(void 0),l&&f.preventDefault();break}case I.ESC:m(!1),l&&f.stopPropagation()}},onKeyUp:function(){},scrollTo:function(f){T(f)}}}),F.length===0)return t.createElement("div",{role:"listbox",id:"".concat(r,"_list"),className:"".concat(j,"-empty"),onMouseDown:J},s);var Oe=Object.keys(G).map(function(x){return G[x]}),ne=function(f){return f.label};function Ae(x,f){var C=x.group;return{role:C?"presentation":"option",id:"".concat(r,"_list_").concat(f)}}var Pe=function(f){var C=F[f];if(!C)return null;var L=C.data||{},y=L.value,M=C.group,$=dn(L,!0),k=ne(C);return C?t.createElement("div",Ke({"aria-label":typeof k=="string"&&!M?k:null},$,{key:f},Ae(C,f),{"aria-selected":pe(y)}),y):null},he={role:"listbox",id:"".concat(r,"_list")};return t.createElement(t.Fragment,null,z&&t.createElement("div",Ke({},he,{style:{height:0,width:0,overflow:"hidden"}}),Pe(fe-1),Pe(fe),Pe(fe+1)),t.createElement(wt,{itemKey:"key",ref:ee,data:F,height:Y,itemHeight:le,fullHeight:!1,onMouseDown:J,onScroll:O,virtual:z,direction:X,innerProps:z?null:he},function(x,f){var C,L=x.group,y=x.groupOption,M=x.data,$=x.label,k=x.value,ce=M.key;if(L){var te,Ce=(te=M.title)!==null&&te!==void 0?te:Ln($)?$.toString():void 0;return t.createElement("div",{className:je(j,"".concat(j,"-group")),title:Ce},$!==void 0?$:ce)}var Ie=M.disabled,$e=M.title;M.children;var Q=M.style,Ye=M.className,en=Ze(M,Xt),Le=gt(en,Oe),ve=pe(k),xe=Ie||!ve&&_,ie="".concat(j,"-option"),Ve=je(j,ie,Ye,(C={},oe(C,"".concat(ie,"-grouped"),y),oe(C,"".concat(ie,"-active"),fe===f&&!xe),oe(C,"".concat(ie,"-disabled"),xe),oe(C,"".concat(ie,"-selected"),ve),C)),Ne=ne(x),Ge=!B||typeof B=="function"||ve,we=typeof Ne=="number"?Ne:Ne||k,We=Ln(we)?we.toString():void 0;return $e!==void 0&&(We=$e),t.createElement("div",Ke({},dn(Le),z?{}:Ae(x,f),{"aria-selected":ve,className:Ve,title:We,onMouseMove:function(){fe===f||xe||Se(f)},onClick:function(){xe||Z(k)},style:Q}),t.createElement("div",{className:"".concat(ie,"-content")},typeof H=="function"?H(x,{index:f}):we),t.isValidElement(B)||ve,Ge&&t.createElement(vn,{className:"".concat(j,"-option-state"),customizeIcon:B,customizeIconProps:{value:k,disabled:xe,isSelected:ve}},ve?"✓":null))}))},Jt=t.forwardRef(Yt);const Qt=function(n,e){var o=t.useRef({values:new Map,options:new Map}),a=t.useMemo(function(){var r=o.current,l=r.values,d=r.options,v=n.map(function(s){if(s.label===void 0){var O;return q(q({},s),{},{label:(O=l.get(s.value))===null||O===void 0?void 0:O.label})}return s}),g=new Map,m=new Map;return v.forEach(function(s){g.set(s.value,s),m.set(s.value,e.get(s.value)||d.get(s.value))}),o.current.values=g,o.current.options=m,v},[n,e]),i=t.useCallback(function(r){return e.get(r)||o.current.options.get(r)},[e]);return[a,i]};function yn(n,e){return Bn(n).join("").toUpperCase().includes(e)}const qt=function(n,e,o,a,i){return t.useMemo(function(){if(!o||a===!1)return n;var r=e.options,l=e.label,d=e.value,v=[],g=typeof a=="function",m=o.toUpperCase(),s=g?a:function(u,D){return i?yn(D[i],m):D[r]?yn(D[l!=="children"?l:"label"],m):yn(D[d],m)},O=g?function(u){return En(u)}:function(u){return u};return n.forEach(function(u){if(u[r]){var D=s(o,O(u));if(D)v.push(u);else{var S=u[r].filter(function(N){return s(o,O(N))});S.length&&v.push(q(q({},u),{},oe({},r,S)))}return}s(o,O(u))&&v.push(u)}),v},[n,a,i,o,e])};var Fn=0,Zt=pt();function ea(){var n;return Zt?(n=Fn,Fn+=1):n="TEST_OR_SSR",n}function na(n){var e=t.useState(),o=re(e,2),a=o[0],i=o[1];return t.useEffect(function(){i("rc_select_".concat(ea()))},[]),n||a}var ta=["children","value"],aa=["children"];function oa(n){var e=n,o=e.key,a=e.props,i=a.children,r=a.value,l=Ze(a,ta);return q({key:o,value:r!==void 0?r:o,children:i},l)}function Gn(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return ht(n).map(function(o,a){if(!t.isValidElement(o)||!o.type)return null;var i=o,r=i.type.isSelectOptGroup,l=i.key,d=i.props,v=d.children,g=Ze(d,aa);return e||!r?oa(o):q(q({key:"__RC_SELECT_GRP__".concat(l===null?a:l,"__"),label:l},g),{},{options:Gn(v)})}).filter(function(o){return o})}var ra=function(e,o,a,i,r){return t.useMemo(function(){var l=e,d=!e;d&&(l=Gn(o));var v=new Map,g=new Map,m=function(u,D,S){S&&typeof S=="string"&&u.set(D[S],D)},s=function O(u){for(var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,S=0;S<u.length;S+=1){var N=u[S];!N[a.options]||D?(v.set(N[a.value],N),m(g,N,a.label),m(g,N,i),m(g,N,r)):O(N[a.options],!0)}};return s(l),{options:l,valueOptions:v,labelOptions:g}},[e,o,a,i,r])};function kn(n){var e=t.useRef();e.current=n;var o=t.useCallback(function(){return e.current.apply(e,arguments)},[]);return o}var ia=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","optionRender","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","direction","listHeight","listItemHeight","value","defaultValue","labelInValue","onChange","maxCount"],ua=["inputValue"];function la(n){return!n||fn(n)!=="object"}var ca=t.forwardRef(function(n,e){var o=n.id,a=n.mode,i=n.prefixCls,r=i===void 0?"rc-select":i,l=n.backfill,d=n.fieldNames,v=n.inputValue,g=n.searchValue,m=n.onSearch,s=n.autoClearSearchValue,O=s===void 0?!0:s,u=n.onSelect,D=n.onDeselect,S=n.dropdownMatchSelectWidth,N=S===void 0?!0:S,V=n.filterOption,K=n.filterSort,B=n.optionFilterProp,A=n.optionLabelProp,G=n.options,z=n.optionRender,X=n.children,Y=n.defaultActiveFirstOption,le=n.menuItemSelectedIcon,H=n.virtual,j=n.direction,F=n.listHeight,ee=F===void 0?200:F,_=n.listItemHeight,J=_===void 0?20:_,T=n.value,E=n.defaultValue,p=n.labelInValue,se=n.onChange,fe=n.maxCount,Te=Ze(n,ia),Se=na(o),pe=Rn(a),Z=!!(!G&&X),Oe=t.useMemo(function(){return V===void 0&&a==="combobox"?!1:V},[V,a]),ne=t.useMemo(function(){return Hn(d,Z)},[JSON.stringify(d),Z]),Ae=In("",{value:g!==void 0?g:v,postState:function(b){return b||""}}),Pe=re(Ae,2),he=Pe[0],x=Pe[1],f=ra(G,X,ne,B,A),C=f.valueOptions,L=f.labelOptions,y=f.options,M=t.useCallback(function(h){var b=Bn(h);return b.map(function(c){var R,W,U,Ee,Re;if(la(c))R=c;else{var Xe;U=c.key,W=c.label,R=(Xe=c.value)!==null&&Xe!==void 0?Xe:U}var de=C.get(R);if(de){var Fe;W===void 0&&(W=de==null?void 0:de[A||ne.label]),U===void 0&&(U=(Fe=de==null?void 0:de.key)!==null&&Fe!==void 0?Fe:R),Ee=de==null?void 0:de.disabled,Re=de==null?void 0:de.title}return{label:W,value:R,key:U,disabled:Ee,title:Re}})},[ne,A,C]),$=In(E,{value:T}),k=re($,2),ce=k[0],te=k[1],Ce=t.useMemo(function(){var h,b=pe&&ce===null?[]:ce,c=M(b);return a==="combobox"&&Pt((h=c[0])===null||h===void 0?void 0:h.value)?[]:c},[ce,M,a,pe]),Ie=Qt(Ce,C),$e=re(Ie,2),Q=$e[0],Ye=$e[1],en=t.useMemo(function(){if(!a&&Q.length===1){var h=Q[0];if(h.value===null&&(h.label===null||h.label===void 0))return[]}return Q.map(function(b){var c;return q(q({},b),{},{label:(c=b.label)!==null&&c!==void 0?c:b.value})})},[a,Q]),Le=t.useMemo(function(){return new Set(Q.map(function(h){return h.value}))},[Q]);t.useEffect(function(){if(a==="combobox"){var h,b=(h=Q[0])===null||h===void 0?void 0:h.value;x(Ot(b)?String(b):"")}},[Q]);var ve=kn(function(h,b){var c,R=b??h;return c={},oe(c,ne.value,h),oe(c,ne.label,R),c}),xe=t.useMemo(function(){if(a!=="tags")return y;var h=De(y),b=function(R){return C.has(R)};return De(Q).sort(function(c,R){return c.value<R.value?-1:1}).forEach(function(c){var R=c.value;b(R)||h.push(ve(R,c.label))}),h},[ve,y,C,Q,a]),ie=qt(xe,ne,he,Oe,B),Ve=t.useMemo(function(){return a!=="tags"||!he||ie.some(function(h){return h[B||"value"]===he})||ie.some(function(h){return h[ne.value]===he})?ie:[ve(he)].concat(De(ie))},[ve,B,a,ie,he,ne]),Ne=t.useMemo(function(){return K?De(Ve).sort(function(h,b){return K(h,b)}):Ve},[Ve,K]),Ge=t.useMemo(function(){return Bt(Ne,{fieldNames:ne,childrenAsData:Z})},[Ne,ne,Z]),we=function(b){var c=M(b);if(te(c),se&&(c.length!==Q.length||c.some(function(U,Ee){var Re;return((Re=Q[Ee])===null||Re===void 0?void 0:Re.value)!==(U==null?void 0:U.value)}))){var R=p?c:c.map(function(U){return U.value}),W=c.map(function(U){return En(Ye(U.value))});se(pe?R:R[0],pe?W:W[0])}},We=t.useState(null),Be=re(We,2),mn=Be[0],ye=Be[1],on=t.useState(0),Me=re(on,2),gn=Me[0],pn=Me[1],nn=Y!==void 0?Y:a!=="combobox",rn=t.useCallback(function(h,b){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},R=c.source,W=R===void 0?"keyboard":R;pn(b),l&&a==="combobox"&&h!==null&&W==="keyboard"&&ye(String(h))},[l,a]),Je=function(b,c,R){var W=function(){var an,ke=Ye(b);return[p?{label:ke==null?void 0:ke[ne.label],value:b,key:(an=ke==null?void 0:ke.key)!==null&&an!==void 0?an:b}:b,En(ke)]};if(c&&u){var U=W(),Ee=re(U,2),Re=Ee[0],Xe=Ee[1];u(Re,Xe)}else if(!c&&D&&R!=="clear"){var de=W(),Fe=re(de,2),hn=Fe[0],bn=Fe[1];D(hn,bn)}},un=kn(function(h,b){var c,R=pe?b.selected:!0;R?c=pe?[].concat(De(Q),[h]):[h]:c=Q.filter(function(W){return W.value!==h}),we(c),Je(h,R),a==="combobox"?ye(""):(!Rn||O)&&(x(""),ye(""))}),ln=function(b,c){we(b);var R=c.type,W=c.values;(R==="remove"||R==="clear")&&W.forEach(function(U){Je(U.value,!1,R)})},cn=function(b,c){if(x(b),ye(null),c.source==="submit"){var R=(b||"").trim();if(R){var W=Array.from(new Set([].concat(De(Le),[R])));we(W),Je(R,!0),x("")}return}c.source!=="blur"&&(a==="combobox"&&we(b),m==null||m(b))},tn=function(b){var c=b;a!=="tags"&&(c=b.map(function(W){var U=L.get(W);return U==null?void 0:U.value}).filter(function(W){return W!==void 0}));var R=Array.from(new Set([].concat(De(Le),De(c))));we(R),R.forEach(function(W){Je(W,!0)})},ue=t.useMemo(function(){var h=H!==!1&&N!==!1;return q(q({},f),{},{flattenOptions:Ge,onActiveValue:rn,defaultActiveFirstOption:nn,onSelect:un,menuItemSelectedIcon:le,rawValues:Le,fieldNames:ne,virtual:h,direction:j,listHeight:ee,listItemHeight:J,childrenAsData:Z,maxCount:fe,optionRender:z})},[fe,f,Ge,rn,nn,un,le,Le,ne,H,N,j,ee,J,Z,z]);return t.createElement(Dn.Provider,{value:ue},t.createElement(jt,Ke({},Te,{id:Se,prefixCls:r,ref:e,omitDomProps:ua,mode:a,displayValues:en,onDisplayValuesChange:ln,direction:j,searchValue:he,onSearch:cn,autoClearSearchValue:O,onSearchSplit:tn,dropdownMatchSelectWidth:N,OptionList:Jt,emptyOptions:!Ge.length,activeValue:mn,activeDescendantId:"".concat(Se,"_list_").concat(gn)})))}),Xn=ca;Xn.Option=jn;Xn.OptGroup=Un;export{jt as B,jn as O,Xn as T,Un as a,na as b,It as u};
