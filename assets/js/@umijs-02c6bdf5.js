import{r as l}from"./react-12b51ca5.js";var c=globalThis&&globalThis.__assign||function(){return c=Object.assign||function(a){for(var e,i=1,t=arguments.length;i<t;i++){e=arguments[i];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r])}return a},c.apply(this,arguments)};function b(a){var e,i=(typeof window<"u"?window:{}).URL,t=new i((e=window==null?void 0:window.location)===null||e===void 0?void 0:e.href);return Object.keys(a).forEach(function(r){var n=a[r];n!=null?Array.isArray(n)?(t.searchParams.delete(r),n.forEach(function(d){t.searchParams.append(r,d)})):n instanceof Date?Number.isNaN(n.getTime())||t.searchParams.set(r,n.toISOString()):typeof n=="object"?t.searchParams.set(r,JSON.stringify(n)):t.searchParams.set(r,n):t.searchParams.delete(r)}),t}function U(a,e){var i;a===void 0&&(a={}),e===void 0&&(e={disabled:!1});var t=l.useState(),r=t[1],n=typeof window<"u"&&((i=window==null?void 0:window.location)===null||i===void 0?void 0:i.search),d=l.useMemo(function(){return e.disabled?{}:new URLSearchParams(n||{})},[e.disabled,n]),w=l.useMemo(function(){if(e.disabled)return{};if(typeof window>"u"||!window.URL)return{};var o=[];d.forEach(function(u,s){o.push({key:s,value:u})}),o=o.reduce(function(u,s){return(u[s.key]=u[s.key]||[]).push(s),u},{}),o=Object.keys(o).map(function(u){var s=o[u];return s.length===1?[u,s[0].value]:[u,s.map(function(v){var m=v.value;return m})]});var f=c({},a);return o.forEach(function(u){var s=u[0],v=u[1];f[s]=S(s,v,{},a)}),f},[e.disabled,a,d]);function h(o){if(!(typeof window>"u"||!window.URL)){var f=b(o);window.location.search!==f.search&&window.history.replaceState({},"",f.toString()),d.toString()!==f.searchParams.toString()&&r({})}}l.useEffect(function(){e.disabled||typeof window>"u"||!window.URL||h(c(c({},a),w))},[e.disabled,w]);var p=function(o){h(o)};return l.useEffect(function(){if(e.disabled)return function(){};if(typeof window>"u"||!window.URL)return function(){};var o=function(){r({})};return window.addEventListener("popstate",o),function(){window.removeEventListener("popstate",o)}},[e.disabled]),[w,p]}var P={true:!0,false:!1};function S(a,e,i,t){if(!i)return e;var r=i[a],n=e===void 0?t[a]:e;return r===Number?Number(n):r===Boolean||e==="true"||e==="false"?P[n]:Array.isArray(r)?r.find(function(d){return d==n})||t[a]:n}export{U as u};
