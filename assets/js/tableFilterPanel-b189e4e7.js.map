{"version":3,"file":"tableFilterPanel-b189e4e7.js","sources":["../../../src/views/list/basicTable/components/tableFilterPanel.tsx"],"sourcesContent":["import React, { useRef, useState } from 'react'\r\nimport { SearchOutlined } from '@ant-design/icons'\r\nimport type { GetRef, TableColumnsType, TableColumnType } from 'antd'\r\nimport { Button, Input, Space, Table } from 'antd'\r\nimport type { FilterDropdownProps } from 'antd/es/table/interface'\r\nimport Highlighter from 'react-highlight-words'\r\n\r\ntype InputRef = GetRef<typeof Input>\r\n\r\ninterface DataType {\r\n\tkey: string\r\n\tname: string\r\n\tage: number\r\n\taddress: string\r\n}\r\n\r\ntype DataIndex = keyof DataType\r\n\r\nconst data: DataType[] = [\r\n\t{\r\n\t\tkey: '1',\r\n\t\tname: 'John Brown',\r\n\t\tage: 32,\r\n\t\taddress: 'New York No. 1 Lake Park',\r\n\t},\r\n\t{\r\n\t\tkey: '2',\r\n\t\tname: 'Joe Black',\r\n\t\tage: 42,\r\n\t\taddress: 'London No. 1 Lake Park',\r\n\t},\r\n\t{\r\n\t\tkey: '3',\r\n\t\tname: 'Jim Green',\r\n\t\tage: 32,\r\n\t\taddress: 'Sydney No. 1 Lake Park',\r\n\t},\r\n\t{\r\n\t\tkey: '4',\r\n\t\tname: 'Jim Red',\r\n\t\tage: 32,\r\n\t\taddress: 'London No. 2 Lake Park',\r\n\t},\r\n]\r\n\r\nconst App: any = ({ isShow }: any) => {\r\n\tconst [searchText, setSearchText] = useState('')\r\n\tconst [searchedColumn, setSearchedColumn] = useState('')\r\n\t// const searchInput = useRef<InputRef>(null);\r\n\tconst searchInput = useRef<any>(null)\r\n\r\n\tconst handleSearch = (selectedKeys: string[], confirm: FilterDropdownProps['confirm'], dataIndex: DataIndex) => {\r\n\t\tconfirm()\r\n\t\tsetSearchText(selectedKeys[0])\r\n\t\tsetSearchedColumn(dataIndex)\r\n\t}\r\n\r\n\tconst handleReset = (clearFilters: () => void) => {\r\n\t\tclearFilters()\r\n\t\tsetSearchText('')\r\n\t}\r\n\r\n\tconst getColumnSearchProps = (dataIndex: DataIndex): TableColumnType<DataType> => ({\r\n\t\tfilterDropdown: ({ setSelectedKeys, selectedKeys, confirm, clearFilters, close }) => (\r\n\t\t\t<div style={{ padding: 8 }} onKeyDown={e => e.stopPropagation()}>\r\n\t\t\t\t<Input\r\n\t\t\t\t\tref={searchInput}\r\n\t\t\t\t\tplaceholder={`Search ${dataIndex}`}\r\n\t\t\t\t\tvalue={selectedKeys[0]}\r\n\t\t\t\t\tonChange={e => setSelectedKeys(e.target.value ? [e.target.value] : [])}\r\n\t\t\t\t\tonPressEnter={() => handleSearch(selectedKeys as string[], confirm, dataIndex)}\r\n\t\t\t\t\tstyle={{ marginBottom: 8, display: 'block' }}\r\n\t\t\t\t/>\r\n\t\t\t\t<Space>\r\n\t\t\t\t\t<Button type=\"primary\" onClick={() => handleSearch(selectedKeys as string[], confirm, dataIndex)} icon={<SearchOutlined />} size=\"small\" style={{ width: 90 }}>\r\n\t\t\t\t\t\tSearch\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button onClick={() => clearFilters && handleReset(clearFilters)} size=\"small\" style={{ width: 90 }}>\r\n\t\t\t\t\t\tReset\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\ttype=\"link\"\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tconfirm({ closeDropdown: false })\r\n\t\t\t\t\t\t\tsetSearchText((selectedKeys as string[])[0])\r\n\t\t\t\t\t\t\tsetSearchedColumn(dataIndex)\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\tFilter\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\ttype=\"link\"\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tclose()\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\tclose\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Space>\r\n\t\t\t</div>\r\n\t\t),\r\n\t\tfilterIcon: (filtered: boolean) => <SearchOutlined style={{ color: filtered ? '#1677ff' : undefined }} />,\r\n\t\tonFilter: (value, record) =>\r\n\t\t\trecord[dataIndex]\r\n\t\t\t\t.toString()\r\n\t\t\t\t.toLowerCase()\r\n\t\t\t\t.includes((value as string).toLowerCase()),\r\n\t\tonFilterDropdownOpenChange: visible => {\r\n\t\t\tif (visible) {\r\n\t\t\t\tsetTimeout(() => searchInput.current?.select(), 100)\r\n\t\t\t}\r\n\t\t},\r\n\t\trender: text =>\r\n\t\t\tsearchedColumn === dataIndex ? (\r\n\t\t\t\t<Highlighter highlightStyle={{ backgroundColor: '#ffc069', padding: 0 }} searchWords={[searchText]} autoEscape textToHighlight={text ? text.toString() : ''} />\r\n\t\t\t) : (\r\n\t\t\t\ttext\r\n\t\t\t),\r\n\t})\r\n\r\n\tconst columns: TableColumnsType<DataType> = [\r\n\t\t{\r\n\t\t\ttitle: 'Name',\r\n\t\t\tdataIndex: 'name',\r\n\t\t\tkey: 'name',\r\n\t\t\twidth: '30%',\r\n\t\t\t...getColumnSearchProps('name'),\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Age',\r\n\t\t\tdataIndex: 'age',\r\n\t\t\tkey: 'age',\r\n\t\t\twidth: '20%',\r\n\t\t\t...getColumnSearchProps('age'),\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Address',\r\n\t\t\tdataIndex: 'address',\r\n\t\t\tkey: 'address',\r\n\t\t\t...getColumnSearchProps('address'),\r\n\t\t\tsorter: (a, b) => a.address.length - b.address.length,\r\n\t\t\tsortDirections: ['descend', 'ascend'],\r\n\t\t},\r\n\t]\r\n\r\n\treturn isShow && <Table columns={columns} dataSource={data} />\r\n}\r\n\r\nexport default App\r\n"],"names":["data","App","isShow","searchText","setSearchText","useState","searchedColumn","setSearchedColumn","searchInput","useRef","handleSearch","selectedKeys","confirm","dataIndex","handleReset","clearFilters","getColumnSearchProps","setSelectedKeys","close","jsxs","e","jsx","Input","Space","Button","SearchOutlined","filtered","value","record","visible","_a","text","Highlighter","columns","a","b","Table"],"mappings":"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"}