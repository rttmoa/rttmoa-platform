{"version":3,"file":"Lane1ã€å¤‡ä»½ã€‘-f57ddea8.js","sources":["../../../src/views/module/storage/components/Lane1ã€å¤‡ä»½ã€‘.tsx"],"sourcesContent":["import React from 'react'\nimport { Space, Table, Tag, Tooltip } from 'antd'\nimport type { TableProps } from 'antd'\nimport './index.less'\n\n// ! http://localhost:9527/#/module/storage\n\ninterface DataType {\n\tkey?: string\n\tlane: number\n\trow: number\n\tlayer: number\n\tcolumn1: number\n\tcolumn2: number\n\tcolumn3: number\n\tcolumn4: number\n\tcolumn5: number\n\tcolumn6: number\n\tcolumn7: number\n\tcolumn8: number\n\tcolumn9: number\n\tcolumn10: number\n\tcolumn11: number\n}\n\n//* è¡¨æ ¼æç¤ºæ¡†ï¼Œé¼ æ ‡æ‚¬åœæ—¶æ˜¾ç¤ºçš„å†…å®¹  â€”â€”  è´§ä½ä¿¡æ¯ï¼šè´§å“åè¯ã€ç”Ÿäº§æ—¥æœŸã€åœ¨åº“æ•´æ•°æ€»æ•°\nfunction titleFN(data: string, record?: any, index?: number) {\n\t// console.log('titleFN', data, record, index)\n\tif (!data) return null\n\tconst lane = record?.lane ?? ''\n\tconst row = record?.row ?? ''\n\tconst layer = record?.layer ?? ''\n\tconst str = `${row}æ’ - ${layer}å±‚ - ${data}åˆ—`\n\n\tlet color = data === 'ç©ºé—²' ? '#B4EEB4' : '#FF6A6A' // ç»¿è‰² / çº¢è‰²\n\tcolor = '#FFF'\n\n\treturn (\n\t\t<Tooltip\n\t\t\tplacement=\"top\"\n\t\t\tcolor=\"#fff\"\n\t\t\ttitle={\n\t\t\t\t<table className=\"w-full border-collapse  text-slate-700 \">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th className=\"w-[250px] text-[12px] text-center\">è´§å“åè¯</th>\n\t\t\t\t\t\t<th className=\"w-[150px] text-[12px] text-center\">ç”Ÿäº§æ—¥æœŸ</th>\n\t\t\t\t\t\t<th className=\"w-[350px] text-[12px] text-center\">åœ¨åº“æ•´æ•°æ€»æ•°</th>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td className=\"  text-[12px] text-center\">é£Ÿå“ç«è…¿è‚ </td>\n\t\t\t\t\t\t<td className=\"  text-[12px] text-center\">2020-11-19 12:32:00</td>\n\t\t\t\t\t\t<td className=\"w-[350px] text-[12px] text-center\">500ç®±0æ ¹</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t}>\n\t\t\t{/* {str} */}\n\t\t\t<div style={{ backgroundColor: color, padding: '4px 8px', textAlign: 'center' }}>{str}</div>\n\t\t</Tooltip>\n\t)\n}\n\nconst statuses = ['ç©ºé—²', 'å ç”¨']\nconst randomStatus = statuses[Math.floor(Math.random() * statuses.length)]\nconsole.log(randomStatus) // éšæœºè¾“å‡ºï¼šç©ºé—² æˆ– å ç”¨\nlet rawData: any[] = []\nfor (let w = 1; w < 2; w++) {\n\t// å··é“\n\tfor (let i = 1; i < 3; i++) {\n\t\t// æ’\n\t\tfor (let j = 1; j < 7; j++) {\n\t\t\t// åˆ—\n\t\t\tfor (let k = 1; k < 5; k++) {\n\t\t\t\t// å±‚\n\t\t\t\tconst res = `ç¬¬${i}æ’ ${j}åˆ— ${k}å±‚`\n\t\t\t\tconsole.log(res)\n\t\t\t\tlet obj = {}\n\t\t\t\tif (j == 1) Object.assign(obj, { column1: j })\n\t\t\t\tif (j == 2) Object.assign(obj, { column2: j })\n\t\t\t\tif (j == 3) Object.assign(obj, { column3: j })\n\t\t\t\tif (j == 4) Object.assign(obj, { column4: j })\n\t\t\t\tif (j == 5) Object.assign(obj, { column5: j })\n\t\t\t\tif (j == 6) Object.assign(obj, { column6: j })\n\t\t\t\trawData.push({\n\t\t\t\t\tkey: res,\n\t\t\t\t\tlane: w, // å··é“\n\t\t\t\t\trow: i, // æ’\n\t\t\t\t\tcolumn: j, // åˆ—\n\t\t\t\t\tlayer: k, // å±‚\n\t\t\t\t\tstatus: randomStatus,\n\t\t\t\t\t...obj,\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n}\n// console.log('è´§ä½ rawDataï¼š', rawData)\n// !  è¿™ä¸ªæ•°ç»„ï¼Œlaneç›¸åŒåˆå¹¶è¡Œï¼Œrowä¸€æ ·åˆå¹¶è¡Œï¼Œè¯¥å¦‚ä½•å¤„ç†è¿™ä¸ªæ•°ç»„ï¼Ÿ\n\n// ğŸ“Œ 1ï¸âƒ£ å¤„ç†æ•°æ®ï¼ŒæŠŠ column1 ~ columnN ç»“æ„æ•´ç†å¥½\nconst groupedData: any[] = []\n\nrawData.forEach(item => {\n\tconst { lane, row, layer, column } = item\n\tconst key = `ç¬¬${lane}å··é“ - ${row}æ’ - ${layer}å±‚`\n\n\tlet existing = groupedData.find(d => d.key === key)\n\tif (!existing) {\n\t\texisting = {\n\t\t\tkey,\n\t\t\tlane,\n\t\t\trow,\n\t\t\tlayer,\n\t\t\tcolumn1: null,\n\t\t\tcolumn2: null,\n\t\t\tcolumn3: null,\n\t\t\tcolumn4: null,\n\t\t\tcolumn5: null,\n\t\t\tcolumn6: null,\n\t\t\t// ...item,\n\t\t}\n\t\tgroupedData.push(existing)\n\t}\n\n\t// æŒ‰åˆ—å·å¡«å…… column1 ~ columnN\n\texisting[`column${column}`] = column\n})\n\nconsole.log('è´§ä½ rawDataï¼š', rawData) //* æ€»å…±24æ¡\nconsole.log('åˆå§‹ groupedData', groupedData) //* æ€»å…±8æ¡\n\n// ğŸ“Œ 2ï¸âƒ£ å¤„ç† rowSpanï¼Œåˆå¹¶ç›¸åŒè¡Œ\nconst rowSpanMap = new Map<string, number>()\ngroupedData.forEach((item, index) => {\n\tconst key = `${item.lane}-${item.row}-${item.layer}`\n\tif (!rowSpanMap.has(key)) {\n\t\trowSpanMap.set(key, groupedData.filter(d => d.lane === item.lane && d.row === item.row && d.layer === item.layer).length)\n\t}\n})\nconsole.log('å¤„ç†å groupedData', groupedData)\ngroupedData.sort((a, b) => {\n\tif (a.row != b.row) {\n\t\treturn a.row - b.row // æŒ‰ row å‡åº\n\t}\n\treturn b.layer - a.layer // æŒ‰ layer é™åº\n})\nconsole.log('æ’åº groupedData', groupedData)\n\n// http://localhost:9527/#/module/storage\nconst columns: TableProps<DataType>['columns'] = [\n\t{\n\t\ttitle: 'RowHead',\n\t\tdataIndex: 'key',\n\t\t// rowScope: 'row', //* title  ä»¥èº«å…¥å±€\n\t\twidth: 120,\n\t\tfixed: 'left',\n\t},\n\t// {\n\t// \ttitle: 'å··é“',\n\t// \tdataIndex: 'lane',\n\t// \tkey: 'lane',\n\t// \twidth: 50,\n\t// \trender: (value, row, index) => {\n\t// \t\t// æ‹¿åˆ°å½“å‰è¡Œ\n\t// \t\tconst currentLane = row.lane\n\t// \t\tconst currentRow = row.row\n\n\t// \t\t// æŸ¥æ‰¾å‰é¢çš„è¡Œ\n\t// \t\tconst prevRow = groupedData[index - 1]\n\t// \t\tif (prevRow && prevRow.lane === currentLane) {\n\t// \t\t\t// å¦‚æœä¸Šä¸€è¡Œ laneã€row ä¸€æ ·ï¼Œè¯´æ˜åº”è¯¥è¢«åˆå¹¶\n\t// \t\t\treturn {\n\t// \t\t\t\tchildren: null,\n\t// \t\t\t\tprops: { rowSpan: 0 },\n\t// \t\t\t}\n\t// \t\t}\n\n\t// \t\t// è®¡ç®—æœ‰å¤šå°‘è¡Œæ˜¯éœ€è¦åˆå¹¶çš„\n\t// \t\tlet rowSpan = 1\n\t// \t\tfor (let i = index + 1; i < groupedData.length; i++) {\n\t// \t\t\tif (groupedData[i].lane === currentLane) {\n\t// \t\t\t\trowSpan++\n\t// \t\t\t} else {\n\t// \t\t\t\tbreak\n\t// \t\t\t}\n\t// \t\t}\n\t// \t\tconsole.log('rowSpan', rowSpan)\n\t// \t\treturn {\n\t// \t\t\tchildren: value,\n\t// \t\t\tprops: { rowSpan },\n\t// \t\t}\n\t// \t},\n\t// },\n\t{\n\t\ttitle: 'æ’',\n\t\tdataIndex: 'row',\n\t\tkey: 'row',\n\t\twidth: 50,\n\t\trender: (value, row, index) => {\n\t\t\t// æ‹¿åˆ°å½“å‰è¡Œ\n\t\t\tconst currentLane = row.lane\n\t\t\tconst currentRow = row.row\n\n\t\t\t// æŸ¥æ‰¾å‰é¢çš„è¡Œ\n\t\t\tconst prevRow = groupedData[index - 1]\n\t\t\tif (prevRow && prevRow.row === currentRow) {\n\t\t\t\t// å¦‚æœä¸Šä¸€è¡Œ laneã€row ä¸€æ ·ï¼Œè¯´æ˜åº”è¯¥è¢«åˆå¹¶\n\t\t\t\treturn {\n\t\t\t\t\tchildren: null,\n\t\t\t\t\tprops: { rowSpan: 0 },\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// è®¡ç®—æœ‰å¤šå°‘è¡Œæ˜¯éœ€è¦åˆå¹¶çš„\n\t\t\tlet rowSpan = 1\n\t\t\tfor (let i = index + 1; i < groupedData.length; i++) {\n\t\t\t\tif (groupedData[i].row === currentRow) {\n\t\t\t\t\trowSpan++\n\t\t\t\t} else {\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tchildren: value,\n\t\t\t\tprops: { rowSpan },\n\t\t\t}\n\t\t},\n\t},\n\t{\n\t\ttitle: 'å±‚',\n\t\tdataIndex: 'layer',\n\t\tkey: 'layer',\n\t\twidth: 50,\n\t},\n\t{\n\t\ttitle: 'ç¬¬1åˆ—',\n\t\tdataIndex: 'column1',\n\t\tkey: 'column1',\n\t\trender: (value, record, index) => titleFN(value, record, index),\n\t},\n\t{\n\t\ttitle: 'ç¬¬2åˆ—',\n\t\tdataIndex: 'column2',\n\t\tkey: 'column2',\n\t\trender: (value, record, index) => titleFN(value, record, index),\n\t},\n\t{\n\t\ttitle: 'ç¬¬3åˆ—',\n\t\tdataIndex: 'column3',\n\t\tkey: 'column3',\n\t\trender: (value, record, index) => titleFN(value, record, index),\n\t},\n\t{\n\t\ttitle: 'ç¬¬4åˆ—',\n\t\tdataIndex: 'column4',\n\t\tkey: 'column4',\n\t\trender: (value, record, index) => titleFN(value, record, index),\n\t},\n\t{\n\t\ttitle: 'ç¬¬5åˆ—',\n\t\tdataIndex: 'column5',\n\t\tkey: 'column5',\n\t\trender: (value, record, index) => titleFN(value, record, index),\n\t},\n\t{\n\t\ttitle: 'ç¬¬6åˆ—',\n\t\tdataIndex: 'column6',\n\t\tkey: 'column6',\n\t\trender: (value, record, index) => titleFN(value, record, index),\n\t},\n]\nconsole.log('columns length', columns.length)\n\nconst Lane: React.FC = () => {\n\tconsole.log('å··é“ä¸€')\n\tlet Header = (\n\t\t<div className=\"flex\">\n\t\t\t<div className=\"w-[80px] px-[4px] py-[6px]  text-center text-[12px] bg-slate-100\">ç©ºåº“ä½</div>\n\t\t\t<div className=\"w-[80px] px-[4px] py-[6px]  text-center text-[12px] bg-pink-300\">é¢„å ç”¨åº“ä½</div>\n\t\t\t<div className=\"w-[80px] px-[4px] py-[6px]  text-center text-[12px] bg-green-400\">æœ‰åº“å­˜åº“ä½</div>\n\t\t\t<div className=\"w-[80px] px-[4px] py-[6px]  text-center text-[12px] bg-slate-100 text-red-500\">é€‰ä¸­åº“ä½</div>\n\t\t</div>\n\t)\n\treturn (\n\t\t<Table<DataType>\n\t\t\tclassName=\"cusTable\"\n\t\t\ttitle={() => Header}\n\t\t\tcolumns={columns}\n\t\t\tdataSource={groupedData}\n\t\t\t// scroll={{ x: \"max-content\" }}\n\t\t\tscroll={{ x: columns.length * 150 }}\n\t\t\tpagination={false}\n\t\t/>\n\t)\n}\n\nexport default Lane\n"],"names":["titleFN","data","record","index","row","layer","str","color","jsx","Tooltip","jsxs","statuses","randomStatus","rawData","w","i","j","k","res","obj","groupedData","item","lane","column","key","existing","d","rowSpanMap","a","b","columns","value","currentRow","prevRow","rowSpan","Lane","Header","Table"],"mappings":"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"}