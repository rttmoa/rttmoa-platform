import{g as X,h as G,r as D,o,ax as ne,bf as O,bg as L,j as t,D as je,co as Z,N as A,_ as N,br as J,ce as de,a as K,ap as Y,ba as Se,bd as ke,cV as ue,aJ as Ce,aI as Te,k as ee,aY as ie,i as we,ck as Ie,av as H,aw as Ee,cW as De,B as $,m as z,bi as Pe,ao as Be,aq as Fe,ad as Re}from"./index-27069029.js";import{P as ze,a as Me,U as Le}from"./UpdateForm-5386878b.js";import{r as _,d as $e,L as U,E as Ae,g as qe,a as ce,b as V,I as Oe,i as Ke,P as Ne,M as He}from"./Table-dac5aab3.js";import{u as We,s as _e,f as ve,p as le,c as Q,b as fe,h as Ve,o as Qe}from"./index-6f5fe7a9.js";import{C as M}from"./index-0ed61a77.js";import{S as b}from"./Skeleton-2867eeca.js";import{D as te}from"./index-0de6acec.js";import"./index-01f37548.js";import"./index-8d525821.js";import"./Table-778951e0.js";import"./index-f5e989dc.js";import"./zh_CN-b8e4881f.js";import"./styleChecker-3c9c7d8a.js";import"./List-3450d2b7.js";import"./Tree-409ac648.js";import"./conductUtil-6ae751c6.js";import"./index-4c31189a.js";import"./index-04342e75.js";import"./index-1c2b87a6.js";import"./Select-91793026.js";import"./useIcons-4fdad9d1.js";import"./index-c7a6d802.js";import"./iconUtil-3fadc6e3.js";import"./index-cfb6273e.js";import"./index-59326c40.js";import"./index-e66e6450.js";import"./transButton-dd8aeafb.js";import"./index-a97ce548.js";import"./Cascader-9b288c15.js";import"./map-8896c478.js";import"./_baseAssignValue-36cffc6e.js";import"./_baseClone-c52204b1.js";import"./_copyArray-def4d55c.js";import"./ColorPicker-6b52c9cd.js";import"./ColorPicker-3819474b.js";import"./customParseFormat-94115884.js";import"./SinglePicker-69abe8d6.js";import"./index-275c5f8b.js";import"./index-815bf79f.js";import"./Image-54ca6262.js";import"./index-220acf11.js";import"./Rate-5510c0a5.js";import"./index-cd9faa3b.js";import"./index-64815b30.js";import"./index-5a4f9e83.js";import"./index-b412e4b9.js";import"./TreeSelect-0cceeb2e.js";import"./isoWeek-cb5f3e47.js";import"./index-ac3199eb.js";import"./Steps-679d19bd.js";var Xe=function(e){return(ne.warn||ne.warning)(e)};function Ge(r){var e=r.data,a=r.row;return o(o({},e),a)}function Je(r){var e=r.type||"single",a=We(),n=X([],{value:r.editableKeys,onChange:r.onChange?function(x){var c;r==null||(c=r.onChange)===null||c===void 0||c.call(r,x,r.dataSource)}:void 0}),i=G(n,2),s=i[0],m=i[1],h=D.useMemo(function(){var x=e==="single"?s==null?void 0:s.slice(0,1):s;return new Set(x)},[(s||[]).join(","),e]),y=D.useCallback(function(x){return!!(s!=null&&s.includes(_(x)))},[(s||[]).join(",")]),g=function(c){return h.size>0&&e==="single"?(Xe(r.onlyOneLineEditorAlertMessage||a.getMessage("editableTable.onlyOneLineEditor","只能同时编辑一行")),!1):(h.add(_(c)),m(Array.from(h)),!0)},v=function(c){return h.delete(_(c)),m(Array.from(h)),!0},j=function(){var x=O(L().mark(function c(S,u,T,I){var E,P;return L().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,r==null||(E=r.onCancel)===null||E===void 0?void 0:E.call(r,S,u,T,I);case 2:if(P=l.sent,P!==!1){l.next=5;break}return l.abrupt("return",!1);case 5:return l.abrupt("return",!0);case 6:case"end":return l.stop()}},c)}));return function(S,u,T,I){return x.apply(this,arguments)}}(),w=function(){var x=O(L().mark(function c(S,u,T){var I,E,P;return L().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,r==null||(I=r.onSave)===null||I===void 0?void 0:I.call(r,S,u,T);case 2:if(E=l.sent,E!==!1){l.next=5;break}return l.abrupt("return",!1);case 5:return l.next=7,v(S);case 7:return P={data:r.dataSource,row:u,key:S,childrenColumnName:r.childrenColumnName||"children"},r.setDataSource(Ge(P)),l.abrupt("return",!0);case 10:case"end":return l.stop()}},c)}));return function(S,u,T){return x.apply(this,arguments)}}(),C=a.getMessage("editableTable.action.save","保存"),d=a.getMessage("editableTable.action.delete","删除"),f=a.getMessage("editableTable.action.cancel","取消"),B=D.useCallback(function(x,c){var S=o({recordKey:x,cancelEditable:v,onCancel:j,onSave:w,editableKeys:s,setEditableRowKeys:m,saveText:C,cancelText:f,deleteText:d,deletePopconfirmMessage:"".concat(a.getMessage("deleteThisLine","删除此项"),"?"),editorType:"Map"},c),u=$e(r.dataSource,S);return r.actionRender?r.actionRender(r.dataSource,S,{save:u.save,delete:u.delete,cancel:u.cancel}):[u.save,u.delete,u.cancel]},[s&&s.join(","),r.dataSource]);return{editableKeys:s,setEditableRowKeys:m,isEditable:y,actionRender:B,startEditable:g,cancelEditable:v}}var ae=function(e){var a=e.padding;return t.jsx("div",{style:{padding:a||"0 24px"},children:t.jsx(je,{style:{margin:0}})})},Ye={xs:2,sm:2,md:4,lg:4,xl:6,xxl:6},Ue=function(e){var a=e.size,n=e.active,i=D.useMemo(function(){return{lg:!0,md:!0,sm:!1,xl:!1,xs:!1,xxl:!1}},[]),s=Z()||i,m=Object.keys(s).filter(function(g){return s[g]===!0})[0]||"md",h=a===void 0?Ye[m]||6:a,y=function(v){return v===0?0:h>2?42:16};return t.jsx(M,{bordered:!1,style:{marginBlockEnd:16},children:t.jsx("div",{style:{width:"100%",justifyContent:"space-between",display:"flex"},children:new Array(h).fill(null).map(function(g,v){return t.jsxs("div",{style:{borderInlineStart:h>2&&v===1?"1px solid rgba(0,0,0,0.06)":void 0,paddingInlineStart:y(v),flex:1,marginInlineEnd:v===0?16:0},children:[t.jsx(b,{active:n,paragraph:!1,title:{width:100,style:{marginBlockStart:0}}}),t.jsx(b.Button,{active:n,style:{height:48}})]},v)})})})},Ze=function(e){var a=e.active;return t.jsxs(t.Fragment,{children:[t.jsx(M,{bordered:!1,style:{borderRadius:0},styles:{body:{padding:24}},children:t.jsxs("div",{style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[t.jsx("div",{style:{maxWidth:"100%",flex:1},children:t.jsx(b,{active:a,title:{width:100,style:{marginBlockStart:0}},paragraph:{rows:1,style:{margin:0}}})}),t.jsx(b.Button,{active:a,size:"small",style:{width:165,marginBlockStart:12}})]})}),t.jsx(ae,{})]})},et=function(e){var a=e.size,n=e.active,i=n===void 0?!0:n,s=e.actionButton;return t.jsxs(M,{bordered:!1,styles:{body:{padding:0}},children:[new Array(a).fill(null).map(function(m,h){return t.jsx(Ze,{active:!!i},h)}),s!==!1&&t.jsx(M,{bordered:!1,style:{borderStartEndRadius:0,borderTopLeftRadius:0},styles:{body:{display:"flex",alignItems:"center",justifyContent:"center"}},children:t.jsx(b.Button,{style:{width:102},active:i,size:"small"})})]})},re=function(e){var a=e.active;return t.jsxs("div",{style:{marginBlockEnd:16},children:[t.jsx(b,{paragraph:!1,title:{width:185}}),t.jsx(b.Button,{active:a,size:"small"})]})},tt=function(e){var a=e.active;return t.jsx(M,{bordered:!1,style:{borderBottomRightRadius:0,borderBottomLeftRadius:0},styles:{body:{paddingBlockEnd:8}},children:t.jsxs(A,{style:{width:"100%",justifyContent:"space-between"},children:[t.jsx(b.Button,{active:a,style:{width:200},size:"small"}),t.jsxs(A,{children:[t.jsx(b.Button,{active:a,size:"small",style:{width:120}}),t.jsx(b.Button,{active:a,size:"small",style:{width:80}})]})]})})},at=function(e){var a=e.active,n=a===void 0?!0:a,i=e.statistic,s=e.actionButton,m=e.toolbar,h=e.pageHeader,y=e.list,g=y===void 0?5:y;return t.jsxs("div",{style:{width:"100%"},children:[h!==!1&&t.jsx(re,{active:n}),i!==!1&&t.jsx(Ue,{size:i,active:n}),(m!==!1||g!==!1)&&t.jsxs(M,{bordered:!1,styles:{body:{padding:0}},children:[m!==!1&&t.jsx(tt,{active:n}),g!==!1&&t.jsx(et,{size:g,active:n,actionButton:s})]})]})};const rt=at;var me={xs:1,sm:2,md:3,lg:3,xl:3,xxl:4},nt=function(e){var a=e.active;return t.jsxs("div",{style:{marginBlockStart:32},children:[t.jsx(b.Button,{active:a,size:"small",style:{width:100,marginBlockEnd:16}}),t.jsxs("div",{style:{width:"100%",justifyContent:"space-between",display:"flex"},children:[t.jsxs("div",{style:{flex:1,marginInlineEnd:24,maxWidth:300},children:[t.jsx(b,{active:a,paragraph:!1,title:{style:{marginBlockStart:0}}}),t.jsx(b,{active:a,paragraph:!1,title:{style:{marginBlockStart:8}}}),t.jsx(b,{active:a,paragraph:!1,title:{style:{marginBlockStart:8}}})]}),t.jsx("div",{style:{flex:1,alignItems:"center",justifyContent:"center"},children:t.jsxs("div",{style:{maxWidth:300,margin:"auto"},children:[t.jsx(b,{active:a,paragraph:!1,title:{style:{marginBlockStart:0}}}),t.jsx(b,{active:a,paragraph:!1,title:{style:{marginBlockStart:8}}})]})})]})]})},it=function(e){var a=e.size,n=e.active,i=D.useMemo(function(){return{lg:!0,md:!0,sm:!1,xl:!1,xs:!1,xxl:!1}},[]),s=Z()||i,m=Object.keys(s).filter(function(y){return s[y]===!0})[0]||"md",h=a===void 0?me[m]||3:a;return t.jsx("div",{style:{width:"100%",justifyContent:"space-between",display:"flex"},children:new Array(h).fill(null).map(function(y,g){return t.jsxs("div",{style:{flex:1,paddingInlineStart:g===0?0:24,paddingInlineEnd:g===h-1?0:24},children:[t.jsx(b,{active:n,paragraph:!1,title:{style:{marginBlockStart:0}}}),t.jsx(b,{active:n,paragraph:!1,title:{style:{marginBlockStart:8}}}),t.jsx(b,{active:n,paragraph:!1,title:{style:{marginBlockStart:8}}})]},g)})})},se=function(e){var a=e.active,n=e.header,i=n===void 0?!1:n,s=D.useMemo(function(){return{lg:!0,md:!0,sm:!1,xl:!1,xs:!1,xxl:!1}},[]),m=Z()||s,h=Object.keys(m).filter(function(g){return m[g]===!0})[0]||"md",y=me[h]||3;return t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{display:"flex",background:i?"rgba(0,0,0,0.02)":"none",padding:"24px 8px"},children:[new Array(y).fill(null).map(function(g,v){return t.jsx("div",{style:{flex:1,paddingInlineStart:i&&v===0?0:20,paddingInlineEnd:32},children:t.jsx(b,{active:a,paragraph:!1,title:{style:{margin:0,height:24,width:i?"75px":"100%"}}})},v)}),t.jsx("div",{style:{flex:3,paddingInlineStart:32},children:t.jsx(b,{active:a,paragraph:!1,title:{style:{margin:0,height:24,width:i?"75px":"100%"}}})})]}),t.jsx(ae,{padding:"0px 0px"})]})},lt=function(e){var a=e.active,n=e.size,i=n===void 0?4:n;return t.jsxs(M,{bordered:!1,children:[t.jsx(b.Button,{active:a,size:"small",style:{width:100,marginBlockEnd:16}}),t.jsx(se,{header:!0,active:a}),new Array(i).fill(null).map(function(s,m){return t.jsx(se,{active:a},m)}),t.jsx("div",{style:{display:"flex",justifyContent:"flex-end",paddingBlockStart:16},children:t.jsx(b,{active:a,paragraph:!1,title:{style:{margin:0,height:32,float:"right",maxWidth:"630px"}}})})]})},st=function(e){var a=e.active;return t.jsxs(M,{bordered:!1,style:{borderStartEndRadius:0,borderTopLeftRadius:0},children:[t.jsx(b.Button,{active:a,size:"small",style:{width:100,marginBlockEnd:16}}),t.jsx(it,{active:a}),t.jsx(nt,{active:a})]})},ot=function(e){var a=e.active,n=a===void 0?!0:a,i=e.pageHeader,s=e.list;return t.jsxs("div",{style:{width:"100%"},children:[i!==!1&&t.jsx(re,{active:n}),t.jsx(st,{active:n}),s!==!1&&t.jsx(ae,{}),s!==!1&&t.jsx(lt,{active:n,size:s})]})};const dt=ot;var ut=function(e){var a=e.active,n=a===void 0?!0:a,i=e.pageHeader;return t.jsxs("div",{style:{width:"100%"},children:[i!==!1&&t.jsx(re,{active:n}),t.jsx(M,{children:t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",padding:128},children:[t.jsx(b.Avatar,{size:64,style:{marginBlockEnd:32}}),t.jsx(b.Button,{active:n,style:{width:214,marginBlockEnd:8}}),t.jsx(b.Button,{active:n,style:{width:328},size:"small"}),t.jsxs(A,{style:{marginBlockStart:24},children:[t.jsx(b.Button,{active:n,style:{width:116}}),t.jsx(b.Button,{active:n,style:{width:116}})]})]})})]})};const ct=ut;var vt=["type"],ft=function(e){var a=e.type,n=a===void 0?"list":a,i=N(e,vt);return n==="result"?t.jsx(ct,o({},i)):n==="descriptions"?t.jsx(dt,o({},i)):t.jsx(rt,o({},i))};const mt=ft;var ht=function(e,a){var n=a||{},i=n.onRequestError,s=n.effects,m=n.manual,h=n.dataSource,y=n.defaultDataSource,g=n.onDataSourceChange,v=X(y,{value:h,onChange:g}),j=G(v,2),w=j[0],C=j[1],d=X(a==null?void 0:a.loading,{value:a==null?void 0:a.loading,onChange:a==null?void 0:a.onLoadingChange}),f=G(d,2),B=f[0],x=f[1],c=function(T){C(T),x(!1)},S=function(){var u=O(L().mark(function T(){var I,E,P;return L().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!B){l.next=2;break}return l.abrupt("return");case 2:return x(!0),l.prev=3,l.next=6,e();case 6:if(l.t0=l.sent,l.t0){l.next=9;break}l.t0={};case 9:I=l.t0,E=I.data,P=I.success,P!==!1&&c(E),l.next=23;break;case 15:if(l.prev=15,l.t1=l.catch(3),i!==void 0){l.next=21;break}throw new Error(l.t1);case 21:i(l.t1);case 22:x(!1);case 23:return l.prev=23,x(!1),l.finish(23);case 26:case"end":return l.stop()}},T,null,[[3,15,23,26]])}));return function(){return u.apply(this,arguments)}}();return D.useEffect(function(){m||S()},[].concat(J(s||[]),[m])),{dataSource:w,setDataSource:C,loading:B,reload:function(){return S()}}};const gt=ht;var xt=["valueEnum","render","renderText","mode","plain","dataIndex","request","params","editable"],pt=["request","columns","params","dataSource","onDataSourceChange","formProps","editable","loading","onLoadingChange","actionRef","onRequestError","emptyText"],yt=function(e,a){var n=e.dataIndex;if(n){var i=Array.isArray(n)?ke(a,n):a[n];if(i!==void 0||i!==null)return i}return e.children},oe=function(e){var a,n=e.valueEnum,i=e.action,s=e.index,m=e.text,h=e.entity,y=e.mode,g=e.render,v=e.editableUtils,j=e.valueType,w=e.plain,C=e.dataIndex,d=e.request,f=e.renderFormItem,B=e.params,x=e.emptyText,c=ce.useFormInstance(),S=(a=le.useToken)===null||a===void 0?void 0:a.call(le),u=S.token,T={text:m,valueEnum:n,mode:y||"read",proFieldProps:{emptyText:x,render:g?function(P){return g==null?void 0:g(P,h,s,i,o(o({},e),{},{type:"descriptions"}))}:void 0},ignoreFormItem:!0,valueType:j,request:d,params:B,plain:w};if(y==="read"||!y||j==="option"){var I=V(e.fieldProps,void 0,o(o({},e),{},{rowKey:C,isEditable:!1}));return t.jsx(Q,o(o({name:C},T),{},{fieldProps:I}))}var E=function(){var F,l=V(e.formItemProps,c,o(o({},e),{},{rowKey:C,isEditable:!0})),R=V(e.fieldProps,c,o(o({},e),{},{rowKey:C,isEditable:!0}));return t.jsxs("div",{style:{display:"flex",gap:u.marginXS,alignItems:"baseline"},children:[t.jsx(Oe,o(o({name:C},l),{},{style:o({margin:0},(l==null?void 0:l.style)||{}),initialValue:m||(l==null?void 0:l.initialValue),children:t.jsx(Q,o(o({},T),{},{proFieldProps:o({},T.proFieldProps),renderFormItem:f?function(){return f==null?void 0:f(o(o({},e),{},{type:"descriptions"}),{isEditable:!0,recordKey:C,record:c.getFieldValue([C].flat(1)),defaultRender:function(){return t.jsx(Q,o(o({},T),{},{fieldProps:R}))},type:"descriptions"},c)}:void 0,fieldProps:R}))})),t.jsx("div",{style:{display:"flex",maxHeight:u.controlHeight,alignItems:"center",gap:u.marginXS},children:v==null||(F=v.actionRender)===null||F===void 0?void 0:F.call(v,C||s,{cancelText:t.jsx(Ce,{}),saveText:t.jsx(Te,{}),deleteText:!1})})]})};return t.jsx("div",{style:{marginTop:-5,marginBottom:-5,marginLeft:0,marginRight:0},children:E()})},bt=function(e,a,n,i,s){var m,h=[],y=ve(ue,"5.8.0")>=0,g=e==null||(m=e.map)===null||m===void 0?void 0:m.call(e,function(v,j){var w,C,d;if(K.isValidElement(v))return y?{children:v}:v;var f=v;f.valueEnum,f.render;var B=f.renderText,x=f.mode;f.plain;var c=f.dataIndex;f.request,f.params;var S=f.editable,u=N(f,xt),T=(w=yt(v,a))!==null&&w!==void 0?w:u.children,I=B?B(T,a,j,n):T,E=typeof u.title=="function"?u.title(v,"descriptions",null):u.title,P=typeof u.valueType=="function"?u.valueType(a||{},"descriptions"):u.valueType,F=i==null?void 0:i.isEditable(c||j),l=x||F?"edit":"read",R=i&&l==="read"&&S!==!1&&(S==null?void 0:S(I,a,j))!==!1,p=R?A:K.Fragment,k=l==="edit"?I:qe(I,v,I),q=y&&P!=="option"?o(o({},u),{},{key:u.key||((C=u.label)===null||C===void 0?void 0:C.toString())||j,label:(E||u.label||u.tooltip)&&t.jsx(U,{label:E||u.label,tooltip:u.tooltip,ellipsis:v.ellipsis}),children:t.jsxs(p,{children:[t.jsx(oe,o(o({},v),{},{dataIndex:v.dataIndex||j,mode:l,text:k,valueType:P,entity:a,index:j,emptyText:s,action:n,editableUtils:i})),R&&t.jsx(Y,{onClick:function(){i==null||i.startEditable(c||j)}})]})}):D.createElement(te.Item,o(o({},u),{},{key:u.key||((d=u.label)===null||d===void 0?void 0:d.toString())||j,label:(E||u.label||u.tooltip)&&t.jsx(U,{label:E||u.label,tooltip:u.tooltip,ellipsis:v.ellipsis})}),t.jsxs(p,{children:[t.jsx(oe,o(o({},v),{},{dataIndex:v.dataIndex||j,mode:l,text:k,valueType:P,entity:a,index:j,action:n,editableUtils:i})),R&&P!=="option"&&t.jsx(Y,{onClick:function(){i==null||i.startEditable(c||j)}})]}));return P==="option"?(h.push(q),null):q}).filter(function(v){return v});return{options:h!=null&&h.length?h:null,children:g}},he=function(e){return t.jsx(te.Item,o(o({},e),{},{children:e.children}))};he.displayName="ProDescriptionsItem";var jt=function(e){return e.children},ge=function(e){var a,n=e.request,i=e.columns,s=e.params,m=e.dataSource,h=e.onDataSourceChange,y=e.formProps,g=e.editable,v=e.loading,j=e.onLoadingChange,w=e.actionRef,C=e.onRequestError;e.emptyText;var d=N(e,pt),f=D.useContext(de.ConfigContext),B=gt(O(L().mark(function l(){var R;return L().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(!n){k.next=6;break}return k.next=3,n(s||{});case 3:k.t0=k.sent,k.next=7;break;case 6:k.t0={data:{}};case 7:return R=k.t0,k.abrupt("return",R);case 9:case"end":return k.stop()}},l)})),{onRequestError:C,effects:[_e(s)],manual:!n,dataSource:m,loading:v,onLoadingChange:j,onDataSourceChange:h}),x=Je(o(o({},e.editable),{},{childrenColumnName:void 0,dataSource:B.dataSource,setDataSource:B.setDataSource}));if(D.useEffect(function(){w&&(w.current=o({reload:B.reload},x))},[B,w,x]),B.loading||B.loading===void 0&&n)return t.jsx(mt,{type:"descriptions",list:!1,pageHeader:!1});var c=function(){var R=Se(e.children).filter(Boolean).map(function(p){if(!K.isValidElement(p))return p;var k=p==null?void 0:p.props,q=k.valueEnum,W=k.valueType,xe=k.dataIndex,pe=k.ellipsis,ye=k.copyable,be=k.request;return!W&&!q&&!xe&&!be&&!pe&&!ye&&p.type.displayName!=="ProDescriptionsItem"?p:o(o({},p==null?void 0:p.props),{},{entity:m})});return[].concat(J(i||[]),J(R)).filter(function(p){return!p||p!=null&&p.valueType&&["index","indexBorder"].includes(p==null?void 0:p.valueType)?!1:!(p!=null&&p.hideInDescriptions)}).sort(function(p,k){return k.order||p.order?(k.order||0)-(p.order||0):(k.index||0)-(p.index||0)})},S=bt(c(),B.dataSource||{},(w==null?void 0:w.current)||B,g?x:void 0,e.emptyText),u=S.options,T=S.children,I=g?ce:jt,E=null;(d.title||d.tooltip||d.tip)&&(E=t.jsx(U,{label:d.title,tooltip:d.tooltip||d.tip}));var P=f.getPrefixCls("pro-descriptions"),F=ve(ue,"5.8.0")>=0;return t.jsx(Ae,{children:t.jsx(I,o(o({form:(a=e.editable)===null||a===void 0?void 0:a.form,component:!1,submitter:!1},y),{},{onFinish:void 0,children:t.jsx(te,o(o({className:P},d),{},{contentStyle:{minWidth:0},extra:d.extra?t.jsxs(A,{children:[u,d.extra]}):u,title:E,items:F?T:void 0,children:F?null:T}))}),"form")})};ge.Item=he;var St=function(e){return ee({},e.componentCls,{position:"fixed",insetInlineEnd:0,bottom:0,zIndex:99,display:"flex",alignItems:"center",width:"100%",paddingInline:24,paddingBlock:0,boxSizing:"border-box",lineHeight:"64px",backgroundColor:Ve(e.colorBgElevated,.6),borderBlockStart:"1px solid ".concat(e.colorSplit),"-webkit-backdrop-filter":"blur(8px)",backdropFilter:"blur(8px)",color:e.colorText,transition:"all 0.2s ease 0s","&-left":{flex:1,color:e.colorText},"&-right":{color:e.colorText,"> *":{marginInlineEnd:8,"&:last-child":{marginBlock:0,marginInline:0}}}})};function kt(r){return fe("ProLayoutFooterToolbar",function(e){var a=o(o({},e),{},{componentCls:".".concat(r)});return[St(a)]})}function Ct(r,e){var a=e.stylish;return fe("ProLayoutFooterToolbarStylish",function(n){var i=o(o({},n),{},{componentCls:".".concat(r)});return a?[ee({},"".concat(i.componentCls),a==null?void 0:a(i))]:[]})}var Tt=["children","className","extra","portalDom","style","renderContent"],wt=function(e){var a=e.children,n=e.className,i=e.extra,s=e.portalDom,m=s===void 0?!0:s,h=e.style,y=e.renderContent,g=N(e,Tt),v=D.useContext(de.ConfigContext),j=v.getPrefixCls,w=v.getTargetContainer,C=e.prefixCls||j("pro"),d="".concat(C,"-footer-bar"),f=kt(d),B=f.wrapSSR,x=f.hashId,c=D.useContext(It),S=D.useMemo(function(){var F=c.hasSiderMenu,l=c.isMobile,R=c.siderWidth;if(F)return R?l?"100%":"calc(100% - ".concat(R,"px)"):"100%"},[c.collapsed,c.hasSiderMenu,c.isMobile,c.siderWidth]),u=D.useMemo(function(){return(typeof window>"u"?"undefined":ie(window))===void 0||(typeof document>"u"?"undefined":ie(document))===void 0?null:(w==null?void 0:w())||document.body},[]),T=Ct("".concat(d,".").concat(d,"-stylish"),{stylish:e.stylish}),I=t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"".concat(d,"-left ").concat(x).trim(),children:i}),t.jsx("div",{className:"".concat(d,"-right ").concat(x).trim(),children:a})]});D.useEffect(function(){return!c||!(c!=null&&c.setHasFooterToolbar)?function(){}:(c==null||c.setHasFooterToolbar(!0),function(){var F;c==null||(F=c.setHasFooterToolbar)===null||F===void 0||F.call(c,!1)})},[]);var E=t.jsx("div",o(o({className:we(n,x,d,ee({},"".concat(d,"-stylish"),!!e.stylish)),style:o({width:S},h)},Qe(g,["prefixCls"])),{},{children:y?y(o(o(o({},e),c),{},{leftWidth:S}),I):I})),P=!Ke()||!m||!u?E:Ie.createPortal(E,u,d);return T.wrapSSR(B(t.jsx(K.Fragment,{children:P},d)))},It=D.createContext({});const Et={size:"default",showSizeChanger:!0,defaultPageSize:10},Dt=r=>H.post(Ee+"/user/list",r);async function Pt(r){return H.post("/api/rule",{method:"POST",data:{method:"update",...r||{}}})}async function Bt(r){return H.post("/api/rule",{method:"POST",data:{method:"post",...r||{}}})}async function Ft(r){return H.post("/api/rule",{method:"POST",data:{method:"delete",...r||{}}})}const Rt=async r=>{const e=z.loading("正在添加");try{return await Bt({...r}),e(),z.success("Added successfully"),!0}catch{return e(),z.error("Adding failed, please try again!"),!1}},zt=async r=>{const e=z.loading("Configuring");try{return await Pt({}),e(),z.success("Configuration is successful"),!0}catch{return e(),z.error("Configuration failed, please try again!"),!1}},Mt=async r=>{const e=z.loading("正在删除");if(!r)return!0;try{return await Ft({key:r.map(a=>a.id)}),e(),z.success("Deleted successfully and will refresh soon"),!0}catch{return e(),z.error("Delete failed, please try again"),!1}},Fa=()=>{const r=D.useRef(),[e,a]=D.useState(!1),[n,i]=D.useState([]),[s,m]=D.useState(),[h,y]=D.useState(!1),[g,v]=D.useState(!1),j=[{title:"用户名",dataIndex:"username",copyable:!0,width:200,render:(d,f)=>t.jsx("a",{onClick:()=>{m(f),y(!0)},children:d})},{title:"性别",dataIndex:"gender",width:150,valueEnum:{1:{text:"男"},2:{text:"女"}}},{title:"年龄",dataIndex:"age",width:150},{title:"状态",dataIndex:"status",hideInForm:!0,valueEnum:{0:{text:"正常",status:"Default"},1:{text:"在线",status:"Processing"},2:{text:"离线",status:"Success"},3:{text:"",status:"Error"}}},{title:"邮箱",dataIndex:"email",hideInSearch:!0},{title:"地址",dataIndex:"address",hideInSearch:!0},{title:"创建时间",key:"createTime",dataIndex:"createTime",valueType:"date",sorter:!0,hideInSearch:!0},{title:"创建时间",dataIndex:"createTime",valueType:"dateRange",hideInTable:!0,search:{transform:d=>({startTime:d[0],endTime:d[1]})}},{title:"操作",key:"option",fixed:"right",width:250,render:(d,f)=>w(f)}],w=d=>[t.jsx($,{type:"link",size:"small",icon:t.jsx(Be,{}),onClick:()=>{m(d),y(!0)},children:"查看"},"view"),t.jsx($,{type:"link",size:"small",icon:t.jsx(Y,{}),children:"编辑"},"edit"),t.jsx($,{type:"link",size:"small",danger:!0,icon:t.jsx(Fe,{}),children:"删除"},"delete")],C=()=>[t.jsx($,{type:"primary",icon:t.jsx(Re,{}),onClick:()=>{a(!0)},children:"新建"},"button")];return t.jsxs(t.Fragment,{children:[t.jsx(Ne,{className:"ant-pro-table-scroll",columns:j,actionRef:r,bordered:!0,cardBordered:!0,scroll:{x:1e3,y:"100%"},request:async d=>{const{data:f}=await Dt(d);return De(f)},columnsState:{persistenceKey:"use-pro-table-key",persistenceType:"localStorage"},rowKey:"id",search:{labelWidth:"auto"},pagination:Et,dateFormatter:"string",headerTitle:"使用 ProTable",toolBarRender:C,rowSelection:{onChange:(d,f)=>{i(f)}}}),(n==null?void 0:n.length)>0&&t.jsxs(wt,{extra:t.jsxs("div",{children:["已选择 ",t.jsx("a",{style:{fontWeight:600},children:n.length})," 项   ",t.jsxs("span",{children:["The total number is ",n.reduce((d,f)=>d+f.age,0)," age"]})]}),children:[t.jsx($,{onClick:async()=>{var d,f;await Mt(n),i([]),(f=(d=r.current)==null?void 0:d.reloadAndRest)==null||f.call(d)},children:"Batch deletion"}),t.jsx($,{type:"primary",children:"Batch approval"})]}),t.jsxs(He,{title:"新建",width:"400px",open:e,onOpenChange:a,onFinish:async d=>{await Rt(d)&&(a(!1),r.current&&r.current.reload())},children:[t.jsx(ze,{rules:[{required:!0,message:"Rule name is required"}],width:"md",name:"name"}),t.jsx(Me,{width:"md",name:"desc"})]}),t.jsx(Le,{onSubmit:async d=>{z.info("成功，，，"),await zt()&&(v(!1),m(void 0),r.current&&r.current.reload())},onCancel:()=>{z.info("取消，，，"),v(!1),h||m(void 0)},updateModalOpen:g,values:s||{}}),t.jsx(Pe,{width:600,open:h,onClose:()=>{m(void 0),y(!1)},closable:!1,children:(s==null?void 0:s.username)&&t.jsx(ge,{column:2,title:s==null?void 0:s.username,request:async()=>({data:s||{}}),params:{id:s==null?void 0:s.username},columns:j})})]})};export{Fa as default};
