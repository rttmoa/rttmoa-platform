{"version":3,"file":"index-c8610c3e.js","sources":["../../../src/hooks/useEyeDropper.ts","../../../src/views/feat/colorPicker/index.tsx"],"sourcesContent":["import { useState, useEffect } from 'react'\r\n\r\ninterface EyeDropperResult {\r\n\tcolor: string\r\n\tisEnabled: boolean\r\n\topenEyeDropper: () => void\r\n\tcancelEyeDropper: () => void\r\n}\r\n\r\n// todo 常用功能：取色器\r\nconst useEyeDropper = (): EyeDropperResult => {\r\n\tconst [color, setColor] = useState<string>('')\r\n\tconst [isEnabled, setIsEnabled] = useState<boolean>(true)\r\n\r\n\tuseEffect(() => {\r\n\t\t// Check if EyeDropper API is supported\r\n\t\tif (!window.EyeDropper) {\r\n\t\t\tsetIsEnabled(false)\r\n\t\t}\r\n\t}, [])\r\n\r\n\tconst abortController = new AbortController()\r\n\r\n\tconst openEyeDropper = async () => {\r\n\t\tif (!window.EyeDropper) {\r\n\t\t\tconsole.log('EyeDropper API is not supported in this browser.')\r\n\t\t\treturn\r\n\t\t}\r\n\t\t// Create a new EyeDropper instance\r\n\t\tconst eyeDropper = new window.EyeDropper()\r\n\t\tconsole.log('eyeDropper', eyeDropper)\r\n\t\t// Open the EyeDropper\r\n\t\ttry {\r\n\t\t\tconst result = await eyeDropper?.open({ signal: abortController.signal })\r\n\t\t\tsetColor(result.sRGBHex)\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log('openEyeDropper catch:', error)\r\n\t\t}\r\n\t}\r\n\r\n\tconst cancelEyeDropper = () => {\r\n\t\tabortController.abort()\r\n\t}\r\n\r\n\treturn { color, isEnabled, openEyeDropper, cancelEyeDropper }\r\n}\r\n\r\nexport default useEyeDropper\r\n","import { Button, Input, Space, Alert, Divider, Typography, Card } from 'antd';\nimport useEyeDropper from '@/hooks/useEyeDropper';\n\nconst { Link } = Typography;\n\nconst ColorPicker: React.FC = () => {\n\tlet { color, isEnabled, openEyeDropper } = useEyeDropper();\n\t// color = \"#90afe0\"\n\tconst message = (\n\t\t<span>\n\t\t\t通过 EyeDropper API 实现，MDN 官方文档请查看 ：\n\t\t\t<Link href='https://developer.mozilla.org/zh-CN/docs/Web/API/EyeDropper' target='_blank'>\n\t\t\t\thttps://developer.mozilla.org/zh-CN/docs/Web/API/EyeDropper\n\t\t\t</Link>\n\t\t</span>\n\t);\n\n\treturn (\n\t\t<Card className='w-full h-full'>\n\t\t\t<Alert message={message} type='success' showIcon />\n\t\t\t<Divider />\n\t\t\t{isEnabled ? (\n\t\t\t\t<>\n\t\t\t\t\t<Space.Compact className='w-[350px]'>\n\t\t\t\t\t\t<Input placeholder='The color picked up by the color picker' value={color} />\n\t\t\t\t\t\t<Button type='primary' onClick={openEyeDropper}>\n\t\t\t\t\t\t\tOpen\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Space.Compact>\n\t\t\t\t\t<Divider />\n\t\t\t\t\t<div style={{ width: 200, height: 200, backgroundColor: color }}></div>\n\t\t\t\t</>\n\t\t\t) : (\n\t\t\t\t<Button type='default' disabled>\n\t\t\t\t\t当前浏览器不支持 EyeDropper API，请切换到 Chrome / Edge\n\t\t\t\t</Button>\n\t\t\t)}\n\t\t</Card>\n\t);\n};\n\nexport default ColorPicker;\n"],"names":["useEyeDropper","color","setColor","useState","isEnabled","setIsEnabled","useEffect","window","EyeDropper","abortController","AbortController","openEyeDropper","eyeDropper","result","open","signal","sRGBHex","cancelEyeDropper","abort","Link","Typography","ColorPicker","message","jsxs","Card","jsx","Alert","Divider","Fragment","Space","Input","Button"],"mappings":"mOAUA,MAAMA,EAAgBA,IAAwB,CAC7C,KAAM,CAACC,EAAOC,CAAQ,EAAIC,WAAiB,EAAE,EACvC,CAACC,EAAWC,CAAY,EAAIF,WAAkB,EAAI,EAExDG,EAAAA,UAAU,IAAM,CAEVC,OAAOC,YACXH,EAAa,EAAK,CAEpB,EAAG,CAAE,CAAA,EAEC,MAAAI,EAAkB,IAAIC,gBAuB5B,MAAO,CAAET,MAAAA,EAAOG,UAAAA,EAAWO,eArBJ,SAAY,CAC9B,GAAA,CAACJ,OAAOC,WAEX,OAGK,MAAAI,EAAa,IAAIL,OAAOC,WAG1B,GAAA,CACG,MAAAK,EAAS,MAAMD,GAAAA,YAAAA,EAAYE,KAAK,CAAEC,OAAQN,EAAgBM,MAAO,IACvEb,EAASW,EAAOG,OAAO,OACR,CAEhB,GAO0CC,iBAJlBA,IAAM,CAC9BR,EAAgBS,MAAM,GAIxB,EC1CM,CAAE,KAAAC,CAAS,EAAAC,EAEXC,EAAwB,IAAM,CACnC,GAAI,CAAE,MAAApB,EAAO,UAAAG,EAAW,eAAAO,GAAmBX,EAAc,EAEnD,MAAAsB,SACJ,OAAK,CAAA,SAAA,CAAA,2CAEJH,EAAK,CAAA,KAAK,8DAA8D,OAAO,SAAS,SAEzF,8DAAA,CACD,CAAA,CAAA,EAIA,OAAAI,EAAA,KAACC,EAAK,CAAA,UAAU,gBACf,SAAA,CAAAC,EAAA,IAACC,EAAM,CAAA,QAAAJ,EAAkB,KAAK,UAAU,SAAQ,GAAC,QAChDK,EAAQ,EAAA,EACRvB,EAECmB,EAAA,KAAAK,WAAA,CAAA,SAAA,CAAAL,EAAA,KAACM,EAAM,QAAN,CAAc,UAAU,YACxB,SAAA,CAAAJ,EAAA,IAACK,EAAM,CAAA,YAAY,0CAA0C,MAAO7B,EAAO,QAC1E8B,EAAO,CAAA,KAAK,UAAU,QAASpB,EAAgB,SAEhD,OAAA,CAAA,EACD,QACCgB,EAAQ,EAAA,EACTF,EAAAA,IAAC,MAAI,CAAA,MAAO,CAAE,MAAO,IAAK,OAAQ,IAAK,gBAAiBxB,CAAS,CAAA,CAAA,CAAA,CAAA,CAClE,EAECwB,EAAAA,IAAAM,EAAA,CAAO,KAAK,UAAU,SAAQ,GAAC,SAEhC,6CAAA,CAEF,CAAA,CAAA,CAEF"}