import{g as N}from"./@ant-design-63539318.js";import{j as B,k as A,a as L,_ as T,d as O,f as q,h as F}from"./@babel-c46ce09a.js";import{r as t}from"./react-12b51ca5.js";import{o as K,e as V,a1 as b,t as X}from"./rc-util-8976b5fa.js";import{i as Y}from"./resize-observer-polyfill-0f9f8adb.js";var C=t.createContext(null);function G(e){var o=e.children,r=e.onBatchResize,i=t.useRef(0),n=t.useRef([]),a=t.useContext(C),l=t.useCallback(function(d,s,u){i.current+=1;var h=i.current;n.current.push({size:d,element:s,data:u}),Promise.resolve().then(function(){h===i.current&&(r==null||r(n.current),n.current=[])}),a==null||a(d,s,u)},[r,a]);return t.createElement(C.Provider,{value:l},o)}var c=new Map;function J(e){e.forEach(function(o){var r,i=o.target;(r=c.get(i))===null||r===void 0||r.forEach(function(n){return n(i)})})}var M=new Y(J),Q=null;function U(e,o){c.has(e)||(c.set(e,new Set),M.observe(e)),c.get(e).add(o)}function Z(e,o){c.has(e)&&(c.get(e).delete(o),c.get(e).size||(M.unobserve(e),c.delete(e)))}var ee=function(e){B(r,e);var o=A(r);function r(){return L(this,r),o.apply(this,arguments)}return T(r,[{key:"render",value:function(){return this.props.children}}]),r}(t.Component);function re(e,o){var r=e.children,i=e.disabled,n=t.useRef(null),a=t.useRef(null),l=t.useContext(C),d=typeof r=="function",s=d?r(n):r,u=t.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),h=!d&&t.isValidElement(s)&&K(s),I=h?s.ref:null,P=V(I,n),_=function(){var v;return b(n.current)||(n.current&&q(n.current)==="object"?b((v=n.current)===null||v===void 0?void 0:v.nativeElement):null)||b(a.current)};t.useImperativeHandle(o,function(){return _()});var z=t.useRef(e);z.current=e;var E=t.useCallback(function(f){var v=z.current,y=v.onResize,$=v.data,w=f.getBoundingClientRect(),p=w.width,m=w.height,R=f.offsetWidth,g=f.offsetHeight,k=Math.floor(p),x=Math.floor(m);if(u.current.width!==k||u.current.height!==x||u.current.offsetWidth!==R||u.current.offsetHeight!==g){var W={width:k,height:x,offsetWidth:R,offsetHeight:g};u.current=W;var j=R===Math.round(p)?p:R,D=g===Math.round(m)?m:g,H=O(O({},W),{},{offsetWidth:j,offsetHeight:D});l==null||l(H,f,$),y&&Promise.resolve().then(function(){y(H,f)})}},[]);return t.useEffect(function(){var f=_();return f&&!i&&U(f,E),function(){return Z(f,E)}},[n.current,i]),t.createElement(ee,{ref:a},h?t.cloneElement(s,{ref:P}):s)}var te=t.forwardRef(re),ne="rc-observer-key";function oe(e,o){var r=e.children,i=typeof r=="function"?[r]:X(r);return i.map(function(n,a){var l=(n==null?void 0:n.key)||"".concat(ne,"-").concat(a);return t.createElement(te,F({},e,{key:l,ref:a===0?o:void 0}),n)})}var S=t.forwardRef(oe);S.Collection=G;const ie=Object.freeze(Object.defineProperty({__proto__:null,_rs:Q,default:S},Symbol.toStringTag,{value:"Module"})),le=N(ie);export{S as R,le as r};
