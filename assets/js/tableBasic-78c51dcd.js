import{r as a,j as t,a7 as H,aH as I,aI as B,S as p,B as i,aJ as J,aK as F,aL as S,aw as K,aM as M,I as $,aP as f,aQ as q}from"./.pnpm-e6eae8df.js";const W=({isShow:w})=>{const[z,h]=a.useState(),[k,g]=a.useState(!1),[l,u]=a.useState({pagination:{current:1,pageSize:10}}),[C,b]=a.useState([]),[v,c]=a.useState(""),[O,x]=a.useState(""),m=a.useRef(null),P=e=>{var n,s;return{results:(n=e.pagination)==null?void 0:n.pageSize,page:(s=e.pagination)==null?void 0:s.current,...e}},R=()=>{g(!0),fetch(`https://randomuser.me/api?${I.stringify(P(l))}`).then(e=>e.json()).then(({results:e})=>{h(e),g(!1),u({...l,pagination:{...l.pagination,total:200}})})};a.useEffect(()=>{R()},[JSON.stringify(l)]);const j=(e,n,s)=>{n(),c(e[0]),x(s)},D=e=>{e(),c("")},y=e=>({filterDropdown:({setSelectedKeys:n,selectedKeys:s,confirm:r,clearFilters:o,close:A})=>t.jsxs("div",{style:{padding:8},onKeyDown:d=>d.stopPropagation(),children:[t.jsx($,{ref:m,placeholder:`Search ${e}`,value:s[0],onChange:d=>n(d.target.value?[d.target.value]:[]),onPressEnter:()=>j(s,r,e),style:{marginBottom:8,display:"block"}}),t.jsxs(p,{children:[t.jsx(i,{type:"primary",onClick:()=>j(s,r,e),icon:t.jsx(f,{}),size:"small",style:{width:90},children:"Search"}),t.jsx(i,{onClick:()=>o&&D(o),size:"small",style:{width:90},children:"Reset"}),t.jsx(i,{type:"link",size:"small",onClick:()=>{r({closeDropdown:!1}),c(s[0]),x(e)},children:"Filter"}),t.jsx(i,{type:"link",size:"small",onClick:()=>{A()},children:"close"})]})]}),filterIcon:n=>t.jsx(f,{style:{color:n?"#1677ff":void 0}}),onFilter:(n,s)=>s[e].toString().toLowerCase().includes(n.toLowerCase()),onFilterDropdownOpenChange:n=>{n&&setTimeout(()=>{var s;return(s=m.current)==null?void 0:s.select()},100)},render:n=>O===e?t.jsx(q,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[v],autoEscape:!0,textToHighlight:n?n.toString():""}):n}),E=[{title:"Name",dataIndex:["name","title"],key:"name",align:"center",width:100,fixed:"left",render:e=>t.jsx("a",{children:e}),...y("name")},{title:"Age",dataIndex:["dob","age"],key:"dob",align:"center",width:200,defaultSortOrder:"descend",sorter:(e,n)=>e.dob.age-n.dob.age,...y("dob"),responsive:["lg"]},{title:"Address",dataIndex:["location","timezone","description"],key:"address",align:"center",responsive:["lg"],width:200,ellipsis:{showTitle:!1},render:e=>t.jsx(B,{placement:"topLeft",title:e,children:e})},{title:"Action",key:"action",align:"center",width:250,fixed:"right",render:(e,n)=>t.jsxs(p,{size:"small",children:[t.jsx(i,{type:"link",size:"small",icon:t.jsx(J,{}),children:"查看"},"view"),t.jsx(i,{type:"link",size:"small",icon:t.jsx(F,{}),children:"编辑"},"edit"),t.jsx(i,{type:"link",size:"small",danger:!0,icon:t.jsx(S,{}),children:"删除"},"delete")]})}],T={selectedRowKeys:C,onChange:e=>{b(e)}},L=(e,n,s,r)=>{var o;u({pagination:e,filters:n,...s}),e.pageSize!==((o=l.pagination)==null?void 0:o.pageSize)&&h([])},N=t.jsx("div",{className:"flex flex-row-reverse",children:t.jsxs(p,{children:[t.jsx(i,{type:"primary",size:"middle",icon:t.jsx(K,{}),children:"新建"}),t.jsx(i,{type:"primary",size:"middle",icon:t.jsx(S,{}),children:"多选删除"},"delete"),t.jsx(i,{type:"primary",size:"middle",icon:t.jsx(M,{}),children:"导出"},"delete")]})});return w&&t.jsx("div",{children:t.jsx(H,{className:"table-props",size:"middle",bordered:!0,title:()=>N,rowKey:e=>e.login.uuid,columns:E,loading:k,dataSource:z,pagination:l.pagination,onChange:L,expandable:{expandedRowRender:e=>t.jsx("p",{style:{margin:0},children:(e==null?void 0:e.location.timezone.description)||"My name is Jim Green, I am 42 years old, living in London No. 1 Lake Park."}),rowExpandable:e=>(e==null?void 0:e.name.title)!=""},rowSelection:T,scroll:{y:500,x:"calc(700px + 50%)"}})})};export{W as default};
