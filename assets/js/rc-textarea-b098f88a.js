import{g as Fe}from"./@ant-design-63539318.js";import{c as pe,e as _,f as Ve,d as N,h as he,b as ce,g as Pe}from"./@babel-c46ce09a.js";import{c as W}from"./classnames-3ded05b8.js";import{u as $e,B as Me,a as ve}from"./rc-input-3682369a.js";import{h as Se,b as me,z as ge}from"./rc-util-8976b5fa.js";import{r as f,a as S}from"./react-12b51ca5.js";import{R as Le}from"./rc-resize-observer-5c9960e4.js";var Be=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
  pointer-events: none !important;
`,He=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],se={},v;function De(e){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(A&&se[a])return se[a];var n=window.getComputedStyle(e),m=n.getPropertyValue("box-sizing")||n.getPropertyValue("-moz-box-sizing")||n.getPropertyValue("-webkit-box-sizing"),g=parseFloat(n.getPropertyValue("padding-bottom"))+parseFloat(n.getPropertyValue("padding-top")),r=parseFloat(n.getPropertyValue("border-bottom-width"))+parseFloat(n.getPropertyValue("border-top-width")),s=He.map(function(l){return"".concat(l,":").concat(n.getPropertyValue(l))}).join(";"),R={sizingStyle:s,paddingSize:g,borderSize:r,boxSizing:m};return A&&a&&(se[a]=R),R}function je(e){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;v||(v=document.createElement("textarea"),v.setAttribute("tab-index","-1"),v.setAttribute("aria-hidden","true"),document.body.appendChild(v)),e.getAttribute("wrap")?v.setAttribute("wrap",e.getAttribute("wrap")):v.removeAttribute("wrap");var m=De(e,A),g=m.paddingSize,r=m.borderSize,s=m.boxSizing,R=m.sizingStyle;v.setAttribute("style","".concat(R,";").concat(Be)),v.value=e.value||e.placeholder||"";var l=void 0,d=void 0,x,u=v.scrollHeight;if(s==="border-box"?u+=r:s==="content-box"&&(u-=g),a!==null||n!==null){v.value=" ";var P=v.scrollHeight-g;a!==null&&(l=P*a,s==="border-box"&&(l=l+g+r),u=Math.max(l,u)),n!==null&&(d=P*n,s==="border-box"&&(d=d+g+r),x=u>d?"":"hidden",u=Math.min(d,u))}var z={height:u,overflowY:x,resize:"none"};return l&&(z.minHeight=l),d&&(z.maxHeight=d),z}var Oe=["prefixCls","onPressEnter","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],le=0,ue=1,de=2,xe=f.forwardRef(function(e,A){var a=e,n=a.prefixCls;a.onPressEnter;var m=a.defaultValue,g=a.value,r=a.autoSize,s=a.onResize,R=a.className,l=a.style,d=a.disabled,x=a.onChange;a.onInternalAutoSize;var u=pe(a,Oe),P=Se(m,{value:g,postState:function(o){return o??""}}),z=_(P,2),I=z[0],D=z[1],Q=function(o){D(o.target.value),x==null||x(o)},y=f.useRef();f.useImperativeHandle(A,function(){return{textArea:y.current}});var $=f.useMemo(function(){return r&&Ve(r)==="object"?[r.minRows,r.maxRows]:[]},[r]),F=_($,2),Z=F[0],c=F[1],b=!!r,j=function(){try{if(document.activeElement===y.current){var o=y.current,E=o.selectionStart,J=o.selectionEnd,ae=o.scrollTop;y.current.setSelectionRange(E,J),y.current.scrollTop=ae}}catch{}},M=f.useState(de),k=_(M,2),C=k[0],V=k[1],G=f.useState(),L=_(G,2),ee=L[0],X=L[1],q=function(){V(le)};me(function(){b&&q()},[g,Z,c,b]),me(function(){if(C===le)V(ue);else if(C===ue){var w=je(y.current,!1,Z,c);V(de),X(w)}else j()},[C]);var B=f.useRef(),H=function(){ge.cancel(B.current)},te=function(o){C===de&&(s==null||s(o),r&&(H(),B.current=ge(function(){q()})))};f.useEffect(function(){return H},[]);var U=b?ee:null,O=N(N({},l),U);return(C===le||C===ue)&&(O.overflowY="hidden",O.overflowX="hidden"),f.createElement(Le,{onResize:te,disabled:!(r||s)},f.createElement("textarea",he({},u,{ref:y,style:O,className:W(n,R,ce({},"".concat(n,"-disabled"),d)),disabled:d,value:I,onChange:Q})))}),Ke=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","showCount","count","className","style","disabled","hidden","classNames","styles","onResize"],Ye=S.forwardRef(function(e,A){var a,n,m=e.defaultValue,g=e.value,r=e.onFocus,s=e.onBlur,R=e.onChange,l=e.allowClear,d=e.maxLength,x=e.onCompositionStart,u=e.onCompositionEnd,P=e.suffix,z=e.prefixCls,I=z===void 0?"rc-textarea":z,D=e.showCount,Q=e.count,y=e.className,$=e.style,F=e.disabled,Z=e.hidden,c=e.classNames,b=e.styles,j=e.onResize,M=pe(e,Ke),k=Se(m,{value:g,defaultValue:m}),C=_(k,2),V=C[0],G=C[1],L=V==null?"":String(V),ee=S.useState(!1),X=_(ee,2),q=X[0],B=X[1],H=S.useRef(!1),te=S.useState(null),U=_(te,2),O=U[0],w=U[1],o=f.useRef(null),E=function(){var t;return(t=o.current)===null||t===void 0?void 0:t.textArea},J=function(){E().focus()};f.useImperativeHandle(A,function(){return{resizableTextArea:o.current,focus:J,blur:function(){E().blur()}}}),f.useEffect(function(){B(function(i){return!F&&i})},[F]);var ae=S.useState(null),ne=_(ae,2),re=ne[0],be=ne[1];S.useEffect(function(){if(re){var i;(i=E()).setSelectionRange.apply(i,Pe(re))}},[re]);var p=$e(Q,D),K=(a=p.max)!==null&&a!==void 0?a:d,Re=Number(K)>0,oe=p.strategy(L),ze=!!K&&oe>K,fe=function(t,h){var T=h;!H.current&&p.exceedFormatter&&p.max&&p.strategy(h)>p.max&&(T=p.exceedFormatter(h,{max:p.max}),h!==T&&be([E().selectionStart||0,E().selectionEnd||0])),G(T),ve(t.currentTarget,t,R,T)},ye=function(t){H.current=!0,x==null||x(t)},Ce=function(t){H.current=!1,fe(t,t.currentTarget.value),u==null||u(t)},we=function(t){fe(t,t.target.value)},Ee=function(t){var h=M.onPressEnter,T=M.onKeyDown;t.key==="Enter"&&h&&h(t),T==null||T(t)},Ae=function(t){B(!0),r==null||r(t)},Ie=function(t){B(!1),s==null||s(t)},Te=function(t){G(""),J(),ve(E(),t,R)},ie=P,Y;p.show&&(p.showFormatter?Y=p.showFormatter({value:L,count:oe,maxLength:K}):Y="".concat(oe).concat(Re?" / ".concat(K):""),ie=S.createElement(S.Fragment,null,ie,S.createElement("span",{className:W("".concat(I,"-data-count"),c==null?void 0:c.count),style:b==null?void 0:b.count},Y)));var Ne=function(t){var h;j==null||j(t),(h=E())!==null&&h!==void 0&&h.style.height&&w(!0)},_e=!M.autoSize&&!D&&!l;return S.createElement(Me,{value:L,allowClear:l,handleReset:Te,suffix:ie,prefixCls:I,classNames:N(N({},c),{},{affixWrapper:W(c==null?void 0:c.affixWrapper,(n={},ce(n,"".concat(I,"-show-count"),D),ce(n,"".concat(I,"-textarea-allow-clear"),l),n))}),disabled:F,focused:q,className:W(y,ze&&"".concat(I,"-out-of-range")),style:N(N({},$),O&&!_e?{height:"auto"}:{}),dataAttrs:{affixWrapper:{"data-count":typeof Y=="string"?Y:void 0}},hidden:Z},S.createElement(xe,he({},M,{maxLength:d,onKeyDown:Ee,onChange:we,onFocus:Ae,onBlur:Ie,onCompositionStart:ye,onCompositionEnd:Ce,className:W(c==null?void 0:c.textarea),style:N(N({},b==null?void 0:b.textarea),{},{resize:$==null?void 0:$.resize}),disabled:F,prefixCls:I,onResize:Ne,ref:o})))});const We=Object.freeze(Object.defineProperty({__proto__:null,ResizableTextArea:xe,default:Ye},Symbol.toStringTag,{value:"Module"})),Qe=Fe(We);export{Ye as T,Qe as r};
