import{r as u,j as e,a3 as L,B as g,aq as a,R as V,C as n,ad as o,ar as F}from"./index-ce305ae4.js";import{R as b}from"./index-4550fc52.js";import{T as M}from"./index-448ba2fa.js";import"./useBubbleLock-e08e9380.js";import"./useShowArrow-4694b8b9.js";import"./List-56c9e8f2.js";import"./useIcons-fcda2b78.js";import"./conductUtil-aed6114a.js";import"./createForOfIteratorHelper-056cc98f.js";import"./iconUtil-3566758d.js";import"./index-a32ed1a8.js";const J=I=>{const{form:p,menuList:v,modalTitle:q,modalType:r,modalIsVisible:_,modalMenuInfo:l,setModalIsVisible:w,handleModalSubmit:d}=I,[t,m]=u.useState("是"),[c,h]=u.useState("");u.useEffect(()=>{p.setFieldsValue({isTop:r==="create"||(l==null?void 0:l.parent_id)==0?"是":"否",parent_id:r==="create"?null:l==null?void 0:l.parent_id,email:r==="create"?null:l==null?void 0:l.email,leader:r==="create"?null:l==null?void 0:l.leader,name:r==="create"?null:l==null?void 0:l.name,phone:r==="create"?null:l==null?void 0:l.phone,sort:r==="create"?null:l==null?void 0:l.sort,status:r==="create"?"启用":l==null?void 0:l.status}),m(r==="create"||(l==null?void 0:l.parent_id)==0?"是":"否"),h(r==="create"?"":l==null?void 0:l.parent_id)},[l,r]);const x=(s,S)=>s==null?void 0:s.map(i=>{const f={value:i.name||null,label:i.name||null};return i.children&&i.children.length&&(f.children=x(i.children)),f}),T=x(v),j=()=>{w(!1)},y=()=>{p.submit()},C=()=>{const s=p.getFieldsValue();s.isTop=t,t=="是"&&(s.parent_id=0),t=="否"&&(s.parent_id=c),r=="edit"&&(s._id=l.unique),s.parent_id,d&&d(r,s)};return e.jsx(L,{title:q,width:800,open:_,onCancel:j,footer:[e.jsx(g,{loading:!1,onClick:j,children:"取消"}),e.jsx(g,{type:"primary",loading:!1,onClick:y,children:"提交"},"link")],children:e.jsx(a,{className:"mt-[40px] mb-[100px] px-[20px] max-h-[500px] overflow-auto",form:p,onFinish:C,layout:"horizontal",size:"middle",labelCol:{span:6},wrapperCol:{span:16},children:e.jsxs(V,{gutter:16,children:[e.jsx(n,{span:12,children:e.jsx(a.Item,{label:"部门名称",name:"name",rules:[{required:!0,message:"必填：部门名称"}],children:e.jsx(o,{variant:"outlined",placeholder:"请输入部门名称",maxLength:30})})}),e.jsx(n,{span:12,children:e.jsx(a.Item,{label:"部门排序",name:"sort",rules:[{required:!0,message:"必填：部门排序"}],children:e.jsx(F,{variant:"outlined",placeholder:"请输入",maxLength:30})})}),e.jsx(n,{span:12,children:e.jsx(a.Item,{label:"负责人",name:"leader",rules:[{required:!1,message:""}],children:e.jsx(o,{variant:"outlined",placeholder:"请输入负责人",maxLength:30})})}),e.jsx(n,{span:12,children:e.jsx(a.Item,{label:"联系电话",name:"phone",rules:[{required:!1,message:""}],children:e.jsx(o,{variant:"outlined",placeholder:"请输入联系电话",maxLength:30})})}),e.jsx(n,{span:12,children:e.jsx(a.Item,{label:"邮箱",name:"email",rules:[{required:!1,message:""}],children:e.jsx(o,{variant:"outlined",placeholder:"请输入邮箱",maxLength:30})})}),e.jsx(n,{span:12,children:e.jsx(a.Item,{label:"部门状态",name:"status",rules:[{required:!1,message:""}],children:e.jsx(b.Group,{name:"radiogroup",defaultValue:"启用",options:[{value:"启用",label:"启用"},{value:"停用",label:"停用"}]})})}),e.jsx(n,{span:24,pull:3,children:e.jsx(a.Item,{label:"部门描述",name:"desc",rules:[{required:!1,message:""}],children:e.jsx(o.TextArea,{rows:3,placeholder:"请输入部门描述",maxLength:6})})}),e.jsx(n,{span:24,pull:3,children:e.jsx(a.Item,{label:"是否顶级部门",name:"isTop",rules:[{required:!0,message:""}],children:e.jsx(b.Group,{options:["是","否"],defaultValue:"是",onChange:s=>{m(s.target.value)},value:t})})}),t=="是"&&e.jsx(n,{span:24,pull:3,children:e.jsx(a.Item,{})}),t=="否"&&e.jsx(n,{span:24,pull:3,children:e.jsx(a.Item,{label:"上级部门",name:"parent_id",rules:[{required:!0,message:"必须：上级部门"}],children:e.jsx(M,{style:{width:"100%"},value:c,placeholder:"请选择上级部门",allowClear:!0,onChange:s=>{h(s)},treeData:T,dropdownStyle:{maxHeight:500,overflow:"auto"},className:"custom-tree-dropdown"})})})]})})})};export{J as default};
//# sourceMappingURL=Modal-b88d0f0f.js.map
