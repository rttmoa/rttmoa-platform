{"version":3,"file":"index-4916efb2.js","sources":["../../../src/views/system/roleManage/index.tsx"],"sourcesContent":["import { Button, Card, Form, Input, Modal, Select, Space, Transfer, Tree } from \"antd\";\nimport MultiTable from \"@/components/Tables\";\nimport { forwardRef, useEffect, useImperativeHandle, useRef, useState } from \"react\";\nimport { roleList, roleTransferList } from \"@/api/modules/system/roleManage\";\nimport { useSelector } from \"react-redux\";\nimport { RootState } from \"@/redux\";\nimport { FormInstance } from \"antd/lib\";\n\nfunction formateDate(time: string) {\n  if (!time) return \"\";\n  let date = new Date(Number(time));\n  return (\n    date.getFullYear() +\n    \"-\" +\n    (date.getMonth() + 1) +\n    \"-\" +\n    date.getDate() +\n    \" \" +\n    date.getHours() +\n    \":\" +\n    date.getMinutes() +\n    \":\" +\n    date.getSeconds()\n  );\n}\n\nconst RoleManage: React.FC = () => {\n  // Table属性\n  const [rolelist, setRolelist] = useState([]);\n  const [selectedRowKeys, setSelectedRowKeys] = useState<any>([]);\n  const [selectedIds, setSelectedIds] = useState([]);\n  const [selectedItem, setSelectedItem] = useState<any>({});\n\n  const menuConfig = useSelector((state: RootState) => state.auth.authMenuList);\n  // console.log(menuConfig);\n\n  const [formRole] = Form.useForm(); // 创建的角色的 Form表单\n  const [formPerm] = Form.useForm();\n  const [formUser] = Form.useForm();\n\n  const [isRoleVisible, setIsRoleVisible] = useState(false); // 创建角色的 Modal\n\n  const [isPermVisible, setIsPermVisible] = useState(false); // 设置权限弹窗\n  const [detailInfo, setdetailInfo] = useState({}); // 单选用户信息\n  const [menuInfo, setmenuInfo] = useState([]); // 用户的菜单列表\n\n  const [isUserVisible, setIsUserVisible] = useState(false);\n  const [transferData, settransferData] = useState([]);\n  const [targetKeys, settargetKeys] = useState([]);\n  const [isAuthClosed, setIsAuthClosed] = useState<any>(null);\n  const [detailUserInfo, setdetailUserInfo] = useState({}); // 单选用户信息\n\n  const getStatusV = useRef<any>();\n\n  // 获取角色列表\n  useEffect(() => {\n    (async function () {\n      roleList().then((result: any) => {\n        console.log(result);\n        const list = result.data.list.map((item: any, i: number) => ({ ...item, key: i }));\n        setRolelist(list);\n      });\n    })();\n  }, []);\n\n  const column = [\n    // {\n    //   title: \"角色iD\",\n    //   dataIndex: \"id\"\n    // },\n    {\n      title: \"角色名称\",\n      dataIndex: \"role_name\"\n    },\n    {\n      title: \"使用状态\",\n      dataIndex: \"status\",\n      render: (status: number) => {\n        return status === 1 ? \"启用\" : \"停用\";\n      }\n    },\n    {\n      title: \"授权人\",\n      dataIndex: \"authorize_user_name\"\n    },\n    {\n      title: \"创建时间\",\n      dataIndex: \"create_time\",\n      render: formateDate,\n      width: 150\n    },\n    {\n      title: \"授权时间\",\n      dataIndex: \"authorize_time\",\n      render: formateDate,\n      width: 150\n    }\n  ];\n\n  const updateSelectedItem = (selectedRowKeys: any, selectedRows: any, selectedIds: any) => {\n    if (selectedIds) {\n      setSelectedRowKeys(selectedRowKeys);\n      setSelectedIds(selectedIds);\n      setSelectedItem(selectedRows);\n    } else {\n      setSelectedRowKeys(selectedRowKeys);\n      setSelectedItem(selectedRows);\n    }\n  };\n\n  // 弹窗：角色创建\n  const createRoleBtn = () => {\n    setIsRoleVisible(true);\n  };\n  // 弹窗：角色提交\n  const createRoleSubmit = () => {\n    const formData = formRole.getFieldsValue(); // {role_name: '张三', status: 0}\n    // 1.提交到接口中\n    // 2.获取返回值\n    // 3.重新获取数据\n    // 4.关闭弹窗\n    formRole.resetFields();\n    setIsRoleVisible(false);\n  };\n\n  // 弹窗：设置权限\n  const setPermBtn = () => {\n    if (JSON.stringify(selectedItem) == \"{}\") {\n      Modal.info({ title: \"信息\", content: \"请选择一个角色\" });\n      return;\n    }\n    setIsPermVisible(true);\n    setdetailInfo(selectedItem);\n    setmenuInfo(selectedItem.menus);\n  };\n  // 弹窗：权限提交\n  const setPermSubmit = () => {\n    let formData = formPerm.getFieldsValue(); // {role_name2: '客服专员', status2: 1, menu: undefined}\n    // console.log('提交权限菜单：', formData);\n    formData.role_id = selectedItem.id;\n    formData.menus = menuInfo;\n    formData.authorize_time = Date.now();\n    // 1.提交到后台接口\n    // 2.接口返回成功，重新获取数据\n    // 3.初始化表单值\n    formPerm.resetFields();\n    // 4.关闭弹窗\n    setIsPermVisible(false);\n  };\n\n  // 弹窗：用户授权按钮\n  const userPermBtn = async () => {\n    if (JSON.stringify(selectedItem) == \"{}\") {\n      Modal.info({ title: \"信息\", content: \"未选中任何项目\" });\n      return;\n    }\n    // 获取角色用户列表 > 筛选目标用户\n    const results: any = await roleTransferList(selectedItem.id); // 根据iD获取该角色原有用户\n    // console.log(\"results\", results);\n    const transferData: any = [];\n    const targetKeys: any = [];\n    if (results.data.length > 0) {\n      const dataSource = results.data;\n      for (let index = 0; index < dataSource.length; index++) {\n        const element = dataSource[index];\n        const data = {\n          key: element.user_id,\n          title: element.user_name,\n          status: element.status\n        };\n        if (data.status === 1) {\n          targetKeys.push(data.key);\n        }\n        transferData.push(data);\n      }\n    }\n    settransferData(transferData);\n    settargetKeys(targetKeys);\n\n    // 设置弹窗、权限、用户信息\n    setdetailUserInfo(selectedItem);\n    setIsAuthClosed(false);\n    setIsUserVisible(true);\n  };\n  // 弹窗：用户授权 提交\n  const userPermSubmit = () => {\n    let data: any = {};\n    data.user_ids = targetKeys || [];\n    data.role_id = selectedItem.id;\n    data.authorize_time = Date.now();\n    // 将 data 传递到服务端\n    // 重置表单值\n    formUser.resetFields();\n    // 关闭弹窗\n    setIsUserVisible(false);\n  };\n  // console.log(\"statePros\", detailInfo, menuInfo);\n  return (\n    <>\n      <Card\n        extra={\n          <Space size=\"middle\">\n            <Button type=\"primary\" onClick={createRoleBtn}>\n              创建角色\n            </Button>\n            <Button type={selectedItem.id ? \"primary\" : \"default\"} onClick={setPermBtn} disabled={!selectedItem.id}>\n              设置权限\n            </Button>\n            <Button type={selectedItem.id ? \"primary\" : \"default\"} onClick={userPermBtn} disabled={!selectedItem.id}>\n              用户授权\n            </Button>\n            {/* <Button type=\"dashed\" onClick={() => { \n\t\t\t\t\t\t\tconsole.log(getStatusV.current);\n\t\t\t\t\t\t}}>\n              用户授权组件状态值\n            </Button> */}\n          </Space>\n        }\n      >\n        <MultiTable\n          columns={column}\n          dataSource={rolelist}\n          selectedRowKeys={selectedRowKeys}\n          selectedIds={selectedIds}\n          selectedItem={selectedItem}\n          pagination={{}}\n          updateSelectedItem={updateSelectedItem}\n        />\n      </Card>\n      <Modal\n        title=\"创建角色\"\n        open={isRoleVisible}\n        onOk={createRoleSubmit}\n        onCancel={() => {\n          formRole.resetFields();\n          setIsRoleVisible(false);\n        }}\n      >\n        <RoleForm form={formRole} />\n      </Modal>\n      <Modal\n        width={600}\n        title=\"权限设置\"\n        open={isPermVisible}\n        onOk={setPermSubmit}\n        onCancel={() => {\n          formPerm.resetFields();\n          setIsPermVisible(false);\n        }}\n      >\n        <PermEditForm\n          form={formPerm}\n          detailInfo={detailInfo}\n          menuInfo={menuInfo || []}\n          patchMenuInfo={(checkedKeys: any) => {\n            setmenuInfo(checkedKeys);\n          }}\n          menuConfig={menuConfig}\n        />\n      </Modal>\n      <Modal\n        title=\"用户授权\"\n        width={800}\n        open={isUserVisible}\n        onOk={userPermSubmit}\n        onCancel={() => {\n          formUser.resetFields();\n          setIsUserVisible(false);\n        }}\n      >\n        <RoleAuthForm\n          form={formUser}\n          isClose={isAuthClosed}\n          detailUserInfo={detailUserInfo}\n          targetKeys={targetKeys}\n          transferData={transferData}\n          patchUserInfo={(targetKeys: any) => {\n            settargetKeys(targetKeys);\n          }}\n          ref={getStatusV}\n        />\n      </Modal>\n    </>\n  );\n};\n\nfunction RoleForm({ form }: { form: FormInstance }): React.ReactNode {\n  const formItemLayout = {\n    labelCol: { span: 5 },\n    wrapperCol: { span: 16 }\n  };\n  return (\n    <>\n      <Card>\n        <Form form={form} {...formItemLayout} initialValues={{ status: 1 }}>\n          <Form.Item label=\"角色名称\" name=\"role_name\">\n            <Input type=\"text\" placeholder=\"请输入角色名称\" />\n          </Form.Item>\n          <Form.Item label=\"状态\" name=\"status\">\n            <Select>\n              <Select.Option value={1}>开启</Select.Option>\n              <Select.Option value={0}>关闭</Select.Option>\n            </Select>\n          </Form.Item>\n        </Form>\n      </Card>\n    </>\n  );\n}\n\nfunction PermEditForm({ form, detailInfo, menuInfo, patchMenuInfo, menuConfig }: any): React.ReactNode {\n  const renderBtnTreedNode = (menu: any, parentKey = \"\") => {\n    const btnTreeNode: any = [];\n    menu.btnList.forEach((item: any) => {\n      // console.log(parentKey + \"-btn-\" + item.key);\n      btnTreeNode.push(<Tree.TreeNode title={item.meta.title} key={parentKey + \"-btn-\" + item.path} className=\"op-role-tree\" />);\n    });\n    return btnTreeNode;\n  };\n\n  const renderTreeNode = (renderMenu: [], key: string): any => {\n    // console.log(\"renderMenu\", renderMenu);\n    return renderMenu.map((item: any) => {\n      let parentKey = item.path;\n      // console.log(\"parentKey\", parentKey);\n      if (item.children) {\n        return (\n          <Tree.TreeNode title={item.meta.title} key={parentKey} className=\"op-role-tree\">\n            {renderTreeNode(item.children, parentKey)}\n          </Tree.TreeNode>\n        );\n      } else if (item.btnList) {\n        return (\n          <Tree.TreeNode title={item.meta.title} key={parentKey} className=\"op-role-tree\">\n            {renderBtnTreedNode(item, parentKey)}\n          </Tree.TreeNode>\n        );\n      }\n      return <Tree.TreeNode title={item.meta.title} key={parentKey} />;\n    });\n  };\n\n  // 优化一下、渲染菜单列表\n  const renderTreeNode2 = (menuList: [], key: string): any => {\n    return menuList.reduce((prev: any, curr: any): any => {\n      let parentKey = curr.path;\n      prev.push(\n        <Tree.TreeNode title={curr.meta.title} key={parentKey}>\n          {curr.children ? renderTreeNode2(curr.children, \"\") : null}\n        </Tree.TreeNode>\n      );\n      return prev;\n    }, []);\n  };\n\n  const formItemLayout = { labelCol: { span: 4 }, wrapperCol: { span: 16 } };\n  return (\n    <Form form={form} layout=\"horizontal\" {...formItemLayout} initialValues={{ status2: 1, role_name2: detailInfo.role_name }}>\n      <Card>\n        <Form.Item label=\"角色名称\" name=\"role_name2\">\n          <Input disabled maxLength={8} placeholder={detailInfo.role_name} />\n        </Form.Item>\n        <Form.Item label=\"状态\" name=\"status2\">\n          <Select>\n            <Select.Option value={1}>启用</Select.Option>\n            <Select.Option value={0}>停用</Select.Option>\n          </Select>\n        </Form.Item>\n        <Form.Item label=\"菜单\" name=\"menu\">\n          <Tree\n            checkable\n            defaultExpandAll\n            onCheck={(checkedKeys: any) => {\n              patchMenuInfo(checkedKeys);\n            }}\n            checkedKeys={menuInfo || []}\n          >\n            <Tree.TreeNode title=\"平台权限\" key=\"platform_all\">\n              {renderTreeNode(menuConfig, \"\")}\n            </Tree.TreeNode>\n          </Tree>\n        </Form.Item>\n      </Card>\n    </Form>\n  );\n}\n\nfunction RoleAuthForm({ form, isClose, detailUserInfo, targetKeys, transferData, patchUserInfo, ref }: any): React.ReactNode {\n  const [status, setstatus] = useState(11);\n  const statusValue = () => {\n    setstatus(status + 1);\n    return status;\n  };\n  // useImperativeHandle(ref, createHandle, [deps])\n  useImperativeHandle(ref, () => ({ status, statusValue }));\n\n  const filterOption = (inputValue: any, option: any) => {\n    return option.title.indexOf(inputValue) > -1;\n  };\n  const handleChange = (targetKeys: any): void => {\n    patchUserInfo(targetKeys);\n  };\n  const formItemLayout = {\n    labelCol: { span: 5 },\n    wrapperCol: { span: 18 }\n  };\n  // console.log(targetKeys);\n  return (\n    <Form form={form} layout=\"horizontal\" {...formItemLayout} initialValues={{ transfer: targetKeys }}>\n      <Form.Item name=\"role_name3\" label=\"角色名称\">\n        <Input disabled maxLength={8} placeholder={detailUserInfo.role_name} />\n      </Form.Item>\n      <Form.Item name=\"transfer\" label=\"选择用户：\">\n        <Transfer\n          listStyle={{ width: 200, height: 400 }}\n          dataSource={transferData}\n          showSearch\n          titles={[\"待选用户\", \"已选用户\"]}\n          filterOption={filterOption}\n          targetKeys={targetKeys}\n          onChange={handleChange}\n          render={(item: any) => item.title}\n        />\n      </Form.Item>\n    </Form>\n  );\n}\n\nexport default RoleManage;\n"],"names":["formateDate","time","date","RoleManage","rolelist","setRolelist","useState","selectedRowKeys","setSelectedRowKeys","selectedIds","setSelectedIds","selectedItem","setSelectedItem","menuConfig","useSelector","state","formRole","Form","formPerm","formUser","isRoleVisible","setIsRoleVisible","isPermVisible","setIsPermVisible","detailInfo","setdetailInfo","menuInfo","setmenuInfo","isUserVisible","setIsUserVisible","transferData","settransferData","targetKeys","settargetKeys","isAuthClosed","setIsAuthClosed","detailUserInfo","setdetailUserInfo","getStatusV","useRef","useEffect","roleList","result","list","item","i","column","status","updateSelectedItem","selectedRows","createRoleBtn","createRoleSubmit","setPermBtn","Modal","setPermSubmit","formData","userPermBtn","results","roleTransferList","dataSource","index","element","data","userPermSubmit","jsxs","Fragment","jsx","Card","Space","Button","MultiTable","RoleForm","PermEditForm","checkedKeys","RoleAuthForm","form","formItemLayout","Input","Select","patchMenuInfo","renderBtnTreedNode","menu","parentKey","btnTreeNode","Tree","renderTreeNode","renderMenu","key","isClose","patchUserInfo","ref","setstatus","statusValue","useImperativeHandle","filterOption","inputValue","option","handleChange","Transfer"],"mappings":"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"}