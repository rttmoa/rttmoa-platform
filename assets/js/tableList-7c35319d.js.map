{"version":3,"file":"tableList-7c35319d.js","sources":["../../../src/views/system/userManage2/tableList.tsx"],"sourcesContent":["import { Pagination, Table } from \"antd\";\nimport React, { useEffect, useRef } from \"react\";\n\n// 如果要使用不回行的table，那么就要设置table的className为nowrap，并且不能对td设置特定的宽度，且scroll={{ y: true, x: true }}的X值必须为true\nexport default function TableList(props: any) {\n  const timer = useRef<any>(null);\n\n  const tableWidthAdaptive = () => {\n    if (props.className && props.className.indexOf(\"nowrap\") > -1) {\n      timer.current = setInterval(() => {\n        // 通过定时器循环的方式，看看真实节点是否加载到dom中了\n        const tds = document.querySelector(\".ant-table-row\") && document.querySelector(\".ant-table-row\")!.querySelectorAll(\"td\");\n        const ths: any = document.querySelectorAll(\".ant-table-header th\");\n        if (tds && tds.length) {\n          clearInterval(timer.current);\n          for (let i = 0; i < tds.length; i += 1) {\n            const tdw = tds[i].offsetWidth;\n            const thw = ths[i].offsetWidth;\n            const w = tdw > thw ? tdw : thw;\n            tds[i].style.minWidth = `${w}px`;\n            ths[i].style.minWidth = `${w}px`;\n          }\n        }\n      }, 100);\n    }\n  };\n  useEffect(() => {\n    tableWidthAdaptive();\n    return () => {\n      clearInterval(timer.current);\n    };\n  });\n\n  const { currentPage, pageSize, totalCount, onShowSizeChange, onChange, columns } = props;\n  // console.log(props);\n  const hasMultiHead = columns.filter((one: any) => !!one.children).length > 0;\n  return (\n    <div className={`table-content ${hasMultiHead ? \"clear-overlap-border\" : \"\"}`}>\n      <Table rowClassName={props.rowClassName} pagination={false} bordered={true} rowKey=\"id\" {...props} />\n      {currentPage ? (\n        <Pagination\n          total={totalCount || 0}\n          showSizeChanger // 是否可以改变pageSize\n          showQuickJumper={false} // 是否可以快速跳转某一页\n          onShowSizeChange={onShowSizeChange}\n          onChange={onChange}\n          showTotal={_totalCount => `共 ${_totalCount} 条`}\n          current={currentPage || 1}\n          pageSize={pageSize || 10}\n          {...props}\n        />\n      ) : null}\n    </div>\n  );\n}\n"],"names":["TableList","props","timer","useRef","tableWidthAdaptive","tds","ths","i","tdw","thw","w","useEffect","currentPage","pageSize","totalCount","onShowSizeChange","onChange","columns","hasMultiHead","one","jsx","Table","Pagination","_totalCount"],"mappings":"oaAIA,SAAwBA,EAAUC,EAAY,CACtC,MAAAC,EAAQC,SAAY,IAAI,EAExBC,EAAqB,IAAM,CAC3BH,EAAM,WAAaA,EAAM,UAAU,QAAQ,QAAQ,EAAI,KACnDC,EAAA,QAAU,YAAY,IAAM,CAE1B,MAAAG,EAAM,SAAS,cAAc,gBAAgB,GAAK,SAAS,cAAc,gBAAgB,EAAG,iBAAiB,IAAI,EACjHC,EAAW,SAAS,iBAAiB,sBAAsB,EAC7D,GAAAD,GAAOA,EAAI,OAAQ,CACrB,cAAcH,EAAM,OAAO,EAC3B,QAASK,EAAI,EAAGA,EAAIF,EAAI,OAAQE,GAAK,EAAG,CAChC,MAAAC,EAAMH,EAAIE,CAAC,EAAE,YACbE,EAAMH,EAAIC,CAAC,EAAE,YACbG,EAAIF,EAAMC,EAAMD,EAAMC,EAC5BJ,EAAIE,CAAC,EAAE,MAAM,SAAW,GAAGG,CAAC,KAC5BJ,EAAIC,CAAC,EAAE,MAAM,SAAW,GAAGG,CAAC,IAC9B,CACF,GACC,GAAG,EACR,EAEFC,EAAAA,UAAU,KACWP,IACZ,IAAM,CACX,cAAcF,EAAM,OAAO,CAAA,EAE9B,EAED,KAAM,CAAE,YAAAU,EAAa,SAAAC,EAAU,WAAAC,EAAY,iBAAAC,EAAkB,SAAAC,EAAU,QAAAC,CAAY,EAAAhB,EAE7EiB,EAAeD,EAAQ,OAAQE,GAAa,CAAC,CAACA,EAAI,QAAQ,EAAE,OAAS,EAC3E,cACG,MAAI,CAAA,UAAW,iBAAiBD,EAAe,uBAAyB,EAAE,GACzE,SAAA,CAACE,EAAAA,IAAAC,EAAA,CAAM,aAAcpB,EAAM,aAAc,WAAY,GAAO,SAAU,GAAM,OAAO,KAAM,GAAGA,CAAO,CAAA,EAClGW,EACCQ,EAAA,IAACE,EAAA,CACC,MAAOR,GAAc,EACrB,gBAAe,GACf,gBAAiB,GACjB,iBAAAC,EACA,SAAAC,EACA,UAA0BO,GAAA,KAAKA,CAAW,KAC1C,QAASX,GAAe,EACxB,SAAUC,GAAY,GACrB,GAAGZ,CAAA,CAAA,EAEJ,IACN,CAAA,CAAA,CAEJ"}