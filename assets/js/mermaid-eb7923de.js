import{d as De,c as Yd,a as Ud,b as Hd}from"./dayjs-6d610299.js";import{d as Dr}from"./@braintree-f19cff0e.js";import"./d3-transition-b37040bd.js";import"./d3-zoom-d13b3c8c.js";import{p as $r}from"./dompurify-4851c8ad.js";import{s as yt,e as oh}from"./d3-selection-6113bbad.js";import{w as ji,G as Bi,l as Hs,a as lh,r as Gd,b as jd,i as tr,c as ch}from"./dagre-d3-es-7ad73859.js";import{b as Gs,d as Xd,e as $d,f as Kd,g as Qd,h as Zd,i as Jd,j as tf,k as ef,m as rf,n as sf,o as nf,c as ei,p as af,q as of,r as lf,s as cf,t as hf,u as uf,v as df,l as dr,w as Kr,x as ff}from"./d3-shape-67142881.js";import{l as Ct,a as et,i as kt,r as Hr,d as At,b as Fr,c as hh}from"./khroma-dc7cc5cc.js";import{v as pf}from"./uuid-55471c42.js";import{t as gf,l as ws,o as vo,b as Ml}from"./d3-scale-629d1929.js";import{m as yf,g as mf}from"./d3-array-530277c9.js";import{h as xf}from"./d3-interpolate-a6414406.js";import{a as bf,b as kf}from"./d3-axis-8d489beb.js";import{t as Vl}from"./d3-time-format-1107fc02.js";import{d as zl,b as ql,a as Wl,t as Yl,s as Ul,v as Hl,p as _f,w as Tf,x as Cf,q as Ef,y as Sf,z as vf,c as wf}from"./d3-time-4707eb85.js";import{E as Af}from"./elkjs-a3564a40.js";import{c as uh}from"./cytoscape-7de0b217.js";import{c as Lf}from"./cytoscape-cose-bilkent-2ca0647a.js";import{S as Bf,s as If,l as Df,r as Ff,c as Rf,j as Nf}from"./d3-sankey-15198533.js";import{s as dh}from"./d3-scale-chromatic-5a959b62.js";import{_ as ae}from"./@react-three-892cc760.js";import{d as fh}from"./ts-dedent-356e4a49.js";import{H as wo,A as Of,d as Sa,G as Pf}from"./lodash-es-d20cff6b.js";import{s as Mf,a as Vf,c as zf}from"./stylis-d04dd720.js";import{f as ph}from"./mdast-util-from-markdown-32388d6f.js";const Wi={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},I={trace:(...t)=>{},debug:(...t)=>{},info:(...t)=>{},warn:(...t)=>{},error:(...t)=>{},fatal:(...t)=>{}},Ao=function(t="fatal"){let e=Wi.fatal;typeof t=="string"?(t=t.toLowerCase(),t in Wi&&(e=Wi[t])):typeof t=="number"&&(e=t),I.trace=()=>{},I.debug=()=>{},I.info=()=>{},I.warn=()=>{},I.error=()=>{},I.fatal=()=>{},e<=Wi.fatal&&(I.fatal=console.error?console.error.bind(console,oi("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",oi("FATAL"))),e<=Wi.error&&(I.error=console.error?console.error.bind(console,oi("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",oi("ERROR"))),e<=Wi.warn&&(I.warn=console.warn?console.warn.bind(console,oi("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",oi("WARN"))),e<=Wi.info&&(I.info=console.info?console.info.bind(console,oi("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",oi("INFO"))),e<=Wi.debug&&(I.debug=console.debug?console.debug.bind(console,oi("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",oi("DEBUG"))),e<=Wi.trace&&(I.trace=console.debug?console.debug.bind(console,oi("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",oi("TRACE")))},oi=t=>`%c${De().format("ss.SSS")} : ${t} : `,js=/<br\s*\/?>/gi,qf=t=>t?yh(t).replace(/\\n/g,"#br#").split("#br#"):[""],Wf=(()=>{let t=!1;return()=>{t||(Yf(),t=!0)}})();function Yf(){const t="data-temp-href-target";$r.addHook("beforeSanitizeAttributes",e=>{e.tagName==="A"&&e.hasAttribute("target")&&e.setAttribute(t,e.getAttribute("target")||"")}),$r.addHook("afterSanitizeAttributes",e=>{e.tagName==="A"&&e.hasAttribute(t)&&(e.setAttribute("target",e.getAttribute(t)||""),e.removeAttribute(t),e.getAttribute("target")==="_blank"&&e.setAttribute("rel","noopener"))})}const gh=t=>(Wf(),$r.sanitize(t)),Gl=(t,e)=>{var i;if(((i=e.flowchart)==null?void 0:i.htmlLabels)!==!1){const r=e.securityLevel;r==="antiscript"||r==="strict"?t=gh(t):r!=="loose"&&(t=yh(t),t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;"),t=t.replace(/=/g,"&equals;"),t=jf(t))}return t},ue=(t,e)=>t&&(e.dompurifyConfig?t=$r.sanitize(Gl(t,e),e.dompurifyConfig).toString():t=$r.sanitize(Gl(t,e),{FORBID_TAGS:["style"]}).toString(),t),Uf=(t,e)=>typeof t=="string"?ue(t,e):t.flat().map(i=>ue(i,e)),Hf=t=>js.test(t),Gf=t=>t.split(js),jf=t=>t.replace(/#br#/g,"<br/>"),yh=t=>t.replace(js,"#br#"),Xf=t=>{let e="";return t&&(e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,e=e.replaceAll(/\(/g,"\\("),e=e.replaceAll(/\)/g,"\\)")),e},Ce=t=>!(t===!1||["false","null","0"].includes(String(t).trim().toLowerCase())),$f=function(...t){const e=t.filter(i=>!isNaN(i));return Math.max(...e)},Kf=function(...t){const e=t.filter(i=>!isNaN(i));return Math.min(...e)},xs=function(t){const e=t.split(/(,)/),i=[];for(let r=0;r<e.length;r++){let s=e[r];if(s===","&&r>0&&r+1<e.length){const n=e[r-1],a=e[r+1];Qf(n,a)&&(s=n+","+a,r++,i.pop())}i.push(Zf(s))}return i.join("")},Na=(t,e)=>Math.max(0,t.split(e).length-1),Qf=(t,e)=>{const i=Na(t,"~"),r=Na(e,"~");return i===1&&r===1},Zf=t=>{const e=Na(t,"~");let i=!1;if(e<=1)return t;e%2!==0&&t.startsWith("~")&&(t=t.substring(1),i=!0);const r=[...t];let s=r.indexOf("~"),n=r.lastIndexOf("~");for(;s!==-1&&n!==-1&&s!==n;)r[s]="<",r[n]=">",s=r.indexOf("~"),n=r.lastIndexOf("~");return i&&r.unshift("~"),r.join("")},mt={getRows:qf,sanitizeText:ue,sanitizeTextOrArray:Uf,hasBreaks:Hf,splitBreaks:Gf,lineBreakRegex:js,removeScript:gh,getUrl:Xf,evaluate:Ce,getMax:$f,getMin:Kf},ze=(t,e)=>e?et(t,{s:-40,l:10}):et(t,{s:-40,l:-10}),Jn="#ffffff",ta="#f2f2f2";let Jf=class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){var e,i,r,s,n,a,o,l,h,u,p;if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||et(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||et(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||ze(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||ze(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||ze(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||ze(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||kt(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||kt(this.tertiaryColor),this.lineColor=this.lineColor||kt(this.background),this.arrowheadColor=this.arrowheadColor||kt(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?At(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||"grey",this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||At(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||kt(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||Ct(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||et(this.primaryColor,{h:30}),this.cScale4=this.cScale4||et(this.primaryColor,{h:60}),this.cScale5=this.cScale5||et(this.primaryColor,{h:90}),this.cScale6=this.cScale6||et(this.primaryColor,{h:120}),this.cScale7=this.cScale7||et(this.primaryColor,{h:150}),this.cScale8=this.cScale8||et(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||et(this.primaryColor,{h:270}),this.cScale10=this.cScale10||et(this.primaryColor,{h:300}),this.cScale11=this.cScale11||et(this.primaryColor,{h:330}),this.darkMode)for(let g=0;g<this.THEME_COLOR_LIMIT;g++)this["cScale"+g]=At(this["cScale"+g],75);else for(let g=0;g<this.THEME_COLOR_LIMIT;g++)this["cScale"+g]=At(this["cScale"+g],25);for(let g=0;g<this.THEME_COLOR_LIMIT;g++)this["cScaleInv"+g]=this["cScaleInv"+g]||kt(this["cScale"+g]);for(let g=0;g<this.THEME_COLOR_LIMIT;g++)this.darkMode?this["cScalePeer"+g]=this["cScalePeer"+g]||Ct(this["cScale"+g],10):this["cScalePeer"+g]=this["cScalePeer"+g]||At(this["cScale"+g],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let g=0;g<this.THEME_COLOR_LIMIT;g++)this["cScaleLabel"+g]=this["cScaleLabel"+g]||this.scaleLabelColor;const d=this.darkMode?-4:-1;for(let g=0;g<5;g++)this["surface"+g]=this["surface"+g]||et(this.mainBkg,{h:180,s:-15,l:d*(5+g*3)}),this["surfacePeer"+g]=this["surfacePeer"+g]||et(this.mainBkg,{h:180,s:-15,l:d*(8+g*3)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||et(this.primaryColor,{h:64}),this.fillType3=this.fillType3||et(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||et(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||et(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||et(this.primaryColor,{h:128}),this.fillType7=this.fillType7||et(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||et(this.primaryColor,{l:-10}),this.pie5=this.pie5||et(this.secondaryColor,{l:-10}),this.pie6=this.pie6||et(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||et(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||et(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||et(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||et(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||et(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||et(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||et(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||et(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||et(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||et(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||et(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||et(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Fr(this.quadrant1Fill)?Ct(this.quadrant1Fill):At(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((e=this.xyChart)==null?void 0:e.backgroundColor)||this.background,titleColor:((i=this.xyChart)==null?void 0:i.titleColor)||this.primaryTextColor,xAxisTitleColor:((r=this.xyChart)==null?void 0:r.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((s=this.xyChart)==null?void 0:s.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((n=this.xyChart)==null?void 0:n.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((a=this.xyChart)==null?void 0:a.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((o=this.xyChart)==null?void 0:o.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((h=this.xyChart)==null?void 0:h.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((p=this.xyChart)==null?void 0:p.plotColorPalette)||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?At(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||et(this.primaryColor,{h:-30}),this.git4=this.git4||et(this.primaryColor,{h:-60}),this.git5=this.git5||et(this.primaryColor,{h:-90}),this.git6=this.git6||et(this.primaryColor,{h:60}),this.git7=this.git7||et(this.primaryColor,{h:120}),this.darkMode?(this.git0=Ct(this.git0,25),this.git1=Ct(this.git1,25),this.git2=Ct(this.git2,25),this.git3=Ct(this.git3,25),this.git4=Ct(this.git4,25),this.git5=Ct(this.git5,25),this.git6=Ct(this.git6,25),this.git7=Ct(this.git7,25)):(this.git0=At(this.git0,25),this.git1=At(this.git1,25),this.git2=At(this.git2,25),this.git3=At(this.git3,25),this.git4=At(this.git4,25),this.git5=At(this.git5,25),this.git6=At(this.git6,25),this.git7=At(this.git7,25)),this.gitInv0=this.gitInv0||kt(this.git0),this.gitInv1=this.gitInv1||kt(this.git1),this.gitInv2=this.gitInv2||kt(this.git2),this.gitInv3=this.gitInv3||kt(this.git3),this.gitInv4=this.gitInv4||kt(this.git4),this.gitInv5=this.gitInv5||kt(this.git5),this.gitInv6=this.gitInv6||kt(this.git6),this.gitInv7=this.gitInv7||kt(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Jn,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||ta}calculate(e){if(typeof e!="object"){this.updateColors();return}const i=Object.keys(e);i.forEach(r=>{this[r]=e[r]}),this.updateColors(),i.forEach(r=>{this[r]=e[r]})}};const t2=t=>{const e=new Jf;return e.calculate(t),e};let e2=class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=Ct(this.primaryColor,16),this.tertiaryColor=et(this.primaryColor,{h:-160}),this.primaryBorderColor=kt(this.background),this.secondaryBorderColor=ze(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=ze(this.tertiaryColor,this.darkMode),this.primaryTextColor=kt(this.primaryColor),this.secondaryTextColor=kt(this.secondaryColor),this.tertiaryTextColor=kt(this.tertiaryColor),this.lineColor=kt(this.background),this.textColor=kt(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=Ct(kt("#323D47"),10),this.lineColor="calculated",this.border1="#81B1DB",this.border2=Hr(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=At("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=At(this.sectionBkgColor,10),this.taskBorderColor=Hr(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=Hr(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){var e,i,r,s,n,a,o,l,h,u,p;this.secondBkg=Ct(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=Ct(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.mainContrastColor,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=Ct(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=et(this.primaryColor,{h:64}),this.fillType3=et(this.secondaryColor,{h:64}),this.fillType4=et(this.primaryColor,{h:-64}),this.fillType5=et(this.secondaryColor,{h:-64}),this.fillType6=et(this.primaryColor,{h:128}),this.fillType7=et(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||et(this.primaryColor,{h:30}),this.cScale4=this.cScale4||et(this.primaryColor,{h:60}),this.cScale5=this.cScale5||et(this.primaryColor,{h:90}),this.cScale6=this.cScale6||et(this.primaryColor,{h:120}),this.cScale7=this.cScale7||et(this.primaryColor,{h:150}),this.cScale8=this.cScale8||et(this.primaryColor,{h:210}),this.cScale9=this.cScale9||et(this.primaryColor,{h:270}),this.cScale10=this.cScale10||et(this.primaryColor,{h:300}),this.cScale11=this.cScale11||et(this.primaryColor,{h:330});for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleInv"+d]=this["cScaleInv"+d]||kt(this["cScale"+d]);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScalePeer"+d]=this["cScalePeer"+d]||Ct(this["cScale"+d],10);for(let d=0;d<5;d++)this["surface"+d]=this["surface"+d]||et(this.mainBkg,{h:30,s:-30,l:-(-10+d*4)}),this["surfacePeer"+d]=this["surfacePeer"+d]||et(this.mainBkg,{h:30,s:-30,l:-(-7+d*4)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleLabel"+d]=this["cScaleLabel"+d]||this.scaleLabelColor;for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["pie"+d]=this["cScale"+d];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||et(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||et(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||et(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||et(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||et(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||et(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Fr(this.quadrant1Fill)?Ct(this.quadrant1Fill):At(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((e=this.xyChart)==null?void 0:e.backgroundColor)||this.background,titleColor:((i=this.xyChart)==null?void 0:i.titleColor)||this.primaryTextColor,xAxisTitleColor:((r=this.xyChart)==null?void 0:r.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((s=this.xyChart)==null?void 0:s.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((n=this.xyChart)==null?void 0:n.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((a=this.xyChart)==null?void 0:a.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((o=this.xyChart)==null?void 0:o.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((h=this.xyChart)==null?void 0:h.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((p=this.xyChart)==null?void 0:p.plotColorPalette)||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?At(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=Ct(this.secondaryColor,20),this.git1=Ct(this.pie2||this.secondaryColor,20),this.git2=Ct(this.pie3||this.tertiaryColor,20),this.git3=Ct(this.pie4||et(this.primaryColor,{h:-30}),20),this.git4=Ct(this.pie5||et(this.primaryColor,{h:-60}),20),this.git5=Ct(this.pie6||et(this.primaryColor,{h:-90}),10),this.git6=Ct(this.pie7||et(this.primaryColor,{h:60}),10),this.git7=Ct(this.pie8||et(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||kt(this.git0),this.gitInv1=this.gitInv1||kt(this.git1),this.gitInv2=this.gitInv2||kt(this.git2),this.gitInv3=this.gitInv3||kt(this.git3),this.gitInv4=this.gitInv4||kt(this.git4),this.gitInv5=this.gitInv5||kt(this.git5),this.gitInv6=this.gitInv6||kt(this.git6),this.gitInv7=this.gitInv7||kt(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||kt(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||kt(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Ct(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Ct(this.background,2)}calculate(e){if(typeof e!="object"){this.updateColors();return}const i=Object.keys(e);i.forEach(r=>{this[r]=e[r]}),this.updateColors(),i.forEach(r=>{this[r]=e[r]})}};const i2=t=>{const e=new e2;return e.calculate(t),e};let r2=class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=et(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=et(this.primaryColor,{h:-160}),this.primaryBorderColor=ze(this.primaryColor,this.darkMode),this.secondaryBorderColor=ze(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=ze(this.tertiaryColor,this.darkMode),this.primaryTextColor=kt(this.primaryColor),this.secondaryTextColor=kt(this.secondaryColor),this.tertiaryTextColor=kt(this.tertiaryColor),this.lineColor=kt(this.background),this.textColor=kt(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#e8e8e8",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.sectionBkgColor=Hr(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){var e,i,r,s,n,a,o,l,h,u,p;this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||et(this.primaryColor,{h:30}),this.cScale4=this.cScale4||et(this.primaryColor,{h:60}),this.cScale5=this.cScale5||et(this.primaryColor,{h:90}),this.cScale6=this.cScale6||et(this.primaryColor,{h:120}),this.cScale7=this.cScale7||et(this.primaryColor,{h:150}),this.cScale8=this.cScale8||et(this.primaryColor,{h:210}),this.cScale9=this.cScale9||et(this.primaryColor,{h:270}),this.cScale10=this.cScale10||et(this.primaryColor,{h:300}),this.cScale11=this.cScale11||et(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||At(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||At(this.tertiaryColor,40);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScale"+d]=At(this["cScale"+d],10),this["cScalePeer"+d]=this["cScalePeer"+d]||At(this["cScale"+d],25);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleInv"+d]=this["cScaleInv"+d]||et(this["cScale"+d],{h:180});for(let d=0;d<5;d++)this["surface"+d]=this["surface"+d]||et(this.mainBkg,{h:30,l:-(5+d*5)}),this["surfacePeer"+d]=this["surfacePeer"+d]||et(this.mainBkg,{h:30,l:-(7+d*5)});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||kt(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||kt(this.labelTextColor);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleLabel"+d]=this["cScaleLabel"+d]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=Ct(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=et(this.primaryColor,{h:64}),this.fillType3=et(this.secondaryColor,{h:64}),this.fillType4=et(this.primaryColor,{h:-64}),this.fillType5=et(this.secondaryColor,{h:-64}),this.fillType6=et(this.primaryColor,{h:128}),this.fillType7=et(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||et(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||et(this.primaryColor,{l:-10}),this.pie5=this.pie5||et(this.secondaryColor,{l:-30}),this.pie6=this.pie6||et(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||et(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||et(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||et(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||et(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||et(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||et(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||et(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||et(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||et(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||et(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||et(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||et(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Fr(this.quadrant1Fill)?Ct(this.quadrant1Fill):At(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((e=this.xyChart)==null?void 0:e.backgroundColor)||this.background,titleColor:((i=this.xyChart)==null?void 0:i.titleColor)||this.primaryTextColor,xAxisTitleColor:((r=this.xyChart)==null?void 0:r.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((s=this.xyChart)==null?void 0:s.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((n=this.xyChart)==null?void 0:n.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((a=this.xyChart)==null?void 0:a.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((o=this.xyChart)==null?void 0:o.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((h=this.xyChart)==null?void 0:h.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((p=this.xyChart)==null?void 0:p.plotColorPalette)||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||et(this.primaryColor,{h:-30}),this.git4=this.git4||et(this.primaryColor,{h:-60}),this.git5=this.git5||et(this.primaryColor,{h:-90}),this.git6=this.git6||et(this.primaryColor,{h:60}),this.git7=this.git7||et(this.primaryColor,{h:120}),this.darkMode?(this.git0=Ct(this.git0,25),this.git1=Ct(this.git1,25),this.git2=Ct(this.git2,25),this.git3=Ct(this.git3,25),this.git4=Ct(this.git4,25),this.git5=Ct(this.git5,25),this.git6=Ct(this.git6,25),this.git7=Ct(this.git7,25)):(this.git0=At(this.git0,25),this.git1=At(this.git1,25),this.git2=At(this.git2,25),this.git3=At(this.git3,25),this.git4=At(this.git4,25),this.git5=At(this.git5,25),this.git6=At(this.git6,25),this.git7=At(this.git7,25)),this.gitInv0=this.gitInv0||At(kt(this.git0),25),this.gitInv1=this.gitInv1||kt(this.git1),this.gitInv2=this.gitInv2||kt(this.git2),this.gitInv3=this.gitInv3||kt(this.git3),this.gitInv4=this.gitInv4||kt(this.git4),this.gitInv5=this.gitInv5||kt(this.git5),this.gitInv6=this.gitInv6||kt(this.git6),this.gitInv7=this.gitInv7||kt(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||kt(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||kt(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Jn,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||ta}calculate(e){if(typeof e!="object"){this.updateColors();return}const i=Object.keys(e);i.forEach(r=>{this[r]=e[r]}),this.updateColors(),i.forEach(r=>{this[r]=e[r]})}};const Lo=t=>{const e=new r2;return e.calculate(t),e};let s2=class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=Ct("#cde498",10),this.primaryBorderColor=ze(this.primaryColor,this.darkMode),this.secondaryBorderColor=ze(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=ze(this.tertiaryColor,this.darkMode),this.primaryTextColor=kt(this.primaryColor),this.secondaryTextColor=kt(this.secondaryColor),this.tertiaryTextColor=kt(this.primaryColor),this.lineColor=kt(this.background),this.textColor=kt(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var e,i,r,s,n,a,o,l,h,u,p;this.actorBorder=At(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||et(this.primaryColor,{h:30}),this.cScale4=this.cScale4||et(this.primaryColor,{h:60}),this.cScale5=this.cScale5||et(this.primaryColor,{h:90}),this.cScale6=this.cScale6||et(this.primaryColor,{h:120}),this.cScale7=this.cScale7||et(this.primaryColor,{h:150}),this.cScale8=this.cScale8||et(this.primaryColor,{h:210}),this.cScale9=this.cScale9||et(this.primaryColor,{h:270}),this.cScale10=this.cScale10||et(this.primaryColor,{h:300}),this.cScale11=this.cScale11||et(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||At(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||At(this.tertiaryColor,40);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScale"+d]=At(this["cScale"+d],10),this["cScalePeer"+d]=this["cScalePeer"+d]||At(this["cScale"+d],25);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleInv"+d]=this["cScaleInv"+d]||et(this["cScale"+d],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleLabel"+d]=this["cScaleLabel"+d]||this.scaleLabelColor;for(let d=0;d<5;d++)this["surface"+d]=this["surface"+d]||et(this.mainBkg,{h:30,s:-30,l:-(5+d*5)}),this["surfacePeer"+d]=this["surfacePeer"+d]||et(this.mainBkg,{h:30,s:-30,l:-(8+d*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=et(this.primaryColor,{h:64}),this.fillType3=et(this.secondaryColor,{h:64}),this.fillType4=et(this.primaryColor,{h:-64}),this.fillType5=et(this.secondaryColor,{h:-64}),this.fillType6=et(this.primaryColor,{h:128}),this.fillType7=et(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||et(this.primaryColor,{l:-30}),this.pie5=this.pie5||et(this.secondaryColor,{l:-30}),this.pie6=this.pie6||et(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||et(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||et(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||et(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||et(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||et(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||et(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||et(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||et(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||et(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||et(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||et(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||et(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Fr(this.quadrant1Fill)?Ct(this.quadrant1Fill):At(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((e=this.xyChart)==null?void 0:e.backgroundColor)||this.background,titleColor:((i=this.xyChart)==null?void 0:i.titleColor)||this.primaryTextColor,xAxisTitleColor:((r=this.xyChart)==null?void 0:r.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((s=this.xyChart)==null?void 0:s.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((n=this.xyChart)==null?void 0:n.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((a=this.xyChart)==null?void 0:a.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((o=this.xyChart)==null?void 0:o.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((h=this.xyChart)==null?void 0:h.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((p=this.xyChart)==null?void 0:p.plotColorPalette)||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||et(this.primaryColor,{h:-30}),this.git4=this.git4||et(this.primaryColor,{h:-60}),this.git5=this.git5||et(this.primaryColor,{h:-90}),this.git6=this.git6||et(this.primaryColor,{h:60}),this.git7=this.git7||et(this.primaryColor,{h:120}),this.darkMode?(this.git0=Ct(this.git0,25),this.git1=Ct(this.git1,25),this.git2=Ct(this.git2,25),this.git3=Ct(this.git3,25),this.git4=Ct(this.git4,25),this.git5=Ct(this.git5,25),this.git6=Ct(this.git6,25),this.git7=Ct(this.git7,25)):(this.git0=At(this.git0,25),this.git1=At(this.git1,25),this.git2=At(this.git2,25),this.git3=At(this.git3,25),this.git4=At(this.git4,25),this.git5=At(this.git5,25),this.git6=At(this.git6,25),this.git7=At(this.git7,25)),this.gitInv0=this.gitInv0||kt(this.git0),this.gitInv1=this.gitInv1||kt(this.git1),this.gitInv2=this.gitInv2||kt(this.git2),this.gitInv3=this.gitInv3||kt(this.git3),this.gitInv4=this.gitInv4||kt(this.git4),this.gitInv5=this.gitInv5||kt(this.git5),this.gitInv6=this.gitInv6||kt(this.git6),this.gitInv7=this.gitInv7||kt(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||kt(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||kt(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Jn,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||ta}calculate(e){if(typeof e!="object"){this.updateColors();return}const i=Object.keys(e);i.forEach(r=>{this[r]=e[r]}),this.updateColors(),i.forEach(r=>{this[r]=e[r]})}};const n2=t=>{const e=new s2;return e.calculate(t),e};class a2{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=Ct(this.contrast,55),this.background="#ffffff",this.tertiaryColor=et(this.primaryColor,{h:-160}),this.primaryBorderColor=ze(this.primaryColor,this.darkMode),this.secondaryBorderColor=ze(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=ze(this.tertiaryColor,this.darkMode),this.primaryTextColor=kt(this.primaryColor),this.secondaryTextColor=kt(this.secondaryColor),this.tertiaryTextColor=kt(this.tertiaryColor),this.lineColor=kt(this.background),this.textColor=kt(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var e,i,r,s,n,a,o,l,h,u,p;this.secondBkg=Ct(this.contrast,55),this.border2=this.contrast,this.actorBorder=Ct(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.lineColor,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleInv"+d]=this["cScaleInv"+d]||kt(this["cScale"+d]);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this.darkMode?this["cScalePeer"+d]=this["cScalePeer"+d]||Ct(this["cScale"+d],10):this["cScalePeer"+d]=this["cScalePeer"+d]||At(this["cScale"+d],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleLabel"+d]=this["cScaleLabel"+d]||this.scaleLabelColor;for(let d=0;d<5;d++)this["surface"+d]=this["surface"+d]||et(this.mainBkg,{l:-(5+d*5)}),this["surfacePeer"+d]=this["surfacePeer"+d]||et(this.mainBkg,{l:-(8+d*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=Ct(this.contrast,30),this.sectionBkgColor2=Ct(this.contrast,30),this.taskBorderColor=At(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=Ct(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=At(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=et(this.primaryColor,{h:64}),this.fillType3=et(this.secondaryColor,{h:64}),this.fillType4=et(this.primaryColor,{h:-64}),this.fillType5=et(this.secondaryColor,{h:-64}),this.fillType6=et(this.primaryColor,{h:128}),this.fillType7=et(this.secondaryColor,{h:128});for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["pie"+d]=this["cScale"+d];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||et(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||et(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||et(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||et(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||et(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||et(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Fr(this.quadrant1Fill)?Ct(this.quadrant1Fill):At(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((e=this.xyChart)==null?void 0:e.backgroundColor)||this.background,titleColor:((i=this.xyChart)==null?void 0:i.titleColor)||this.primaryTextColor,xAxisTitleColor:((r=this.xyChart)==null?void 0:r.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((s=this.xyChart)==null?void 0:s.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((n=this.xyChart)==null?void 0:n.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((a=this.xyChart)==null?void 0:a.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((o=this.xyChart)==null?void 0:o.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((h=this.xyChart)==null?void 0:h.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((p=this.xyChart)==null?void 0:p.plotColorPalette)||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=At(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||et(this.primaryColor,{h:-30}),this.git4=this.pie5||et(this.primaryColor,{h:-60}),this.git5=this.pie6||et(this.primaryColor,{h:-90}),this.git6=this.pie7||et(this.primaryColor,{h:60}),this.git7=this.pie8||et(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||kt(this.git0),this.gitInv1=this.gitInv1||kt(this.git1),this.gitInv2=this.gitInv2||kt(this.git2),this.gitInv3=this.gitInv3||kt(this.git3),this.gitInv4=this.gitInv4||kt(this.git4),this.gitInv5=this.gitInv5||kt(this.git5),this.gitInv6=this.gitInv6||kt(this.git6),this.gitInv7=this.gitInv7||kt(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Jn,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||ta}calculate(e){if(typeof e!="object"){this.updateColors();return}const i=Object.keys(e);i.forEach(r=>{this[r]=e[r]}),this.updateColors(),i.forEach(r=>{this[r]=e[r]})}}const o2=t=>{const e=new a2;return e.calculate(t),e},Qi={base:{getThemeVariables:t2},dark:{getThemeVariables:i2},default:{getThemeVariables:Lo},forest:{getThemeVariables:n2},neutral:{getThemeVariables:o2}},Yi={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"]},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},theme:"default",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","maxEdges"],deterministicIds:!1,fontSize:16},mh={...Yi,deterministicIDSeed:void 0,themeCSS:void 0,themeVariables:Qi.default.getThemeVariables(),sequence:{...Yi.sequence,messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},noteFont:function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},actorFont:function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}}},gantt:{...Yi.gantt,tickInterval:void 0,useWidth:void 0},c4:{...Yi.c4,useWidth:void 0,personFont:function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},external_personFont:function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},systemFont:function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},external_systemFont:function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},system_dbFont:function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},external_system_dbFont:function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},system_queueFont:function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},external_system_queueFont:function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},containerFont:function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},external_containerFont:function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},container_dbFont:function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},external_container_dbFont:function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},container_queueFont:function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},external_container_queueFont:function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},componentFont:function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},external_componentFont:function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},component_dbFont:function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},external_component_dbFont:function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},component_queueFont:function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},external_component_queueFont:function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},boundaryFont:function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}}},pie:{...Yi.pie,useWidth:984},xyChart:{...Yi.xyChart,useWidth:void 0},requirement:{...Yi.requirement,useWidth:void 0},gitGraph:{...Yi.gitGraph,useMaxWidth:!1},sankey:{...Yi.sankey,useMaxWidth:!1}},xh=(t,e="")=>Object.keys(t).reduce((i,r)=>Array.isArray(t[r])?i:typeof t[r]=="object"&&t[r]!==null?[...i,e+r,...xh(t[r],"")]:[...i,e+r],[]),l2=new Set(xh(mh,"")),$t=mh,Tn=t=>{if(I.debug("sanitizeDirective called with",t),!(typeof t!="object"||t==null)){if(Array.isArray(t)){t.forEach(e=>Tn(e));return}for(const e of Object.keys(t)){if(I.debug("Checking key",e),e.startsWith("__")||e.includes("proto")||e.includes("constr")||!l2.has(e)||t[e]==null){I.debug("sanitize deleting key: ",e),delete t[e];continue}if(typeof t[e]=="object"){I.debug("sanitizing object",e),Tn(t[e]);continue}const i=["themeCSS","fontFamily","altFontFamily"];for(const r of i)e.includes(r)&&(I.debug("sanitizing css option",e),t[e]=c2(t[e]))}if(t.themeVariables)for(const e of Object.keys(t.themeVariables)){const i=t.themeVariables[e];i!=null&&i.match&&!i.match(/^[\d "#%(),.;A-Za-z]+$/)&&(t.themeVariables[e]="")}I.debug("After sanitization",t)}},c2=t=>{let e=0,i=0;for(const r of t){if(e<i)return"{ /* ERROR: Unbalanced CSS */ }";r==="{"?e++:r==="}"&&i++}return e!==i?"{ /* ERROR: Unbalanced CSS */ }":t},bh=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,bs=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,h2=/\s*%%.*\n/gm;class kh extends Error{constructor(e){super(e),this.name="UnknownDiagramError"}}const Qr={},ea=function(t,e){t=t.replace(bh,"").replace(bs,"").replace(h2,`
`);for(const[i,{detector:r}]of Object.entries(Qr))if(r(t,e))return i;throw new kh(`No diagram type detected matching given configuration for text: ${t}`)},_h=(...t)=>{for(const{id:e,detector:i,loader:r}of t)Th(e,i,r)},Th=(t,e,i)=>{Qr[t]?I.error(`Detector with key ${t} already exists`):Qr[t]={detector:e,loader:i},I.debug(`Detector with key ${t} added${i?" with loader":""}`)},u2=t=>Qr[t].loader,Oa=(t,e,{depth:i=2,clobber:r=!1}={})=>{const s={depth:i,clobber:r};return Array.isArray(e)&&!Array.isArray(t)?(e.forEach(n=>Oa(t,n,s)),t):Array.isArray(e)&&Array.isArray(t)?(e.forEach(n=>{t.includes(n)||t.push(n)}),t):t===void 0||i<=0?t!=null&&typeof t=="object"&&typeof e=="object"?Object.assign(t,e):e:(e!==void 0&&typeof t=="object"&&typeof e=="object"&&Object.keys(e).forEach(n=>{typeof e[n]=="object"&&(t[n]===void 0||typeof t[n]=="object")?(t[n]===void 0&&(t[n]=Array.isArray(e[n])?[]:{}),t[n]=Oa(t[n],e[n],{depth:i-1,clobber:r})):(r||typeof t[n]!="object"&&typeof e[n]!="object")&&(t[n]=e[n])}),t)},Ae=Oa,Ch="​",d2={curveBasis:Gs,curveBasisClosed:Xd,curveBasisOpen:$d,curveBumpX:Kd,curveBumpY:Qd,curveBundle:Zd,curveCardinalClosed:Jd,curveCardinalOpen:tf,curveCardinal:ef,curveCatmullRomClosed:rf,curveCatmullRomOpen:sf,curveCatmullRom:nf,curveLinear:ei,curveLinearClosed:af,curveMonotoneX:of,curveMonotoneY:lf,curveNatural:cf,curveStep:hf,curveStepAfter:uf,curveStepBefore:df},f2=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,p2=function(t,e){const i=Eh(t,/(?:init\b)|(?:initialize\b)/);let r={};if(Array.isArray(i)){const a=i.map(o=>o.args);Tn(a),r=Ae(r,[...a])}else r=i.args;if(!r)return;let s=ea(t,e);const n="config";return r[n]!==void 0&&(s==="flowchart-v2"&&(s="flowchart"),r[s]=r[n],delete r[n]),r},Eh=function(t,e=null){try{const i=new RegExp(`[%]{2}(?![{]${f2.source})(?=[}][%]{2}).*
`,"ig");t=t.trim().replace(i,"").replace(/'/gm,'"'),I.debug(`Detecting diagram directive${e!==null?" type:"+e:""} based on the text:${t}`);let r;const s=[];for(;(r=bs.exec(t))!==null;)if(r.index===bs.lastIndex&&bs.lastIndex++,r&&!e||e&&r[1]&&r[1].match(e)||e&&r[2]&&r[2].match(e)){const n=r[1]?r[1]:r[2],a=r[3]?r[3].trim():r[4]?JSON.parse(r[4].trim()):null;s.push({type:n,args:a})}return s.length===0?{type:t,args:null}:s.length===1?s[0]:s}catch(i){return I.error(`ERROR: ${i.message} - Unable to parse directive type: '${e}' based on the text: '${t}'`),{type:void 0,args:null}}},g2=function(t){return t.replace(bs,"")},y2=function(t,e){for(const[i,r]of e.entries())if(r.match(t))return i;return-1};function di(t,e){if(!t)return e;const i=`curve${t.charAt(0).toUpperCase()+t.slice(1)}`;return d2[i]??e}function m2(t,e){const i=t.trim();if(i)return e.securityLevel!=="loose"?Dr.sanitizeUrl(i):i}const x2=(t,...e)=>{const i=t.split("."),r=i.length-1,s=i[r];let n=window;for(let a=0;a<r;a++)if(n=n[i[a]],!n){I.error(`Function name: ${t} not found in window`);return}n[s](...e)};function Sh(t,e){return!t||!e?0:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function b2(t){let e,i=0;t.forEach(s=>{i+=Sh(s,e),e=s});const r=i/2;return Bo(t,r)}function k2(t){return t.length===1?t[0]:b2(t)}const jl=(t,e=2)=>{const i=Math.pow(10,e);return Math.round(t*i)/i},Bo=(t,e)=>{let i,r=e;for(const s of t){if(i){const n=Sh(s,i);if(n<r)r-=n;else{const a=r/n;if(a<=0)return i;if(a>=1)return{x:s.x,y:s.y};if(a>0&&a<1)return{x:jl((1-a)*i.x+a*s.x,5),y:jl((1-a)*i.y+a*s.y,5)}}}i=s}throw new Error("Could not find a suitable point for the given distance")},_2=(t,e,i)=>{I.info(`our points ${JSON.stringify(e)}`),e[0]!==i&&(e=e.reverse());const s=Bo(e,25),n=t?10:5,a=Math.atan2(e[0].y-s.y,e[0].x-s.x),o={x:0,y:0};return o.x=Math.sin(a)*n+(e[0].x+s.x)/2,o.y=-Math.cos(a)*n+(e[0].y+s.y)/2,o};function T2(t,e,i){const r=structuredClone(i);I.info("our points",r),e!=="start_left"&&e!=="start_right"&&r.reverse();const s=25+t,n=Bo(r,s),a=10+t*.5,o=Math.atan2(r[0].y-n.y,r[0].x-n.x),l={x:0,y:0};return e==="start_left"?(l.x=Math.sin(o+Math.PI)*a+(r[0].x+n.x)/2,l.y=-Math.cos(o+Math.PI)*a+(r[0].y+n.y)/2):e==="end_right"?(l.x=Math.sin(o-Math.PI)*a+(r[0].x+n.x)/2-5,l.y=-Math.cos(o-Math.PI)*a+(r[0].y+n.y)/2-5):e==="end_left"?(l.x=Math.sin(o)*a+(r[0].x+n.x)/2-5,l.y=-Math.cos(o)*a+(r[0].y+n.y)/2-5):(l.x=Math.sin(o)*a+(r[0].x+n.x)/2,l.y=-Math.cos(o)*a+(r[0].y+n.y)/2),l}function ii(t){let e="",i="";for(const r of t)r!==void 0&&(r.startsWith("color:")||r.startsWith("text-align:")?i=i+r+";":e=e+r+";");return{style:e,labelStyle:i}}let Xl=0;const vh=()=>(Xl++,"id-"+Math.random().toString(36).substr(2,12)+"-"+Xl);function C2(t){let e="";const i="0123456789abcdef",r=i.length;for(let s=0;s<t;s++)e+=i.charAt(Math.floor(Math.random()*r));return e}const wh=t=>C2(t.length),E2=function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},S2=function(t,e){const i=e.text.replace(mt.lineBreakRegex," "),[,r]=Rr(e.fontSize),s=t.append("text");s.attr("x",e.x),s.attr("y",e.y),s.style("text-anchor",e.anchor),s.style("font-family",e.fontFamily),s.style("font-size",r),s.style("font-weight",e.fontWeight),s.attr("fill",e.fill),e.class!==void 0&&s.attr("class",e.class);const n=s.append("tspan");return n.attr("x",e.x+e.textMargin*2),n.attr("fill",e.fill),n.text(i),s},Ah=wo((t,e,i)=>{if(!t||(i=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},i),mt.lineBreakRegex.test(t)))return t;const r=t.split(" "),s=[];let n="";return r.forEach((a,o)=>{const l=vi(`${a} `,i),h=vi(n,i);if(l>e){const{hyphenatedStrings:d,remainingWord:g}=v2(a,e,"-",i);s.push(n,...d),n=g}else h+l>=e?(s.push(n),n=a):n=[n,a].filter(Boolean).join(" ");o+1===r.length&&s.push(n)}),s.filter(a=>a!=="").join(i.joinWith)},(t,e,i)=>`${t}${e}${i.fontSize}${i.fontWeight}${i.fontFamily}${i.joinWith}`),v2=wo((t,e,i="-",r)=>{r=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},r);const s=[...t],n=[];let a="";return s.forEach((o,l)=>{const h=`${a}${o}`;if(vi(h,r)>=e){const p=l+1,d=s.length===p,g=`${h}${i}`;n.push(d?h:g),a=""}else a=h}),{hyphenatedStrings:n,remainingWord:a}},(t,e,i="-",r)=>`${t}${e}${i}${r.fontSize}${r.fontWeight}${r.fontFamily}`);function Pa(t,e){return Io(t,e).height}function vi(t,e){return Io(t,e).width}const Io=wo((t,e)=>{const{fontSize:i=12,fontFamily:r="Arial",fontWeight:s=400}=e;if(!t)return{width:0,height:0};const[,n]=Rr(i),a=["sans-serif",r],o=t.split(mt.lineBreakRegex),l=[],h=yt("body");if(!h.remove)return{width:0,height:0,lineHeight:0};const u=h.append("svg");for(const d of a){let g=0;const y={width:0,height:0,lineHeight:0};for(const x of o){const _=E2();_.text=x||Ch;const v=S2(u,_).style("font-size",n).style("font-weight",s).style("font-family",d),E=(v._groups||v)[0][0].getBBox();if(E.width===0&&E.height===0)throw new Error("svg element not in render tree");y.width=Math.round(Math.max(y.width,E.width)),g=Math.round(E.height),y.height+=g,y.lineHeight=Math.round(Math.max(y.lineHeight,g))}l.push(y)}u.remove();const p=isNaN(l[1].height)||isNaN(l[1].width)||isNaN(l[1].lineHeight)||l[0].height>l[1].height&&l[0].width>l[1].width&&l[0].lineHeight>l[1].lineHeight?0:1;return l[p]},(t,e)=>`${t}${e.fontSize}${e.fontWeight}${e.fontFamily}`);class w2{constructor(e=!1,i){this.count=0,this.count=i?i.length:0,this.next=e?()=>this.count++:()=>Date.now()}}let an;const A2=function(t){return an=an||document.createElement("div"),t=escape(t).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),an.innerHTML=t,unescape(an.textContent)};function Lh(t){return"str"in t}const L2=(t,e,i,r)=>{var s;if(!r)return;const n=(s=t.node())==null?void 0:s.getBBox();n&&t.append("text").text(r).attr("x",n.x+n.width/2).attr("y",-i).attr("class",e)},Rr=t=>{if(typeof t=="number")return[t,t+"px"];const e=parseInt(t??"",10);return Number.isNaN(e)?[void 0,void 0]:t===String(e)?[e,t+"px"]:[e,t]};function Xs(t,e){return Of({},t,e)}const Rt={assignWithDepth:Ae,wrapLabel:Ah,calculateTextHeight:Pa,calculateTextWidth:vi,calculateTextDimensions:Io,cleanAndMerge:Xs,detectInit:p2,detectDirective:Eh,isSubstringInArray:y2,interpolateToCurve:di,calcLabelPosition:k2,calcCardinalityPosition:_2,calcTerminalLabelPosition:T2,formatUrl:m2,getStylesFromArray:ii,generateId:vh,random:wh,runFunc:x2,entityDecode:A2,insertTitle:L2,parseFontSize:Rr,InitIDGenerator:w2},B2=function(t){let e=t;return e=e.replace(/style.*:\S*#.*;/g,function(i){return i.substring(0,i.length-1)}),e=e.replace(/classDef.*:\S*#.*;/g,function(i){return i.substring(0,i.length-1)}),e=e.replace(/#\w+;/g,function(i){const r=i.substring(1,i.length-1);return/^\+?\d+$/.test(r)?"ﬂ°°"+r+"¶ß":"ﬂ°"+r+"¶ß"}),e},As=function(t){return t.replace(/ﬂ°°/g,"&#").replace(/ﬂ°/g,"&").replace(/¶ß/g,";")},$l="10.8.0",Zr=Object.freeze($t);let Xe=Ae({},Zr),Bh,Jr=[],ks=Ae({},Zr);const ia=(t,e)=>{let i=Ae({},t),r={};for(const s of e)Fh(s),r=Ae(r,s);if(i=Ae(i,r),r.theme&&r.theme in Qi){const s=Ae({},Bh),n=Ae(s.themeVariables||{},r.themeVariables);i.theme&&i.theme in Qi&&(i.themeVariables=Qi[i.theme].getThemeVariables(n))}return ks=i,Rh(ks),ks},I2=t=>(Xe=Ae({},Zr),Xe=Ae(Xe,t),t.theme&&Qi[t.theme]&&(Xe.themeVariables=Qi[t.theme].getThemeVariables(t.themeVariables)),ia(Xe,Jr),Xe),D2=t=>{Bh=Ae({},t)},F2=t=>(Xe=Ae(Xe,t),ia(Xe,Jr),Xe),Ih=()=>Ae({},Xe),Dh=t=>(Rh(t),Ae(ks,t),me()),me=()=>Ae({},ks),Fh=t=>{t&&(["secure",...Xe.secure??[]].forEach(e=>{Object.hasOwn(t,e)&&(I.debug(`Denied attempt to modify a secure key ${e}`,t[e]),delete t[e])}),Object.keys(t).forEach(e=>{e.startsWith("__")&&delete t[e]}),Object.keys(t).forEach(e=>{typeof t[e]=="string"&&(t[e].includes("<")||t[e].includes(">")||t[e].includes("url(data:"))&&delete t[e],typeof t[e]=="object"&&Fh(t[e])}))},R2=t=>{Tn(t),t.fontFamily&&(!t.themeVariables||!t.themeVariables.fontFamily)&&(t.themeVariables={fontFamily:t.fontFamily}),Jr.push(t),ia(Xe,Jr)},Cn=(t=Xe)=>{Jr=[],ia(t,Jr)},N2={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},Kl={},O2=t=>{Kl[t]||(I.warn(N2[t]),Kl[t]=!0)},Rh=t=>{t&&(t.lazyLoadedDiagrams||t.loadExternalDiagramsAtStartup)&&O2("LAZY_LOAD_DEPRECATED")},Nh="c4",P2=t=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(t),M2=async()=>{const{diagram:t}=await ae(()=>Promise.resolve().then(()=>rx),void 0,import.meta.url);return{id:Nh,diagram:t}},V2={id:Nh,detector:P2,loader:M2},z2=V2,Oh="flowchart",q2=(t,e)=>{var i,r;return((i=e==null?void 0:e.flowchart)==null?void 0:i.defaultRenderer)==="dagre-wrapper"||((r=e==null?void 0:e.flowchart)==null?void 0:r.defaultRenderer)==="elk"?!1:/^\s*graph/.test(t)},W2=async()=>{const{diagram:t}=await ae(()=>Promise.resolve().then(()=>Y4),void 0,import.meta.url);return{id:Oh,diagram:t}},Y2={id:Oh,detector:q2,loader:W2},U2=Y2,Ph="flowchart-v2",H2=(t,e)=>{var i,r,s;return((i=e==null?void 0:e.flowchart)==null?void 0:i.defaultRenderer)==="dagre-d3"||((r=e==null?void 0:e.flowchart)==null?void 0:r.defaultRenderer)==="elk"?!1:/^\s*graph/.test(t)&&((s=e==null?void 0:e.flowchart)==null?void 0:s.defaultRenderer)==="dagre-wrapper"?!0:/^\s*flowchart/.test(t)},G2=async()=>{const{diagram:t}=await ae(()=>Promise.resolve().then(()=>H4),void 0,import.meta.url);return{id:Ph,diagram:t}},j2={id:Ph,detector:H2,loader:G2},X2=j2,Mh="er",$2=t=>/^\s*erDiagram/.test(t),K2=async()=>{const{diagram:t}=await ae(()=>Promise.resolve().then(()=>yb),void 0,import.meta.url);return{id:Mh,diagram:t}},Q2={id:Mh,detector:$2,loader:K2},Z2=Q2,Vh="gitGraph",J2=t=>/^\s*gitGraph/.test(t),tp=async()=>{const{diagram:t}=await ae(()=>Promise.resolve().then(()=>jb),void 0,import.meta.url);return{id:Vh,diagram:t}},ep={id:Vh,detector:J2,loader:tp},ip=ep,zh="gantt",rp=t=>/^\s*gantt/.test(t),sp=async()=>{const{diagram:t}=await ae(()=>Promise.resolve().then(()=>P5),void 0,import.meta.url);return{id:zh,diagram:t}},np={id:zh,detector:rp,loader:sp},ap=np,qh="info",op=t=>/^\s*info/.test(t),lp=async()=>{const{diagram:t}=await ae(()=>Promise.resolve().then(()=>G5),void 0,import.meta.url);return{id:qh,diagram:t}},cp={id:qh,detector:op,loader:lp},Wh="pie",hp=t=>/^\s*pie/.test(t),up=async()=>{const{diagram:t}=await ae(()=>Promise.resolve().then(()=>ck),void 0,import.meta.url);return{id:Wh,diagram:t}},dp={id:Wh,detector:hp,loader:up},Yh="quadrantChart",fp=t=>/^\s*quadrantChart/.test(t),pp=async()=>{const{diagram:t}=await ae(()=>Promise.resolve().then(()=>Bk),void 0,import.meta.url);return{id:Yh,diagram:t}},gp={id:Yh,detector:fp,loader:pp},yp=gp,Uh="xychart",mp=t=>/^\s*xychart-beta/.test(t),xp=async()=>{const{diagram:t}=await ae(()=>Promise.resolve().then(()=>n6),void 0,import.meta.url);return{id:Uh,diagram:t}},bp={id:Uh,detector:mp,loader:xp},kp=bp,Hh="requirement",_p=t=>/^\s*requirement(Diagram)?/.test(t),Tp=async()=>{const{diagram:t}=await ae(()=>Promise.resolve().then(()=>P6),void 0,import.meta.url);return{id:Hh,diagram:t}},Cp={id:Hh,detector:_p,loader:Tp},Ep=Cp,Gh="sequence",Sp=t=>/^\s*sequenceDiagram/.test(t),vp=async()=>{const{diagram:t}=await ae(()=>Promise.resolve().then(()=>Y_),void 0,import.meta.url);return{id:Gh,diagram:t}},wp={id:Gh,detector:Sp,loader:vp},Ap=wp,jh="class",Lp=(t,e)=>{var i;return((i=e==null?void 0:e.class)==null?void 0:i.defaultRenderer)==="dagre-wrapper"?!1:/^\s*classDiagram/.test(t)},Bp=async()=>{const{diagram:t}=await ae(()=>Promise.resolve().then(()=>E7),void 0,import.meta.url);return{id:jh,diagram:t}},Ip={id:jh,detector:Lp,loader:Bp},Dp=Ip,Xh="classDiagram",Fp=(t,e)=>{var i;return/^\s*classDiagram/.test(t)&&((i=e==null?void 0:e.class)==null?void 0:i.defaultRenderer)==="dagre-wrapper"?!0:/^\s*classDiagram-v2/.test(t)},Rp=async()=>{const{diagram:t}=await ae(()=>Promise.resolve().then(()=>D7),void 0,import.meta.url);return{id:Xh,diagram:t}},Np={id:Xh,detector:Fp,loader:Rp},Op=Np,$h="state",Pp=(t,e)=>{var i;return((i=e==null?void 0:e.state)==null?void 0:i.defaultRenderer)==="dagre-wrapper"?!1:/^\s*stateDiagram/.test(t)},Mp=async()=>{const{diagram:t}=await ae(()=>Promise.resolve().then(()=>TT),void 0,import.meta.url);return{id:$h,diagram:t}},Vp={id:$h,detector:Pp,loader:Mp},zp=Vp,Kh="stateDiagram",qp=(t,e)=>{var i;return!!(/^\s*stateDiagram-v2/.test(t)||/^\s*stateDiagram/.test(t)&&((i=e==null?void 0:e.state)==null?void 0:i.defaultRenderer)==="dagre-wrapper")},Wp=async()=>{const{diagram:t}=await ae(()=>Promise.resolve().then(()=>XT),void 0,import.meta.url);return{id:Kh,diagram:t}},Yp={id:Kh,detector:qp,loader:Wp},Up=Yp,Qh="journey",Hp=t=>/^\s*journey/.test(t),Gp=async()=>{const{diagram:t}=await ae(()=>Promise.resolve().then(()=>m8),void 0,import.meta.url);return{id:Qh,diagram:t}},jp={id:Qh,detector:Hp,loader:Gp},Xp=jp,$p=function(t,e){for(let i of e)t.attr(i[0],i[1])},Kp=function(t,e,i){let r=new Map;return i?(r.set("width","100%"),r.set("style",`max-width: ${e}px;`)):(r.set("height",t),r.set("width",e)),r},Ne=function(t,e,i,r){const s=Kp(e,i,r);$p(t,s)},gr=function(t,e,i,r){const s=e.node().getBBox(),n=s.width,a=s.height;I.info(`SVG bounds: ${n}x${a}`,s);let o=0,l=0;I.info(`Graph bounds: ${o}x${l}`,t),o=n+i*2,l=a+i*2,I.info(`Calculated bounds: ${o}x${l}`),Ne(e,l,o,r);const h=`${s.x-i} ${s.y-i} ${s.width+2*i} ${s.height+2*i}`;e.attr("viewBox",h)},fn={},Qp=(t,e,i)=>{let r="";return t in fn&&fn[t]?r=fn[t](i):I.warn(`No theme found for ${t}`),` & {
    font-family: ${i.fontFamily};
    font-size: ${i.fontSize};
    fill: ${i.textColor}
  }

  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${i.errorBkgColor};
  }
  & .error-text {
    fill: ${i.errorTextColor};
    stroke: ${i.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 2px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }

  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${i.lineColor};
    stroke: ${i.lineColor};
  }
  & .marker.cross {
    stroke: ${i.lineColor};
  }

  & svg {
    font-family: ${i.fontFamily};
    font-size: ${i.fontSize};
  }

  ${r}

  ${e}
`},Zp=(t,e)=>{e!==void 0&&(fn[t]=e)},Jp=Qp;let Do="",Fo="",Ro="";const No=t=>ue(t,me()),Oe=()=>{Do="",Ro="",Fo=""},Pe=t=>{Do=No(t).replace(/^\s+/g,"")},Ye=()=>Do,Ue=t=>{Ro=No(t).replace(/\n\s+/g,`
`)},He=()=>Ro,ri=t=>{Fo=No(t)},Ge=()=>Fo,Zh=Object.freeze(Object.defineProperty({__proto__:null,clear:Oe,getAccDescription:He,getAccTitle:Ye,getDiagramTitle:Ge,setAccDescription:Ue,setAccTitle:Pe,setDiagramTitle:ri},Symbol.toStringTag,{value:"Module"})),tg=I,eg=Ao,Y=me,ig=Dh,Jh=Zr,rg=t=>ue(t,Y()),t1=gr,sg=()=>Zh,En={},Sn=(t,e,i)=>{var r;if(En[t])throw new Error(`Diagram ${t} already registered.`);En[t]=e,i&&Th(t,i),Zp(t,e.styles),(r=e.injectUtils)==null||r.call(e,tg,eg,Y,rg,t1,sg(),()=>{})},Oo=t=>{if(t in En)return En[t];throw new ng(t)};class ng extends Error{constructor(e){super(`Diagram ${e} not found.`)}}const $s=t=>{var e;const{securityLevel:i}=Y();let r=yt("body");if(i==="sandbox"){const a=((e=yt(`#i${t}`).node())==null?void 0:e.contentDocument)??document;r=yt(a.body)}return r.select(`#${t}`)},ag=(t,e,i)=>{I.debug(`rendering svg for syntax error
`);const r=$s(e);r.attr("viewBox","0 0 2412 512"),Ne(r,100,512,!0);const s=r.append("g");s.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),s.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),s.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),s.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),s.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),s.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),s.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),s.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${i}`)},e1={draw:ag},og=e1,lg={db:{},renderer:e1,parser:{parser:{yy:{}},parse:()=>{}}},cg=lg,i1="flowchart-elk",hg=(t,e)=>{var i;return!!(/^\s*flowchart-elk/.test(t)||/^\s*flowchart|graph/.test(t)&&((i=e==null?void 0:e.flowchart)==null?void 0:i.defaultRenderer)==="elk")},ug=async()=>{const{diagram:t}=await ae(()=>Promise.resolve().then(()=>R8),void 0,import.meta.url);return{id:i1,diagram:t}},dg={id:i1,detector:hg,loader:ug},fg=dg,r1="timeline",pg=t=>/^\s*timeline/.test(t),gg=async()=>{const{diagram:t}=await ae(()=>Promise.resolve().then(()=>rC),void 0,import.meta.url);return{id:r1,diagram:t}},yg={id:r1,detector:pg,loader:gg},mg=yg,s1="mindmap",xg=t=>/^\s*mindmap/.test(t),bg=async()=>{const{diagram:t}=await ae(()=>Promise.resolve().then(()=>PC),void 0,import.meta.url);return{id:s1,diagram:t}},kg={id:s1,detector:xg,loader:bg},_g=kg,n1="sankey",Tg=t=>/^\s*sankey-beta/.test(t),Cg=async()=>{const{diagram:t}=await ae(()=>Promise.resolve().then(()=>JC),void 0,import.meta.url);return{id:n1,diagram:t}},Eg={id:n1,detector:Tg,loader:Cg},Sg=Eg,a1="block",vg=t=>/^\s*block-beta/.test(t),wg=async()=>{const{diagram:t}=await ae(()=>Promise.resolve().then(()=>NE),void 0,import.meta.url);return{id:a1,diagram:t}},Ag={id:a1,detector:vg,loader:wg},Lg=Ag;let Ql=!1;const Po=()=>{Ql||(Ql=!0,Sn("error",cg,t=>t.toLowerCase().trim()==="error"),Sn("---",{db:{clear:()=>{}},styles:{},renderer:{draw:()=>{}},parser:{parser:{yy:{}},parse:()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")}},init:()=>null},t=>t.toLowerCase().trimStart().startsWith("---")),_h(z2,Op,Dp,Z2,ap,cp,dp,Ep,Ap,fg,X2,U2,_g,mg,ip,Up,zp,Xp,yp,Sg,kp,Lg))};class o1{constructor(e,i={}){this.text=e,this.metadata=i,this.type="graph",this.text=B2(e),this.text+=`
`;const r=me();try{this.type=ea(e,r)}catch(n){this.type="error",this.detectError=n}const s=Oo(this.type);I.debug("Type "+this.type),this.db=s.db,this.renderer=s.renderer,this.parser=s.parser,this.parser.parser.yy=this.db,this.init=s.init,this.parse()}parse(){var e,i,r,s,n;if(this.detectError)throw this.detectError;(i=(e=this.db).clear)==null||i.call(e);const a=me();(r=this.init)==null||r.call(this,a),this.metadata.title&&((n=(s=this.db).setDiagramTitle)==null||n.call(s,this.metadata.title)),this.parser.parse(this.text)}async render(e,i){await this.renderer.draw(this.text,e,i,this)}getParser(){return this.parser}getType(){return this.type}}const Bg=async(t,e={})=>{const i=ea(t,me());try{Oo(i)}catch{const s=u2(i);if(!s)throw new kh(`Diagram ${i} not found.`);const{id:n,diagram:a}=await s();Sn(n,a)}return new o1(t,e)};let Zl=[];const Ig=()=>{Zl.forEach(t=>{t()}),Zl=[]},Dg="graphics-document document";function Fg(t,e){t.attr("role",Dg),e!==""&&t.attr("aria-roledescription",e)}function Rg(t,e,i,r){if(t.insert!==void 0){if(i){const s=`chart-desc-${r}`;t.attr("aria-describedby",s),t.insert("desc",":first-child").attr("id",s).text(i)}if(e){const s=`chart-title-${r}`;t.attr("aria-labelledby",s),t.insert("title",":first-child").attr("id",s).text(e)}}}const Ng=t=>t.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart();/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function l1(t){return typeof t>"u"||t===null}function Og(t){return typeof t=="object"&&t!==null}function Pg(t){return Array.isArray(t)?t:l1(t)?[]:[t]}function Mg(t,e){var i,r,s,n;if(e)for(n=Object.keys(e),i=0,r=n.length;i<r;i+=1)s=n[i],t[s]=e[s];return t}function Vg(t,e){var i="",r;for(r=0;r<e;r+=1)i+=t;return i}function zg(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var qg=l1,Wg=Og,Yg=Pg,Ug=Vg,Hg=zg,Gg=Mg,Ve={isNothing:qg,isObject:Wg,toArray:Yg,repeat:Ug,isNegativeZero:Hg,extend:Gg};function c1(t,e){var i="",r=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(i+='in "'+t.mark.name+'" '),i+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(i+=`

`+t.mark.snippet),r+" "+i):r}function Ls(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=c1(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Ls.prototype=Object.create(Error.prototype);Ls.prototype.constructor=Ls;Ls.prototype.toString=function(e){return this.name+": "+c1(this,e)};var Hi=Ls;function va(t,e,i,r,s){var n="",a="",o=Math.floor(s/2)-1;return r-e>o&&(n=" ... ",e=r-o+n.length),i-r>o&&(a=" ...",i=r+o-a.length),{str:n+t.slice(e,i).replace(/\t/g,"→")+a,pos:r-e+n.length}}function wa(t,e){return Ve.repeat(" ",e-t.length)+t}function jg(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var i=/\r?\n|\r|\0/g,r=[0],s=[],n,a=-1;n=i.exec(t.buffer);)s.push(n.index),r.push(n.index+n[0].length),t.position<=n.index&&a<0&&(a=r.length-2);a<0&&(a=r.length-1);var o="",l,h,u=Math.min(t.line+e.linesAfter,s.length).toString().length,p=e.maxLength-(e.indent+u+3);for(l=1;l<=e.linesBefore&&!(a-l<0);l++)h=va(t.buffer,r[a-l],s[a-l],t.position-(r[a]-r[a-l]),p),o=Ve.repeat(" ",e.indent)+wa((t.line-l+1).toString(),u)+" | "+h.str+`
`+o;for(h=va(t.buffer,r[a],s[a],t.position,p),o+=Ve.repeat(" ",e.indent)+wa((t.line+1).toString(),u)+" | "+h.str+`
`,o+=Ve.repeat("-",e.indent+u+3+h.pos)+`^
`,l=1;l<=e.linesAfter&&!(a+l>=s.length);l++)h=va(t.buffer,r[a+l],s[a+l],t.position-(r[a]-r[a+l]),p),o+=Ve.repeat(" ",e.indent)+wa((t.line+l+1).toString(),u)+" | "+h.str+`
`;return o.replace(/\n$/,"")}var Xg=jg,$g=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Kg=["scalar","sequence","mapping"];function Qg(t){var e={};return t!==null&&Object.keys(t).forEach(function(i){t[i].forEach(function(r){e[String(r)]=i})}),e}function Zg(t,e){if(e=e||{},Object.keys(e).forEach(function(i){if($g.indexOf(i)===-1)throw new Hi('Unknown option "'+i+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(i){return i},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=Qg(e.styleAliases||null),Kg.indexOf(this.kind)===-1)throw new Hi('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var Re=Zg;function Jl(t,e){var i=[];return t[e].forEach(function(r){var s=i.length;i.forEach(function(n,a){n.tag===r.tag&&n.kind===r.kind&&n.multi===r.multi&&(s=a)}),i[s]=r}),i}function Jg(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,i;function r(s){s.multi?(t.multi[s.kind].push(s),t.multi.fallback.push(s)):t[s.kind][s.tag]=t.fallback[s.tag]=s}for(e=0,i=arguments.length;e<i;e+=1)arguments[e].forEach(r);return t}function Ma(t){return this.extend(t)}Ma.prototype.extend=function(e){var i=[],r=[];if(e instanceof Re)r.push(e);else if(Array.isArray(e))r=r.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(i=i.concat(e.implicit)),e.explicit&&(r=r.concat(e.explicit));else throw new Hi("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");i.forEach(function(n){if(!(n instanceof Re))throw new Hi("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(n.loadKind&&n.loadKind!=="scalar")throw new Hi("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(n.multi)throw new Hi("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(n){if(!(n instanceof Re))throw new Hi("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var s=Object.create(Ma.prototype);return s.implicit=(this.implicit||[]).concat(i),s.explicit=(this.explicit||[]).concat(r),s.compiledImplicit=Jl(s,"implicit"),s.compiledExplicit=Jl(s,"explicit"),s.compiledTypeMap=Jg(s.compiledImplicit,s.compiledExplicit),s};var ty=Ma,ey=new Re("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),iy=new Re("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),ry=new Re("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),sy=new ty({explicit:[ey,iy,ry]});function ny(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function ay(){return null}function oy(t){return t===null}var ly=new Re("tag:yaml.org,2002:null",{kind:"scalar",resolve:ny,construct:ay,predicate:oy,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function cy(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function hy(t){return t==="true"||t==="True"||t==="TRUE"}function uy(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var dy=new Re("tag:yaml.org,2002:bool",{kind:"scalar",resolve:cy,construct:hy,predicate:uy,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function fy(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function py(t){return 48<=t&&t<=55}function gy(t){return 48<=t&&t<=57}function yy(t){if(t===null)return!1;var e=t.length,i=0,r=!1,s;if(!e)return!1;if(s=t[i],(s==="-"||s==="+")&&(s=t[++i]),s==="0"){if(i+1===e)return!0;if(s=t[++i],s==="b"){for(i++;i<e;i++)if(s=t[i],s!=="_"){if(s!=="0"&&s!=="1")return!1;r=!0}return r&&s!=="_"}if(s==="x"){for(i++;i<e;i++)if(s=t[i],s!=="_"){if(!fy(t.charCodeAt(i)))return!1;r=!0}return r&&s!=="_"}if(s==="o"){for(i++;i<e;i++)if(s=t[i],s!=="_"){if(!py(t.charCodeAt(i)))return!1;r=!0}return r&&s!=="_"}}if(s==="_")return!1;for(;i<e;i++)if(s=t[i],s!=="_"){if(!gy(t.charCodeAt(i)))return!1;r=!0}return!(!r||s==="_")}function my(t){var e=t,i=1,r;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),r=e[0],(r==="-"||r==="+")&&(r==="-"&&(i=-1),e=e.slice(1),r=e[0]),e==="0")return 0;if(r==="0"){if(e[1]==="b")return i*parseInt(e.slice(2),2);if(e[1]==="x")return i*parseInt(e.slice(2),16);if(e[1]==="o")return i*parseInt(e.slice(2),8)}return i*parseInt(e,10)}function xy(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Ve.isNegativeZero(t)}var by=new Re("tag:yaml.org,2002:int",{kind:"scalar",resolve:yy,construct:my,predicate:xy,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),ky=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function _y(t){return!(t===null||!ky.test(t)||t[t.length-1]==="_")}function Ty(t){var e,i;return e=t.replace(/_/g,"").toLowerCase(),i=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?i===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:i*parseFloat(e,10)}var Cy=/^[-+]?[0-9]+e/;function Ey(t,e){var i;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Ve.isNegativeZero(t))return"-0.0";return i=t.toString(10),Cy.test(i)?i.replace("e",".e"):i}function Sy(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Ve.isNegativeZero(t))}var vy=new Re("tag:yaml.org,2002:float",{kind:"scalar",resolve:_y,construct:Ty,predicate:Sy,represent:Ey,defaultStyle:"lowercase"}),h1=sy.extend({implicit:[ly,dy,by,vy]}),wy=h1,u1=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),d1=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Ay(t){return t===null?!1:u1.exec(t)!==null||d1.exec(t)!==null}function Ly(t){var e,i,r,s,n,a,o,l=0,h=null,u,p,d;if(e=u1.exec(t),e===null&&(e=d1.exec(t)),e===null)throw new Error("Date resolve error");if(i=+e[1],r=+e[2]-1,s=+e[3],!e[4])return new Date(Date.UTC(i,r,s));if(n=+e[4],a=+e[5],o=+e[6],e[7]){for(l=e[7].slice(0,3);l.length<3;)l+="0";l=+l}return e[9]&&(u=+e[10],p=+(e[11]||0),h=(u*60+p)*6e4,e[9]==="-"&&(h=-h)),d=new Date(Date.UTC(i,r,s,n,a,o,l)),h&&d.setTime(d.getTime()-h),d}function By(t){return t.toISOString()}var Iy=new Re("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Ay,construct:Ly,instanceOf:Date,represent:By});function Dy(t){return t==="<<"||t===null}var Fy=new Re("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Dy}),Mo=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Ry(t){if(t===null)return!1;var e,i,r=0,s=t.length,n=Mo;for(i=0;i<s;i++)if(e=n.indexOf(t.charAt(i)),!(e>64)){if(e<0)return!1;r+=6}return r%8===0}function Ny(t){var e,i,r=t.replace(/[\r\n=]/g,""),s=r.length,n=Mo,a=0,o=[];for(e=0;e<s;e++)e%4===0&&e&&(o.push(a>>16&255),o.push(a>>8&255),o.push(a&255)),a=a<<6|n.indexOf(r.charAt(e));return i=s%4*6,i===0?(o.push(a>>16&255),o.push(a>>8&255),o.push(a&255)):i===18?(o.push(a>>10&255),o.push(a>>2&255)):i===12&&o.push(a>>4&255),new Uint8Array(o)}function Oy(t){var e="",i=0,r,s,n=t.length,a=Mo;for(r=0;r<n;r++)r%3===0&&r&&(e+=a[i>>18&63],e+=a[i>>12&63],e+=a[i>>6&63],e+=a[i&63]),i=(i<<8)+t[r];return s=n%3,s===0?(e+=a[i>>18&63],e+=a[i>>12&63],e+=a[i>>6&63],e+=a[i&63]):s===2?(e+=a[i>>10&63],e+=a[i>>4&63],e+=a[i<<2&63],e+=a[64]):s===1&&(e+=a[i>>2&63],e+=a[i<<4&63],e+=a[64],e+=a[64]),e}function Py(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var My=new Re("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Ry,construct:Ny,predicate:Py,represent:Oy}),Vy=Object.prototype.hasOwnProperty,zy=Object.prototype.toString;function qy(t){if(t===null)return!0;var e=[],i,r,s,n,a,o=t;for(i=0,r=o.length;i<r;i+=1){if(s=o[i],a=!1,zy.call(s)!=="[object Object]")return!1;for(n in s)if(Vy.call(s,n))if(!a)a=!0;else return!1;if(!a)return!1;if(e.indexOf(n)===-1)e.push(n);else return!1}return!0}function Wy(t){return t!==null?t:[]}var Yy=new Re("tag:yaml.org,2002:omap",{kind:"sequence",resolve:qy,construct:Wy}),Uy=Object.prototype.toString;function Hy(t){if(t===null)return!0;var e,i,r,s,n,a=t;for(n=new Array(a.length),e=0,i=a.length;e<i;e+=1){if(r=a[e],Uy.call(r)!=="[object Object]"||(s=Object.keys(r),s.length!==1))return!1;n[e]=[s[0],r[s[0]]]}return!0}function Gy(t){if(t===null)return[];var e,i,r,s,n,a=t;for(n=new Array(a.length),e=0,i=a.length;e<i;e+=1)r=a[e],s=Object.keys(r),n[e]=[s[0],r[s[0]]];return n}var jy=new Re("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Hy,construct:Gy}),Xy=Object.prototype.hasOwnProperty;function $y(t){if(t===null)return!0;var e,i=t;for(e in i)if(Xy.call(i,e)&&i[e]!==null)return!1;return!0}function Ky(t){return t!==null?t:{}}var Qy=new Re("tag:yaml.org,2002:set",{kind:"mapping",resolve:$y,construct:Ky}),Zy=wy.extend({implicit:[Iy,Fy],explicit:[My,Yy,jy,Qy]}),fr=Object.prototype.hasOwnProperty,vn=1,f1=2,p1=3,wn=4,Aa=1,Jy=2,tc=3,t3=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,e3=/[\x85\u2028\u2029]/,i3=/[,\[\]\{\}]/,g1=/^(?:!|!!|![a-z\-]+!)$/i,y1=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function ec(t){return Object.prototype.toString.call(t)}function wi(t){return t===10||t===13}function Cr(t){return t===9||t===32}function Ze(t){return t===9||t===32||t===10||t===13}function qr(t){return t===44||t===91||t===93||t===123||t===125}function r3(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function s3(t){return t===120?2:t===117?4:t===85?8:0}function n3(t){return 48<=t&&t<=57?t-48:-1}function ic(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"":t===95?" ":t===76?"\u2028":t===80?"\u2029":""}function a3(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var m1=new Array(256),x1=new Array(256);for(var Vr=0;Vr<256;Vr++)m1[Vr]=ic(Vr)?1:0,x1[Vr]=ic(Vr);function o3(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||Zy,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function b1(t,e){var i={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return i.snippet=Xg(i),new Hi(e,i)}function vt(t,e){throw b1(t,e)}function An(t,e){t.onWarning&&t.onWarning.call(null,b1(t,e))}var rc={YAML:function(e,i,r){var s,n,a;e.version!==null&&vt(e,"duplication of %YAML directive"),r.length!==1&&vt(e,"YAML directive accepts exactly one argument"),s=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),s===null&&vt(e,"ill-formed argument of the YAML directive"),n=parseInt(s[1],10),a=parseInt(s[2],10),n!==1&&vt(e,"unacceptable YAML version of the document"),e.version=r[0],e.checkLineBreaks=a<2,a!==1&&a!==2&&An(e,"unsupported YAML version of the document")},TAG:function(e,i,r){var s,n;r.length!==2&&vt(e,"TAG directive accepts exactly two arguments"),s=r[0],n=r[1],g1.test(s)||vt(e,"ill-formed tag handle (first argument) of the TAG directive"),fr.call(e.tagMap,s)&&vt(e,'there is a previously declared suffix for "'+s+'" tag handle'),y1.test(n)||vt(e,"ill-formed tag prefix (second argument) of the TAG directive");try{n=decodeURIComponent(n)}catch{vt(e,"tag prefix is malformed: "+n)}e.tagMap[s]=n}};function cr(t,e,i,r){var s,n,a,o;if(e<i){if(o=t.input.slice(e,i),r)for(s=0,n=o.length;s<n;s+=1)a=o.charCodeAt(s),a===9||32<=a&&a<=1114111||vt(t,"expected valid JSON character");else t3.test(o)&&vt(t,"the stream contains non-printable characters");t.result+=o}}function sc(t,e,i,r){var s,n,a,o;for(Ve.isObject(i)||vt(t,"cannot merge mappings; the provided source object is unacceptable"),s=Object.keys(i),a=0,o=s.length;a<o;a+=1)n=s[a],fr.call(e,n)||(e[n]=i[n],r[n]=!0)}function Wr(t,e,i,r,s,n,a,o,l){var h,u;if(Array.isArray(s))for(s=Array.prototype.slice.call(s),h=0,u=s.length;h<u;h+=1)Array.isArray(s[h])&&vt(t,"nested arrays are not supported inside keys"),typeof s=="object"&&ec(s[h])==="[object Object]"&&(s[h]="[object Object]");if(typeof s=="object"&&ec(s)==="[object Object]"&&(s="[object Object]"),s=String(s),e===null&&(e={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(n))for(h=0,u=n.length;h<u;h+=1)sc(t,e,n[h],i);else sc(t,e,n,i);else!t.json&&!fr.call(i,s)&&fr.call(e,s)&&(t.line=a||t.line,t.lineStart=o||t.lineStart,t.position=l||t.position,vt(t,"duplicated mapping key")),s==="__proto__"?Object.defineProperty(e,s,{configurable:!0,enumerable:!0,writable:!0,value:n}):e[s]=n,delete i[s];return e}function Vo(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):vt(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function ye(t,e,i){for(var r=0,s=t.input.charCodeAt(t.position);s!==0;){for(;Cr(s);)s===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),s=t.input.charCodeAt(++t.position);if(e&&s===35)do s=t.input.charCodeAt(++t.position);while(s!==10&&s!==13&&s!==0);if(wi(s))for(Vo(t),s=t.input.charCodeAt(t.position),r++,t.lineIndent=0;s===32;)t.lineIndent++,s=t.input.charCodeAt(++t.position);else break}return i!==-1&&r!==0&&t.lineIndent<i&&An(t,"deficient indentation"),r}function ra(t){var e=t.position,i;return i=t.input.charCodeAt(e),!!((i===45||i===46)&&i===t.input.charCodeAt(e+1)&&i===t.input.charCodeAt(e+2)&&(e+=3,i=t.input.charCodeAt(e),i===0||Ze(i)))}function zo(t,e){e===1?t.result+=" ":e>1&&(t.result+=Ve.repeat(`
`,e-1))}function l3(t,e,i){var r,s,n,a,o,l,h,u,p=t.kind,d=t.result,g;if(g=t.input.charCodeAt(t.position),Ze(g)||qr(g)||g===35||g===38||g===42||g===33||g===124||g===62||g===39||g===34||g===37||g===64||g===96||(g===63||g===45)&&(s=t.input.charCodeAt(t.position+1),Ze(s)||i&&qr(s)))return!1;for(t.kind="scalar",t.result="",n=a=t.position,o=!1;g!==0;){if(g===58){if(s=t.input.charCodeAt(t.position+1),Ze(s)||i&&qr(s))break}else if(g===35){if(r=t.input.charCodeAt(t.position-1),Ze(r))break}else{if(t.position===t.lineStart&&ra(t)||i&&qr(g))break;if(wi(g))if(l=t.line,h=t.lineStart,u=t.lineIndent,ye(t,!1,-1),t.lineIndent>=e){o=!0,g=t.input.charCodeAt(t.position);continue}else{t.position=a,t.line=l,t.lineStart=h,t.lineIndent=u;break}}o&&(cr(t,n,a,!1),zo(t,t.line-l),n=a=t.position,o=!1),Cr(g)||(a=t.position+1),g=t.input.charCodeAt(++t.position)}return cr(t,n,a,!1),t.result?!0:(t.kind=p,t.result=d,!1)}function c3(t,e){var i,r,s;if(i=t.input.charCodeAt(t.position),i!==39)return!1;for(t.kind="scalar",t.result="",t.position++,r=s=t.position;(i=t.input.charCodeAt(t.position))!==0;)if(i===39)if(cr(t,r,t.position,!0),i=t.input.charCodeAt(++t.position),i===39)r=t.position,t.position++,s=t.position;else return!0;else wi(i)?(cr(t,r,s,!0),zo(t,ye(t,!1,e)),r=s=t.position):t.position===t.lineStart&&ra(t)?vt(t,"unexpected end of the document within a single quoted scalar"):(t.position++,s=t.position);vt(t,"unexpected end of the stream within a single quoted scalar")}function h3(t,e){var i,r,s,n,a,o;if(o=t.input.charCodeAt(t.position),o!==34)return!1;for(t.kind="scalar",t.result="",t.position++,i=r=t.position;(o=t.input.charCodeAt(t.position))!==0;){if(o===34)return cr(t,i,t.position,!0),t.position++,!0;if(o===92){if(cr(t,i,t.position,!0),o=t.input.charCodeAt(++t.position),wi(o))ye(t,!1,e);else if(o<256&&m1[o])t.result+=x1[o],t.position++;else if((a=s3(o))>0){for(s=a,n=0;s>0;s--)o=t.input.charCodeAt(++t.position),(a=r3(o))>=0?n=(n<<4)+a:vt(t,"expected hexadecimal character");t.result+=a3(n),t.position++}else vt(t,"unknown escape sequence");i=r=t.position}else wi(o)?(cr(t,i,r,!0),zo(t,ye(t,!1,e)),i=r=t.position):t.position===t.lineStart&&ra(t)?vt(t,"unexpected end of the document within a double quoted scalar"):(t.position++,r=t.position)}vt(t,"unexpected end of the stream within a double quoted scalar")}function u3(t,e){var i=!0,r,s,n,a=t.tag,o,l=t.anchor,h,u,p,d,g,y=Object.create(null),x,_,v,E;if(E=t.input.charCodeAt(t.position),E===91)u=93,g=!1,o=[];else if(E===123)u=125,g=!0,o={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),E=t.input.charCodeAt(++t.position);E!==0;){if(ye(t,!0,e),E=t.input.charCodeAt(t.position),E===u)return t.position++,t.tag=a,t.anchor=l,t.kind=g?"mapping":"sequence",t.result=o,!0;i?E===44&&vt(t,"expected the node content, but found ','"):vt(t,"missed comma between flow collection entries"),_=x=v=null,p=d=!1,E===63&&(h=t.input.charCodeAt(t.position+1),Ze(h)&&(p=d=!0,t.position++,ye(t,!0,e))),r=t.line,s=t.lineStart,n=t.position,ts(t,e,vn,!1,!0),_=t.tag,x=t.result,ye(t,!0,e),E=t.input.charCodeAt(t.position),(d||t.line===r)&&E===58&&(p=!0,E=t.input.charCodeAt(++t.position),ye(t,!0,e),ts(t,e,vn,!1,!0),v=t.result),g?Wr(t,o,y,_,x,v,r,s,n):p?o.push(Wr(t,null,y,_,x,v,r,s,n)):o.push(x),ye(t,!0,e),E=t.input.charCodeAt(t.position),E===44?(i=!0,E=t.input.charCodeAt(++t.position)):i=!1}vt(t,"unexpected end of the stream within a flow collection")}function d3(t,e){var i,r,s=Aa,n=!1,a=!1,o=e,l=0,h=!1,u,p;if(p=t.input.charCodeAt(t.position),p===124)r=!1;else if(p===62)r=!0;else return!1;for(t.kind="scalar",t.result="";p!==0;)if(p=t.input.charCodeAt(++t.position),p===43||p===45)Aa===s?s=p===43?tc:Jy:vt(t,"repeat of a chomping mode identifier");else if((u=n3(p))>=0)u===0?vt(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?vt(t,"repeat of an indentation width identifier"):(o=e+u-1,a=!0);else break;if(Cr(p)){do p=t.input.charCodeAt(++t.position);while(Cr(p));if(p===35)do p=t.input.charCodeAt(++t.position);while(!wi(p)&&p!==0)}for(;p!==0;){for(Vo(t),t.lineIndent=0,p=t.input.charCodeAt(t.position);(!a||t.lineIndent<o)&&p===32;)t.lineIndent++,p=t.input.charCodeAt(++t.position);if(!a&&t.lineIndent>o&&(o=t.lineIndent),wi(p)){l++;continue}if(t.lineIndent<o){s===tc?t.result+=Ve.repeat(`
`,n?1+l:l):s===Aa&&n&&(t.result+=`
`);break}for(r?Cr(p)?(h=!0,t.result+=Ve.repeat(`
`,n?1+l:l)):h?(h=!1,t.result+=Ve.repeat(`
`,l+1)):l===0?n&&(t.result+=" "):t.result+=Ve.repeat(`
`,l):t.result+=Ve.repeat(`
`,n?1+l:l),n=!0,a=!0,l=0,i=t.position;!wi(p)&&p!==0;)p=t.input.charCodeAt(++t.position);cr(t,i,t.position,!1)}return!0}function nc(t,e){var i,r=t.tag,s=t.anchor,n=[],a,o=!1,l;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=n),l=t.input.charCodeAt(t.position);l!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,vt(t,"tab characters must not be used in indentation")),!(l!==45||(a=t.input.charCodeAt(t.position+1),!Ze(a))));){if(o=!0,t.position++,ye(t,!0,-1)&&t.lineIndent<=e){n.push(null),l=t.input.charCodeAt(t.position);continue}if(i=t.line,ts(t,e,p1,!1,!0),n.push(t.result),ye(t,!0,-1),l=t.input.charCodeAt(t.position),(t.line===i||t.lineIndent>e)&&l!==0)vt(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return o?(t.tag=r,t.anchor=s,t.kind="sequence",t.result=n,!0):!1}function f3(t,e,i){var r,s,n,a,o,l,h=t.tag,u=t.anchor,p={},d=Object.create(null),g=null,y=null,x=null,_=!1,v=!1,E;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=p),E=t.input.charCodeAt(t.position);E!==0;){if(!_&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,vt(t,"tab characters must not be used in indentation")),r=t.input.charCodeAt(t.position+1),n=t.line,(E===63||E===58)&&Ze(r))E===63?(_&&(Wr(t,p,d,g,y,null,a,o,l),g=y=x=null),v=!0,_=!0,s=!0):_?(_=!1,s=!0):vt(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,E=r;else{if(a=t.line,o=t.lineStart,l=t.position,!ts(t,i,f1,!1,!0))break;if(t.line===n){for(E=t.input.charCodeAt(t.position);Cr(E);)E=t.input.charCodeAt(++t.position);if(E===58)E=t.input.charCodeAt(++t.position),Ze(E)||vt(t,"a whitespace character is expected after the key-value separator within a block mapping"),_&&(Wr(t,p,d,g,y,null,a,o,l),g=y=x=null),v=!0,_=!1,s=!1,g=t.tag,y=t.result;else if(v)vt(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=h,t.anchor=u,!0}else if(v)vt(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=h,t.anchor=u,!0}if((t.line===n||t.lineIndent>e)&&(_&&(a=t.line,o=t.lineStart,l=t.position),ts(t,e,wn,!0,s)&&(_?y=t.result:x=t.result),_||(Wr(t,p,d,g,y,x,a,o,l),g=y=x=null),ye(t,!0,-1),E=t.input.charCodeAt(t.position)),(t.line===n||t.lineIndent>e)&&E!==0)vt(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return _&&Wr(t,p,d,g,y,null,a,o,l),v&&(t.tag=h,t.anchor=u,t.kind="mapping",t.result=p),v}function p3(t){var e,i=!1,r=!1,s,n,a;if(a=t.input.charCodeAt(t.position),a!==33)return!1;if(t.tag!==null&&vt(t,"duplication of a tag property"),a=t.input.charCodeAt(++t.position),a===60?(i=!0,a=t.input.charCodeAt(++t.position)):a===33?(r=!0,s="!!",a=t.input.charCodeAt(++t.position)):s="!",e=t.position,i){do a=t.input.charCodeAt(++t.position);while(a!==0&&a!==62);t.position<t.length?(n=t.input.slice(e,t.position),a=t.input.charCodeAt(++t.position)):vt(t,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!Ze(a);)a===33&&(r?vt(t,"tag suffix cannot contain exclamation marks"):(s=t.input.slice(e-1,t.position+1),g1.test(s)||vt(t,"named tag handle cannot contain such characters"),r=!0,e=t.position+1)),a=t.input.charCodeAt(++t.position);n=t.input.slice(e,t.position),i3.test(n)&&vt(t,"tag suffix cannot contain flow indicator characters")}n&&!y1.test(n)&&vt(t,"tag name cannot contain such characters: "+n);try{n=decodeURIComponent(n)}catch{vt(t,"tag name is malformed: "+n)}return i?t.tag=n:fr.call(t.tagMap,s)?t.tag=t.tagMap[s]+n:s==="!"?t.tag="!"+n:s==="!!"?t.tag="tag:yaml.org,2002:"+n:vt(t,'undeclared tag handle "'+s+'"'),!0}function g3(t){var e,i;if(i=t.input.charCodeAt(t.position),i!==38)return!1;for(t.anchor!==null&&vt(t,"duplication of an anchor property"),i=t.input.charCodeAt(++t.position),e=t.position;i!==0&&!Ze(i)&&!qr(i);)i=t.input.charCodeAt(++t.position);return t.position===e&&vt(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function y3(t){var e,i,r;if(r=t.input.charCodeAt(t.position),r!==42)return!1;for(r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!Ze(r)&&!qr(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&vt(t,"name of an alias node must contain at least one character"),i=t.input.slice(e,t.position),fr.call(t.anchorMap,i)||vt(t,'unidentified alias "'+i+'"'),t.result=t.anchorMap[i],ye(t,!0,-1),!0}function ts(t,e,i,r,s){var n,a,o,l=1,h=!1,u=!1,p,d,g,y,x,_;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,n=a=o=wn===i||p1===i,r&&ye(t,!0,-1)&&(h=!0,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)),l===1)for(;p3(t)||g3(t);)ye(t,!0,-1)?(h=!0,o=n,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)):o=!1;if(o&&(o=h||s),(l===1||wn===i)&&(vn===i||f1===i?x=e:x=e+1,_=t.position-t.lineStart,l===1?o&&(nc(t,_)||f3(t,_,x))||u3(t,x)?u=!0:(a&&d3(t,x)||c3(t,x)||h3(t,x)?u=!0:y3(t)?(u=!0,(t.tag!==null||t.anchor!==null)&&vt(t,"alias node should not have any properties")):l3(t,x,vn===i)&&(u=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):l===0&&(u=o&&nc(t,_))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&vt(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),p=0,d=t.implicitTypes.length;p<d;p+=1)if(y=t.implicitTypes[p],y.resolve(t.result)){t.result=y.construct(t.result),t.tag=y.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(fr.call(t.typeMap[t.kind||"fallback"],t.tag))y=t.typeMap[t.kind||"fallback"][t.tag];else for(y=null,g=t.typeMap.multi[t.kind||"fallback"],p=0,d=g.length;p<d;p+=1)if(t.tag.slice(0,g[p].tag.length)===g[p].tag){y=g[p];break}y||vt(t,"unknown tag !<"+t.tag+">"),t.result!==null&&y.kind!==t.kind&&vt(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+y.kind+'", not "'+t.kind+'"'),y.resolve(t.result,t.tag)?(t.result=y.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):vt(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||u}function m3(t){var e=t.position,i,r,s,n=!1,a;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(a=t.input.charCodeAt(t.position))!==0&&(ye(t,!0,-1),a=t.input.charCodeAt(t.position),!(t.lineIndent>0||a!==37));){for(n=!0,a=t.input.charCodeAt(++t.position),i=t.position;a!==0&&!Ze(a);)a=t.input.charCodeAt(++t.position);for(r=t.input.slice(i,t.position),s=[],r.length<1&&vt(t,"directive name must not be less than one character in length");a!==0;){for(;Cr(a);)a=t.input.charCodeAt(++t.position);if(a===35){do a=t.input.charCodeAt(++t.position);while(a!==0&&!wi(a));break}if(wi(a))break;for(i=t.position;a!==0&&!Ze(a);)a=t.input.charCodeAt(++t.position);s.push(t.input.slice(i,t.position))}a!==0&&Vo(t),fr.call(rc,r)?rc[r](t,r,s):An(t,'unknown document directive "'+r+'"')}if(ye(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,ye(t,!0,-1)):n&&vt(t,"directives end mark is expected"),ts(t,t.lineIndent-1,wn,!1,!0),ye(t,!0,-1),t.checkLineBreaks&&e3.test(t.input.slice(e,t.position))&&An(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&ra(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,ye(t,!0,-1));return}if(t.position<t.length-1)vt(t,"end of the stream or a document separator is expected");else return}function k1(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var i=new o3(t,e),r=t.indexOf("\0");for(r!==-1&&(i.position=r,vt(i,"null byte is not allowed in input")),i.input+="\0";i.input.charCodeAt(i.position)===32;)i.lineIndent+=1,i.position+=1;for(;i.position<i.length-1;)m3(i);return i.documents}function x3(t,e,i){e!==null&&typeof e=="object"&&typeof i>"u"&&(i=e,e=null);var r=k1(t,i);if(typeof e!="function")return r;for(var s=0,n=r.length;s<n;s+=1)e(r[s])}function b3(t,e){var i=k1(t,e);if(i.length!==0){if(i.length===1)return i[0];throw new Hi("expected a single document in the stream, but found more")}}var k3=x3,_3=b3,T3={loadAll:k3,load:_3},C3=h1,E3=T3.load;function S3(t){const e=t.match(bh);if(!e)return{text:t,metadata:{}};let i=E3(e[1],{schema:C3})??{};i=typeof i=="object"&&!Array.isArray(i)?i:{};const r={};return i.displayMode&&(r.displayMode=i.displayMode.toString()),i.title&&(r.title=i.title.toString()),i.config&&(r.config=i.config),{text:t.slice(e[0].length),metadata:r}}const v3=t=>t.replace(/\r\n?/g,`
`).replace(/<(\w+)([^>]*)>/g,(e,i,r)=>"<"+i+r.replace(/="([^"]*)"/g,"='$1'")+">"),w3=t=>{const{text:e,metadata:i}=S3(t),{displayMode:r,title:s,config:n={}}=i;return r&&(n.gantt||(n.gantt={}),n.gantt.displayMode=r),{title:s,config:n,text:e}},A3=t=>{const e=Rt.detectInit(t)??{},i=Rt.detectDirective(t,"wrap");return Array.isArray(i)?e.wrap=i.some(({type:r})=>{}):(i==null?void 0:i.type)==="wrap"&&(e.wrap=!0),{text:g2(t),directive:e}};function _1(t){const e=v3(t),i=w3(e),r=A3(i.text),s=Xs(i.config,r.directive);return t=Ng(r.text),{code:t,title:i.title,config:s}}const L3=5e4,B3="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",I3="sandbox",D3="loose",F3="http://www.w3.org/2000/svg",R3="http://www.w3.org/1999/xlink",N3="http://www.w3.org/1999/xhtml",O3="100%",P3="100%",M3="border:0;margin:0;",V3="margin:0",z3="allow-top-navigation-by-user-activation allow-popups",q3='The "iframe" tag is not supported by your browser.',W3=["foreignobject"],Y3=["dominant-baseline"];function T1(t){const e=_1(t);return Cn(),R2(e.config??{}),e}async function U3(t,e){Po(),t=T1(t).code;try{await qo(t)}catch(i){if(e!=null&&e.suppressErrors)return!1;throw i}return!0}const ac=(t,e,i=[])=>`
.${t} ${e} { ${i.join(" !important; ")} !important; }`,H3=(t,e={})=>{var i;let r="";if(t.themeCSS!==void 0&&(r+=`
${t.themeCSS}`),t.fontFamily!==void 0&&(r+=`
:root { --mermaid-font-family: ${t.fontFamily}}`),t.altFontFamily!==void 0&&(r+=`
:root { --mermaid-alt-font-family: ${t.altFontFamily}}`),!Sa(e)){const o=t.htmlLabels||((i=t.flowchart)==null?void 0:i.htmlLabels)?["> *","span"]:["rect","polygon","ellipse","circle","path"];for(const l in e){const h=e[l];Sa(h.styles)||o.forEach(u=>{r+=ac(h.id,u,h.styles)}),Sa(h.textStyles)||(r+=ac(h.id,"tspan",h.textStyles))}}return r},G3=(t,e,i,r)=>{const s=H3(t,i),n=Jp(e,s,t.themeVariables);return Mf(zf(`${r}{${n}}`),Vf)},j3=(t="",e,i)=>{let r=t;return!i&&!e&&(r=r.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),r=As(r),r=r.replace(/<br>/g,"<br/>"),r},X3=(t="",e)=>{var i,r;const s=(r=(i=e==null?void 0:e.viewBox)==null?void 0:i.baseVal)!=null&&r.height?e.viewBox.baseVal.height+"px":P3,n=btoa('<body style="'+V3+'">'+t+"</body>");return`<iframe style="width:${O3};height:${s};${M3}" src="data:text/html;base64,${n}" sandbox="${z3}">
  ${q3}
</iframe>`},oc=(t,e,i,r,s)=>{const n=t.append("div");n.attr("id",i),r&&n.attr("style",r);const a=n.append("svg").attr("id",e).attr("width","100%").attr("xmlns",F3);return s&&a.attr("xmlns:xlink",s),a.append("g"),t};function lc(t,e){return t.append("iframe").attr("id",e).attr("style","width: 100%; height: 100%;").attr("sandbox","")}const $3=(t,e,i,r)=>{var s,n,a;(s=t.getElementById(e))==null||s.remove(),(n=t.getElementById(i))==null||n.remove(),(a=t.getElementById(r))==null||a.remove()},K3=async function(t,e,i){var r,s,n,a,o,l;Po();const h=T1(e);e=h.code;const u=me();I.debug(u),e.length>((u==null?void 0:u.maxTextSize)??L3)&&(e=B3);const p="#"+t,d="i"+t,g="#"+d,y="d"+t,x="#"+y;let _=yt("body");const v=u.securityLevel===I3,E=u.securityLevel===D3,F=u.fontFamily;if(i!==void 0){if(i&&(i.innerHTML=""),v){const D=lc(yt(i),d);_=yt(D.nodes()[0].contentDocument.body),_.node().style.margin=0}else _=yt(i);oc(_,t,y,`font-family: ${F}`,R3)}else{if($3(document,t,y,d),v){const D=lc(yt("body"),d);_=yt(D.nodes()[0].contentDocument.body),_.node().style.margin=0}else _=yt("body");oc(_,t,y)}let L,T;try{L=await qo(e,{title:h.title})}catch(D){L=new o1("error"),T=D}const k=_.select(x).node(),A=L.type,S=k.firstChild,m=S.firstChild,C=(s=(r=L.renderer).getClasses)==null?void 0:s.call(r,e,L),f=G3(u,A,C,p),B=document.createElement("style");B.innerHTML=f,S.insertBefore(B,m);try{await L.renderer.draw(e,t,$l,L)}catch(D){throw og.draw(e,t,$l),D}const b=_.select(`${x} svg`),P=(a=(n=L.db).getAccTitle)==null?void 0:a.call(n),U=(l=(o=L.db).getAccDescription)==null?void 0:l.call(o);Z3(A,b,P,U),_.select(`[id="${t}"]`).selectAll("foreignobject > *").attr("xmlns",N3);let N=_.select(x).node().innerHTML;if(I.debug("config.arrowMarkerAbsolute",u.arrowMarkerAbsolute),N=j3(N,v,Ce(u.arrowMarkerAbsolute)),v){const D=_.select(x+" svg").node();N=X3(N,D)}else E||(N=$r.sanitize(N,{ADD_TAGS:W3,ADD_ATTR:Y3}));if(Ig(),T)throw T;const R=yt(v?g:x).node();return R&&"remove"in R&&R.remove(),{svg:N,bindFunctions:L.db.bindFunctions}};function Q3(t={}){var e;t!=null&&t.fontFamily&&!((e=t.themeVariables)!=null&&e.fontFamily)&&(t.themeVariables||(t.themeVariables={}),t.themeVariables.fontFamily=t.fontFamily),D2(t),t!=null&&t.theme&&t.theme in Qi?t.themeVariables=Qi[t.theme].getThemeVariables(t.themeVariables):t&&(t.themeVariables=Qi.default.getThemeVariables(t.themeVariables));const i=typeof t=="object"?I2(t):Ih();Ao(i.logLevel),Po()}const qo=(t,e={})=>{const{code:i}=_1(t);return Bg(i,e)};function Z3(t,e,i,r){Fg(e,t),Rg(e,i,r,e.attr("id"))}const Sr=Object.freeze({render:K3,parse:U3,getDiagramFromText:qo,initialize:Q3,getConfig:me,setConfig:Dh,getSiteConfig:Ih,updateSiteConfig:F2,reset:()=>{Cn()},globalReset:()=>{Cn(Zr)},defaultConfig:Zr});Ao(me().logLevel);Cn(me());const J3=async()=>{I.debug("Loading registered diagrams");const e=(await Promise.allSettled(Object.entries(Qr).map(async([i,{detector:r,loader:s}])=>{if(s)try{Oo(i)}catch{try{const{diagram:a,id:o}=await s();Sn(o,a,r)}catch(a){throw I.error(`Failed to load external diagram with key ${i}. Removing from detectors.`),delete Qr[i],a}}}))).filter(i=>i.status==="rejected");if(e.length>0){I.error(`Failed to load ${e.length} external diagrams`);for(const i of e)I.error(i);throw new Error(`Failed to load ${e.length} external diagrams`)}},tm=(t,e,i)=>{I.warn(t),Lh(t)?(i&&i(t.str,t.hash),e.push({...t,message:t.str,error:t})):(i&&i(t),t instanceof Error&&e.push({str:t.message,message:t.message,hash:t.name,error:t}))},C1=async function(t={querySelector:".mermaid"}){try{await em(t)}catch(e){if(Lh(e)&&I.error(e.str),Ai.parseError&&Ai.parseError(e),!t.suppressErrors)throw I.error("Use the suppressErrors option to suppress these errors"),e}},em=async function({postRenderCallback:t,querySelector:e,nodes:i}={querySelector:".mermaid"}){const r=Sr.getConfig();I.debug(`${t?"":"No "}Callback function found`);let s;if(i)s=i;else if(e)s=document.querySelectorAll(e);else throw new Error("Nodes and querySelector are both undefined");I.debug(`Found ${s.length} diagrams`),(r==null?void 0:r.startOnLoad)!==void 0&&(I.debug("Start On Load: "+(r==null?void 0:r.startOnLoad)),Sr.updateSiteConfig({startOnLoad:r==null?void 0:r.startOnLoad}));const n=new Rt.InitIDGenerator(r.deterministicIds,r.deterministicIDSeed);let a;const o=[];for(const l of Array.from(s)){I.info("Rendering diagram: "+l.id);/*! Check if previously processed */if(l.getAttribute("data-processed"))continue;l.setAttribute("data-processed","true");const h=`mermaid-${n.next()}`;a=l.innerHTML,a=fh(Rt.entityDecode(a)).trim().replace(/<br\s*\/?>/gi,"<br/>");const u=Rt.detectInit(a);u&&I.debug("Detected early reinit: ",u);try{const{svg:p,bindFunctions:d}=await w1(h,a,l);l.innerHTML=p,t&&await t(h),d&&d(l)}catch(p){tm(p,o,Ai.parseError)}}if(o.length>0)throw o[0]},E1=function(t){Sr.initialize(t)},im=async function(t,e,i){I.warn("mermaid.init is deprecated. Please use run instead."),t&&E1(t);const r={postRenderCallback:i,querySelector:".mermaid"};typeof e=="string"?r.querySelector=e:e&&(e instanceof HTMLElement?r.nodes=[e]:r.nodes=e),await C1(r)},rm=async(t,{lazyLoad:e=!0}={})=>{_h(...t),e===!1&&await J3()},S1=function(){if(Ai.startOnLoad){const{startOnLoad:t}=Sr.getConfig();t&&Ai.run().catch(e=>I.error("Mermaid failed to initialize",e))}};if(typeof document<"u"){/*!
 * Wait for document loaded before starting the execution
 */window.addEventListener("load",S1,!1)}const sm=function(t){Ai.parseError=t},Ln=[];let La=!1;const v1=async()=>{if(!La){for(La=!0;Ln.length>0;){const t=Ln.shift();if(t)try{await t()}catch(e){I.error("Error executing queue",e)}}La=!1}},nm=async(t,e)=>new Promise((i,r)=>{const s=()=>new Promise((n,a)=>{Sr.parse(t,e).then(o=>{n(o),i(o)},o=>{var l;I.error("Error parsing",o),(l=Ai.parseError)==null||l.call(Ai,o),a(o),r(o)})});Ln.push(s),v1().catch(r)}),w1=(t,e,i)=>new Promise((r,s)=>{const n=()=>new Promise((a,o)=>{Sr.render(t,e,i).then(l=>{a(l),r(l)},l=>{var h;I.error("Error parsing",l),(h=Ai.parseError)==null||h.call(Ai,l),o(l),s(l)})});Ln.push(n),v1().catch(s)}),Ai={startOnLoad:!0,mermaidAPI:Sr,parse:nm,render:w1,init:im,run:C1,registerExternalDiagrams:rm,initialize:E1,parseError:void 0,contentLoaded:S1,setParseErrorHandler:sm,detectType:ea},sa=(t,e)=>{const i=t.append("rect");if(i.attr("x",e.x),i.attr("y",e.y),i.attr("fill",e.fill),i.attr("stroke",e.stroke),i.attr("width",e.width),i.attr("height",e.height),e.rx!==void 0&&i.attr("rx",e.rx),e.ry!==void 0&&i.attr("ry",e.ry),e.attrs!==void 0)for(const r in e.attrs)i.attr(r,e.attrs[r]);return e.class!==void 0&&i.attr("class",e.class),i},A1=(t,e)=>{const i={x:e.startx,y:e.starty,width:e.stopx-e.startx,height:e.stopy-e.starty,fill:e.fill,stroke:e.stroke,class:"rect"};sa(t,i).lower()},am=(t,e)=>{const i=e.text.replace(js," "),r=t.append("text");r.attr("x",e.x),r.attr("y",e.y),r.attr("class","legend"),r.style("text-anchor",e.anchor),e.class!==void 0&&r.attr("class",e.class);const s=r.append("tspan");return s.attr("x",e.x+e.textMargin*2),s.text(i),r},om=(t,e,i,r)=>{const s=t.append("image");s.attr("x",e),s.attr("y",i);const n=Dr.sanitizeUrl(r);s.attr("xlink:href",n)},lm=(t,e,i,r)=>{const s=t.append("use");s.attr("x",e),s.attr("y",i);const n=Dr.sanitizeUrl(r);s.attr("xlink:href",`#${n}`)},Nr=()=>({x:0,y:0,width:100,height:100,fill:"#EDF2AE",stroke:"#666",anchor:"start",rx:0,ry:0}),Wo=()=>({x:0,y:0,width:100,height:100,"text-anchor":"start",style:"#666",textMargin:0,rx:0,ry:0,tspan:!0});var Bn=function(){var t=function(pt,ut,ot,lt){for(ot=ot||{},lt=pt.length;lt--;ot[pt[lt]]=ut);return ot},e=[1,24],i=[1,25],r=[1,26],s=[1,27],n=[1,28],a=[1,63],o=[1,64],l=[1,65],h=[1,66],u=[1,67],p=[1,68],d=[1,69],g=[1,29],y=[1,30],x=[1,31],_=[1,32],v=[1,33],E=[1,34],F=[1,35],L=[1,36],T=[1,37],k=[1,38],A=[1,39],S=[1,40],m=[1,41],C=[1,42],f=[1,43],B=[1,44],b=[1,45],P=[1,46],U=[1,47],N=[1,48],w=[1,50],R=[1,51],D=[1,52],V=[1,53],z=[1,54],st=[1,55],j=[1,56],dt=[1,57],K=[1,58],G=[1,59],tt=[1,60],nt=[14,42],Q=[14,34,36,37,38,39,40,41,42,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],J=[12,14,34,36,37,38,39,40,41,42,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],O=[1,82],at=[1,83],W=[1,84],ft=[1,85],M=[12,14,42],wt=[12,14,33,42],X=[12,14,33,42,76,77,79,80],St=[12,33],bt=[34,36,37,38,39,40,41,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],Vt={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,direction:5,direction_tb:6,direction_bt:7,direction_rl:8,direction_lr:9,graphConfig:10,C4_CONTEXT:11,NEWLINE:12,statements:13,EOF:14,C4_CONTAINER:15,C4_COMPONENT:16,C4_DYNAMIC:17,C4_DEPLOYMENT:18,otherStatements:19,diagramStatements:20,otherStatement:21,title:22,accDescription:23,acc_title:24,acc_title_value:25,acc_descr:26,acc_descr_value:27,acc_descr_multiline_value:28,boundaryStatement:29,boundaryStartStatement:30,boundaryStopStatement:31,boundaryStart:32,LBRACE:33,ENTERPRISE_BOUNDARY:34,attributes:35,SYSTEM_BOUNDARY:36,BOUNDARY:37,CONTAINER_BOUNDARY:38,NODE:39,NODE_L:40,NODE_R:41,RBRACE:42,diagramStatement:43,PERSON:44,PERSON_EXT:45,SYSTEM:46,SYSTEM_DB:47,SYSTEM_QUEUE:48,SYSTEM_EXT:49,SYSTEM_EXT_DB:50,SYSTEM_EXT_QUEUE:51,CONTAINER:52,CONTAINER_DB:53,CONTAINER_QUEUE:54,CONTAINER_EXT:55,CONTAINER_EXT_DB:56,CONTAINER_EXT_QUEUE:57,COMPONENT:58,COMPONENT_DB:59,COMPONENT_QUEUE:60,COMPONENT_EXT:61,COMPONENT_EXT_DB:62,COMPONENT_EXT_QUEUE:63,REL:64,BIREL:65,REL_U:66,REL_D:67,REL_L:68,REL_R:69,REL_B:70,REL_INDEX:71,UPDATE_EL_STYLE:72,UPDATE_REL_STYLE:73,UPDATE_LAYOUT_CONFIG:74,attribute:75,STR:76,STR_KEY:77,STR_VALUE:78,ATTRIBUTE:79,ATTRIBUTE_EMPTY:80,$accept:0,$end:1},terminals_:{2:"error",6:"direction_tb",7:"direction_bt",8:"direction_rl",9:"direction_lr",11:"C4_CONTEXT",12:"NEWLINE",14:"EOF",15:"C4_CONTAINER",16:"C4_COMPONENT",17:"C4_DYNAMIC",18:"C4_DEPLOYMENT",22:"title",23:"accDescription",24:"acc_title",25:"acc_title_value",26:"acc_descr",27:"acc_descr_value",28:"acc_descr_multiline_value",33:"LBRACE",34:"ENTERPRISE_BOUNDARY",36:"SYSTEM_BOUNDARY",37:"BOUNDARY",38:"CONTAINER_BOUNDARY",39:"NODE",40:"NODE_L",41:"NODE_R",42:"RBRACE",44:"PERSON",45:"PERSON_EXT",46:"SYSTEM",47:"SYSTEM_DB",48:"SYSTEM_QUEUE",49:"SYSTEM_EXT",50:"SYSTEM_EXT_DB",51:"SYSTEM_EXT_QUEUE",52:"CONTAINER",53:"CONTAINER_DB",54:"CONTAINER_QUEUE",55:"CONTAINER_EXT",56:"CONTAINER_EXT_DB",57:"CONTAINER_EXT_QUEUE",58:"COMPONENT",59:"COMPONENT_DB",60:"COMPONENT_QUEUE",61:"COMPONENT_EXT",62:"COMPONENT_EXT_DB",63:"COMPONENT_EXT_QUEUE",64:"REL",65:"BIREL",66:"REL_U",67:"REL_D",68:"REL_L",69:"REL_R",70:"REL_B",71:"REL_INDEX",72:"UPDATE_EL_STYLE",73:"UPDATE_REL_STYLE",74:"UPDATE_LAYOUT_CONFIG",76:"STR",77:"STR_KEY",78:"STR_VALUE",79:"ATTRIBUTE",80:"ATTRIBUTE_EMPTY"},productions_:[0,[3,1],[3,1],[5,1],[5,1],[5,1],[5,1],[4,1],[10,4],[10,4],[10,4],[10,4],[10,4],[13,1],[13,1],[13,2],[19,1],[19,2],[19,3],[21,1],[21,1],[21,2],[21,2],[21,1],[29,3],[30,3],[30,3],[30,4],[32,2],[32,2],[32,2],[32,2],[32,2],[32,2],[32,2],[31,1],[20,1],[20,2],[20,3],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,1],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[35,1],[35,2],[75,1],[75,2],[75,1],[75,1]],performAction:function(ut,ot,lt,ht,$,rt,it){var ct=rt.length-1;switch($){case 3:ht.setDirection("TB");break;case 4:ht.setDirection("BT");break;case 5:ht.setDirection("RL");break;case 6:ht.setDirection("LR");break;case 8:case 9:case 10:case 11:case 12:ht.setC4Type(rt[ct-3]);break;case 19:ht.setTitle(rt[ct].substring(6)),this.$=rt[ct].substring(6);break;case 20:ht.setAccDescription(rt[ct].substring(15)),this.$=rt[ct].substring(15);break;case 21:this.$=rt[ct].trim(),ht.setTitle(this.$);break;case 22:case 23:this.$=rt[ct].trim(),ht.setAccDescription(this.$);break;case 28:case 29:rt[ct].splice(2,0,"ENTERPRISE"),ht.addPersonOrSystemBoundary(...rt[ct]),this.$=rt[ct];break;case 30:ht.addPersonOrSystemBoundary(...rt[ct]),this.$=rt[ct];break;case 31:rt[ct].splice(2,0,"CONTAINER"),ht.addContainerBoundary(...rt[ct]),this.$=rt[ct];break;case 32:ht.addDeploymentNode("node",...rt[ct]),this.$=rt[ct];break;case 33:ht.addDeploymentNode("nodeL",...rt[ct]),this.$=rt[ct];break;case 34:ht.addDeploymentNode("nodeR",...rt[ct]),this.$=rt[ct];break;case 35:ht.popBoundaryParseStack();break;case 39:ht.addPersonOrSystem("person",...rt[ct]),this.$=rt[ct];break;case 40:ht.addPersonOrSystem("external_person",...rt[ct]),this.$=rt[ct];break;case 41:ht.addPersonOrSystem("system",...rt[ct]),this.$=rt[ct];break;case 42:ht.addPersonOrSystem("system_db",...rt[ct]),this.$=rt[ct];break;case 43:ht.addPersonOrSystem("system_queue",...rt[ct]),this.$=rt[ct];break;case 44:ht.addPersonOrSystem("external_system",...rt[ct]),this.$=rt[ct];break;case 45:ht.addPersonOrSystem("external_system_db",...rt[ct]),this.$=rt[ct];break;case 46:ht.addPersonOrSystem("external_system_queue",...rt[ct]),this.$=rt[ct];break;case 47:ht.addContainer("container",...rt[ct]),this.$=rt[ct];break;case 48:ht.addContainer("container_db",...rt[ct]),this.$=rt[ct];break;case 49:ht.addContainer("container_queue",...rt[ct]),this.$=rt[ct];break;case 50:ht.addContainer("external_container",...rt[ct]),this.$=rt[ct];break;case 51:ht.addContainer("external_container_db",...rt[ct]),this.$=rt[ct];break;case 52:ht.addContainer("external_container_queue",...rt[ct]),this.$=rt[ct];break;case 53:ht.addComponent("component",...rt[ct]),this.$=rt[ct];break;case 54:ht.addComponent("component_db",...rt[ct]),this.$=rt[ct];break;case 55:ht.addComponent("component_queue",...rt[ct]),this.$=rt[ct];break;case 56:ht.addComponent("external_component",...rt[ct]),this.$=rt[ct];break;case 57:ht.addComponent("external_component_db",...rt[ct]),this.$=rt[ct];break;case 58:ht.addComponent("external_component_queue",...rt[ct]),this.$=rt[ct];break;case 60:ht.addRel("rel",...rt[ct]),this.$=rt[ct];break;case 61:ht.addRel("birel",...rt[ct]),this.$=rt[ct];break;case 62:ht.addRel("rel_u",...rt[ct]),this.$=rt[ct];break;case 63:ht.addRel("rel_d",...rt[ct]),this.$=rt[ct];break;case 64:ht.addRel("rel_l",...rt[ct]),this.$=rt[ct];break;case 65:ht.addRel("rel_r",...rt[ct]),this.$=rt[ct];break;case 66:ht.addRel("rel_b",...rt[ct]),this.$=rt[ct];break;case 67:rt[ct].splice(0,1),ht.addRel("rel",...rt[ct]),this.$=rt[ct];break;case 68:ht.updateElStyle("update_el_style",...rt[ct]),this.$=rt[ct];break;case 69:ht.updateRelStyle("update_rel_style",...rt[ct]),this.$=rt[ct];break;case 70:ht.updateLayoutConfig("update_layout_config",...rt[ct]),this.$=rt[ct];break;case 71:this.$=[rt[ct]];break;case 72:rt[ct].unshift(rt[ct-1]),this.$=rt[ct];break;case 73:case 75:this.$=rt[ct].trim();break;case 74:let ee={};ee[rt[ct-1].trim()]=rt[ct].trim(),this.$=ee;break;case 76:this.$="";break}},table:[{3:1,4:2,5:3,6:[1,5],7:[1,6],8:[1,7],9:[1,8],10:4,11:[1,9],15:[1,10],16:[1,11],17:[1,12],18:[1,13]},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,7]},{1:[2,3]},{1:[2,4]},{1:[2,5]},{1:[2,6]},{12:[1,14]},{12:[1,15]},{12:[1,16]},{12:[1,17]},{12:[1,18]},{13:19,19:20,20:21,21:22,22:e,23:i,24:r,26:s,28:n,29:49,30:61,32:62,34:a,36:o,37:l,38:h,39:u,40:p,41:d,43:23,44:g,45:y,46:x,47:_,48:v,49:E,50:F,51:L,52:T,53:k,54:A,55:S,56:m,57:C,58:f,59:B,60:b,61:P,62:U,63:N,64:w,65:R,66:D,67:V,68:z,69:st,70:j,71:dt,72:K,73:G,74:tt},{13:70,19:20,20:21,21:22,22:e,23:i,24:r,26:s,28:n,29:49,30:61,32:62,34:a,36:o,37:l,38:h,39:u,40:p,41:d,43:23,44:g,45:y,46:x,47:_,48:v,49:E,50:F,51:L,52:T,53:k,54:A,55:S,56:m,57:C,58:f,59:B,60:b,61:P,62:U,63:N,64:w,65:R,66:D,67:V,68:z,69:st,70:j,71:dt,72:K,73:G,74:tt},{13:71,19:20,20:21,21:22,22:e,23:i,24:r,26:s,28:n,29:49,30:61,32:62,34:a,36:o,37:l,38:h,39:u,40:p,41:d,43:23,44:g,45:y,46:x,47:_,48:v,49:E,50:F,51:L,52:T,53:k,54:A,55:S,56:m,57:C,58:f,59:B,60:b,61:P,62:U,63:N,64:w,65:R,66:D,67:V,68:z,69:st,70:j,71:dt,72:K,73:G,74:tt},{13:72,19:20,20:21,21:22,22:e,23:i,24:r,26:s,28:n,29:49,30:61,32:62,34:a,36:o,37:l,38:h,39:u,40:p,41:d,43:23,44:g,45:y,46:x,47:_,48:v,49:E,50:F,51:L,52:T,53:k,54:A,55:S,56:m,57:C,58:f,59:B,60:b,61:P,62:U,63:N,64:w,65:R,66:D,67:V,68:z,69:st,70:j,71:dt,72:K,73:G,74:tt},{13:73,19:20,20:21,21:22,22:e,23:i,24:r,26:s,28:n,29:49,30:61,32:62,34:a,36:o,37:l,38:h,39:u,40:p,41:d,43:23,44:g,45:y,46:x,47:_,48:v,49:E,50:F,51:L,52:T,53:k,54:A,55:S,56:m,57:C,58:f,59:B,60:b,61:P,62:U,63:N,64:w,65:R,66:D,67:V,68:z,69:st,70:j,71:dt,72:K,73:G,74:tt},{14:[1,74]},t(nt,[2,13],{43:23,29:49,30:61,32:62,20:75,34:a,36:o,37:l,38:h,39:u,40:p,41:d,44:g,45:y,46:x,47:_,48:v,49:E,50:F,51:L,52:T,53:k,54:A,55:S,56:m,57:C,58:f,59:B,60:b,61:P,62:U,63:N,64:w,65:R,66:D,67:V,68:z,69:st,70:j,71:dt,72:K,73:G,74:tt}),t(nt,[2,14]),t(Q,[2,16],{12:[1,76]}),t(nt,[2,36],{12:[1,77]}),t(J,[2,19]),t(J,[2,20]),{25:[1,78]},{27:[1,79]},t(J,[2,23]),{35:80,75:81,76:O,77:at,79:W,80:ft},{35:86,75:81,76:O,77:at,79:W,80:ft},{35:87,75:81,76:O,77:at,79:W,80:ft},{35:88,75:81,76:O,77:at,79:W,80:ft},{35:89,75:81,76:O,77:at,79:W,80:ft},{35:90,75:81,76:O,77:at,79:W,80:ft},{35:91,75:81,76:O,77:at,79:W,80:ft},{35:92,75:81,76:O,77:at,79:W,80:ft},{35:93,75:81,76:O,77:at,79:W,80:ft},{35:94,75:81,76:O,77:at,79:W,80:ft},{35:95,75:81,76:O,77:at,79:W,80:ft},{35:96,75:81,76:O,77:at,79:W,80:ft},{35:97,75:81,76:O,77:at,79:W,80:ft},{35:98,75:81,76:O,77:at,79:W,80:ft},{35:99,75:81,76:O,77:at,79:W,80:ft},{35:100,75:81,76:O,77:at,79:W,80:ft},{35:101,75:81,76:O,77:at,79:W,80:ft},{35:102,75:81,76:O,77:at,79:W,80:ft},{35:103,75:81,76:O,77:at,79:W,80:ft},{35:104,75:81,76:O,77:at,79:W,80:ft},t(M,[2,59]),{35:105,75:81,76:O,77:at,79:W,80:ft},{35:106,75:81,76:O,77:at,79:W,80:ft},{35:107,75:81,76:O,77:at,79:W,80:ft},{35:108,75:81,76:O,77:at,79:W,80:ft},{35:109,75:81,76:O,77:at,79:W,80:ft},{35:110,75:81,76:O,77:at,79:W,80:ft},{35:111,75:81,76:O,77:at,79:W,80:ft},{35:112,75:81,76:O,77:at,79:W,80:ft},{35:113,75:81,76:O,77:at,79:W,80:ft},{35:114,75:81,76:O,77:at,79:W,80:ft},{35:115,75:81,76:O,77:at,79:W,80:ft},{20:116,29:49,30:61,32:62,34:a,36:o,37:l,38:h,39:u,40:p,41:d,43:23,44:g,45:y,46:x,47:_,48:v,49:E,50:F,51:L,52:T,53:k,54:A,55:S,56:m,57:C,58:f,59:B,60:b,61:P,62:U,63:N,64:w,65:R,66:D,67:V,68:z,69:st,70:j,71:dt,72:K,73:G,74:tt},{12:[1,118],33:[1,117]},{35:119,75:81,76:O,77:at,79:W,80:ft},{35:120,75:81,76:O,77:at,79:W,80:ft},{35:121,75:81,76:O,77:at,79:W,80:ft},{35:122,75:81,76:O,77:at,79:W,80:ft},{35:123,75:81,76:O,77:at,79:W,80:ft},{35:124,75:81,76:O,77:at,79:W,80:ft},{35:125,75:81,76:O,77:at,79:W,80:ft},{14:[1,126]},{14:[1,127]},{14:[1,128]},{14:[1,129]},{1:[2,8]},t(nt,[2,15]),t(Q,[2,17],{21:22,19:130,22:e,23:i,24:r,26:s,28:n}),t(nt,[2,37],{19:20,20:21,21:22,43:23,29:49,30:61,32:62,13:131,22:e,23:i,24:r,26:s,28:n,34:a,36:o,37:l,38:h,39:u,40:p,41:d,44:g,45:y,46:x,47:_,48:v,49:E,50:F,51:L,52:T,53:k,54:A,55:S,56:m,57:C,58:f,59:B,60:b,61:P,62:U,63:N,64:w,65:R,66:D,67:V,68:z,69:st,70:j,71:dt,72:K,73:G,74:tt}),t(J,[2,21]),t(J,[2,22]),t(M,[2,39]),t(wt,[2,71],{75:81,35:132,76:O,77:at,79:W,80:ft}),t(X,[2,73]),{78:[1,133]},t(X,[2,75]),t(X,[2,76]),t(M,[2,40]),t(M,[2,41]),t(M,[2,42]),t(M,[2,43]),t(M,[2,44]),t(M,[2,45]),t(M,[2,46]),t(M,[2,47]),t(M,[2,48]),t(M,[2,49]),t(M,[2,50]),t(M,[2,51]),t(M,[2,52]),t(M,[2,53]),t(M,[2,54]),t(M,[2,55]),t(M,[2,56]),t(M,[2,57]),t(M,[2,58]),t(M,[2,60]),t(M,[2,61]),t(M,[2,62]),t(M,[2,63]),t(M,[2,64]),t(M,[2,65]),t(M,[2,66]),t(M,[2,67]),t(M,[2,68]),t(M,[2,69]),t(M,[2,70]),{31:134,42:[1,135]},{12:[1,136]},{33:[1,137]},t(St,[2,28]),t(St,[2,29]),t(St,[2,30]),t(St,[2,31]),t(St,[2,32]),t(St,[2,33]),t(St,[2,34]),{1:[2,9]},{1:[2,10]},{1:[2,11]},{1:[2,12]},t(Q,[2,18]),t(nt,[2,38]),t(wt,[2,72]),t(X,[2,74]),t(M,[2,24]),t(M,[2,35]),t(bt,[2,25]),t(bt,[2,26],{12:[1,138]}),t(bt,[2,27])],defaultActions:{2:[2,1],3:[2,2],4:[2,7],5:[2,3],6:[2,4],7:[2,5],8:[2,6],74:[2,8],126:[2,9],127:[2,10],128:[2,11],129:[2,12]},parseError:function(ut,ot){if(ot.recoverable)this.trace(ut);else{var lt=new Error(ut);throw lt.hash=ot,lt}},parse:function(ut){var ot=this,lt=[0],ht=[],$=[null],rt=[],it=this.table,ct="",ee=0,Qt=0,de=2,zt=1,Gt=rt.slice.call(arguments,1),qt=Object.create(this.lexer),Se={yy:{}};for(var fe in this.yy)Object.prototype.hasOwnProperty.call(this.yy,fe)&&(Se.yy[fe]=this.yy[fe]);qt.setInput(ut,Se.yy),Se.yy.lexer=qt,Se.yy.parser=this,typeof qt.yylloc>"u"&&(qt.yylloc={});var rr=qt.yylloc;rt.push(rr);var Or=qt.options&&qt.options.ranges;typeof Se.yy.parseError=="function"?this.parseError=Se.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function xe(){var Be;return Be=ht.pop()||qt.lex()||zt,typeof Be!="number"&&(Be instanceof Array&&(ht=Be,Be=ht.pop()),Be=ot.symbols_[Be]||Be),Be}for(var jt,ie,Ot,Zt,Dt={},Yt,Ut,Pt,Nt;;){if(ie=lt[lt.length-1],this.defaultActions[ie]?Ot=this.defaultActions[ie]:((jt===null||typeof jt>"u")&&(jt=xe()),Ot=it[ie]&&it[ie][jt]),typeof Ot>"u"||!Ot.length||!Ot[0]){var It="";Nt=[];for(Yt in it[ie])this.terminals_[Yt]&&Yt>de&&Nt.push("'"+this.terminals_[Yt]+"'");qt.showPosition?It="Parse error on line "+(ee+1)+`:
`+qt.showPosition()+`
Expecting `+Nt.join(", ")+", got '"+(this.terminals_[jt]||jt)+"'":It="Parse error on line "+(ee+1)+": Unexpected "+(jt==zt?"end of input":"'"+(this.terminals_[jt]||jt)+"'"),this.parseError(It,{text:qt.match,token:this.terminals_[jt]||jt,line:qt.yylineno,loc:rr,expected:Nt})}if(Ot[0]instanceof Array&&Ot.length>1)throw new Error("Parse Error: multiple actions possible at state: "+ie+", token: "+jt);switch(Ot[0]){case 1:lt.push(jt),$.push(qt.yytext),rt.push(qt.yylloc),lt.push(Ot[1]),jt=null,Qt=qt.yyleng,ct=qt.yytext,ee=qt.yylineno,rr=qt.yylloc;break;case 2:if(Ut=this.productions_[Ot[1]][1],Dt.$=$[$.length-Ut],Dt._$={first_line:rt[rt.length-(Ut||1)].first_line,last_line:rt[rt.length-1].last_line,first_column:rt[rt.length-(Ut||1)].first_column,last_column:rt[rt.length-1].last_column},Or&&(Dt._$.range=[rt[rt.length-(Ut||1)].range[0],rt[rt.length-1].range[1]]),Zt=this.performAction.apply(Dt,[ct,Qt,ee,Se.yy,Ot[1],$,rt].concat(Gt)),typeof Zt<"u")return Zt;Ut&&(lt=lt.slice(0,-1*Ut*2),$=$.slice(0,-1*Ut),rt=rt.slice(0,-1*Ut)),lt.push(this.productions_[Ot[1]][0]),$.push(Dt.$),rt.push(Dt._$),Pt=it[lt[lt.length-2]][lt[lt.length-1]],lt.push(Pt);break;case 3:return!0}}return!0}},Bt=function(){var pt={EOF:1,parseError:function(ot,lt){if(this.yy.parser)this.yy.parser.parseError(ot,lt);else throw new Error(ot)},setInput:function(ut,ot){return this.yy=ot||this.yy||{},this._input=ut,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var ut=this._input[0];this.yytext+=ut,this.yyleng++,this.offset++,this.match+=ut,this.matched+=ut;var ot=ut.match(/(?:\r\n?|\n).*/g);return ot?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ut},unput:function(ut){var ot=ut.length,lt=ut.split(/(?:\r\n?|\n)/g);this._input=ut+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-ot),this.offset-=ot;var ht=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),lt.length-1&&(this.yylineno-=lt.length-1);var $=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:lt?(lt.length===ht.length?this.yylloc.first_column:0)+ht[ht.length-lt.length].length-lt[0].length:this.yylloc.first_column-ot},this.options.ranges&&(this.yylloc.range=[$[0],$[0]+this.yyleng-ot]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(ut){this.unput(this.match.slice(ut))},pastInput:function(){var ut=this.matched.substr(0,this.matched.length-this.match.length);return(ut.length>20?"...":"")+ut.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var ut=this.match;return ut.length<20&&(ut+=this._input.substr(0,20-ut.length)),(ut.substr(0,20)+(ut.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var ut=this.pastInput(),ot=new Array(ut.length+1).join("-");return ut+this.upcomingInput()+`
`+ot+"^"},test_match:function(ut,ot){var lt,ht,$;if(this.options.backtrack_lexer&&($={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&($.yylloc.range=this.yylloc.range.slice(0))),ht=ut[0].match(/(?:\r\n?|\n).*/g),ht&&(this.yylineno+=ht.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:ht?ht[ht.length-1].length-ht[ht.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+ut[0].length},this.yytext+=ut[0],this.match+=ut[0],this.matches=ut,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(ut[0].length),this.matched+=ut[0],lt=this.performAction.call(this,this.yy,this,ot,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),lt)return lt;if(this._backtrack){for(var rt in $)this[rt]=$[rt];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var ut,ot,lt,ht;this._more||(this.yytext="",this.match="");for(var $=this._currentRules(),rt=0;rt<$.length;rt++)if(lt=this._input.match(this.rules[$[rt]]),lt&&(!ot||lt[0].length>ot[0].length)){if(ot=lt,ht=rt,this.options.backtrack_lexer){if(ut=this.test_match(lt,$[rt]),ut!==!1)return ut;if(this._backtrack){ot=!1;continue}else return!1}else if(!this.options.flex)break}return ot?(ut=this.test_match(ot,$[ht]),ut!==!1?ut:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var ot=this.next();return ot||this.lex()},begin:function(ot){this.conditionStack.push(ot)},popState:function(){var ot=this.conditionStack.length-1;return ot>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(ot){return ot=this.conditionStack.length-1-Math.abs(ot||0),ot>=0?this.conditionStack[ot]:"INITIAL"},pushState:function(ot){this.begin(ot)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(ot,lt,ht,$){switch(ht){case 0:return 6;case 1:return 7;case 2:return 8;case 3:return 9;case 4:return 22;case 5:return 23;case 6:return this.begin("acc_title"),24;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),26;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:break;case 14:c;break;case 15:return 12;case 16:break;case 17:return 11;case 18:return 15;case 19:return 16;case 20:return 17;case 21:return 18;case 22:return this.begin("person_ext"),45;case 23:return this.begin("person"),44;case 24:return this.begin("system_ext_queue"),51;case 25:return this.begin("system_ext_db"),50;case 26:return this.begin("system_ext"),49;case 27:return this.begin("system_queue"),48;case 28:return this.begin("system_db"),47;case 29:return this.begin("system"),46;case 30:return this.begin("boundary"),37;case 31:return this.begin("enterprise_boundary"),34;case 32:return this.begin("system_boundary"),36;case 33:return this.begin("container_ext_queue"),57;case 34:return this.begin("container_ext_db"),56;case 35:return this.begin("container_ext"),55;case 36:return this.begin("container_queue"),54;case 37:return this.begin("container_db"),53;case 38:return this.begin("container"),52;case 39:return this.begin("container_boundary"),38;case 40:return this.begin("component_ext_queue"),63;case 41:return this.begin("component_ext_db"),62;case 42:return this.begin("component_ext"),61;case 43:return this.begin("component_queue"),60;case 44:return this.begin("component_db"),59;case 45:return this.begin("component"),58;case 46:return this.begin("node"),39;case 47:return this.begin("node"),39;case 48:return this.begin("node_l"),40;case 49:return this.begin("node_r"),41;case 50:return this.begin("rel"),64;case 51:return this.begin("birel"),65;case 52:return this.begin("rel_u"),66;case 53:return this.begin("rel_u"),66;case 54:return this.begin("rel_d"),67;case 55:return this.begin("rel_d"),67;case 56:return this.begin("rel_l"),68;case 57:return this.begin("rel_l"),68;case 58:return this.begin("rel_r"),69;case 59:return this.begin("rel_r"),69;case 60:return this.begin("rel_b"),70;case 61:return this.begin("rel_index"),71;case 62:return this.begin("update_el_style"),72;case 63:return this.begin("update_rel_style"),73;case 64:return this.begin("update_layout_config"),74;case 65:return"EOF_IN_STRUCT";case 66:return this.begin("attribute"),"ATTRIBUTE_EMPTY";case 67:this.begin("attribute");break;case 68:this.popState(),this.popState();break;case 69:return 80;case 70:break;case 71:return 80;case 72:this.begin("string");break;case 73:this.popState();break;case 74:return"STR";case 75:this.begin("string_kv");break;case 76:return this.begin("string_kv_key"),"STR_KEY";case 77:this.popState(),this.begin("string_kv_value");break;case 78:return"STR_VALUE";case 79:this.popState(),this.popState();break;case 80:return"STR";case 81:return"LBRACE";case 82:return"RBRACE";case 83:return"SPACE";case 84:return"EOL";case 85:return 14}},rules:[/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:title\s[^#\n;]+)/,/^(?:accDescription\s[^#\n;]+)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:C4Context\b)/,/^(?:C4Container\b)/,/^(?:C4Component\b)/,/^(?:C4Dynamic\b)/,/^(?:C4Deployment\b)/,/^(?:Person_Ext\b)/,/^(?:Person\b)/,/^(?:SystemQueue_Ext\b)/,/^(?:SystemDb_Ext\b)/,/^(?:System_Ext\b)/,/^(?:SystemQueue\b)/,/^(?:SystemDb\b)/,/^(?:System\b)/,/^(?:Boundary\b)/,/^(?:Enterprise_Boundary\b)/,/^(?:System_Boundary\b)/,/^(?:ContainerQueue_Ext\b)/,/^(?:ContainerDb_Ext\b)/,/^(?:Container_Ext\b)/,/^(?:ContainerQueue\b)/,/^(?:ContainerDb\b)/,/^(?:Container\b)/,/^(?:Container_Boundary\b)/,/^(?:ComponentQueue_Ext\b)/,/^(?:ComponentDb_Ext\b)/,/^(?:Component_Ext\b)/,/^(?:ComponentQueue\b)/,/^(?:ComponentDb\b)/,/^(?:Component\b)/,/^(?:Deployment_Node\b)/,/^(?:Node\b)/,/^(?:Node_L\b)/,/^(?:Node_R\b)/,/^(?:Rel\b)/,/^(?:BiRel\b)/,/^(?:Rel_Up\b)/,/^(?:Rel_U\b)/,/^(?:Rel_Down\b)/,/^(?:Rel_D\b)/,/^(?:Rel_Left\b)/,/^(?:Rel_L\b)/,/^(?:Rel_Right\b)/,/^(?:Rel_R\b)/,/^(?:Rel_Back\b)/,/^(?:RelIndex\b)/,/^(?:UpdateElementStyle\b)/,/^(?:UpdateRelStyle\b)/,/^(?:UpdateLayoutConfig\b)/,/^(?:$)/,/^(?:[(][ ]*[,])/,/^(?:[(])/,/^(?:[)])/,/^(?:,,)/,/^(?:,)/,/^(?:[ ]*["]["])/,/^(?:[ ]*["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[ ]*[\$])/,/^(?:[^=]*)/,/^(?:[=][ ]*["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:[^,]+)/,/^(?:\{)/,/^(?:\})/,/^(?:[\s]+)/,/^(?:[\n\r]+)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},string_kv_value:{rules:[78,79],inclusive:!1},string_kv_key:{rules:[77],inclusive:!1},string_kv:{rules:[76],inclusive:!1},string:{rules:[73,74],inclusive:!1},attribute:{rules:[68,69,70,71,72,75,80],inclusive:!1},update_layout_config:{rules:[65,66,67,68],inclusive:!1},update_rel_style:{rules:[65,66,67,68],inclusive:!1},update_el_style:{rules:[65,66,67,68],inclusive:!1},rel_b:{rules:[65,66,67,68],inclusive:!1},rel_r:{rules:[65,66,67,68],inclusive:!1},rel_l:{rules:[65,66,67,68],inclusive:!1},rel_d:{rules:[65,66,67,68],inclusive:!1},rel_u:{rules:[65,66,67,68],inclusive:!1},rel_bi:{rules:[],inclusive:!1},rel:{rules:[65,66,67,68],inclusive:!1},node_r:{rules:[65,66,67,68],inclusive:!1},node_l:{rules:[65,66,67,68],inclusive:!1},node:{rules:[65,66,67,68],inclusive:!1},index:{rules:[],inclusive:!1},rel_index:{rules:[65,66,67,68],inclusive:!1},component_ext_queue:{rules:[],inclusive:!1},component_ext_db:{rules:[65,66,67,68],inclusive:!1},component_ext:{rules:[65,66,67,68],inclusive:!1},component_queue:{rules:[65,66,67,68],inclusive:!1},component_db:{rules:[65,66,67,68],inclusive:!1},component:{rules:[65,66,67,68],inclusive:!1},container_boundary:{rules:[65,66,67,68],inclusive:!1},container_ext_queue:{rules:[65,66,67,68],inclusive:!1},container_ext_db:{rules:[65,66,67,68],inclusive:!1},container_ext:{rules:[65,66,67,68],inclusive:!1},container_queue:{rules:[65,66,67,68],inclusive:!1},container_db:{rules:[65,66,67,68],inclusive:!1},container:{rules:[65,66,67,68],inclusive:!1},birel:{rules:[65,66,67,68],inclusive:!1},system_boundary:{rules:[65,66,67,68],inclusive:!1},enterprise_boundary:{rules:[65,66,67,68],inclusive:!1},boundary:{rules:[65,66,67,68],inclusive:!1},system_ext_queue:{rules:[65,66,67,68],inclusive:!1},system_ext_db:{rules:[65,66,67,68],inclusive:!1},system_ext:{rules:[65,66,67,68],inclusive:!1},system_queue:{rules:[65,66,67,68],inclusive:!1},system_db:{rules:[65,66,67,68],inclusive:!1},system:{rules:[65,66,67,68],inclusive:!1},person_ext:{rules:[65,66,67,68],inclusive:!1},person:{rules:[65,66,67,68],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,8,10,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,81,82,83,84,85],inclusive:!0}}};return pt}();Vt.lexer=Bt;function Wt(){this.yy={}}return Wt.prototype=Vt,Vt.Parser=Wt,new Wt}();Bn.parser=Bn;const cm=Bn;let ki=[],hr=[""],qe="global",xi="",Li=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],Bs=[],Yo="",Uo=!1,In=4,Dn=2;var L1;const hm=function(){return L1},um=function(t){L1=ue(t,Y())},dm=function(t,e,i,r,s,n,a,o,l){if(t==null||e===void 0||e===null||i===void 0||i===null||r===void 0||r===null)return;let h={};const u=Bs.find(p=>p.from===e&&p.to===i);if(u?h=u:Bs.push(h),h.type=t,h.from=e,h.to=i,h.label={text:r},s==null)h.techn={text:""};else if(typeof s=="object"){let[p,d]=Object.entries(s)[0];h[p]={text:d}}else h.techn={text:s};if(n==null)h.descr={text:""};else if(typeof n=="object"){let[p,d]=Object.entries(n)[0];h[p]={text:d}}else h.descr={text:n};if(typeof a=="object"){let[p,d]=Object.entries(a)[0];h[p]=d}else h.sprite=a;if(typeof o=="object"){let[p,d]=Object.entries(o)[0];h[p]=d}else h.tags=o;if(typeof l=="object"){let[p,d]=Object.entries(l)[0];h[p]=d}else h.link=l;h.wrap=yr()},fm=function(t,e,i,r,s,n,a){if(e===null||i===null)return;let o={};const l=ki.find(h=>h.alias===e);if(l&&e===l.alias?o=l:(o.alias=e,ki.push(o)),i==null?o.label={text:""}:o.label={text:i},r==null)o.descr={text:""};else if(typeof r=="object"){let[h,u]=Object.entries(r)[0];o[h]={text:u}}else o.descr={text:r};if(typeof s=="object"){let[h,u]=Object.entries(s)[0];o[h]=u}else o.sprite=s;if(typeof n=="object"){let[h,u]=Object.entries(n)[0];o[h]=u}else o.tags=n;if(typeof a=="object"){let[h,u]=Object.entries(a)[0];o[h]=u}else o.link=a;o.typeC4Shape={text:t},o.parentBoundary=qe,o.wrap=yr()},pm=function(t,e,i,r,s,n,a,o){if(e===null||i===null)return;let l={};const h=ki.find(u=>u.alias===e);if(h&&e===h.alias?l=h:(l.alias=e,ki.push(l)),i==null?l.label={text:""}:l.label={text:i},r==null)l.techn={text:""};else if(typeof r=="object"){let[u,p]=Object.entries(r)[0];l[u]={text:p}}else l.techn={text:r};if(s==null)l.descr={text:""};else if(typeof s=="object"){let[u,p]=Object.entries(s)[0];l[u]={text:p}}else l.descr={text:s};if(typeof n=="object"){let[u,p]=Object.entries(n)[0];l[u]=p}else l.sprite=n;if(typeof a=="object"){let[u,p]=Object.entries(a)[0];l[u]=p}else l.tags=a;if(typeof o=="object"){let[u,p]=Object.entries(o)[0];l[u]=p}else l.link=o;l.wrap=yr(),l.typeC4Shape={text:t},l.parentBoundary=qe},gm=function(t,e,i,r,s,n,a,o){if(e===null||i===null)return;let l={};const h=ki.find(u=>u.alias===e);if(h&&e===h.alias?l=h:(l.alias=e,ki.push(l)),i==null?l.label={text:""}:l.label={text:i},r==null)l.techn={text:""};else if(typeof r=="object"){let[u,p]=Object.entries(r)[0];l[u]={text:p}}else l.techn={text:r};if(s==null)l.descr={text:""};else if(typeof s=="object"){let[u,p]=Object.entries(s)[0];l[u]={text:p}}else l.descr={text:s};if(typeof n=="object"){let[u,p]=Object.entries(n)[0];l[u]=p}else l.sprite=n;if(typeof a=="object"){let[u,p]=Object.entries(a)[0];l[u]=p}else l.tags=a;if(typeof o=="object"){let[u,p]=Object.entries(o)[0];l[u]=p}else l.link=o;l.wrap=yr(),l.typeC4Shape={text:t},l.parentBoundary=qe},ym=function(t,e,i,r,s){if(t===null||e===null)return;let n={};const a=Li.find(o=>o.alias===t);if(a&&t===a.alias?n=a:(n.alias=t,Li.push(n)),e==null?n.label={text:""}:n.label={text:e},i==null)n.type={text:"system"};else if(typeof i=="object"){let[o,l]=Object.entries(i)[0];n[o]={text:l}}else n.type={text:i};if(typeof r=="object"){let[o,l]=Object.entries(r)[0];n[o]=l}else n.tags=r;if(typeof s=="object"){let[o,l]=Object.entries(s)[0];n[o]=l}else n.link=s;n.parentBoundary=qe,n.wrap=yr(),xi=qe,qe=t,hr.push(xi)},mm=function(t,e,i,r,s){if(t===null||e===null)return;let n={};const a=Li.find(o=>o.alias===t);if(a&&t===a.alias?n=a:(n.alias=t,Li.push(n)),e==null?n.label={text:""}:n.label={text:e},i==null)n.type={text:"container"};else if(typeof i=="object"){let[o,l]=Object.entries(i)[0];n[o]={text:l}}else n.type={text:i};if(typeof r=="object"){let[o,l]=Object.entries(r)[0];n[o]=l}else n.tags=r;if(typeof s=="object"){let[o,l]=Object.entries(s)[0];n[o]=l}else n.link=s;n.parentBoundary=qe,n.wrap=yr(),xi=qe,qe=t,hr.push(xi)},xm=function(t,e,i,r,s,n,a,o){if(e===null||i===null)return;let l={};const h=Li.find(u=>u.alias===e);if(h&&e===h.alias?l=h:(l.alias=e,Li.push(l)),i==null?l.label={text:""}:l.label={text:i},r==null)l.type={text:"node"};else if(typeof r=="object"){let[u,p]=Object.entries(r)[0];l[u]={text:p}}else l.type={text:r};if(s==null)l.descr={text:""};else if(typeof s=="object"){let[u,p]=Object.entries(s)[0];l[u]={text:p}}else l.descr={text:s};if(typeof a=="object"){let[u,p]=Object.entries(a)[0];l[u]=p}else l.tags=a;if(typeof o=="object"){let[u,p]=Object.entries(o)[0];l[u]=p}else l.link=o;l.nodeType=t,l.parentBoundary=qe,l.wrap=yr(),xi=qe,qe=e,hr.push(xi)},bm=function(){qe=xi,hr.pop(),xi=hr.pop(),hr.push(xi)},km=function(t,e,i,r,s,n,a,o,l,h,u){let p=ki.find(d=>d.alias===e);if(!(p===void 0&&(p=Li.find(d=>d.alias===e),p===void 0))){if(i!=null)if(typeof i=="object"){let[d,g]=Object.entries(i)[0];p[d]=g}else p.bgColor=i;if(r!=null)if(typeof r=="object"){let[d,g]=Object.entries(r)[0];p[d]=g}else p.fontColor=r;if(s!=null)if(typeof s=="object"){let[d,g]=Object.entries(s)[0];p[d]=g}else p.borderColor=s;if(n!=null)if(typeof n=="object"){let[d,g]=Object.entries(n)[0];p[d]=g}else p.shadowing=n;if(a!=null)if(typeof a=="object"){let[d,g]=Object.entries(a)[0];p[d]=g}else p.shape=a;if(o!=null)if(typeof o=="object"){let[d,g]=Object.entries(o)[0];p[d]=g}else p.sprite=o;if(l!=null)if(typeof l=="object"){let[d,g]=Object.entries(l)[0];p[d]=g}else p.techn=l;if(h!=null)if(typeof h=="object"){let[d,g]=Object.entries(h)[0];p[d]=g}else p.legendText=h;if(u!=null)if(typeof u=="object"){let[d,g]=Object.entries(u)[0];p[d]=g}else p.legendSprite=u}},_m=function(t,e,i,r,s,n,a){const o=Bs.find(l=>l.from===e&&l.to===i);if(o!==void 0){if(r!=null)if(typeof r=="object"){let[l,h]=Object.entries(r)[0];o[l]=h}else o.textColor=r;if(s!=null)if(typeof s=="object"){let[l,h]=Object.entries(s)[0];o[l]=h}else o.lineColor=s;if(n!=null)if(typeof n=="object"){let[l,h]=Object.entries(n)[0];o[l]=parseInt(h)}else o.offsetX=parseInt(n);if(a!=null)if(typeof a=="object"){let[l,h]=Object.entries(a)[0];o[l]=parseInt(h)}else o.offsetY=parseInt(a)}},Tm=function(t,e,i){let r=In,s=Dn;if(typeof e=="object"){const n=Object.values(e)[0];r=parseInt(n)}else r=parseInt(e);if(typeof i=="object"){const n=Object.values(i)[0];s=parseInt(n)}else s=parseInt(i);r>=1&&(In=r),s>=1&&(Dn=s)},Cm=function(){return In},Em=function(){return Dn},Sm=function(){return qe},vm=function(){return xi},B1=function(t){return t==null?ki:ki.filter(e=>e.parentBoundary===t)},wm=function(t){return ki.find(e=>e.alias===t)},Am=function(t){return Object.keys(B1(t))},Lm=function(t){return t==null?Li:Li.filter(e=>e.parentBoundary===t)},Bm=function(){return Bs},Im=function(){return Yo},Dm=function(t){Uo=t},yr=function(){return Uo},Fm=function(){ki=[],Li=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],xi="",qe="global",hr=[""],Bs=[],hr=[""],Yo="",Uo=!1,In=4,Dn=2},Rm={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25},Nm={FILLED:0,OPEN:1},Om={LEFTOF:0,RIGHTOF:1,OVER:2},Pm=function(t){Yo=ue(t,Y())},Va={addPersonOrSystem:fm,addPersonOrSystemBoundary:ym,addContainer:pm,addContainerBoundary:mm,addComponent:gm,addDeploymentNode:xm,popBoundaryParseStack:bm,addRel:dm,updateElStyle:km,updateRelStyle:_m,updateLayoutConfig:Tm,autoWrap:yr,setWrap:Dm,getC4ShapeArray:B1,getC4Shape:wm,getC4ShapeKeys:Am,getBoundarys:Lm,getCurrentBoundaryParse:Sm,getParentBoundaryParse:vm,getRels:Bm,getTitle:Im,getC4Type:hm,getC4ShapeInRow:Cm,getC4BoundaryInRow:Em,setAccTitle:Pe,getAccTitle:Ye,getAccDescription:He,setAccDescription:Ue,getConfig:()=>Y().c4,clear:Fm,LINETYPE:Rm,ARROWTYPE:Nm,PLACEMENT:Om,setTitle:Pm,setC4Type:um},Ho=function(t,e){return sa(t,e)},I1=function(t,e,i,r,s,n){const a=t.append("image");a.attr("width",e),a.attr("height",i),a.attr("x",r),a.attr("y",s);let o=n.startsWith("data:image/png;base64")?n:Dr.sanitizeUrl(n);a.attr("xlink:href",o)},Mm=(t,e,i)=>{const r=t.append("g");let s=0;for(let n of e){let a=n.textColor?n.textColor:"#444444",o=n.lineColor?n.lineColor:"#444444",l=n.offsetX?parseInt(n.offsetX):0,h=n.offsetY?parseInt(n.offsetY):0,u="";if(s===0){let d=r.append("line");d.attr("x1",n.startPoint.x),d.attr("y1",n.startPoint.y),d.attr("x2",n.endPoint.x),d.attr("y2",n.endPoint.y),d.attr("stroke-width","1"),d.attr("stroke",o),d.style("fill","none"),n.type!=="rel_b"&&d.attr("marker-end","url("+u+"#arrowhead)"),(n.type==="birel"||n.type==="rel_b")&&d.attr("marker-start","url("+u+"#arrowend)"),s=-1}else{let d=r.append("path");d.attr("fill","none").attr("stroke-width","1").attr("stroke",o).attr("d","Mstartx,starty Qcontrolx,controly stopx,stopy ".replaceAll("startx",n.startPoint.x).replaceAll("starty",n.startPoint.y).replaceAll("controlx",n.startPoint.x+(n.endPoint.x-n.startPoint.x)/2-(n.endPoint.x-n.startPoint.x)/4).replaceAll("controly",n.startPoint.y+(n.endPoint.y-n.startPoint.y)/2).replaceAll("stopx",n.endPoint.x).replaceAll("stopy",n.endPoint.y)),n.type!=="rel_b"&&d.attr("marker-end","url("+u+"#arrowhead)"),(n.type==="birel"||n.type==="rel_b")&&d.attr("marker-start","url("+u+"#arrowend)")}let p=i.messageFont();Xi(i)(n.label.text,r,Math.min(n.startPoint.x,n.endPoint.x)+Math.abs(n.endPoint.x-n.startPoint.x)/2+l,Math.min(n.startPoint.y,n.endPoint.y)+Math.abs(n.endPoint.y-n.startPoint.y)/2+h,n.label.width,n.label.height,{fill:a},p),n.techn&&n.techn.text!==""&&(p=i.messageFont(),Xi(i)("["+n.techn.text+"]",r,Math.min(n.startPoint.x,n.endPoint.x)+Math.abs(n.endPoint.x-n.startPoint.x)/2+l,Math.min(n.startPoint.y,n.endPoint.y)+Math.abs(n.endPoint.y-n.startPoint.y)/2+i.messageFontSize+5+h,Math.max(n.label.width,n.techn.width),n.techn.height,{fill:a,"font-style":"italic"},p))}},Vm=function(t,e,i){const r=t.append("g");let s=e.bgColor?e.bgColor:"none",n=e.borderColor?e.borderColor:"#444444",a=e.fontColor?e.fontColor:"black",o={"stroke-width":1,"stroke-dasharray":"7.0,7.0"};e.nodeType&&(o={"stroke-width":1});let l={x:e.x,y:e.y,fill:s,stroke:n,width:e.width,height:e.height,rx:2.5,ry:2.5,attrs:o};Ho(r,l);let h=i.boundaryFont();h.fontWeight="bold",h.fontSize=h.fontSize+2,h.fontColor=a,Xi(i)(e.label.text,r,e.x,e.y+e.label.Y,e.width,e.height,{fill:"#444444"},h),e.type&&e.type.text!==""&&(h=i.boundaryFont(),h.fontColor=a,Xi(i)(e.type.text,r,e.x,e.y+e.type.Y,e.width,e.height,{fill:"#444444"},h)),e.descr&&e.descr.text!==""&&(h=i.boundaryFont(),h.fontSize=h.fontSize-2,h.fontColor=a,Xi(i)(e.descr.text,r,e.x,e.y+e.descr.Y,e.width,e.height,{fill:"#444444"},h))},zm=function(t,e,i){var r;let s=e.bgColor?e.bgColor:i[e.typeC4Shape.text+"_bg_color"],n=e.borderColor?e.borderColor:i[e.typeC4Shape.text+"_border_color"],a=e.fontColor?e.fontColor:"#FFFFFF",o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";switch(e.typeC4Shape.text){case"person":o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";break;case"external_person":o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAB6ElEQVR4Xu2YLY+EMBCG9+dWr0aj0Wg0Go1Go0+j8Xdv2uTCvv1gpt0ebHKPuhDaeW4605Z9mJvx4AdXUyTUdd08z+u6flmWZRnHsWkafk9DptAwDPu+f0eAYtu2PEaGWuj5fCIZrBAC2eLBAnRCsEkkxmeaJp7iDJ2QMDdHsLg8SxKFEJaAo8lAXnmuOFIhTMpxxKATebo4UiFknuNo4OniSIXQyRxEA3YsnjGCVEjVXD7yLUAqxBGUyPv/Y4W2beMgGuS7kVQIBycH0fD+oi5pezQETxdHKmQKGk1eQEYldK+jw5GxPfZ9z7Mk0Qnhf1W1m3w//EUn5BDmSZsbR44QQLBEqrBHqOrmSKaQAxdnLArCrxZcM7A7ZKs4ioRq8LFC+NpC3WCBJsvpVw5edm9iEXFuyNfxXAgSwfrFQ1c0iNda8AdejvUgnktOtJQQxmcfFzGglc5WVCj7oDgFqU18boeFSs52CUh8LE8BIVQDT1ABrB0HtgSEYlX5doJnCwv9TXocKCaKbnwhdDKPq4lf3SwU3HLq4V/+WYhHVMa/3b4IlfyikAduCkcBc7mQ3/z/Qq/cTuikhkzB12Ae/mcJC9U+Vo8Ej1gWAtgbeGgFsAMHr50BIWOLCbezvhpBFUdY6EJuJ/QDW0XoMX60zZ0AAAAASUVORK5CYII=";break}const l=t.append("g");l.attr("class","person-man");const h=Nr();switch(e.typeC4Shape.text){case"person":case"external_person":case"system":case"external_system":case"container":case"external_container":case"component":case"external_component":h.x=e.x,h.y=e.y,h.fill=s,h.width=e.width,h.height=e.height,h.stroke=n,h.rx=2.5,h.ry=2.5,h.attrs={"stroke-width":.5},Ho(l,h);break;case"system_db":case"external_system_db":case"container_db":case"external_container_db":case"component_db":case"external_component_db":l.append("path").attr("fill",s).attr("stroke-width","0.5").attr("stroke",n).attr("d","Mstartx,startyc0,-10 half,-10 half,-10c0,0 half,0 half,10l0,heightc0,10 -half,10 -half,10c0,0 -half,0 -half,-10l0,-height".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("half",e.width/2).replaceAll("height",e.height)),l.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",n).attr("d","Mstartx,startyc0,10 half,10 half,10c0,0 half,0 half,-10".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("half",e.width/2));break;case"system_queue":case"external_system_queue":case"container_queue":case"external_container_queue":case"component_queue":case"external_component_queue":l.append("path").attr("fill",s).attr("stroke-width","0.5").attr("stroke",n).attr("d","Mstartx,startylwidth,0c5,0 5,half 5,halfc0,0 0,half -5,halfl-width,0c-5,0 -5,-half -5,-halfc0,0 0,-half 5,-half".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("width",e.width).replaceAll("half",e.height/2)),l.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",n).attr("d","Mstartx,startyc-5,0 -5,half -5,halfc0,half 5,half 5,half".replaceAll("startx",e.x+e.width).replaceAll("starty",e.y).replaceAll("half",e.height/2));break}let u=$m(i,e.typeC4Shape.text);switch(l.append("text").attr("fill",a).attr("font-family",u.fontFamily).attr("font-size",u.fontSize-2).attr("font-style","italic").attr("lengthAdjust","spacing").attr("textLength",e.typeC4Shape.width).attr("x",e.x+e.width/2-e.typeC4Shape.width/2).attr("y",e.y+e.typeC4Shape.Y).text("<<"+e.typeC4Shape.text+">>"),e.typeC4Shape.text){case"person":case"external_person":I1(l,48,48,e.x+e.width/2-24,e.y+e.image.Y,o);break}let p=i[e.typeC4Shape.text+"Font"]();return p.fontWeight="bold",p.fontSize=p.fontSize+2,p.fontColor=a,Xi(i)(e.label.text,l,e.x,e.y+e.label.Y,e.width,e.height,{fill:a},p),p=i[e.typeC4Shape.text+"Font"](),p.fontColor=a,e.techn&&((r=e.techn)==null?void 0:r.text)!==""?Xi(i)(e.techn.text,l,e.x,e.y+e.techn.Y,e.width,e.height,{fill:a,"font-style":"italic"},p):e.type&&e.type.text!==""&&Xi(i)(e.type.text,l,e.x,e.y+e.type.Y,e.width,e.height,{fill:a,"font-style":"italic"},p),e.descr&&e.descr.text!==""&&(p=i.personFont(),p.fontColor=a,Xi(i)(e.descr.text,l,e.x,e.y+e.descr.Y,e.width,e.height,{fill:a},p)),e.height},qm=function(t){t.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},Wm=function(t){t.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},Ym=function(t){t.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},Um=function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},Hm=function(t){t.append("defs").append("marker").attr("id","arrowend").attr("refX",1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 10 0 L 0 5 L 10 10 z")},Gm=function(t){t.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},jm=function(t){t.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},Xm=function(t){const i=t.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",16).attr("refY",4);i.append("path").attr("fill","black").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 9,2 V 6 L16,4 Z"),i.append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 0,1 L 6,7 M 6,1 L 0,7")},$m=(t,e)=>({fontFamily:t[e+"FontFamily"],fontSize:t[e+"FontSize"],fontWeight:t[e+"FontWeight"]}),Xi=function(){function t(s,n,a,o,l,h,u){const p=n.append("text").attr("x",a+l/2).attr("y",o+h/2+5).style("text-anchor","middle").text(s);r(p,u)}function e(s,n,a,o,l,h,u,p){const{fontSize:d,fontFamily:g,fontWeight:y}=p,x=s.split(mt.lineBreakRegex);for(let _=0;_<x.length;_++){const v=_*d-d*(x.length-1)/2,E=n.append("text").attr("x",a+l/2).attr("y",o).style("text-anchor","middle").attr("dominant-baseline","middle").style("font-size",d).style("font-weight",y).style("font-family",g);E.append("tspan").attr("dy",v).text(x[_]).attr("alignment-baseline","mathematical"),r(E,u)}}function i(s,n,a,o,l,h,u,p){const d=n.append("switch"),y=d.append("foreignObject").attr("x",a).attr("y",o).attr("width",l).attr("height",h).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");y.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(s),e(s,d,a,o,l,h,u,p),r(y,u)}function r(s,n){for(const a in n)n.hasOwnProperty(a)&&s.attr(a,n[a])}return function(s){return s.textPlacement==="fo"?i:s.textPlacement==="old"?t:e}}(),Ci={drawRect:Ho,drawBoundary:Vm,drawC4Shape:zm,drawRels:Mm,drawImage:I1,insertArrowHead:Um,insertArrowEnd:Hm,insertArrowFilledHead:Gm,insertDynamicNumber:jm,insertArrowCrossHead:Xm,insertDatabaseIcon:qm,insertComputerIcon:Wm,insertClockIcon:Ym};let Fn=0,Rn=0,D1=4,za=2;Bn.yy=Va;let Tt={};class F1{constructor(e){this.name="",this.data={},this.data.startx=void 0,this.data.stopx=void 0,this.data.starty=void 0,this.data.stopy=void 0,this.data.widthLimit=void 0,this.nextData={},this.nextData.startx=void 0,this.nextData.stopx=void 0,this.nextData.starty=void 0,this.nextData.stopy=void 0,this.nextData.cnt=0,qa(e.db.getConfig())}setData(e,i,r,s){this.nextData.startx=this.data.startx=e,this.nextData.stopx=this.data.stopx=i,this.nextData.starty=this.data.starty=r,this.nextData.stopy=this.data.stopy=s}updateVal(e,i,r,s){e[i]===void 0?e[i]=r:e[i]=s(r,e[i])}insert(e){this.nextData.cnt=this.nextData.cnt+1;let i=this.nextData.startx===this.nextData.stopx?this.nextData.stopx+e.margin:this.nextData.stopx+e.margin*2,r=i+e.width,s=this.nextData.starty+e.margin*2,n=s+e.height;(i>=this.data.widthLimit||r>=this.data.widthLimit||this.nextData.cnt>D1)&&(i=this.nextData.startx+e.margin+Tt.nextLinePaddingX,s=this.nextData.stopy+e.margin*2,this.nextData.stopx=r=i+e.width,this.nextData.starty=this.nextData.stopy,this.nextData.stopy=n=s+e.height,this.nextData.cnt=1),e.x=i,e.y=s,this.updateVal(this.data,"startx",i,Math.min),this.updateVal(this.data,"starty",s,Math.min),this.updateVal(this.data,"stopx",r,Math.max),this.updateVal(this.data,"stopy",n,Math.max),this.updateVal(this.nextData,"startx",i,Math.min),this.updateVal(this.nextData,"starty",s,Math.min),this.updateVal(this.nextData,"stopx",r,Math.max),this.updateVal(this.nextData,"stopy",n,Math.max)}init(e){this.name="",this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,widthLimit:void 0},this.nextData={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,cnt:0},qa(e.db.getConfig())}bumpLastMargin(e){this.data.stopx+=e,this.data.stopy+=e}}const qa=function(t){Ae(Tt,t),t.fontFamily&&(Tt.personFontFamily=Tt.systemFontFamily=Tt.messageFontFamily=t.fontFamily),t.fontSize&&(Tt.personFontSize=Tt.systemFontSize=Tt.messageFontSize=t.fontSize),t.fontWeight&&(Tt.personFontWeight=Tt.systemFontWeight=Tt.messageFontWeight=t.fontWeight)},us=(t,e)=>({fontFamily:t[e+"FontFamily"],fontSize:t[e+"FontSize"],fontWeight:t[e+"FontWeight"]}),pn=t=>({fontFamily:t.boundaryFontFamily,fontSize:t.boundaryFontSize,fontWeight:t.boundaryFontWeight}),Km=t=>({fontFamily:t.messageFontFamily,fontSize:t.messageFontSize,fontWeight:t.messageFontWeight});function gi(t,e,i,r,s){if(!e[t].width)if(i)e[t].text=Ah(e[t].text,s,r),e[t].textLines=e[t].text.split(mt.lineBreakRegex).length,e[t].width=s,e[t].height=Pa(e[t].text,r);else{let n=e[t].text.split(mt.lineBreakRegex);e[t].textLines=n.length;let a=0;e[t].height=0,e[t].width=0;for(const o of n)e[t].width=Math.max(vi(o,r),e[t].width),a=Pa(o,r),e[t].height=e[t].height+a}}const R1=function(t,e,i){e.x=i.data.startx,e.y=i.data.starty,e.width=i.data.stopx-i.data.startx,e.height=i.data.stopy-i.data.starty,e.label.y=Tt.c4ShapeMargin-35;let r=e.wrap&&Tt.wrap,s=pn(Tt);s.fontSize=s.fontSize+2,s.fontWeight="bold";let n=vi(e.label.text,s);gi("label",e,r,s,n),Ci.drawBoundary(t,e,Tt)},N1=function(t,e,i,r){let s=0;for(const n of r){s=0;const a=i[n];let o=us(Tt,a.typeC4Shape.text);switch(o.fontSize=o.fontSize-2,a.typeC4Shape.width=vi("«"+a.typeC4Shape.text+"»",o),a.typeC4Shape.height=o.fontSize+2,a.typeC4Shape.Y=Tt.c4ShapePadding,s=a.typeC4Shape.Y+a.typeC4Shape.height-4,a.image={width:0,height:0,Y:0},a.typeC4Shape.text){case"person":case"external_person":a.image.width=48,a.image.height=48,a.image.Y=s,s=a.image.Y+a.image.height;break}a.sprite&&(a.image.width=48,a.image.height=48,a.image.Y=s,s=a.image.Y+a.image.height);let l=a.wrap&&Tt.wrap,h=Tt.width-Tt.c4ShapePadding*2,u=us(Tt,a.typeC4Shape.text);if(u.fontSize=u.fontSize+2,u.fontWeight="bold",gi("label",a,l,u,h),a.label.Y=s+8,s=a.label.Y+a.label.height,a.type&&a.type.text!==""){a.type.text="["+a.type.text+"]";let g=us(Tt,a.typeC4Shape.text);gi("type",a,l,g,h),a.type.Y=s+5,s=a.type.Y+a.type.height}else if(a.techn&&a.techn.text!==""){a.techn.text="["+a.techn.text+"]";let g=us(Tt,a.techn.text);gi("techn",a,l,g,h),a.techn.Y=s+5,s=a.techn.Y+a.techn.height}let p=s,d=a.label.width;if(a.descr&&a.descr.text!==""){let g=us(Tt,a.typeC4Shape.text);gi("descr",a,l,g,h),a.descr.Y=s+20,s=a.descr.Y+a.descr.height,d=Math.max(a.label.width,a.descr.width),p=s-a.descr.textLines*5}d=d+Tt.c4ShapePadding,a.width=Math.max(a.width||Tt.width,d,Tt.width),a.height=Math.max(a.height||Tt.height,p,Tt.height),a.margin=a.margin||Tt.c4ShapeMargin,t.insert(a),Ci.drawC4Shape(e,a,Tt)}t.bumpLastMargin(Tt.c4ShapeMargin)};class li{constructor(e,i){this.x=e,this.y=i}}let cc=function(t,e){let i=t.x,r=t.y,s=e.x,n=e.y,a=i+t.width/2,o=r+t.height/2,l=Math.abs(i-s),h=Math.abs(r-n),u=h/l,p=t.height/t.width,d=null;return r==n&&i<s?d=new li(i+t.width,o):r==n&&i>s?d=new li(i,o):i==s&&r<n?d=new li(a,r+t.height):i==s&&r>n&&(d=new li(a,r)),i>s&&r<n?p>=u?d=new li(i,o+u*t.width/2):d=new li(a-l/h*t.height/2,r+t.height):i<s&&r<n?p>=u?d=new li(i+t.width,o+u*t.width/2):d=new li(a+l/h*t.height/2,r+t.height):i<s&&r>n?p>=u?d=new li(i+t.width,o-u*t.width/2):d=new li(a+t.height/2*l/h,r):i>s&&r>n&&(p>=u?d=new li(i,o-t.width/2*u):d=new li(a-t.height/2*l/h,r)),d},Qm=function(t,e){let i={x:0,y:0};i.x=e.x+e.width/2,i.y=e.y+e.height/2;let r=cc(t,i);i.x=t.x+t.width/2,i.y=t.y+t.height/2;let s=cc(e,i);return{startPoint:r,endPoint:s}};const Zm=function(t,e,i,r){let s=0;for(let n of e){s=s+1;let a=n.wrap&&Tt.wrap,o=Km(Tt);r.db.getC4Type()==="C4Dynamic"&&(n.label.text=s+": "+n.label.text);let h=vi(n.label.text,o);gi("label",n,a,o,h),n.techn&&n.techn.text!==""&&(h=vi(n.techn.text,o),gi("techn",n,a,o,h)),n.descr&&n.descr.text!==""&&(h=vi(n.descr.text,o),gi("descr",n,a,o,h));let u=i(n.from),p=i(n.to),d=Qm(u,p);n.startPoint=d.startPoint,n.endPoint=d.endPoint}Ci.drawRels(t,e,Tt)};function O1(t,e,i,r,s){let n=new F1(s);n.data.widthLimit=i.data.widthLimit/Math.min(za,r.length);for(let[a,o]of r.entries()){let l=0;o.image={width:0,height:0,Y:0},o.sprite&&(o.image.width=48,o.image.height=48,o.image.Y=l,l=o.image.Y+o.image.height);let h=o.wrap&&Tt.wrap,u=pn(Tt);if(u.fontSize=u.fontSize+2,u.fontWeight="bold",gi("label",o,h,u,n.data.widthLimit),o.label.Y=l+8,l=o.label.Y+o.label.height,o.type&&o.type.text!==""){o.type.text="["+o.type.text+"]";let y=pn(Tt);gi("type",o,h,y,n.data.widthLimit),o.type.Y=l+5,l=o.type.Y+o.type.height}if(o.descr&&o.descr.text!==""){let y=pn(Tt);y.fontSize=y.fontSize-2,gi("descr",o,h,y,n.data.widthLimit),o.descr.Y=l+20,l=o.descr.Y+o.descr.height}if(a==0||a%za===0){let y=i.data.startx+Tt.diagramMarginX,x=i.data.stopy+Tt.diagramMarginY+l;n.setData(y,y,x,x)}else{let y=n.data.stopx!==n.data.startx?n.data.stopx+Tt.diagramMarginX:n.data.startx,x=n.data.starty;n.setData(y,y,x,x)}n.name=o.alias;let p=s.db.getC4ShapeArray(o.alias),d=s.db.getC4ShapeKeys(o.alias);d.length>0&&N1(n,t,p,d),e=o.alias;let g=s.db.getBoundarys(e);g.length>0&&O1(t,e,n,g,s),o.alias!=="global"&&R1(t,o,n),i.data.stopy=Math.max(n.data.stopy+Tt.c4ShapeMargin,i.data.stopy),i.data.stopx=Math.max(n.data.stopx+Tt.c4ShapeMargin,i.data.stopx),Fn=Math.max(Fn,i.data.stopx),Rn=Math.max(Rn,i.data.stopy)}}const Jm=function(t,e,i,r){Tt=Y().c4;const s=Y().securityLevel;let n;s==="sandbox"&&(n=yt("#i"+e));const a=s==="sandbox"?yt(n.nodes()[0].contentDocument.body):yt("body");let o=r.db;r.db.setWrap(Tt.wrap),D1=o.getC4ShapeInRow(),za=o.getC4BoundaryInRow(),I.debug(`C:${JSON.stringify(Tt,null,2)}`);const l=s==="sandbox"?a.select(`[id="${e}"]`):yt(`[id="${e}"]`);Ci.insertComputerIcon(l),Ci.insertDatabaseIcon(l),Ci.insertClockIcon(l);let h=new F1(r);h.setData(Tt.diagramMarginX,Tt.diagramMarginX,Tt.diagramMarginY,Tt.diagramMarginY),h.data.widthLimit=screen.availWidth,Fn=Tt.diagramMarginX,Rn=Tt.diagramMarginY;const u=r.db.getTitle();let p=r.db.getBoundarys("");O1(l,"",h,p,r),Ci.insertArrowHead(l),Ci.insertArrowEnd(l),Ci.insertArrowCrossHead(l),Ci.insertArrowFilledHead(l),Zm(l,r.db.getRels(),r.db.getC4Shape,r),h.data.stopx=Fn,h.data.stopy=Rn;const d=h.data;let y=d.stopy-d.starty+2*Tt.diagramMarginY;const _=d.stopx-d.startx+2*Tt.diagramMarginX;u&&l.append("text").text(u).attr("x",(d.stopx-d.startx)/2-4*Tt.diagramMarginX).attr("y",d.starty+Tt.diagramMarginY),Ne(l,y,_,Tt.useMaxWidth);const v=u?60:0;l.attr("viewBox",d.startx-Tt.diagramMarginX+" -"+(Tt.diagramMarginY+v)+" "+_+" "+(y+v)),I.debug("models:",d)},hc={drawPersonOrSystemArray:N1,drawBoundary:R1,setConf:qa,draw:Jm},tx=t=>`.person {
    stroke: ${t.personBorder};
    fill: ${t.personBkg};
  }
`,ex=tx,ix={parser:cm,db:Va,renderer:hc,styles:ex,init:({c4:t,wrap:e})=>{hc.setConf(t),Va.setWrap(e)}},rx=Object.freeze(Object.defineProperty({__proto__:null,diagram:ix},Symbol.toStringTag,{value:"Module"}));var Wa=function(){var t=function(nr,Et,Lt,Mt){for(Lt=Lt||{},Mt=nr.length;Mt--;Lt[nr[Mt]]=Et);return Lt},e=[1,4],i=[1,3],r=[1,5],s=[1,8,9,10,11,27,34,36,38,42,58,81,82,83,84,85,86,99,102,103,106,108,111,112,113,118,119,120,121],n=[2,2],a=[1,13],o=[1,14],l=[1,15],h=[1,16],u=[1,23],p=[1,25],d=[1,26],g=[1,27],y=[1,49],x=[1,48],_=[1,29],v=[1,30],E=[1,31],F=[1,32],L=[1,33],T=[1,44],k=[1,46],A=[1,42],S=[1,47],m=[1,43],C=[1,50],f=[1,45],B=[1,51],b=[1,52],P=[1,34],U=[1,35],N=[1,36],w=[1,37],R=[1,57],D=[1,8,9,10,11,27,32,34,36,38,42,58,81,82,83,84,85,86,99,102,103,106,108,111,112,113,118,119,120,121],V=[1,61],z=[1,60],st=[1,62],j=[8,9,11,73,75],dt=[1,88],K=[1,93],G=[1,92],tt=[1,89],nt=[1,85],Q=[1,91],J=[1,87],O=[1,94],at=[1,90],W=[1,95],ft=[1,86],M=[8,9,10,11,73,75],wt=[8,9,10,11,44,73,75],X=[8,9,10,11,29,42,44,46,48,50,52,54,56,58,61,63,65,66,68,73,75,86,99,102,103,106,108,111,112,113],St=[8,9,11,42,58,73,75,86,99,102,103,106,108,111,112,113],bt=[42,58,86,99,102,103,106,108,111,112,113],Vt=[1,121],Bt=[1,120],Wt=[1,128],pt=[1,142],ut=[1,143],ot=[1,144],lt=[1,145],ht=[1,130],$=[1,132],rt=[1,136],it=[1,137],ct=[1,138],ee=[1,139],Qt=[1,140],de=[1,141],zt=[1,146],Gt=[1,147],qt=[1,126],Se=[1,127],fe=[1,134],rr=[1,129],Or=[1,133],xe=[1,131],jt=[8,9,10,11,27,32,34,36,38,42,58,81,82,83,84,85,86,99,102,103,106,108,111,112,113,118,119,120,121],ie=[1,149],Ot=[8,9,11],Zt=[8,9,10,11,14,42,58,86,102,103,106,108,111,112,113],Dt=[1,169],Yt=[1,165],Ut=[1,166],Pt=[1,170],Nt=[1,167],It=[1,168],Be=[75,113,116],Xt=[8,9,10,11,12,14,27,29,32,42,58,73,81,82,83,84,85,86,87,102,106,108,111,112,113],Fl=[10,103],sr=[31,47,49,51,53,55,60,62,64,65,67,69,113,114,115],Di=[1,235],Fi=[1,233],Ri=[1,237],Ni=[1,231],Oi=[1,232],Pi=[1,234],Mi=[1,236],Vi=[1,238],Pr=[1,255],Rl=[8,9,11,103],_i=[8,9,10,11,58,81,102,103,106,107,108,109],ba={trace:function(){},yy:{},symbols_:{error:2,start:3,graphConfig:4,document:5,line:6,statement:7,SEMI:8,NEWLINE:9,SPACE:10,EOF:11,GRAPH:12,NODIR:13,DIR:14,FirstStmtSeperator:15,ending:16,endToken:17,spaceList:18,spaceListNewline:19,verticeStatement:20,separator:21,styleStatement:22,linkStyleStatement:23,classDefStatement:24,classStatement:25,clickStatement:26,subgraph:27,textNoTags:28,SQS:29,text:30,SQE:31,end:32,direction:33,acc_title:34,acc_title_value:35,acc_descr:36,acc_descr_value:37,acc_descr_multiline_value:38,link:39,node:40,styledVertex:41,AMP:42,vertex:43,STYLE_SEPARATOR:44,idString:45,DOUBLECIRCLESTART:46,DOUBLECIRCLEEND:47,PS:48,PE:49,"(-":50,"-)":51,STADIUMSTART:52,STADIUMEND:53,SUBROUTINESTART:54,SUBROUTINEEND:55,VERTEX_WITH_PROPS_START:56,"NODE_STRING[field]":57,COLON:58,"NODE_STRING[value]":59,PIPE:60,CYLINDERSTART:61,CYLINDEREND:62,DIAMOND_START:63,DIAMOND_STOP:64,TAGEND:65,TRAPSTART:66,TRAPEND:67,INVTRAPSTART:68,INVTRAPEND:69,linkStatement:70,arrowText:71,TESTSTR:72,START_LINK:73,edgeText:74,LINK:75,edgeTextToken:76,STR:77,MD_STR:78,textToken:79,keywords:80,STYLE:81,LINKSTYLE:82,CLASSDEF:83,CLASS:84,CLICK:85,DOWN:86,UP:87,textNoTagsToken:88,stylesOpt:89,"idString[vertex]":90,"idString[class]":91,CALLBACKNAME:92,CALLBACKARGS:93,HREF:94,LINK_TARGET:95,"STR[link]":96,"STR[tooltip]":97,alphaNum:98,DEFAULT:99,numList:100,INTERPOLATE:101,NUM:102,COMMA:103,style:104,styleComponent:105,NODE_STRING:106,UNIT:107,BRKT:108,PCT:109,idStringToken:110,MINUS:111,MULT:112,UNICODE_TEXT:113,TEXT:114,TAGSTART:115,EDGE_TEXT:116,alphaNumToken:117,direction_tb:118,direction_bt:119,direction_rl:120,direction_lr:121,$accept:0,$end:1},terminals_:{2:"error",8:"SEMI",9:"NEWLINE",10:"SPACE",11:"EOF",12:"GRAPH",13:"NODIR",14:"DIR",27:"subgraph",29:"SQS",31:"SQE",32:"end",34:"acc_title",35:"acc_title_value",36:"acc_descr",37:"acc_descr_value",38:"acc_descr_multiline_value",42:"AMP",44:"STYLE_SEPARATOR",46:"DOUBLECIRCLESTART",47:"DOUBLECIRCLEEND",48:"PS",49:"PE",50:"(-",51:"-)",52:"STADIUMSTART",53:"STADIUMEND",54:"SUBROUTINESTART",55:"SUBROUTINEEND",56:"VERTEX_WITH_PROPS_START",57:"NODE_STRING[field]",58:"COLON",59:"NODE_STRING[value]",60:"PIPE",61:"CYLINDERSTART",62:"CYLINDEREND",63:"DIAMOND_START",64:"DIAMOND_STOP",65:"TAGEND",66:"TRAPSTART",67:"TRAPEND",68:"INVTRAPSTART",69:"INVTRAPEND",72:"TESTSTR",73:"START_LINK",75:"LINK",77:"STR",78:"MD_STR",81:"STYLE",82:"LINKSTYLE",83:"CLASSDEF",84:"CLASS",85:"CLICK",86:"DOWN",87:"UP",90:"idString[vertex]",91:"idString[class]",92:"CALLBACKNAME",93:"CALLBACKARGS",94:"HREF",95:"LINK_TARGET",96:"STR[link]",97:"STR[tooltip]",99:"DEFAULT",101:"INTERPOLATE",102:"NUM",103:"COMMA",106:"NODE_STRING",107:"UNIT",108:"BRKT",109:"PCT",111:"MINUS",112:"MULT",113:"UNICODE_TEXT",114:"TEXT",115:"TAGSTART",116:"EDGE_TEXT",118:"direction_tb",119:"direction_bt",120:"direction_rl",121:"direction_lr"},productions_:[0,[3,2],[5,0],[5,2],[6,1],[6,1],[6,1],[6,1],[6,1],[4,2],[4,2],[4,2],[4,3],[16,2],[16,1],[17,1],[17,1],[17,1],[15,1],[15,1],[15,2],[19,2],[19,2],[19,1],[19,1],[18,2],[18,1],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[7,9],[7,6],[7,4],[7,1],[7,2],[7,2],[7,1],[21,1],[21,1],[21,1],[20,3],[20,4],[20,2],[20,1],[40,1],[40,5],[41,1],[41,3],[43,4],[43,4],[43,6],[43,4],[43,4],[43,4],[43,8],[43,4],[43,4],[43,4],[43,6],[43,4],[43,4],[43,4],[43,4],[43,4],[43,1],[39,2],[39,3],[39,3],[39,1],[39,3],[74,1],[74,2],[74,1],[74,1],[70,1],[71,3],[30,1],[30,2],[30,1],[30,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[28,1],[28,2],[28,1],[28,1],[24,5],[25,5],[26,2],[26,4],[26,3],[26,5],[26,3],[26,5],[26,5],[26,7],[26,2],[26,4],[26,2],[26,4],[26,4],[26,6],[22,5],[23,5],[23,5],[23,9],[23,9],[23,7],[23,7],[100,1],[100,3],[89,1],[89,3],[104,1],[104,2],[105,1],[105,1],[105,1],[105,1],[105,1],[105,1],[105,1],[105,1],[110,1],[110,1],[110,1],[110,1],[110,1],[110,1],[110,1],[110,1],[110,1],[110,1],[110,1],[79,1],[79,1],[79,1],[79,1],[88,1],[88,1],[88,1],[88,1],[88,1],[88,1],[88,1],[88,1],[88,1],[88,1],[88,1],[76,1],[76,1],[117,1],[117,1],[117,1],[117,1],[117,1],[117,1],[117,1],[117,1],[117,1],[117,1],[117,1],[45,1],[45,2],[98,1],[98,2],[33,1],[33,1],[33,1],[33,1]],performAction:function(Et,Lt,Mt,xt,re,q,hs){var H=q.length-1;switch(re){case 2:this.$=[];break;case 3:(!Array.isArray(q[H])||q[H].length>0)&&q[H-1].push(q[H]),this.$=q[H-1];break;case 4:case 176:this.$=q[H];break;case 11:xt.setDirection("TB"),this.$="TB";break;case 12:xt.setDirection(q[H-1]),this.$=q[H-1];break;case 27:this.$=q[H-1].nodes;break;case 28:case 29:case 30:case 31:case 32:this.$=[];break;case 33:this.$=xt.addSubGraph(q[H-6],q[H-1],q[H-4]);break;case 34:this.$=xt.addSubGraph(q[H-3],q[H-1],q[H-3]);break;case 35:this.$=xt.addSubGraph(void 0,q[H-1],void 0);break;case 37:this.$=q[H].trim(),xt.setAccTitle(this.$);break;case 38:case 39:this.$=q[H].trim(),xt.setAccDescription(this.$);break;case 43:xt.addLink(q[H-2].stmt,q[H],q[H-1]),this.$={stmt:q[H],nodes:q[H].concat(q[H-2].nodes)};break;case 44:xt.addLink(q[H-3].stmt,q[H-1],q[H-2]),this.$={stmt:q[H-1],nodes:q[H-1].concat(q[H-3].nodes)};break;case 45:this.$={stmt:q[H-1],nodes:q[H-1]};break;case 46:this.$={stmt:q[H],nodes:q[H]};break;case 47:this.$=[q[H]];break;case 48:this.$=q[H-4].concat(q[H]);break;case 49:this.$=q[H];break;case 50:this.$=q[H-2],xt.setClass(q[H-2],q[H]);break;case 51:this.$=q[H-3],xt.addVertex(q[H-3],q[H-1],"square");break;case 52:this.$=q[H-3],xt.addVertex(q[H-3],q[H-1],"doublecircle");break;case 53:this.$=q[H-5],xt.addVertex(q[H-5],q[H-2],"circle");break;case 54:this.$=q[H-3],xt.addVertex(q[H-3],q[H-1],"ellipse");break;case 55:this.$=q[H-3],xt.addVertex(q[H-3],q[H-1],"stadium");break;case 56:this.$=q[H-3],xt.addVertex(q[H-3],q[H-1],"subroutine");break;case 57:this.$=q[H-7],xt.addVertex(q[H-7],q[H-1],"rect",void 0,void 0,void 0,Object.fromEntries([[q[H-5],q[H-3]]]));break;case 58:this.$=q[H-3],xt.addVertex(q[H-3],q[H-1],"cylinder");break;case 59:this.$=q[H-3],xt.addVertex(q[H-3],q[H-1],"round");break;case 60:this.$=q[H-3],xt.addVertex(q[H-3],q[H-1],"diamond");break;case 61:this.$=q[H-5],xt.addVertex(q[H-5],q[H-2],"hexagon");break;case 62:this.$=q[H-3],xt.addVertex(q[H-3],q[H-1],"odd");break;case 63:this.$=q[H-3],xt.addVertex(q[H-3],q[H-1],"trapezoid");break;case 64:this.$=q[H-3],xt.addVertex(q[H-3],q[H-1],"inv_trapezoid");break;case 65:this.$=q[H-3],xt.addVertex(q[H-3],q[H-1],"lean_right");break;case 66:this.$=q[H-3],xt.addVertex(q[H-3],q[H-1],"lean_left");break;case 67:this.$=q[H],xt.addVertex(q[H]);break;case 68:q[H-1].text=q[H],this.$=q[H-1];break;case 69:case 70:q[H-2].text=q[H-1],this.$=q[H-2];break;case 71:this.$=q[H];break;case 72:var ni=xt.destructLink(q[H],q[H-2]);this.$={type:ni.type,stroke:ni.stroke,length:ni.length,text:q[H-1]};break;case 73:this.$={text:q[H],type:"text"};break;case 74:this.$={text:q[H-1].text+""+q[H],type:q[H-1].type};break;case 75:this.$={text:q[H],type:"string"};break;case 76:this.$={text:q[H],type:"markdown"};break;case 77:var ni=xt.destructLink(q[H]);this.$={type:ni.type,stroke:ni.stroke,length:ni.length};break;case 78:this.$=q[H-1];break;case 79:this.$={text:q[H],type:"text"};break;case 80:this.$={text:q[H-1].text+""+q[H],type:q[H-1].type};break;case 81:this.$={text:q[H],type:"string"};break;case 82:case 97:this.$={text:q[H],type:"markdown"};break;case 94:this.$={text:q[H],type:"text"};break;case 95:this.$={text:q[H-1].text+""+q[H],type:q[H-1].type};break;case 96:this.$={text:q[H],type:"text"};break;case 98:this.$=q[H-4],xt.addClass(q[H-2],q[H]);break;case 99:this.$=q[H-4],xt.setClass(q[H-2],q[H]);break;case 100:case 108:this.$=q[H-1],xt.setClickEvent(q[H-1],q[H]);break;case 101:case 109:this.$=q[H-3],xt.setClickEvent(q[H-3],q[H-2]),xt.setTooltip(q[H-3],q[H]);break;case 102:this.$=q[H-2],xt.setClickEvent(q[H-2],q[H-1],q[H]);break;case 103:this.$=q[H-4],xt.setClickEvent(q[H-4],q[H-3],q[H-2]),xt.setTooltip(q[H-4],q[H]);break;case 104:this.$=q[H-2],xt.setLink(q[H-2],q[H]);break;case 105:this.$=q[H-4],xt.setLink(q[H-4],q[H-2]),xt.setTooltip(q[H-4],q[H]);break;case 106:this.$=q[H-4],xt.setLink(q[H-4],q[H-2],q[H]);break;case 107:this.$=q[H-6],xt.setLink(q[H-6],q[H-4],q[H]),xt.setTooltip(q[H-6],q[H-2]);break;case 110:this.$=q[H-1],xt.setLink(q[H-1],q[H]);break;case 111:this.$=q[H-3],xt.setLink(q[H-3],q[H-2]),xt.setTooltip(q[H-3],q[H]);break;case 112:this.$=q[H-3],xt.setLink(q[H-3],q[H-2],q[H]);break;case 113:this.$=q[H-5],xt.setLink(q[H-5],q[H-4],q[H]),xt.setTooltip(q[H-5],q[H-2]);break;case 114:this.$=q[H-4],xt.addVertex(q[H-2],void 0,void 0,q[H]);break;case 115:this.$=q[H-4],xt.updateLink([q[H-2]],q[H]);break;case 116:this.$=q[H-4],xt.updateLink(q[H-2],q[H]);break;case 117:this.$=q[H-8],xt.updateLinkInterpolate([q[H-6]],q[H-2]),xt.updateLink([q[H-6]],q[H]);break;case 118:this.$=q[H-8],xt.updateLinkInterpolate(q[H-6],q[H-2]),xt.updateLink(q[H-6],q[H]);break;case 119:this.$=q[H-6],xt.updateLinkInterpolate([q[H-4]],q[H]);break;case 120:this.$=q[H-6],xt.updateLinkInterpolate(q[H-4],q[H]);break;case 121:case 123:this.$=[q[H]];break;case 122:case 124:q[H-2].push(q[H]),this.$=q[H-2];break;case 126:this.$=q[H-1]+q[H];break;case 174:this.$=q[H];break;case 175:this.$=q[H-1]+""+q[H];break;case 177:this.$=q[H-1]+""+q[H];break;case 178:this.$={stmt:"dir",value:"TB"};break;case 179:this.$={stmt:"dir",value:"BT"};break;case 180:this.$={stmt:"dir",value:"RL"};break;case 181:this.$={stmt:"dir",value:"LR"};break}},table:[{3:1,4:2,9:e,10:i,12:r},{1:[3]},t(s,n,{5:6}),{4:7,9:e,10:i,12:r},{4:8,9:e,10:i,12:r},{13:[1,9],14:[1,10]},{1:[2,1],6:11,7:12,8:a,9:o,10:l,11:h,20:17,22:18,23:19,24:20,25:21,26:22,27:u,33:24,34:p,36:d,38:g,40:28,41:38,42:y,43:39,45:40,58:x,81:_,82:v,83:E,84:F,85:L,86:T,99:k,102:A,103:S,106:m,108:C,110:41,111:f,112:B,113:b,118:P,119:U,120:N,121:w},t(s,[2,9]),t(s,[2,10]),t(s,[2,11]),{8:[1,54],9:[1,55],10:R,15:53,18:56},t(D,[2,3]),t(D,[2,4]),t(D,[2,5]),t(D,[2,6]),t(D,[2,7]),t(D,[2,8]),{8:V,9:z,11:st,21:58,39:59,70:63,73:[1,64],75:[1,65]},{8:V,9:z,11:st,21:66},{8:V,9:z,11:st,21:67},{8:V,9:z,11:st,21:68},{8:V,9:z,11:st,21:69},{8:V,9:z,11:st,21:70},{8:V,9:z,10:[1,71],11:st,21:72},t(D,[2,36]),{35:[1,73]},{37:[1,74]},t(D,[2,39]),t(j,[2,46],{18:75,10:R}),{10:[1,76]},{10:[1,77]},{10:[1,78]},{10:[1,79]},{14:dt,42:K,58:G,77:[1,83],86:tt,92:[1,80],94:[1,81],98:82,102:nt,103:Q,106:J,108:O,111:at,112:W,113:ft,117:84},t(D,[2,178]),t(D,[2,179]),t(D,[2,180]),t(D,[2,181]),t(M,[2,47]),t(M,[2,49],{44:[1,96]}),t(wt,[2,67],{110:109,29:[1,97],42:y,46:[1,98],48:[1,99],50:[1,100],52:[1,101],54:[1,102],56:[1,103],58:x,61:[1,104],63:[1,105],65:[1,106],66:[1,107],68:[1,108],86:T,99:k,102:A,103:S,106:m,108:C,111:f,112:B,113:b}),t(X,[2,174]),t(X,[2,135]),t(X,[2,136]),t(X,[2,137]),t(X,[2,138]),t(X,[2,139]),t(X,[2,140]),t(X,[2,141]),t(X,[2,142]),t(X,[2,143]),t(X,[2,144]),t(X,[2,145]),t(s,[2,12]),t(s,[2,18]),t(s,[2,19]),{9:[1,110]},t(St,[2,26],{18:111,10:R}),t(D,[2,27]),{40:112,41:38,42:y,43:39,45:40,58:x,86:T,99:k,102:A,103:S,106:m,108:C,110:41,111:f,112:B,113:b},t(D,[2,40]),t(D,[2,41]),t(D,[2,42]),t(bt,[2,71],{71:113,60:[1,115],72:[1,114]}),{74:116,76:117,77:[1,118],78:[1,119],113:Vt,116:Bt},t([42,58,60,72,86,99,102,103,106,108,111,112,113],[2,77]),t(D,[2,28]),t(D,[2,29]),t(D,[2,30]),t(D,[2,31]),t(D,[2,32]),{10:Wt,12:pt,14:ut,27:ot,28:122,32:lt,42:ht,58:$,73:rt,77:[1,124],78:[1,125],80:135,81:it,82:ct,83:ee,84:Qt,85:de,86:zt,87:Gt,88:123,102:qt,106:Se,108:fe,111:rr,112:Or,113:xe},t(jt,n,{5:148}),t(D,[2,37]),t(D,[2,38]),t(j,[2,45],{42:ie}),{42:y,45:150,58:x,86:T,99:k,102:A,103:S,106:m,108:C,110:41,111:f,112:B,113:b},{99:[1,151],100:152,102:[1,153]},{42:y,45:154,58:x,86:T,99:k,102:A,103:S,106:m,108:C,110:41,111:f,112:B,113:b},{42:y,45:155,58:x,86:T,99:k,102:A,103:S,106:m,108:C,110:41,111:f,112:B,113:b},t(Ot,[2,100],{10:[1,156],93:[1,157]}),{77:[1,158]},t(Ot,[2,108],{117:160,10:[1,159],14:dt,42:K,58:G,86:tt,102:nt,103:Q,106:J,108:O,111:at,112:W,113:ft}),t(Ot,[2,110],{10:[1,161]}),t(Zt,[2,176]),t(Zt,[2,163]),t(Zt,[2,164]),t(Zt,[2,165]),t(Zt,[2,166]),t(Zt,[2,167]),t(Zt,[2,168]),t(Zt,[2,169]),t(Zt,[2,170]),t(Zt,[2,171]),t(Zt,[2,172]),t(Zt,[2,173]),{42:y,45:162,58:x,86:T,99:k,102:A,103:S,106:m,108:C,110:41,111:f,112:B,113:b},{30:163,65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},{30:171,65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},{30:173,48:[1,172],65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},{30:174,65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},{30:175,65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},{30:176,65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},{106:[1,177]},{30:178,65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},{30:179,63:[1,180],65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},{30:181,65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},{30:182,65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},{30:183,65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},t(X,[2,175]),t(s,[2,20]),t(St,[2,25]),t(j,[2,43],{18:184,10:R}),t(bt,[2,68],{10:[1,185]}),{10:[1,186]},{30:187,65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},{75:[1,188],76:189,113:Vt,116:Bt},t(Be,[2,73]),t(Be,[2,75]),t(Be,[2,76]),t(Be,[2,161]),t(Be,[2,162]),{8:V,9:z,10:Wt,11:st,12:pt,14:ut,21:191,27:ot,29:[1,190],32:lt,42:ht,58:$,73:rt,80:135,81:it,82:ct,83:ee,84:Qt,85:de,86:zt,87:Gt,88:192,102:qt,106:Se,108:fe,111:rr,112:Or,113:xe},t(Xt,[2,94]),t(Xt,[2,96]),t(Xt,[2,97]),t(Xt,[2,150]),t(Xt,[2,151]),t(Xt,[2,152]),t(Xt,[2,153]),t(Xt,[2,154]),t(Xt,[2,155]),t(Xt,[2,156]),t(Xt,[2,157]),t(Xt,[2,158]),t(Xt,[2,159]),t(Xt,[2,160]),t(Xt,[2,83]),t(Xt,[2,84]),t(Xt,[2,85]),t(Xt,[2,86]),t(Xt,[2,87]),t(Xt,[2,88]),t(Xt,[2,89]),t(Xt,[2,90]),t(Xt,[2,91]),t(Xt,[2,92]),t(Xt,[2,93]),{6:11,7:12,8:a,9:o,10:l,11:h,20:17,22:18,23:19,24:20,25:21,26:22,27:u,32:[1,193],33:24,34:p,36:d,38:g,40:28,41:38,42:y,43:39,45:40,58:x,81:_,82:v,83:E,84:F,85:L,86:T,99:k,102:A,103:S,106:m,108:C,110:41,111:f,112:B,113:b,118:P,119:U,120:N,121:w},{10:R,18:194},{10:[1,195],42:y,58:x,86:T,99:k,102:A,103:S,106:m,108:C,110:109,111:f,112:B,113:b},{10:[1,196]},{10:[1,197],103:[1,198]},t(Fl,[2,121]),{10:[1,199],42:y,58:x,86:T,99:k,102:A,103:S,106:m,108:C,110:109,111:f,112:B,113:b},{10:[1,200],42:y,58:x,86:T,99:k,102:A,103:S,106:m,108:C,110:109,111:f,112:B,113:b},{77:[1,201]},t(Ot,[2,102],{10:[1,202]}),t(Ot,[2,104],{10:[1,203]}),{77:[1,204]},t(Zt,[2,177]),{77:[1,205],95:[1,206]},t(M,[2,50],{110:109,42:y,58:x,86:T,99:k,102:A,103:S,106:m,108:C,111:f,112:B,113:b}),{31:[1,207],65:Dt,79:208,113:Pt,114:Nt,115:It},t(sr,[2,79]),t(sr,[2,81]),t(sr,[2,82]),t(sr,[2,146]),t(sr,[2,147]),t(sr,[2,148]),t(sr,[2,149]),{47:[1,209],65:Dt,79:208,113:Pt,114:Nt,115:It},{30:210,65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},{49:[1,211],65:Dt,79:208,113:Pt,114:Nt,115:It},{51:[1,212],65:Dt,79:208,113:Pt,114:Nt,115:It},{53:[1,213],65:Dt,79:208,113:Pt,114:Nt,115:It},{55:[1,214],65:Dt,79:208,113:Pt,114:Nt,115:It},{58:[1,215]},{62:[1,216],65:Dt,79:208,113:Pt,114:Nt,115:It},{64:[1,217],65:Dt,79:208,113:Pt,114:Nt,115:It},{30:218,65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},{31:[1,219],65:Dt,79:208,113:Pt,114:Nt,115:It},{65:Dt,67:[1,220],69:[1,221],79:208,113:Pt,114:Nt,115:It},{65:Dt,67:[1,223],69:[1,222],79:208,113:Pt,114:Nt,115:It},t(j,[2,44],{42:ie}),t(bt,[2,70]),t(bt,[2,69]),{60:[1,224],65:Dt,79:208,113:Pt,114:Nt,115:It},t(bt,[2,72]),t(Be,[2,74]),{30:225,65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},t(jt,n,{5:226}),t(Xt,[2,95]),t(D,[2,35]),{41:227,42:y,43:39,45:40,58:x,86:T,99:k,102:A,103:S,106:m,108:C,110:41,111:f,112:B,113:b},{10:Di,58:Fi,81:Ri,89:228,102:Ni,104:229,105:230,106:Oi,107:Pi,108:Mi,109:Vi},{10:Di,58:Fi,81:Ri,89:239,101:[1,240],102:Ni,104:229,105:230,106:Oi,107:Pi,108:Mi,109:Vi},{10:Di,58:Fi,81:Ri,89:241,101:[1,242],102:Ni,104:229,105:230,106:Oi,107:Pi,108:Mi,109:Vi},{102:[1,243]},{10:Di,58:Fi,81:Ri,89:244,102:Ni,104:229,105:230,106:Oi,107:Pi,108:Mi,109:Vi},{42:y,45:245,58:x,86:T,99:k,102:A,103:S,106:m,108:C,110:41,111:f,112:B,113:b},t(Ot,[2,101]),{77:[1,246]},{77:[1,247],95:[1,248]},t(Ot,[2,109]),t(Ot,[2,111],{10:[1,249]}),t(Ot,[2,112]),t(wt,[2,51]),t(sr,[2,80]),t(wt,[2,52]),{49:[1,250],65:Dt,79:208,113:Pt,114:Nt,115:It},t(wt,[2,59]),t(wt,[2,54]),t(wt,[2,55]),t(wt,[2,56]),{106:[1,251]},t(wt,[2,58]),t(wt,[2,60]),{64:[1,252],65:Dt,79:208,113:Pt,114:Nt,115:It},t(wt,[2,62]),t(wt,[2,63]),t(wt,[2,65]),t(wt,[2,64]),t(wt,[2,66]),t([10,42,58,86,99,102,103,106,108,111,112,113],[2,78]),{31:[1,253],65:Dt,79:208,113:Pt,114:Nt,115:It},{6:11,7:12,8:a,9:o,10:l,11:h,20:17,22:18,23:19,24:20,25:21,26:22,27:u,32:[1,254],33:24,34:p,36:d,38:g,40:28,41:38,42:y,43:39,45:40,58:x,81:_,82:v,83:E,84:F,85:L,86:T,99:k,102:A,103:S,106:m,108:C,110:41,111:f,112:B,113:b,118:P,119:U,120:N,121:w},t(M,[2,48]),t(Ot,[2,114],{103:Pr}),t(Rl,[2,123],{105:256,10:Di,58:Fi,81:Ri,102:Ni,106:Oi,107:Pi,108:Mi,109:Vi}),t(_i,[2,125]),t(_i,[2,127]),t(_i,[2,128]),t(_i,[2,129]),t(_i,[2,130]),t(_i,[2,131]),t(_i,[2,132]),t(_i,[2,133]),t(_i,[2,134]),t(Ot,[2,115],{103:Pr}),{10:[1,257]},t(Ot,[2,116],{103:Pr}),{10:[1,258]},t(Fl,[2,122]),t(Ot,[2,98],{103:Pr}),t(Ot,[2,99],{110:109,42:y,58:x,86:T,99:k,102:A,103:S,106:m,108:C,111:f,112:B,113:b}),t(Ot,[2,103]),t(Ot,[2,105],{10:[1,259]}),t(Ot,[2,106]),{95:[1,260]},{49:[1,261]},{60:[1,262]},{64:[1,263]},{8:V,9:z,11:st,21:264},t(D,[2,34]),{10:Di,58:Fi,81:Ri,102:Ni,104:265,105:230,106:Oi,107:Pi,108:Mi,109:Vi},t(_i,[2,126]),{14:dt,42:K,58:G,86:tt,98:266,102:nt,103:Q,106:J,108:O,111:at,112:W,113:ft,117:84},{14:dt,42:K,58:G,86:tt,98:267,102:nt,103:Q,106:J,108:O,111:at,112:W,113:ft,117:84},{95:[1,268]},t(Ot,[2,113]),t(wt,[2,53]),{30:269,65:Dt,77:Yt,78:Ut,79:164,113:Pt,114:Nt,115:It},t(wt,[2,61]),t(jt,n,{5:270}),t(Rl,[2,124],{105:256,10:Di,58:Fi,81:Ri,102:Ni,106:Oi,107:Pi,108:Mi,109:Vi}),t(Ot,[2,119],{117:160,10:[1,271],14:dt,42:K,58:G,86:tt,102:nt,103:Q,106:J,108:O,111:at,112:W,113:ft}),t(Ot,[2,120],{117:160,10:[1,272],14:dt,42:K,58:G,86:tt,102:nt,103:Q,106:J,108:O,111:at,112:W,113:ft}),t(Ot,[2,107]),{31:[1,273],65:Dt,79:208,113:Pt,114:Nt,115:It},{6:11,7:12,8:a,9:o,10:l,11:h,20:17,22:18,23:19,24:20,25:21,26:22,27:u,32:[1,274],33:24,34:p,36:d,38:g,40:28,41:38,42:y,43:39,45:40,58:x,81:_,82:v,83:E,84:F,85:L,86:T,99:k,102:A,103:S,106:m,108:C,110:41,111:f,112:B,113:b,118:P,119:U,120:N,121:w},{10:Di,58:Fi,81:Ri,89:275,102:Ni,104:229,105:230,106:Oi,107:Pi,108:Mi,109:Vi},{10:Di,58:Fi,81:Ri,89:276,102:Ni,104:229,105:230,106:Oi,107:Pi,108:Mi,109:Vi},t(wt,[2,57]),t(D,[2,33]),t(Ot,[2,117],{103:Pr}),t(Ot,[2,118],{103:Pr})],defaultActions:{},parseError:function(Et,Lt){if(Lt.recoverable)this.trace(Et);else{var Mt=new Error(Et);throw Mt.hash=Lt,Mt}},parse:function(Et){var Lt=this,Mt=[0],xt=[],re=[null],q=[],hs=this.table,H="",ni=0,Nl=0,Vd=2,Ol=1,zd=q.slice.call(arguments,1),ve=Object.create(this.lexer),mr={yy:{}};for(var _a in this.yy)Object.prototype.hasOwnProperty.call(this.yy,_a)&&(mr.yy[_a]=this.yy[_a]);ve.setInput(Et,mr.yy),mr.yy.lexer=ve,mr.yy.parser=this,typeof ve.yylloc>"u"&&(ve.yylloc={});var Ta=ve.yylloc;q.push(Ta);var qd=ve.options&&ve.options.ranges;typeof mr.yy.parseError=="function"?this.parseError=mr.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Wd(){var qi;return qi=xt.pop()||ve.lex()||Ol,typeof qi!="number"&&(qi instanceof Array&&(xt=qi,qi=xt.pop()),qi=Lt.symbols_[qi]||qi),qi}for(var je,xr,ai,Ca,Mr={},sn,zi,Pl,nn;;){if(xr=Mt[Mt.length-1],this.defaultActions[xr]?ai=this.defaultActions[xr]:((je===null||typeof je>"u")&&(je=Wd()),ai=hs[xr]&&hs[xr][je]),typeof ai>"u"||!ai.length||!ai[0]){var Ea="";nn=[];for(sn in hs[xr])this.terminals_[sn]&&sn>Vd&&nn.push("'"+this.terminals_[sn]+"'");ve.showPosition?Ea="Parse error on line "+(ni+1)+`:
`+ve.showPosition()+`
Expecting `+nn.join(", ")+", got '"+(this.terminals_[je]||je)+"'":Ea="Parse error on line "+(ni+1)+": Unexpected "+(je==Ol?"end of input":"'"+(this.terminals_[je]||je)+"'"),this.parseError(Ea,{text:ve.match,token:this.terminals_[je]||je,line:ve.yylineno,loc:Ta,expected:nn})}if(ai[0]instanceof Array&&ai.length>1)throw new Error("Parse Error: multiple actions possible at state: "+xr+", token: "+je);switch(ai[0]){case 1:Mt.push(je),re.push(ve.yytext),q.push(ve.yylloc),Mt.push(ai[1]),je=null,Nl=ve.yyleng,H=ve.yytext,ni=ve.yylineno,Ta=ve.yylloc;break;case 2:if(zi=this.productions_[ai[1]][1],Mr.$=re[re.length-zi],Mr._$={first_line:q[q.length-(zi||1)].first_line,last_line:q[q.length-1].last_line,first_column:q[q.length-(zi||1)].first_column,last_column:q[q.length-1].last_column},qd&&(Mr._$.range=[q[q.length-(zi||1)].range[0],q[q.length-1].range[1]]),Ca=this.performAction.apply(Mr,[H,Nl,ni,mr.yy,ai[1],re,q].concat(zd)),typeof Ca<"u")return Ca;zi&&(Mt=Mt.slice(0,-1*zi*2),re=re.slice(0,-1*zi),q=q.slice(0,-1*zi)),Mt.push(this.productions_[ai[1]][0]),re.push(Mr.$),q.push(Mr._$),Pl=hs[Mt[Mt.length-2]][Mt[Mt.length-1]],Mt.push(Pl);break;case 3:return!0}}return!0}},Md=function(){var nr={EOF:1,parseError:function(Lt,Mt){if(this.yy.parser)this.yy.parser.parseError(Lt,Mt);else throw new Error(Lt)},setInput:function(Et,Lt){return this.yy=Lt||this.yy||{},this._input=Et,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Et=this._input[0];this.yytext+=Et,this.yyleng++,this.offset++,this.match+=Et,this.matched+=Et;var Lt=Et.match(/(?:\r\n?|\n).*/g);return Lt?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Et},unput:function(Et){var Lt=Et.length,Mt=Et.split(/(?:\r\n?|\n)/g);this._input=Et+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Lt),this.offset-=Lt;var xt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Mt.length-1&&(this.yylineno-=Mt.length-1);var re=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Mt?(Mt.length===xt.length?this.yylloc.first_column:0)+xt[xt.length-Mt.length].length-Mt[0].length:this.yylloc.first_column-Lt},this.options.ranges&&(this.yylloc.range=[re[0],re[0]+this.yyleng-Lt]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(Et){this.unput(this.match.slice(Et))},pastInput:function(){var Et=this.matched.substr(0,this.matched.length-this.match.length);return(Et.length>20?"...":"")+Et.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Et=this.match;return Et.length<20&&(Et+=this._input.substr(0,20-Et.length)),(Et.substr(0,20)+(Et.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Et=this.pastInput(),Lt=new Array(Et.length+1).join("-");return Et+this.upcomingInput()+`
`+Lt+"^"},test_match:function(Et,Lt){var Mt,xt,re;if(this.options.backtrack_lexer&&(re={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(re.yylloc.range=this.yylloc.range.slice(0))),xt=Et[0].match(/(?:\r\n?|\n).*/g),xt&&(this.yylineno+=xt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:xt?xt[xt.length-1].length-xt[xt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Et[0].length},this.yytext+=Et[0],this.match+=Et[0],this.matches=Et,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Et[0].length),this.matched+=Et[0],Mt=this.performAction.call(this,this.yy,this,Lt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Mt)return Mt;if(this._backtrack){for(var q in re)this[q]=re[q];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Et,Lt,Mt,xt;this._more||(this.yytext="",this.match="");for(var re=this._currentRules(),q=0;q<re.length;q++)if(Mt=this._input.match(this.rules[re[q]]),Mt&&(!Lt||Mt[0].length>Lt[0].length)){if(Lt=Mt,xt=q,this.options.backtrack_lexer){if(Et=this.test_match(Mt,re[q]),Et!==!1)return Et;if(this._backtrack){Lt=!1;continue}else return!1}else if(!this.options.flex)break}return Lt?(Et=this.test_match(Lt,re[xt]),Et!==!1?Et:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var Lt=this.next();return Lt||this.lex()},begin:function(Lt){this.conditionStack.push(Lt)},popState:function(){var Lt=this.conditionStack.length-1;return Lt>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Lt){return Lt=this.conditionStack.length-1-Math.abs(Lt||0),Lt>=0?this.conditionStack[Lt]:"INITIAL"},pushState:function(Lt){this.begin(Lt)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(Lt,Mt,xt,re){switch(xt){case 0:return this.begin("acc_title"),34;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),36;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:this.begin("callbackname");break;case 8:this.popState();break;case 9:this.popState(),this.begin("callbackargs");break;case 10:return 92;case 11:this.popState();break;case 12:return 93;case 13:return"MD_STR";case 14:this.popState();break;case 15:this.begin("md_string");break;case 16:return"STR";case 17:this.popState();break;case 18:this.pushState("string");break;case 19:return 81;case 20:return 99;case 21:return 82;case 22:return 101;case 23:return 83;case 24:return 84;case 25:return 94;case 26:this.begin("click");break;case 27:this.popState();break;case 28:return 85;case 29:return Lt.lex.firstGraph()&&this.begin("dir"),12;case 30:return Lt.lex.firstGraph()&&this.begin("dir"),12;case 31:return Lt.lex.firstGraph()&&this.begin("dir"),12;case 32:return 27;case 33:return 32;case 34:return 95;case 35:return 95;case 36:return 95;case 37:return 95;case 38:return this.popState(),13;case 39:return this.popState(),14;case 40:return this.popState(),14;case 41:return this.popState(),14;case 42:return this.popState(),14;case 43:return this.popState(),14;case 44:return this.popState(),14;case 45:return this.popState(),14;case 46:return this.popState(),14;case 47:return this.popState(),14;case 48:return this.popState(),14;case 49:return 118;case 50:return 119;case 51:return 120;case 52:return 121;case 53:return 102;case 54:return 108;case 55:return 44;case 56:return 58;case 57:return 42;case 58:return 8;case 59:return 103;case 60:return 112;case 61:return this.popState(),75;case 62:return this.pushState("edgeText"),73;case 63:return 116;case 64:return this.popState(),75;case 65:return this.pushState("thickEdgeText"),73;case 66:return 116;case 67:return this.popState(),75;case 68:return this.pushState("dottedEdgeText"),73;case 69:return 116;case 70:return 75;case 71:return this.popState(),51;case 72:return"TEXT";case 73:return this.pushState("ellipseText"),50;case 74:return this.popState(),53;case 75:return this.pushState("text"),52;case 76:return this.popState(),55;case 77:return this.pushState("text"),54;case 78:return 56;case 79:return this.pushState("text"),65;case 80:return this.popState(),62;case 81:return this.pushState("text"),61;case 82:return this.popState(),47;case 83:return this.pushState("text"),46;case 84:return this.popState(),67;case 85:return this.popState(),69;case 86:return 114;case 87:return this.pushState("trapText"),66;case 88:return this.pushState("trapText"),68;case 89:return 115;case 90:return 65;case 91:return 87;case 92:return"SEP";case 93:return 86;case 94:return 112;case 95:return 108;case 96:return 42;case 97:return 106;case 98:return 111;case 99:return 113;case 100:return this.popState(),60;case 101:return this.pushState("text"),60;case 102:return this.popState(),49;case 103:return this.pushState("text"),48;case 104:return this.popState(),31;case 105:return this.pushState("text"),29;case 106:return this.popState(),64;case 107:return this.pushState("text"),63;case 108:return"TEXT";case 109:return"QUOTE";case 110:return 9;case 111:return 10;case 112:return 11}},rules:[/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["][`])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:["])/,/^(?:style\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\b)/,/^(?:class\b)/,/^(?:href[\s])/,/^(?:click[\s]+)/,/^(?:[\s\n])/,/^(?:[^\s\n]*)/,/^(?:flowchart-elk\b)/,/^(?:graph\b)/,/^(?:flowchart\b)/,/^(?:subgraph\b)/,/^(?:end\b\s*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:(\r?\n)*\s*\n)/,/^(?:\s*LR\b)/,/^(?:\s*RL\b)/,/^(?:\s*TB\b)/,/^(?:\s*BT\b)/,/^(?:\s*TD\b)/,/^(?:\s*BR\b)/,/^(?:\s*<)/,/^(?:\s*>)/,/^(?:\s*\^)/,/^(?:\s*v\b)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:[0-9]+)/,/^(?:#)/,/^(?::::)/,/^(?::)/,/^(?:&)/,/^(?:;)/,/^(?:,)/,/^(?:\*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:[^-]|-(?!-)+)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:[^=]|=(?!))/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:[^\.]|\.(?!))/,/^(?:\s*~~[\~]+\s*)/,/^(?:[-/\)][\)])/,/^(?:[^\(\)\[\]\{\}]|!\)+)/,/^(?:\(-)/,/^(?:\]\))/,/^(?:\(\[)/,/^(?:\]\])/,/^(?:\[\[)/,/^(?:\[\|)/,/^(?:>)/,/^(?:\)\])/,/^(?:\[\()/,/^(?:\)\)\))/,/^(?:\(\(\()/,/^(?:[\\(?=\])][\]])/,/^(?:\/(?=\])\])/,/^(?:\/(?!\])|\\(?!\])|[^\\\[\]\(\)\{\}\/]+)/,/^(?:\[\/)/,/^(?:\[\\)/,/^(?:<)/,/^(?:>)/,/^(?:\^)/,/^(?:\\\|)/,/^(?:v\b)/,/^(?:\*)/,/^(?:#)/,/^(?:&)/,/^(?:([A-Za-z0-9!"\#$%&'*+\.`?\\_\/]|-(?=[^\>\-\.])|(?!))+)/,/^(?:-)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\|)/,/^(?:\|)/,/^(?:\))/,/^(?:\()/,/^(?:\])/,/^(?:\[)/,/^(?:(\}))/,/^(?:\{)/,/^(?:[^\[\]\(\)\{\}\|\"]+)/,/^(?:")/,/^(?:(\r?\n)+)/,/^(?:\s)/,/^(?:$)/],conditions:{callbackargs:{rules:[11,12,15,18,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},callbackname:{rules:[8,9,10,15,18,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},href:{rules:[15,18,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},click:{rules:[15,18,27,28,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},dottedEdgeText:{rules:[15,18,67,69,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},thickEdgeText:{rules:[15,18,64,66,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},edgeText:{rules:[15,18,61,63,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},trapText:{rules:[15,18,70,73,75,77,81,83,84,85,86,87,88,101,103,105,107],inclusive:!1},ellipseText:{rules:[15,18,70,71,72,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},text:{rules:[15,18,70,73,74,75,76,77,80,81,82,83,87,88,100,101,102,103,104,105,106,107,108],inclusive:!1},vertex:{rules:[15,18,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},dir:{rules:[15,18,38,39,40,41,42,43,44,45,46,47,48,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},acc_descr_multiline:{rules:[5,6,15,18,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},acc_descr:{rules:[3,15,18,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},acc_title:{rules:[1,15,18,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},md_string:{rules:[13,14,15,18,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},string:{rules:[15,16,17,18,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},INITIAL:{rules:[0,2,4,7,15,18,19,20,21,22,23,24,25,26,29,30,31,32,33,34,35,36,37,49,50,51,52,53,54,55,56,57,58,59,60,61,62,64,65,67,68,70,73,75,77,78,79,81,83,87,88,89,90,91,92,93,94,95,96,97,98,99,101,103,105,107,109,110,111,112],inclusive:!0}}};return nr}();ba.lexer=Md;function ka(){this.yy={}}return ka.prototype=ba,ba.Parser=ka,new ka}();Wa.parser=Wa;const Go=Wa,sx="flowchart-";let uc=0,es=Y(),Kt={},yi=[],Yr={},Ji=[],Nn={},On={},gn=0,Ya=!0,ci,na,aa=[];const oa=t=>mt.sanitizeText(t,es),Ks=function(t){const e=Object.keys(Kt);for(const i of e)if(Kt[i].id===t)return Kt[i].domId;return t},P1=function(t,e,i,r,s,n,a={}){let o,l=t;l!==void 0&&l.trim().length!==0&&(Kt[l]===void 0&&(Kt[l]={id:l,labelType:"text",domId:sx+l+"-"+uc,styles:[],classes:[]}),uc++,e!==void 0?(es=Y(),o=oa(e.text.trim()),Kt[l].labelType=e.type,o[0]==='"'&&o[o.length-1]==='"'&&(o=o.substring(1,o.length-1)),Kt[l].text=o):Kt[l].text===void 0&&(Kt[l].text=t),i!==void 0&&(Kt[l].type=i),r!=null&&r.forEach(function(h){Kt[l].styles.push(h)}),s!=null&&s.forEach(function(h){Kt[l].classes.push(h)}),n!==void 0&&(Kt[l].dir=n),Kt[l].props===void 0?Kt[l].props=a:a!==void 0&&Object.assign(Kt[l].props,a))},M1=function(t,e,i){const n={start:t,end:e,type:void 0,text:"",labelType:"text"};I.info("abc78 Got edge...",n);const a=i.text;if(a!==void 0&&(n.text=oa(a.text.trim()),n.text[0]==='"'&&n.text[n.text.length-1]==='"'&&(n.text=n.text.substring(1,n.text.length-1)),n.labelType=a.type),i!==void 0&&(n.type=i.type,n.stroke=i.stroke,n.length=i.length),(n==null?void 0:n.length)>10&&(n.length=10),yi.length<(es.maxEdges??500))I.info("abc78 pushing edge..."),yi.push(n);else throw new Error(`Edge limit exceeded. ${yi.length} edges found, but the limit is ${es.maxEdges}.

Initialize mermaid with maxEdges set to a higher number to allow more edges. 
You cannot set this config via configuration inside the diagram as it is a secure config. 
You have to call mermaid.initialize.`)},V1=function(t,e,i){I.info("addLink (abc78)",t,e,i);let r,s;for(r=0;r<t.length;r++)for(s=0;s<e.length;s++)M1(t[r],e[s],i)},z1=function(t,e){t.forEach(function(i){i==="default"?yi.defaultInterpolate=e:yi[i].interpolate=e})},q1=function(t,e){t.forEach(function(i){if(i>=yi.length)throw new Error(`The index ${i} for linkStyle is out of bounds. Valid indices for linkStyle are between 0 and ${yi.length-1}. (Help: Ensure that the index is within the range of existing edges.)`);i==="default"?yi.defaultStyle=e:(Rt.isSubstringInArray("fill",e)===-1&&e.push("fill:none"),yi[i].style=e)})},W1=function(t,e){t.split(",").forEach(function(i){Yr[i]===void 0&&(Yr[i]={id:i,styles:[],textStyles:[]}),e!=null&&e.forEach(function(r){if(r.match("color")){const s=r.replace("fill","bgFill").replace("color","fill");Yr[i].textStyles.push(s)}Yr[i].styles.push(r)})})},Y1=function(t){ci=t,ci.match(/.*</)&&(ci="RL"),ci.match(/.*\^/)&&(ci="BT"),ci.match(/.*>/)&&(ci="LR"),ci.match(/.*v/)&&(ci="TB"),ci==="TD"&&(ci="TB")},la=function(t,e){t.split(",").forEach(function(i){let r=i;Kt[r]!==void 0&&Kt[r].classes.push(e),Nn[r]!==void 0&&Nn[r].classes.push(e)})},nx=function(t,e){t.split(",").forEach(function(i){e!==void 0&&(On[na==="gen-1"?Ks(i):i]=oa(e))})},ax=function(t,e,i){let r=Ks(t);if(Y().securityLevel!=="loose"||e===void 0)return;let s=[];if(typeof i=="string"){s=i.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let n=0;n<s.length;n++){let a=s[n].trim();a.charAt(0)==='"'&&a.charAt(a.length-1)==='"'&&(a=a.substr(1,a.length-2)),s[n]=a}}s.length===0&&s.push(t),Kt[t]!==void 0&&(Kt[t].haveCallback=!0,aa.push(function(){const n=document.querySelector(`[id="${r}"]`);n!==null&&n.addEventListener("click",function(){Rt.runFunc(e,...s)},!1)}))},U1=function(t,e,i){t.split(",").forEach(function(r){Kt[r]!==void 0&&(Kt[r].link=Rt.formatUrl(e,es),Kt[r].linkTarget=i)}),la(t,"clickable")},H1=function(t){if(On.hasOwnProperty(t))return On[t]},G1=function(t,e,i){t.split(",").forEach(function(r){ax(r,e,i)}),la(t,"clickable")},j1=function(t){aa.forEach(function(e){e(t)})},X1=function(){return ci.trim()},$1=function(){return Kt},K1=function(){return yi},Q1=function(){return Yr},Z1=function(t){let e=yt(".mermaidTooltip");(e._groups||e)[0][0]===null&&(e=yt("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),yt(t).select("svg").selectAll("g.node").on("mouseover",function(){const s=yt(this);if(s.attr("title")===null)return;const a=this.getBoundingClientRect();e.transition().duration(200).style("opacity",".9"),e.text(s.attr("title")).style("left",window.scrollX+a.left+(a.right-a.left)/2+"px").style("top",window.scrollY+a.bottom+"px"),e.html(e.html().replace(/&lt;br\/&gt;/g,"<br/>")),s.classed("hover",!0)}).on("mouseout",function(){e.transition().duration(500).style("opacity",0),yt(this).classed("hover",!1)})};aa.push(Z1);const J1=function(t="gen-1"){Kt={},Yr={},yi=[],aa=[Z1],Ji=[],Nn={},gn=0,On={},Ya=!0,na=t,es=Y(),Oe()},tu=t=>{na=t||"gen-2"},eu=function(){return"fill:#ffa;stroke: #f66; stroke-width: 3px; stroke-dasharray: 5, 5;fill:#ffa;stroke: #666;"},iu=function(t,e,i){let r=t.text.trim(),s=i.text;t===i&&i.text.match(/\s/)&&(r=void 0);function n(u){const p={boolean:{},number:{},string:{}},d=[];let g;return{nodeList:u.filter(function(x){const _=typeof x;return x.stmt&&x.stmt==="dir"?(g=x.value,!1):x.trim()===""?!1:_ in p?p[_].hasOwnProperty(x)?!1:p[_][x]=!0:d.includes(x)?!1:d.push(x)}),dir:g}}let a=[];const{nodeList:o,dir:l}=n(a.concat.apply(a,e));if(a=o,na==="gen-1")for(let u=0;u<a.length;u++)a[u]=Ks(a[u]);r=r||"subGraph"+gn,s=s||"",s=oa(s),gn=gn+1;const h={id:r,nodes:a,title:s.trim(),classes:[],dir:l,labelType:i.type};return I.info("Adding",h.id,h.nodes,h.dir),h.nodes=uu(h,Ji).nodes,Ji.push(h),Nn[r]=h,r},ox=function(t){for(const[e,i]of Ji.entries())if(i.id===t)return e;return-1};let fs=-1;const ru=[],su=function(t,e){const i=Ji[e].nodes;if(fs=fs+1,fs>2e3)return;if(ru[fs]=e,Ji[e].id===t)return{result:!0,count:0};let r=0,s=1;for(;r<i.length;){const n=ox(i[r]);if(n>=0){const a=su(t,n);if(a.result)return{result:!0,count:s+a.count};s=s+a.count}r=r+1}return{result:!1,count:s}},nu=function(t){return ru[t]},au=function(){fs=-1,Ji.length>0&&su("none",Ji.length-1)},ou=function(){return Ji},lu=()=>Ya?(Ya=!1,!0):!1,lx=t=>{let e=t.trim(),i="arrow_open";switch(e[0]){case"<":i="arrow_point",e=e.slice(1);break;case"x":i="arrow_cross",e=e.slice(1);break;case"o":i="arrow_circle",e=e.slice(1);break}let r="normal";return e.includes("=")&&(r="thick"),e.includes(".")&&(r="dotted"),{type:i,stroke:r}},cx=(t,e)=>{const i=e.length;let r=0;for(let s=0;s<i;++s)e[s]===t&&++r;return r},hx=t=>{const e=t.trim();let i=e.slice(0,-1),r="arrow_open";switch(e.slice(-1)){case"x":r="arrow_cross",e[0]==="x"&&(r="double_"+r,i=i.slice(1));break;case">":r="arrow_point",e[0]==="<"&&(r="double_"+r,i=i.slice(1));break;case"o":r="arrow_circle",e[0]==="o"&&(r="double_"+r,i=i.slice(1));break}let s="normal",n=i.length-1;i[0]==="="&&(s="thick"),i[0]==="~"&&(s="invisible");let a=cx(".",i);return a&&(s="dotted",n=a),{type:r,stroke:s,length:n}},cu=(t,e)=>{const i=hx(t);let r;if(e){if(r=lx(e),r.stroke!==i.stroke)return{type:"INVALID",stroke:"INVALID"};if(r.type==="arrow_open")r.type=i.type;else{if(r.type!==i.type)return{type:"INVALID",stroke:"INVALID"};r.type="double_"+r.type}return r.type==="double_arrow"&&(r.type="double_arrow_point"),r.length=i.length,r}return i},hu=(t,e)=>{let i=!1;return t.forEach(r=>{r.nodes.indexOf(e)>=0&&(i=!0)}),i},uu=(t,e)=>{const i=[];return t.nodes.forEach((r,s)=>{hu(e,r)||i.push(t.nodes[s])}),{nodes:i}},du={firstGraph:lu},Er={defaultConfig:()=>Jh.flowchart,setAccTitle:Pe,getAccTitle:Ye,getAccDescription:He,setAccDescription:Ue,addVertex:P1,lookUpDomId:Ks,addLink:V1,updateLinkInterpolate:z1,updateLink:q1,addClass:W1,setDirection:Y1,setClass:la,setTooltip:nx,getTooltip:H1,setClickEvent:G1,setLink:U1,bindFunctions:j1,getDirection:X1,getVertices:$1,getEdges:K1,getClasses:Q1,clear:J1,setGen:tu,defaultStyle:eu,addSubGraph:iu,getDepthFirstPos:nu,indexNodes:au,getSubGraphs:ou,destructLink:cu,lex:du,exists:hu,makeUniq:uu,setDiagramTitle:ri,getDiagramTitle:Ge},ux=Object.freeze(Object.defineProperty({__proto__:null,addClass:W1,addLink:V1,addSingleLink:M1,addSubGraph:iu,addVertex:P1,bindFunctions:j1,clear:J1,default:Er,defaultStyle:eu,destructLink:cu,firstGraph:lu,getClasses:Q1,getDepthFirstPos:nu,getDirection:X1,getEdges:K1,getSubGraphs:ou,getTooltip:H1,getVertices:$1,indexNodes:au,lex:du,lookUpDomId:Ks,setClass:la,setClickEvent:G1,setDirection:Y1,setGen:tu,setLink:U1,updateLink:q1,updateLinkInterpolate:z1},Symbol.toStringTag,{value:"Module"}));function dx(t){const e=t.replace(/\n{2,}/g,`
`);return fh(e)}function fx(t){const e=dx(t),{children:i}=ph(e),r=[[]];let s=0;function n(a,o="normal"){a.type==="text"?a.value.split(`
`).forEach((h,u)=>{u!==0&&(s++,r.push([])),h.split(" ").forEach(p=>{p&&r[s].push({content:p,type:o})})}):(a.type==="strong"||a.type==="emphasis")&&a.children.forEach(l=>{n(l,a.type)})}return i.forEach(a=>{a.type==="paragraph"&&a.children.forEach(o=>{n(o)})}),r}function px(t){const{children:e}=ph(t);function i(r){return r.type==="text"?r.value.replace(/\n/g,"<br/>"):r.type==="strong"?`<strong>${r.children.map(i).join("")}</strong>`:r.type==="emphasis"?`<em>${r.children.map(i).join("")}</em>`:r.type==="paragraph"?`<p>${r.children.map(i).join("")}</p>`:`Unsupported markdown: ${r.type}`}return e.map(i).join("")}function gx(t){return Intl.Segmenter?[...new Intl.Segmenter().segment(t)].map(e=>e.segment):[...t]}function yx(t,e){const i=gx(e.content);return fu(t,[],i,e.type)}function fu(t,e,i,r){if(i.length===0)return[{content:e.join(""),type:r},{content:"",type:r}];const[s,...n]=i,a=[...e,s];return t([{content:a.join(""),type:r}])?fu(t,a,n,r):(e.length===0&&s&&(e.push(s),i.shift()),[{content:e.join(""),type:r},{content:i.join(""),type:r}])}function mx(t,e){if(t.some(({content:i})=>i.includes(`
`)))throw new Error("splitLineToFitWidth does not support newlines in the line");return Ua(t,e)}function Ua(t,e,i=[],r=[]){if(t.length===0)return r.length>0&&i.push(r),i.length>0?i:[];let s="";t[0].content===" "&&(s=" ",t.shift());const n=t.shift()??{content:" ",type:"normal"},a=[...r];if(s!==""&&a.push({content:s,type:"normal"}),a.push(n),e(a))return Ua(t,e,i,a);if(r.length>0)i.push(r),t.unshift(n);else if(n.content){const[o,l]=yx(e,n);i.push([o]),l.content&&t.unshift(l)}return Ua(t,e,i)}function xx(t,e){e&&t.attr("style",e)}function bx(t,e,i,r,s=!1){const n=t.append("foreignObject"),a=n.append("xhtml:div"),o=e.label,l=e.isNode?"nodeLabel":"edgeLabel";a.html(`
    <span class="${l} ${r}" `+(e.labelStyle?'style="'+e.labelStyle+'"':"")+">"+o+"</span>"),xx(a,e.labelStyle),a.style("display","table-cell"),a.style("white-space","nowrap"),a.style("max-width",i+"px"),a.attr("xmlns","http://www.w3.org/1999/xhtml"),s&&a.attr("class","labelBkg");let h=a.node().getBoundingClientRect();return h.width===i&&(a.style("display","table"),a.style("white-space","break-spaces"),a.style("width",i+"px"),h=a.node().getBoundingClientRect()),n.style("width",h.width),n.style("height",h.height),n.node()}function jo(t,e,i){return t.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",e*i-.1+"em").attr("dy",i+"em")}function kx(t,e,i){const r=t.append("text"),s=jo(r,1,e);Xo(s,i);const n=s.node().getComputedTextLength();return r.remove(),n}function _x(t,e,i){var r;const s=t.append("text"),n=jo(s,1,e);Xo(n,[{content:i,type:"normal"}]);const a=(r=n.node())==null?void 0:r.getBoundingClientRect();return a&&s.remove(),a}function Tx(t,e,i,r=!1){const n=e.append("g"),a=n.insert("rect").attr("class","background"),o=n.append("text").attr("y","-10.1");let l=0;for(const h of i){const u=d=>kx(n,1.1,d)<=t,p=u(h)?[h]:mx(h,u);for(const d of p){const g=jo(o,l,1.1);Xo(g,d),l++}}if(r){const h=o.node().getBBox(),u=2;return a.attr("x",-u).attr("y",-u).attr("width",h.width+2*u).attr("height",h.height+2*u),n.node()}else return o.node()}function Xo(t,e){t.text(""),e.forEach((i,r)=>{const s=t.append("tspan").attr("font-style",i.type==="emphasis"?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight",i.type==="strong"?"bold":"normal");r===0?s.text(i.content):s.text(" "+i.content)})}const ca=(t,e="",{style:i="",isTitle:r=!1,classes:s="",useHtmlLabels:n=!0,isNode:a=!0,width:o=200,addSvgBackground:l=!1}={})=>{if(I.info("createText",e,i,r,s,n,a,l),n){const h=px(e),u={isNode:a,label:As(h).replace(/fa[blrs]?:fa-[\w-]+/g,d=>`<i class='${d.replace(":"," ")}'></i>`),labelStyle:i.replace("fill:","color:")};return bx(t,u,o,s,l)}else{const h=fx(e);return Tx(o,t,h,l)}},Cx=(t,e,i,r)=>{e.forEach(s=>{Fx[s](t,i,r)})},Ex=(t,e,i)=>{I.trace("Making markers for ",i),t.append("defs").append("marker").attr("id",i+"_"+e+"-extensionStart").attr("class","marker extension "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id",i+"_"+e+"-extensionEnd").attr("class","marker extension "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},Sx=(t,e,i)=>{t.append("defs").append("marker").attr("id",i+"_"+e+"-compositionStart").attr("class","marker composition "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",i+"_"+e+"-compositionEnd").attr("class","marker composition "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},vx=(t,e,i)=>{t.append("defs").append("marker").attr("id",i+"_"+e+"-aggregationStart").attr("class","marker aggregation "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",i+"_"+e+"-aggregationEnd").attr("class","marker aggregation "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},wx=(t,e,i)=>{t.append("defs").append("marker").attr("id",i+"_"+e+"-dependencyStart").attr("class","marker dependency "+e).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",i+"_"+e+"-dependencyEnd").attr("class","marker dependency "+e).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},Ax=(t,e,i)=>{t.append("defs").append("marker").attr("id",i+"_"+e+"-lollipopStart").attr("class","marker lollipop "+e).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),t.append("defs").append("marker").attr("id",i+"_"+e+"-lollipopEnd").attr("class","marker lollipop "+e).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},Lx=(t,e,i)=>{t.append("marker").attr("id",i+"_"+e+"-pointEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",6).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",i+"_"+e+"-pointStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},Bx=(t,e,i)=>{t.append("marker").attr("id",i+"_"+e+"-circleEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",i+"_"+e+"-circleStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},Ix=(t,e,i)=>{t.append("marker").attr("id",i+"_"+e+"-crossEnd").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),t.append("marker").attr("id",i+"_"+e+"-crossStart").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},Dx=(t,e,i)=>{t.append("defs").append("marker").attr("id",i+"_"+e+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},Fx={extension:Ex,composition:Sx,aggregation:vx,dependency:wx,lollipop:Ax,point:Lx,circle:Bx,cross:Ix,barb:Dx},$o=Cx;function Rx(t,e){e&&t.attr("style",e)}function Nx(t){const e=yt(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),i=e.append("xhtml:div"),r=t.label,s=t.isNode?"nodeLabel":"edgeLabel";return i.html('<span class="'+s+'" '+(t.labelStyle?'style="'+t.labelStyle+'"':"")+">"+r+"</span>"),Rx(i,t.labelStyle),i.style("display","inline-block"),i.style("white-space","nowrap"),i.attr("xmlns","http://www.w3.org/1999/xhtml"),e.node()}const Ox=(t,e,i,r)=>{let s=t||"";if(typeof s=="object"&&(s=s[0]),Ce(Y().flowchart.htmlLabels)){s=s.replace(/\\n|\n/g,"<br />"),I.debug("vertexText"+s);const n={isNode:r,label:As(s).replace(/fa[blrs]?:fa-[\w-]+/g,o=>`<i class='${o.replace(":"," ")}'></i>`),labelStyle:e.replace("fill:","color:")};return Nx(n)}else{const n=document.createElementNS("http://www.w3.org/2000/svg","text");n.setAttribute("style",e.replace("color:","fill:"));let a=[];typeof s=="string"?a=s.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(s)?a=s:a=[];for(const o of a){const l=document.createElementNS("http://www.w3.org/2000/svg","tspan");l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),l.setAttribute("dy","1em"),l.setAttribute("x","0"),i?l.setAttribute("class","title-row"):l.setAttribute("class","row"),l.textContent=o.trim(),n.appendChild(l)}return n}},$e=Ox,Ee=async(t,e,i,r)=>{let s;const n=e.useHtmlLabels||Ce(Y().flowchart.htmlLabels);i?s=i:s="node default";const a=t.insert("g").attr("class",s).attr("id",e.domId||e.id),o=a.insert("g").attr("class","label").attr("style",e.labelStyle);let l;e.labelText===void 0?l="":l=typeof e.labelText=="string"?e.labelText:e.labelText[0];const h=o.node();let u;e.labelType==="markdown"?u=ca(o,ue(As(l),Y()),{useHtmlLabels:n,width:e.width||Y().flowchart.wrappingWidth,classes:"markdown-node-label"}):u=h.appendChild($e(ue(As(l),Y()),e.labelStyle,!1,r));let p=u.getBBox();const d=e.padding/2;if(Ce(Y().flowchart.htmlLabels)){const g=u.children[0],y=yt(u),x=g.getElementsByTagName("img");if(x){const _=l.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...x].map(v=>new Promise(E=>{function F(){if(v.style.display="flex",v.style.flexDirection="column",_){const L=Y().fontSize?Y().fontSize:window.getComputedStyle(document.body).fontSize,T=5,k=parseInt(L,10)*T+"px";v.style.minWidth=k,v.style.maxWidth=k}else v.style.width="100%";E(v)}setTimeout(()=>{v.complete&&F()}),v.addEventListener("error",F),v.addEventListener("load",F)})))}p=g.getBoundingClientRect(),y.attr("width",p.width),y.attr("height",p.height)}return n?o.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"):o.attr("transform","translate(0, "+-p.height/2+")"),e.centerLabel&&o.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"),o.insert("rect",":first-child"),{shapeSvg:a,bbox:p,halfPadding:d,label:o}},se=(t,e)=>{const i=e.node().getBBox();t.width=i.width,t.height=i.height};function Ii(t,e,i,r){return t.insert("polygon",":first-child").attr("points",r.map(function(s){return s.x+","+s.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-e/2+","+i/2+")")}function Px(t,e){return t.intersect(e)}function pu(t,e,i,r){var s=t.x,n=t.y,a=s-r.x,o=n-r.y,l=Math.sqrt(e*e*o*o+i*i*a*a),h=Math.abs(e*i*a/l);r.x<s&&(h=-h);var u=Math.abs(e*i*o/l);return r.y<n&&(u=-u),{x:s+h,y:n+u}}function Mx(t,e,i){return pu(t,e,e,i)}function Vx(t,e,i,r){var s,n,a,o,l,h,u,p,d,g,y,x,_,v,E;if(s=e.y-t.y,a=t.x-e.x,l=e.x*t.y-t.x*e.y,d=s*i.x+a*i.y+l,g=s*r.x+a*r.y+l,!(d!==0&&g!==0&&dc(d,g))&&(n=r.y-i.y,o=i.x-r.x,h=r.x*i.y-i.x*r.y,u=n*t.x+o*t.y+h,p=n*e.x+o*e.y+h,!(u!==0&&p!==0&&dc(u,p))&&(y=s*o-n*a,y!==0)))return x=Math.abs(y/2),_=a*h-o*l,v=_<0?(_-x)/y:(_+x)/y,_=n*l-s*h,E=_<0?(_-x)/y:(_+x)/y,{x:v,y:E}}function dc(t,e){return t*e>0}function zx(t,e,i){var r=t.x,s=t.y,n=[],a=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY;typeof e.forEach=="function"?e.forEach(function(y){a=Math.min(a,y.x),o=Math.min(o,y.y)}):(a=Math.min(a,e.x),o=Math.min(o,e.y));for(var l=r-t.width/2-a,h=s-t.height/2-o,u=0;u<e.length;u++){var p=e[u],d=e[u<e.length-1?u+1:0],g=Vx(t,i,{x:l+p.x,y:h+p.y},{x:l+d.x,y:h+d.y});g&&n.push(g)}return n.length?(n.length>1&&n.sort(function(y,x){var _=y.x-i.x,v=y.y-i.y,E=Math.sqrt(_*_+v*v),F=x.x-i.x,L=x.y-i.y,T=Math.sqrt(F*F+L*L);return E<T?-1:E===T?0:1}),n[0]):t}const qx=(t,e)=>{var i=t.x,r=t.y,s=e.x-i,n=e.y-r,a=t.width/2,o=t.height/2,l,h;return Math.abs(n)*a>Math.abs(s)*o?(n<0&&(o=-o),l=n===0?0:o*s/n,h=o):(s<0&&(a=-a),l=a,h=s===0?0:a*n/s),{x:i+l,y:r+h}},Qs=qx,te={node:Px,circle:Mx,ellipse:pu,polygon:zx,rect:Qs},Wx=async(t,e)=>{e.useHtmlLabels||Y().flowchart.htmlLabels||(e.centerLabel=!0);const{shapeSvg:r,bbox:s,halfPadding:n}=await Ee(t,e,"node "+e.classes,!0);I.info("Classes = ",e.classes);const a=r.insert("rect",":first-child");return a.attr("rx",e.rx).attr("ry",e.ry).attr("x",-s.width/2-n).attr("y",-s.height/2-n).attr("width",s.width+e.padding).attr("height",s.height+e.padding),se(e,a),e.intersect=function(o){return te.rect(e,o)},r},Yx=Wx,Ux=t=>{const e=new Set;for(const i of t)switch(i){case"x":e.add("right"),e.add("left");break;case"y":e.add("up"),e.add("down");break;default:e.add(i);break}return e},Hx=(t,e,i)=>{const r=Ux(t),s=2,n=e.height+2*i.padding,a=n/s,o=e.width+2*a+i.padding,l=i.padding/2;return r.has("right")&&r.has("left")&&r.has("up")&&r.has("down")?[{x:0,y:0},{x:a,y:0},{x:o/2,y:2*l},{x:o-a,y:0},{x:o,y:0},{x:o,y:-n/3},{x:o+2*l,y:-n/2},{x:o,y:-2*n/3},{x:o,y:-n},{x:o-a,y:-n},{x:o/2,y:-n-2*l},{x:a,y:-n},{x:0,y:-n},{x:0,y:-2*n/3},{x:-2*l,y:-n/2},{x:0,y:-n/3}]:r.has("right")&&r.has("left")&&r.has("up")?[{x:a,y:0},{x:o-a,y:0},{x:o,y:-n/2},{x:o-a,y:-n},{x:a,y:-n},{x:0,y:-n/2}]:r.has("right")&&r.has("left")&&r.has("down")?[{x:0,y:0},{x:a,y:-n},{x:o-a,y:-n},{x:o,y:0}]:r.has("right")&&r.has("up")&&r.has("down")?[{x:0,y:0},{x:o,y:-a},{x:o,y:-n+a},{x:0,y:-n}]:r.has("left")&&r.has("up")&&r.has("down")?[{x:o,y:0},{x:0,y:-a},{x:0,y:-n+a},{x:o,y:-n}]:r.has("right")&&r.has("left")?[{x:a,y:0},{x:a,y:-l},{x:o-a,y:-l},{x:o-a,y:0},{x:o,y:-n/2},{x:o-a,y:-n},{x:o-a,y:-n+l},{x:a,y:-n+l},{x:a,y:-n},{x:0,y:-n/2}]:r.has("up")&&r.has("down")?[{x:o/2,y:0},{x:0,y:-l},{x:a,y:-l},{x:a,y:-n+l},{x:0,y:-n+l},{x:o/2,y:-n},{x:o,y:-n+l},{x:o-a,y:-n+l},{x:o-a,y:-l},{x:o,y:-l}]:r.has("right")&&r.has("up")?[{x:0,y:0},{x:o,y:-a},{x:0,y:-n}]:r.has("right")&&r.has("down")?[{x:0,y:0},{x:o,y:0},{x:0,y:-n}]:r.has("left")&&r.has("up")?[{x:o,y:0},{x:0,y:-a},{x:o,y:-n}]:r.has("left")&&r.has("down")?[{x:o,y:0},{x:0,y:0},{x:o,y:-n}]:r.has("right")?[{x:a,y:-l},{x:a,y:-l},{x:o-a,y:-l},{x:o-a,y:0},{x:o,y:-n/2},{x:o-a,y:-n},{x:o-a,y:-n+l},{x:a,y:-n+l},{x:a,y:-n+l}]:r.has("left")?[{x:a,y:0},{x:a,y:-l},{x:o-a,y:-l},{x:o-a,y:-n+l},{x:a,y:-n+l},{x:a,y:-n},{x:0,y:-n/2}]:r.has("up")?[{x:a,y:-l},{x:a,y:-n+l},{x:0,y:-n+l},{x:o/2,y:-n},{x:o,y:-n+l},{x:o-a,y:-n+l},{x:o-a,y:-l}]:r.has("down")?[{x:o/2,y:0},{x:0,y:-l},{x:a,y:-l},{x:a,y:-n+l},{x:o-a,y:-n+l},{x:o-a,y:-l},{x:o,y:-l}]:[{x:0,y:0}]},fc=t=>t?" "+t:"",si=(t,e)=>`${e||"node default"}${fc(t.classes)} ${fc(t.class)}`,pc=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Ee(t,e,si(e,void 0),!0),s=r.width+e.padding,n=r.height+e.padding,a=s+n,o=[{x:a/2,y:0},{x:a,y:-a/2},{x:a/2,y:-a},{x:0,y:-a/2}];I.info("Question main (Circle)");const l=Ii(i,a,a,o);return l.attr("style",e.style),se(e,l),e.intersect=function(h){return I.warn("Intersect called"),te.polygon(e,o,h)},i},Gx=(t,e)=>{const i=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),r=28,s=[{x:0,y:r/2},{x:r/2,y:0},{x:0,y:-r/2},{x:-r/2,y:0}];return i.insert("polygon",":first-child").attr("points",s.map(function(a){return a.x+","+a.y}).join(" ")).attr("class","state-start").attr("r",7).attr("width",28).attr("height",28),e.width=28,e.height=28,e.intersect=function(a){return te.circle(e,14,a)},i},jx=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Ee(t,e,si(e,void 0),!0),s=4,n=r.height+e.padding,a=n/s,o=r.width+2*a+e.padding,l=[{x:a,y:0},{x:o-a,y:0},{x:o,y:-n/2},{x:o-a,y:-n},{x:a,y:-n},{x:0,y:-n/2}],h=Ii(i,o,n,l);return h.attr("style",e.style),se(e,h),e.intersect=function(u){return te.polygon(e,l,u)},i},Xx=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Ee(t,e,void 0,!0),s=2,n=r.height+2*e.padding,a=n/s,o=r.width+2*a+e.padding,l=Hx(e.directions,r,e),h=Ii(i,o,n,l);return h.attr("style",e.style),se(e,h),e.intersect=function(u){return te.polygon(e,l,u)},i},$x=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Ee(t,e,si(e,void 0),!0),s=r.width+e.padding,n=r.height+e.padding,a=[{x:-n/2,y:0},{x:s,y:0},{x:s,y:-n},{x:-n/2,y:-n},{x:0,y:-n/2}];return Ii(i,s,n,a).attr("style",e.style),e.width=s+n,e.height=n,e.intersect=function(l){return te.polygon(e,a,l)},i},Kx=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Ee(t,e,si(e),!0),s=r.width+e.padding,n=r.height+e.padding,a=[{x:-2*n/6,y:0},{x:s-n/6,y:0},{x:s+2*n/6,y:-n},{x:n/6,y:-n}],o=Ii(i,s,n,a);return o.attr("style",e.style),se(e,o),e.intersect=function(l){return te.polygon(e,a,l)},i},Qx=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Ee(t,e,si(e,void 0),!0),s=r.width+e.padding,n=r.height+e.padding,a=[{x:2*n/6,y:0},{x:s+n/6,y:0},{x:s-2*n/6,y:-n},{x:-n/6,y:-n}],o=Ii(i,s,n,a);return o.attr("style",e.style),se(e,o),e.intersect=function(l){return te.polygon(e,a,l)},i},Zx=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Ee(t,e,si(e,void 0),!0),s=r.width+e.padding,n=r.height+e.padding,a=[{x:-2*n/6,y:0},{x:s+2*n/6,y:0},{x:s-n/6,y:-n},{x:n/6,y:-n}],o=Ii(i,s,n,a);return o.attr("style",e.style),se(e,o),e.intersect=function(l){return te.polygon(e,a,l)},i},Jx=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Ee(t,e,si(e,void 0),!0),s=r.width+e.padding,n=r.height+e.padding,a=[{x:n/6,y:0},{x:s-n/6,y:0},{x:s+2*n/6,y:-n},{x:-2*n/6,y:-n}],o=Ii(i,s,n,a);return o.attr("style",e.style),se(e,o),e.intersect=function(l){return te.polygon(e,a,l)},i},t4=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Ee(t,e,si(e,void 0),!0),s=r.width+e.padding,n=r.height+e.padding,a=[{x:0,y:0},{x:s+n/2,y:0},{x:s,y:-n/2},{x:s+n/2,y:-n},{x:0,y:-n}],o=Ii(i,s,n,a);return o.attr("style",e.style),se(e,o),e.intersect=function(l){return te.polygon(e,a,l)},i},e4=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Ee(t,e,si(e,void 0),!0),s=r.width+e.padding,n=s/2,a=n/(2.5+s/50),o=r.height+a+e.padding,l="M 0,"+a+" a "+n+","+a+" 0,0,0 "+s+" 0 a "+n+","+a+" 0,0,0 "+-s+" 0 l 0,"+o+" a "+n+","+a+" 0,0,0 "+s+" 0 l 0,"+-o,h=i.attr("label-offset-y",a).insert("path",":first-child").attr("style",e.style).attr("d",l).attr("transform","translate("+-s/2+","+-(o/2+a)+")");return se(e,h),e.intersect=function(u){const p=te.rect(e,u),d=p.x-e.x;if(n!=0&&(Math.abs(d)<e.width/2||Math.abs(d)==e.width/2&&Math.abs(p.y-e.y)>e.height/2-a)){let g=a*a*(1-d*d/(n*n));g!=0&&(g=Math.sqrt(g)),g=a-g,u.y-e.y>0&&(g=-g),p.y+=g}return p},i},i4=async(t,e)=>{const{shapeSvg:i,bbox:r,halfPadding:s}=await Ee(t,e,"node "+e.classes+" "+e.class,!0),n=i.insert("rect",":first-child"),a=e.positioned?e.width:r.width+e.padding,o=e.positioned?e.height:r.height+e.padding,l=e.positioned?-a/2:-r.width/2-s,h=e.positioned?-o/2:-r.height/2-s;if(n.attr("class","basic label-container").attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("x",l).attr("y",h).attr("width",a).attr("height",o),e.props){const u=new Set(Object.keys(e.props));e.props.borders&&(Ko(n,e.props.borders,a,o),u.delete("borders")),u.forEach(p=>{I.warn(`Unknown node property ${p}`)})}return se(e,n),e.intersect=function(u){return te.rect(e,u)},i},r4=async(t,e)=>{const{shapeSvg:i,bbox:r,halfPadding:s}=await Ee(t,e,"node "+e.classes,!0),n=i.insert("rect",":first-child"),a=e.positioned?e.width:r.width+e.padding,o=e.positioned?e.height:r.height+e.padding,l=e.positioned?-a/2:-r.width/2-s,h=e.positioned?-o/2:-r.height/2-s;if(n.attr("class","basic cluster composite label-container").attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("x",l).attr("y",h).attr("width",a).attr("height",o),e.props){const u=new Set(Object.keys(e.props));e.props.borders&&(Ko(n,e.props.borders,a,o),u.delete("borders")),u.forEach(p=>{I.warn(`Unknown node property ${p}`)})}return se(e,n),e.intersect=function(u){return te.rect(e,u)},i},s4=async(t,e)=>{const{shapeSvg:i}=await Ee(t,e,"label",!0);I.trace("Classes = ",e.class);const r=i.insert("rect",":first-child"),s=0,n=0;if(r.attr("width",s).attr("height",n),i.attr("class","label edgeLabel"),e.props){const a=new Set(Object.keys(e.props));e.props.borders&&(Ko(r,e.props.borders,s,n),a.delete("borders")),a.forEach(o=>{I.warn(`Unknown node property ${o}`)})}return se(e,r),e.intersect=function(a){return te.rect(e,a)},i};function Ko(t,e,i,r){const s=[],n=o=>{s.push(o,0)},a=o=>{s.push(0,o)};e.includes("t")?(I.debug("add top border"),n(i)):a(i),e.includes("r")?(I.debug("add right border"),n(r)):a(r),e.includes("b")?(I.debug("add bottom border"),n(i)):a(i),e.includes("l")?(I.debug("add left border"),n(r)):a(r),t.attr("stroke-dasharray",s.join(" "))}const n4=(t,e)=>{let i;e.classes?i="node "+e.classes:i="node default";const r=t.insert("g").attr("class",i).attr("id",e.domId||e.id),s=r.insert("rect",":first-child"),n=r.insert("line"),a=r.insert("g").attr("class","label"),o=e.labelText.flat?e.labelText.flat():e.labelText;let l="";typeof o=="object"?l=o[0]:l=o,I.info("Label text abc79",l,o,typeof o=="object");const h=a.node().appendChild($e(l,e.labelStyle,!0,!0));let u={width:0,height:0};if(Ce(Y().flowchart.htmlLabels)){const x=h.children[0],_=yt(h);u=x.getBoundingClientRect(),_.attr("width",u.width),_.attr("height",u.height)}I.info("Text 2",o);const p=o.slice(1,o.length);let d=h.getBBox();const g=a.node().appendChild($e(p.join?p.join("<br/>"):p,e.labelStyle,!0,!0));if(Ce(Y().flowchart.htmlLabels)){const x=g.children[0],_=yt(g);u=x.getBoundingClientRect(),_.attr("width",u.width),_.attr("height",u.height)}const y=e.padding/2;return yt(g).attr("transform","translate( "+(u.width>d.width?0:(d.width-u.width)/2)+", "+(d.height+y+5)+")"),yt(h).attr("transform","translate( "+(u.width<d.width?0:-(d.width-u.width)/2)+", 0)"),u=a.node().getBBox(),a.attr("transform","translate("+-u.width/2+", "+(-u.height/2-y+3)+")"),s.attr("class","outer title-state").attr("x",-u.width/2-y).attr("y",-u.height/2-y).attr("width",u.width+e.padding).attr("height",u.height+e.padding),n.attr("class","divider").attr("x1",-u.width/2-y).attr("x2",u.width/2+y).attr("y1",-u.height/2-y+d.height+y).attr("y2",-u.height/2-y+d.height+y),se(e,s),e.intersect=function(x){return te.rect(e,x)},r},a4=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Ee(t,e,si(e,void 0),!0),s=r.height+e.padding,n=r.width+s/4+e.padding,a=i.insert("rect",":first-child").attr("style",e.style).attr("rx",s/2).attr("ry",s/2).attr("x",-n/2).attr("y",-s/2).attr("width",n).attr("height",s);return se(e,a),e.intersect=function(o){return te.rect(e,o)},i},o4=async(t,e)=>{const{shapeSvg:i,bbox:r,halfPadding:s}=await Ee(t,e,si(e,void 0),!0),n=i.insert("circle",":first-child");return n.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",r.width/2+s).attr("width",r.width+e.padding).attr("height",r.height+e.padding),I.info("Circle main"),se(e,n),e.intersect=function(a){return I.info("Circle intersect",e,r.width/2+s,a),te.circle(e,r.width/2+s,a)},i},l4=async(t,e)=>{const{shapeSvg:i,bbox:r,halfPadding:s}=await Ee(t,e,si(e,void 0),!0),n=5,a=i.insert("g",":first-child"),o=a.insert("circle"),l=a.insert("circle");return a.attr("class",e.class),o.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",r.width/2+s+n).attr("width",r.width+e.padding+n*2).attr("height",r.height+e.padding+n*2),l.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",r.width/2+s).attr("width",r.width+e.padding).attr("height",r.height+e.padding),I.info("DoubleCircle main"),se(e,o),e.intersect=function(h){return I.info("DoubleCircle intersect",e,r.width/2+s+n,h),te.circle(e,r.width/2+s+n,h)},i},c4=async(t,e)=>{const{shapeSvg:i,bbox:r}=await Ee(t,e,si(e,void 0),!0),s=r.width+e.padding,n=r.height+e.padding,a=[{x:0,y:0},{x:s,y:0},{x:s,y:-n},{x:0,y:-n},{x:0,y:0},{x:-8,y:0},{x:s+8,y:0},{x:s+8,y:-n},{x:-8,y:-n},{x:-8,y:0}],o=Ii(i,s,n,a);return o.attr("style",e.style),se(e,o),e.intersect=function(l){return te.polygon(e,a,l)},i},h4=(t,e)=>{const i=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),r=i.insert("circle",":first-child");return r.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),se(e,r),e.intersect=function(s){return te.circle(e,7,s)},i},gc=(t,e,i)=>{const r=t.insert("g").attr("class","node default").attr("id",e.domId||e.id);let s=70,n=10;i==="LR"&&(s=10,n=70);const a=r.append("rect").attr("x",-1*s/2).attr("y",-1*n/2).attr("width",s).attr("height",n).attr("class","fork-join");return se(e,a),e.height=e.height+e.padding/2,e.width=e.width+e.padding/2,e.intersect=function(o){return te.rect(e,o)},r},u4=(t,e)=>{const i=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),r=i.insert("circle",":first-child"),s=i.insert("circle",":first-child");return s.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),r.attr("class","state-end").attr("r",5).attr("width",10).attr("height",10),se(e,s),e.intersect=function(n){return te.circle(e,7,n)},i},d4=(t,e)=>{const i=e.padding/2,r=4,s=8;let n;e.classes?n="node "+e.classes:n="node default";const a=t.insert("g").attr("class",n).attr("id",e.domId||e.id),o=a.insert("rect",":first-child"),l=a.insert("line"),h=a.insert("line");let u=0,p=r;const d=a.insert("g").attr("class","label");let g=0;const y=e.classData.annotations&&e.classData.annotations[0],x=e.classData.annotations[0]?"«"+e.classData.annotations[0]+"»":"",_=d.node().appendChild($e(x,e.labelStyle,!0,!0));let v=_.getBBox();if(Ce(Y().flowchart.htmlLabels)){const S=_.children[0],m=yt(_);v=S.getBoundingClientRect(),m.attr("width",v.width),m.attr("height",v.height)}e.classData.annotations[0]&&(p+=v.height+r,u+=v.width);let E=e.classData.label;e.classData.type!==void 0&&e.classData.type!==""&&(Y().flowchart.htmlLabels?E+="&lt;"+e.classData.type+"&gt;":E+="<"+e.classData.type+">");const F=d.node().appendChild($e(E,e.labelStyle,!0,!0));yt(F).attr("class","classTitle");let L=F.getBBox();if(Ce(Y().flowchart.htmlLabels)){const S=F.children[0],m=yt(F);L=S.getBoundingClientRect(),m.attr("width",L.width),m.attr("height",L.height)}p+=L.height+r,L.width>u&&(u=L.width);const T=[];e.classData.members.forEach(S=>{const m=S.getDisplayDetails();let C=m.displayText;Y().flowchart.htmlLabels&&(C=C.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const f=d.node().appendChild($e(C,m.cssStyle?m.cssStyle:e.labelStyle,!0,!0));let B=f.getBBox();if(Ce(Y().flowchart.htmlLabels)){const b=f.children[0],P=yt(f);B=b.getBoundingClientRect(),P.attr("width",B.width),P.attr("height",B.height)}B.width>u&&(u=B.width),p+=B.height+r,T.push(f)}),p+=s;const k=[];if(e.classData.methods.forEach(S=>{const m=S.getDisplayDetails();let C=m.displayText;Y().flowchart.htmlLabels&&(C=C.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const f=d.node().appendChild($e(C,m.cssStyle?m.cssStyle:e.labelStyle,!0,!0));let B=f.getBBox();if(Ce(Y().flowchart.htmlLabels)){const b=f.children[0],P=yt(f);B=b.getBoundingClientRect(),P.attr("width",B.width),P.attr("height",B.height)}B.width>u&&(u=B.width),p+=B.height+r,k.push(f)}),p+=s,y){let S=(u-v.width)/2;yt(_).attr("transform","translate( "+(-1*u/2+S)+", "+-1*p/2+")"),g=v.height+r}let A=(u-L.width)/2;return yt(F).attr("transform","translate( "+(-1*u/2+A)+", "+(-1*p/2+g)+")"),g+=L.height+r,l.attr("class","divider").attr("x1",-u/2-i).attr("x2",u/2+i).attr("y1",-p/2-i+s+g).attr("y2",-p/2-i+s+g),g+=s,T.forEach(S=>{yt(S).attr("transform","translate( "+-u/2+", "+(-1*p/2+g+s/2)+")");const m=S==null?void 0:S.getBBox();g+=((m==null?void 0:m.height)??0)+r}),g+=s,h.attr("class","divider").attr("x1",-u/2-i).attr("x2",u/2+i).attr("y1",-p/2-i+s+g).attr("y2",-p/2-i+s+g),g+=s,k.forEach(S=>{yt(S).attr("transform","translate( "+-u/2+", "+(-1*p/2+g)+")");const m=S==null?void 0:S.getBBox();g+=((m==null?void 0:m.height)??0)+r}),o.attr("style",e.style).attr("class","outer title-state").attr("x",-u/2-i).attr("y",-(p/2)-i).attr("width",u+e.padding).attr("height",p+e.padding),se(e,o),e.intersect=function(S){return te.rect(e,S)},a},yc={rhombus:pc,composite:r4,question:pc,rect:i4,labelRect:s4,rectWithTitle:n4,choice:Gx,circle:o4,doublecircle:l4,stadium:a4,hexagon:jx,block_arrow:Xx,rect_left_inv_arrow:$x,lean_right:Kx,lean_left:Qx,trapezoid:Zx,inv_trapezoid:Jx,rect_right_inv_arrow:t4,cylinder:e4,start:h4,end:u4,note:Yx,subroutine:c4,fork:gc,join:gc,class_box:d4};let Gr={};const ha=async(t,e,i)=>{let r,s;if(e.link){let n;Y().securityLevel==="sandbox"?n="_top":e.linkTarget&&(n=e.linkTarget||"_blank"),r=t.insert("svg:a").attr("xlink:href",e.link).attr("target",n),s=await yc[e.shape](r,e,i)}else s=await yc[e.shape](t,e,i),r=s;return e.tooltip&&s.attr("title",e.tooltip),e.class&&s.attr("class","node default "+e.class),r.attr("data-node","true"),r.attr("data-id",e.id),Gr[e.id]=r,e.haveCallback&&Gr[e.id].attr("class",Gr[e.id].attr("class")+" clickable"),r},f4=(t,e)=>{Gr[e.id]=t},p4=()=>{Gr={}},Ha=t=>{const e=Gr[t.id];I.trace("Transforming node",t.diff,t,"translate("+(t.x-t.width/2-5)+", "+t.width/2+")");const i=8,r=t.diff||0;return t.clusterNode?e.attr("transform","translate("+(t.x+r-t.width/2)+", "+(t.y-t.height/2-i)+")"):e.attr("transform","translate("+t.x+", "+t.y+")"),r},ua=({flowchart:t})=>{var e,i;const r=((e=t==null?void 0:t.subGraphTitleMargin)==null?void 0:e.top)??0,s=((i=t==null?void 0:t.subGraphTitleMargin)==null?void 0:i.bottom)??0,n=r+s;return{subGraphTitleTopMargin:r,subGraphTitleBottomMargin:s,subGraphTitleTotalMargin:n}},ar={aggregation:18,extension:18,composition:18,dependency:6,lollipop:13.5,arrow_point:5.3};function on(t,e){if(t===void 0||e===void 0)return{angle:0,deltaX:0,deltaY:0};t=Pn(t),e=Pn(e);const[i,r]=[t.x,t.y],[s,n]=[e.x,e.y],a=s-i,o=n-r;return{angle:Math.atan(o/a),deltaX:a,deltaY:o}}const Pn=t=>Array.isArray(t)?{x:t[0],y:t[1]}:t,gu=t=>({x:function(e,i,r){let s=0;if(i===0&&Object.hasOwn(ar,t.arrowTypeStart)){const{angle:n,deltaX:a}=on(r[0],r[1]);s=ar[t.arrowTypeStart]*Math.cos(n)*(a>=0?1:-1)}else if(i===r.length-1&&Object.hasOwn(ar,t.arrowTypeEnd)){const{angle:n,deltaX:a}=on(r[r.length-1],r[r.length-2]);s=ar[t.arrowTypeEnd]*Math.cos(n)*(a>=0?1:-1)}return Pn(e).x+s},y:function(e,i,r){let s=0;if(i===0&&Object.hasOwn(ar,t.arrowTypeStart)){const{angle:n,deltaY:a}=on(r[0],r[1]);s=ar[t.arrowTypeStart]*Math.abs(Math.sin(n))*(a>=0?1:-1)}else if(i===r.length-1&&Object.hasOwn(ar,t.arrowTypeEnd)){const{angle:n,deltaY:a}=on(r[r.length-1],r[r.length-2]);s=ar[t.arrowTypeEnd]*Math.abs(Math.sin(n))*(a>=0?1:-1)}return Pn(e).y+s}}),yu=(t,e,i,r,s)=>{e.arrowTypeStart&&mc(t,"start",e.arrowTypeStart,i,r,s),e.arrowTypeEnd&&mc(t,"end",e.arrowTypeEnd,i,r,s)},g4={arrow_cross:"cross",arrow_point:"point",arrow_barb:"barb",arrow_circle:"circle",aggregation:"aggregation",extension:"extension",composition:"composition",dependency:"dependency",lollipop:"lollipop"},mc=(t,e,i,r,s,n)=>{const a=g4[i];if(!a){I.warn(`Unknown arrow type: ${i}`);return}const o=e==="start"?"Start":"End";t.attr(`marker-${e}`,`url(${r}#${s}_${n}-${a}${o})`)};let Mn={},Le={};const y4=()=>{Mn={},Le={}},Qo=(t,e)=>{const i=Ce(Y().flowchart.htmlLabels),r=e.labelType==="markdown"?ca(t,e.label,{style:e.labelStyle,useHtmlLabels:i,addSvgBackground:!0}):$e(e.label,e.labelStyle),s=t.insert("g").attr("class","edgeLabel"),n=s.insert("g").attr("class","label");n.node().appendChild(r);let a=r.getBBox();if(i){const l=r.children[0],h=yt(r);a=l.getBoundingClientRect(),h.attr("width",a.width),h.attr("height",a.height)}n.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),Mn[e.id]=s,e.width=a.width,e.height=a.height;let o;if(e.startLabelLeft){const l=$e(e.startLabelLeft,e.labelStyle),h=t.insert("g").attr("class","edgeTerminals"),u=h.insert("g").attr("class","inner");o=u.node().appendChild(l);const p=l.getBBox();u.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"),Le[e.id]||(Le[e.id]={}),Le[e.id].startLeft=h,ln(o,e.startLabelLeft)}if(e.startLabelRight){const l=$e(e.startLabelRight,e.labelStyle),h=t.insert("g").attr("class","edgeTerminals"),u=h.insert("g").attr("class","inner");o=h.node().appendChild(l),u.node().appendChild(l);const p=l.getBBox();u.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"),Le[e.id]||(Le[e.id]={}),Le[e.id].startRight=h,ln(o,e.startLabelRight)}if(e.endLabelLeft){const l=$e(e.endLabelLeft,e.labelStyle),h=t.insert("g").attr("class","edgeTerminals"),u=h.insert("g").attr("class","inner");o=u.node().appendChild(l);const p=l.getBBox();u.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"),h.node().appendChild(l),Le[e.id]||(Le[e.id]={}),Le[e.id].endLeft=h,ln(o,e.endLabelLeft)}if(e.endLabelRight){const l=$e(e.endLabelRight,e.labelStyle),h=t.insert("g").attr("class","edgeTerminals"),u=h.insert("g").attr("class","inner");o=u.node().appendChild(l);const p=l.getBBox();u.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"),h.node().appendChild(l),Le[e.id]||(Le[e.id]={}),Le[e.id].endRight=h,ln(o,e.endLabelRight)}return r};function ln(t,e){Y().flowchart.htmlLabels&&t&&(t.style.width=e.length*9+"px",t.style.height="12px")}const mu=(t,e)=>{I.debug("Moving label abc88 ",t.id,t.label,Mn[t.id],e);let i=e.updatedPath?e.updatedPath:e.originalPath;const r=Y(),{subGraphTitleTotalMargin:s}=ua(r);if(t.label){const n=Mn[t.id];let a=t.x,o=t.y;if(i){const l=Rt.calcLabelPosition(i);I.debug("Moving label "+t.label+" from (",a,",",o,") to (",l.x,",",l.y,") abc88"),e.updatedPath&&(a=l.x,o=l.y)}n.attr("transform",`translate(${a}, ${o+s/2})`)}if(t.startLabelLeft){const n=Le[t.id].startLeft;let a=t.x,o=t.y;if(i){const l=Rt.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_left",i);a=l.x,o=l.y}n.attr("transform",`translate(${a}, ${o})`)}if(t.startLabelRight){const n=Le[t.id].startRight;let a=t.x,o=t.y;if(i){const l=Rt.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_right",i);a=l.x,o=l.y}n.attr("transform",`translate(${a}, ${o})`)}if(t.endLabelLeft){const n=Le[t.id].endLeft;let a=t.x,o=t.y;if(i){const l=Rt.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_left",i);a=l.x,o=l.y}n.attr("transform",`translate(${a}, ${o})`)}if(t.endLabelRight){const n=Le[t.id].endRight;let a=t.x,o=t.y;if(i){const l=Rt.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_right",i);a=l.x,o=l.y}n.attr("transform",`translate(${a}, ${o})`)}},m4=(t,e)=>{const i=t.x,r=t.y,s=Math.abs(e.x-i),n=Math.abs(e.y-r),a=t.width/2,o=t.height/2;return s>=a||n>=o},x4=(t,e,i)=>{I.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(e)}
  insidePoint : ${JSON.stringify(i)}
  node        : x:${t.x} y:${t.y} w:${t.width} h:${t.height}`);const r=t.x,s=t.y,n=Math.abs(r-i.x),a=t.width/2;let o=i.x<e.x?a-n:a+n;const l=t.height/2,h=Math.abs(e.y-i.y),u=Math.abs(e.x-i.x);if(Math.abs(s-e.y)*a>Math.abs(r-e.x)*l){let p=i.y<e.y?e.y-l-s:s-l-e.y;o=u*p/h;const d={x:i.x<e.x?i.x+o:i.x-u+o,y:i.y<e.y?i.y+h-p:i.y-h+p};return o===0&&(d.x=e.x,d.y=e.y),u===0&&(d.x=e.x),h===0&&(d.y=e.y),I.debug(`abc89 topp/bott calc, Q ${h}, q ${p}, R ${u}, r ${o}`,d),d}else{i.x<e.x?o=e.x-a-r:o=r-a-e.x;let p=h*o/u,d=i.x<e.x?i.x+u-o:i.x-u+o,g=i.y<e.y?i.y+p:i.y-p;return I.debug(`sides calc abc89, Q ${h}, q ${p}, R ${u}, r ${o}`,{_x:d,_y:g}),o===0&&(d=e.x,g=e.y),u===0&&(d=e.x),h===0&&(g=e.y),{x:d,y:g}}},xc=(t,e)=>{I.debug("abc88 cutPathAtIntersect",t,e);let i=[],r=t[0],s=!1;return t.forEach(n=>{if(!m4(e,n)&&!s){const a=x4(e,r,n);let o=!1;i.forEach(l=>{o=o||l.x===a.x&&l.y===a.y}),i.some(l=>l.x===a.x&&l.y===a.y)||i.push(a),s=!0}else r=n,s||i.push(n)}),i},xu=function(t,e,i,r,s,n,a){let o=i.points;I.debug("abc88 InsertEdge: edge=",i,"e=",e);let l=!1;const h=n.node(e.v);var u=n.node(e.w);u!=null&&u.intersect&&(h!=null&&h.intersect)&&(o=o.slice(1,i.points.length-1),o.unshift(h.intersect(o[0])),o.push(u.intersect(o[o.length-1]))),i.toCluster&&(I.debug("to cluster abc88",r[i.toCluster]),o=xc(i.points,r[i.toCluster].node),l=!0),i.fromCluster&&(I.debug("from cluster abc88",r[i.fromCluster]),o=xc(o.reverse(),r[i.fromCluster].node).reverse(),l=!0);const p=o.filter(L=>!Number.isNaN(L.y));let d=Gs;i.curve&&(s==="graph"||s==="flowchart")&&(d=i.curve);const{x:g,y}=gu(i),x=dr().x(g).y(y).curve(d);let _;switch(i.thickness){case"normal":_="edge-thickness-normal";break;case"thick":_="edge-thickness-thick";break;case"invisible":_="edge-thickness-thick";break;default:_=""}switch(i.pattern){case"solid":_+=" edge-pattern-solid";break;case"dotted":_+=" edge-pattern-dotted";break;case"dashed":_+=" edge-pattern-dashed";break}const v=t.append("path").attr("d",x(p)).attr("id",i.id).attr("class"," "+_+(i.classes?" "+i.classes:"")).attr("style",i.style);let E="";(Y().flowchart.arrowMarkerAbsolute||Y().state.arrowMarkerAbsolute)&&(E=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,E=E.replace(/\(/g,"\\("),E=E.replace(/\)/g,"\\)")),yu(v,i,E,a,s);let F={};return l&&(F.updatedPath=o),F.originalPath=i.points,F};let Ft={},mi={},bu={};const b4=()=>{mi={},bu={},Ft={}},Vn=(t,e)=>(I.trace("In isDecendant",e," ",t," = ",mi[e].includes(t)),!!mi[e].includes(t)),k4=(t,e)=>(I.info("Decendants of ",e," is ",mi[e]),I.info("Edge is ",t),t.v===e||t.w===e?!1:mi[e]?mi[e].includes(t.v)||Vn(t.v,e)||Vn(t.w,e)||mi[e].includes(t.w):(I.debug("Tilt, ",e,",not in decendants"),!1)),ku=(t,e,i,r)=>{I.warn("Copying children of ",t,"root",r,"data",e.node(t),r);const s=e.children(t)||[];t!==r&&s.push(t),I.warn("Copying (nodes) clusterId",t,"nodes",s),s.forEach(n=>{if(e.children(n).length>0)ku(n,e,i,r);else{const a=e.node(n);I.info("cp ",n," to ",r," with parent ",t),i.setNode(n,a),r!==e.parent(n)&&(I.warn("Setting parent",n,e.parent(n)),i.setParent(n,e.parent(n))),t!==r&&n!==t?(I.debug("Setting parent",n,t),i.setParent(n,t)):(I.info("In copy ",t,"root",r,"data",e.node(t),r),I.debug("Not Setting parent for node=",n,"cluster!==rootId",t!==r,"node!==clusterId",n!==t));const o=e.edges(n);I.debug("Copying Edges",o),o.forEach(l=>{I.info("Edge",l);const h=e.edge(l.v,l.w,l.name);I.info("Edge data",h,r);try{k4(l,r)?(I.info("Copying as ",l.v,l.w,h,l.name),i.setEdge(l.v,l.w,h,l.name),I.info("newGraph edges ",i.edges(),i.edge(i.edges()[0]))):I.info("Skipping copy of edge ",l.v,"-->",l.w," rootId: ",r," clusterId:",t)}catch(u){I.error(u)}})}I.debug("Removing node",n),e.removeNode(n)})},_u=(t,e)=>{const i=e.children(t);let r=[...i];for(const s of i)bu[s]=t,r=[...r,..._u(s,e)];return r},Is=(t,e)=>{I.trace("Searching",t);const i=e.children(t);if(I.trace("Searching children of id ",t,i),i.length<1)return I.trace("This is a valid node",t),t;for(const r of i){const s=Is(r,e);if(s)return I.trace("Found replacement for",t," => ",s),s}},cn=t=>!Ft[t]||!Ft[t].externalConnections?t:Ft[t]?Ft[t].id:t,_4=(t,e)=>{if(!t||e>10){I.debug("Opting out, no graph ");return}else I.debug("Opting in, graph ");t.nodes().forEach(function(i){t.children(i).length>0&&(I.warn("Cluster identified",i," Replacement id in edges: ",Is(i,t)),mi[i]=_u(i,t),Ft[i]={id:Is(i,t),clusterData:t.node(i)})}),t.nodes().forEach(function(i){const r=t.children(i),s=t.edges();r.length>0?(I.debug("Cluster identified",i,mi),s.forEach(n=>{if(n.v!==i&&n.w!==i){const a=Vn(n.v,i),o=Vn(n.w,i);a^o&&(I.warn("Edge: ",n," leaves cluster ",i),I.warn("Decendants of XXX ",i,": ",mi[i]),Ft[i].externalConnections=!0)}})):I.debug("Not a cluster ",i,mi)});for(let i of Object.keys(Ft)){const r=Ft[i].id,s=t.parent(r);s!==i&&Ft[s]&&!Ft[s].externalConnections&&(Ft[i].id=s)}t.edges().forEach(function(i){const r=t.edge(i);I.warn("Edge "+i.v+" -> "+i.w+": "+JSON.stringify(i)),I.warn("Edge "+i.v+" -> "+i.w+": "+JSON.stringify(t.edge(i)));let s=i.v,n=i.w;if(I.warn("Fix XXX",Ft,"ids:",i.v,i.w,"Translating: ",Ft[i.v]," --- ",Ft[i.w]),Ft[i.v]&&Ft[i.w]&&Ft[i.v]===Ft[i.w]){I.warn("Fixing and trixing link to self - removing XXX",i.v,i.w,i.name),I.warn("Fixing and trixing - removing XXX",i.v,i.w,i.name),s=cn(i.v),n=cn(i.w),t.removeEdge(i.v,i.w,i.name);const a=i.w+"---"+i.v;t.setNode(a,{domId:a,id:a,labelStyle:"",labelText:r.label,padding:0,shape:"labelRect",style:""});const o=structuredClone(r),l=structuredClone(r);o.label="",o.arrowTypeEnd="none",l.label="",o.fromCluster=i.v,l.toCluster=i.v,t.setEdge(s,a,o,i.name+"-cyclic-special"),t.setEdge(a,n,l,i.name+"-cyclic-special")}else if(Ft[i.v]||Ft[i.w]){if(I.warn("Fixing and trixing - removing XXX",i.v,i.w,i.name),s=cn(i.v),n=cn(i.w),t.removeEdge(i.v,i.w,i.name),s!==i.v){const a=t.parent(s);Ft[a].externalConnections=!0,r.fromCluster=i.v}if(n!==i.w){const a=t.parent(n);Ft[a].externalConnections=!0,r.toCluster=i.w}I.warn("Fix Replacing with XXX",s,n,i.name),t.setEdge(s,n,r,i.name)}}),I.warn("Adjusted Graph",ji(t)),Tu(t,0),I.trace(Ft)},Tu=(t,e)=>{if(I.warn("extractor - ",e,ji(t),t.children("D")),e>10){I.error("Bailing out");return}let i=t.nodes(),r=!1;for(const s of i){const n=t.children(s);r=r||n.length>0}if(!r){I.debug("Done, no node has children",t.nodes());return}I.debug("Nodes = ",i,e);for(const s of i)if(I.debug("Extracting node",s,Ft,Ft[s]&&!Ft[s].externalConnections,!t.parent(s),t.node(s),t.children("D")," Depth ",e),!Ft[s])I.debug("Not a cluster",s,e);else if(!Ft[s].externalConnections&&t.children(s)&&t.children(s).length>0){I.warn("Cluster without external connections, without a parent and with children",s,e);let a=t.graph().rankdir==="TB"?"LR":"TB";Ft[s]&&Ft[s].clusterData&&Ft[s].clusterData.dir&&(a=Ft[s].clusterData.dir,I.warn("Fixing dir",Ft[s].clusterData.dir,a));const o=new Bi({multigraph:!0,compound:!0}).setGraph({rankdir:a,nodesep:50,ranksep:50,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});I.warn("Old graph before copy",ji(t)),ku(s,t,o,s),t.setNode(s,{clusterNode:!0,id:s,clusterData:Ft[s].clusterData,labelText:Ft[s].labelText,graph:o}),I.warn("New graph after copy node: (",s,")",ji(o)),I.debug("Old graph after copy",ji(t))}else I.warn("Cluster ** ",s," **not meeting the criteria !externalConnections:",!Ft[s].externalConnections," no parent: ",!t.parent(s)," children ",t.children(s)&&t.children(s).length>0,t.children("D"),e),I.debug(Ft);i=t.nodes(),I.warn("New list of nodes",i);for(const s of i){const n=t.node(s);I.warn(" Now next level",s,n),n.clusterNode&&Tu(n.graph,e+1)}},Cu=(t,e)=>{if(e.length===0)return[];let i=Object.assign(e);return e.forEach(r=>{const s=t.children(r),n=Cu(t,s);i=[...i,...n]}),i},T4=t=>Cu(t,t.children()),C4=(t,e)=>{I.info("Creating subgraph rect for ",e.id,e);const i=Y(),r=t.insert("g").attr("class","cluster"+(e.class?" "+e.class:"")).attr("id",e.id),s=r.insert("rect",":first-child"),n=Ce(i.flowchart.htmlLabels),a=r.insert("g").attr("class","cluster-label"),o=e.labelType==="markdown"?ca(a,e.labelText,{style:e.labelStyle,useHtmlLabels:n}):a.node().appendChild($e(e.labelText,e.labelStyle,void 0,!0));let l=o.getBBox();if(Ce(i.flowchart.htmlLabels)){const y=o.children[0],x=yt(o);l=y.getBoundingClientRect(),x.attr("width",l.width),x.attr("height",l.height)}const h=0*e.padding,u=h/2,p=e.width<=l.width+h?l.width+h:e.width;e.width<=l.width+h?e.diff=(l.width-e.width)/2-e.padding/2:e.diff=-e.padding/2,I.trace("Data ",e,JSON.stringify(e)),s.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-p/2).attr("y",e.y-e.height/2-u).attr("width",p).attr("height",e.height+h);const{subGraphTitleTopMargin:d}=ua(i);n?a.attr("transform",`translate(${e.x-l.width/2}, ${e.y-e.height/2+d})`):a.attr("transform",`translate(${e.x}, ${e.y-e.height/2+d})`);const g=s.node().getBBox();return e.width=g.width,e.height=g.height,e.intersect=function(y){return Qs(e,y)},r},E4=(t,e)=>{const i=t.insert("g").attr("class","note-cluster").attr("id",e.id),r=i.insert("rect",":first-child"),s=0*e.padding,n=s/2;r.attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-e.width/2-n).attr("y",e.y-e.height/2-n).attr("width",e.width+s).attr("height",e.height+s).attr("fill","none");const a=r.node().getBBox();return e.width=a.width,e.height=a.height,e.intersect=function(o){return Qs(e,o)},i},S4=(t,e)=>{const i=Y(),r=t.insert("g").attr("class",e.classes).attr("id",e.id),s=r.insert("rect",":first-child"),n=r.insert("g").attr("class","cluster-label"),a=r.append("rect"),o=n.node().appendChild($e(e.labelText,e.labelStyle,void 0,!0));let l=o.getBBox();if(Ce(i.flowchart.htmlLabels)){const y=o.children[0],x=yt(o);l=y.getBoundingClientRect(),x.attr("width",l.width),x.attr("height",l.height)}l=o.getBBox();const h=0*e.padding,u=h/2,p=e.width<=l.width+e.padding?l.width+e.padding:e.width;e.width<=l.width+e.padding?e.diff=(l.width+e.padding*0-e.width)/2:e.diff=-e.padding/2,s.attr("class","outer").attr("x",e.x-p/2-u).attr("y",e.y-e.height/2-u).attr("width",p+h).attr("height",e.height+h),a.attr("class","inner").attr("x",e.x-p/2-u).attr("y",e.y-e.height/2-u+l.height-1).attr("width",p+h).attr("height",e.height+h-l.height-3);const{subGraphTitleTopMargin:d}=ua(i);n.attr("transform",`translate(${e.x-l.width/2}, ${e.y-e.height/2-e.padding/3+(Ce(i.flowchart.htmlLabels)?5:3)+d})`);const g=s.node().getBBox();return e.height=g.height,e.intersect=function(y){return Qs(e,y)},r},v4=(t,e)=>{const i=t.insert("g").attr("class",e.classes).attr("id",e.id),r=i.insert("rect",":first-child"),s=0*e.padding,n=s/2;r.attr("class","divider").attr("x",e.x-e.width/2-n).attr("y",e.y-e.height/2).attr("width",e.width+s).attr("height",e.height+s);const a=r.node().getBBox();return e.width=a.width,e.height=a.height,e.diff=-e.padding/2,e.intersect=function(o){return Qs(e,o)},i},w4={rect:C4,roundedWithTitle:S4,noteGroup:E4,divider:v4};let Eu={};const A4=(t,e)=>{I.trace("Inserting cluster");const i=e.shape||"rect";Eu[e.id]=w4[i](t,e)},L4=()=>{Eu={}},Su=async(t,e,i,r,s,n)=>{I.info("Graph in recursive render: XXX",ji(e),s);const a=e.graph().rankdir;I.trace("Dir in recursive render - dir:",a);const o=t.insert("g").attr("class","root");e.nodes()?I.info("Recursive render XXX",e.nodes()):I.info("No nodes found for",e),e.edges().length>0&&I.trace("Recursive edges",e.edge(e.edges()[0]));const l=o.insert("g").attr("class","clusters"),h=o.insert("g").attr("class","edgePaths"),u=o.insert("g").attr("class","edgeLabels"),p=o.insert("g").attr("class","nodes");await Promise.all(e.nodes().map(async function(y){const x=e.node(y);if(s!==void 0){const _=JSON.parse(JSON.stringify(s.clusterData));I.info("Setting data for cluster XXX (",y,") ",_,s),e.setNode(s.id,_),e.parent(y)||(I.trace("Setting parent",y,s.id),e.setParent(y,s.id,_))}if(I.info("(Insert) Node XXX"+y+": "+JSON.stringify(e.node(y))),x&&x.clusterNode){I.info("Cluster identified",y,x.width,e.node(y));const _=await Su(p,x.graph,i,r,e.node(y),n),v=_.elem;se(x,v),x.diff=_.diff||0,I.info("Node bounds (abc123)",y,x,x.width,x.x,x.y),f4(v,x),I.warn("Recursive render complete ",v,x)}else e.children(y).length>0?(I.info("Cluster - the non recursive path XXX",y,x.id,x,e),I.info(Is(x.id,e)),Ft[x.id]={id:Is(x.id,e),node:x}):(I.info("Node - the non recursive path",y,x.id,x),await ha(p,e.node(y),a))})),e.edges().forEach(function(y){const x=e.edge(y.v,y.w,y.name);I.info("Edge "+y.v+" -> "+y.w+": "+JSON.stringify(y)),I.info("Edge "+y.v+" -> "+y.w+": ",y," ",JSON.stringify(e.edge(y))),I.info("Fix",Ft,"ids:",y.v,y.w,"Translateing: ",Ft[y.v],Ft[y.w]),Qo(u,x)}),e.edges().forEach(function(y){I.info("Edge "+y.v+" -> "+y.w+": "+JSON.stringify(y))}),I.info("#############################################"),I.info("###                Layout                 ###"),I.info("#############################################"),I.info(e),Hs(e),I.info("Graph after layout:",ji(e));let d=0;const{subGraphTitleTotalMargin:g}=ua(n);return T4(e).forEach(function(y){const x=e.node(y);I.info("Position "+y+": "+JSON.stringify(e.node(y))),I.info("Position "+y+": ("+x.x,","+x.y,") width: ",x.width," height: ",x.height),x&&x.clusterNode?(x.y+=g,Ha(x)):e.children(y).length>0?(x.height+=g,A4(l,x),Ft[x.id].node=x):(x.y+=g/2,Ha(x))}),e.edges().forEach(function(y){const x=e.edge(y);I.info("Edge "+y.v+" -> "+y.w+": "+JSON.stringify(x),x),x.points.forEach(v=>v.y+=g/2);const _=xu(h,y,x,Ft,i,e,r);mu(x,_)}),e.nodes().forEach(function(y){const x=e.node(y);I.info(y,x.type,x.diff),x.type==="group"&&(d=x.diff)}),{elem:o,diff:d}},Zo=async(t,e,i,r,s)=>{$o(t,i,r,s),p4(),y4(),L4(),b4(),I.warn("Graph at first:",JSON.stringify(ji(e))),_4(e),I.warn("Graph after:",JSON.stringify(ji(e)));const n=Y();await Su(t,e,r,s,void 0,n)},vu={},B4=function(t){const e=Object.keys(t);for(const i of e)vu[i]=t[i]},wu=function(t,e,i,r,s,n){const a=r.select(`[id="${i}"]`);Object.keys(t).forEach(function(l){const h=t[l];let u="default";h.classes.length>0&&(u=h.classes.join(" ")),u=u+" flowchart-label";const p=ii(h.styles);let d=h.text!==void 0?h.text:h.id,g;if(I.info("vertex",h,h.labelType),h.labelType==="markdown")I.info("vertex",h,h.labelType);else if(Ce(Y().flowchart.htmlLabels)){const _={label:d.replace(/fa[blrs]?:fa-[\w-]+/g,v=>`<i class='${v.replace(":"," ")}'></i>`)};g=lh(a,_).node(),g.parentNode.removeChild(g)}else{const _=s.createElementNS("http://www.w3.org/2000/svg","text");_.setAttribute("style",p.labelStyle.replace("color:","fill:"));const v=d.split(mt.lineBreakRegex);for(const E of v){const F=s.createElementNS("http://www.w3.org/2000/svg","tspan");F.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),F.setAttribute("dy","1em"),F.setAttribute("x","1"),F.textContent=E,_.appendChild(F)}g=_}let y=0,x="";switch(h.type){case"round":y=5,x="rect";break;case"square":x="rect";break;case"diamond":x="question";break;case"hexagon":x="hexagon";break;case"odd":x="rect_left_inv_arrow";break;case"lean_right":x="lean_right";break;case"lean_left":x="lean_left";break;case"trapezoid":x="trapezoid";break;case"inv_trapezoid":x="inv_trapezoid";break;case"odd_right":x="rect_left_inv_arrow";break;case"circle":x="circle";break;case"ellipse":x="ellipse";break;case"stadium":x="stadium";break;case"subroutine":x="subroutine";break;case"cylinder":x="cylinder";break;case"group":x="rect";break;case"doublecircle":x="doublecircle";break;default:x="rect"}e.setNode(h.id,{labelStyle:p.labelStyle,shape:x,labelText:d,labelType:h.labelType,rx:y,ry:y,class:u,style:p.style,id:h.id,link:h.link,linkTarget:h.linkTarget,tooltip:n.db.getTooltip(h.id)||"",domId:n.db.lookUpDomId(h.id),haveCallback:h.haveCallback,width:h.type==="group"?500:void 0,dir:h.dir,type:h.type,props:h.props,padding:Y().flowchart.padding}),I.info("setNode",{labelStyle:p.labelStyle,labelType:h.labelType,shape:x,labelText:d,rx:y,ry:y,class:u,style:p.style,id:h.id,domId:n.db.lookUpDomId(h.id),width:h.type==="group"?500:void 0,type:h.type,dir:h.dir,props:h.props,padding:Y().flowchart.padding})})},Au=function(t,e,i){I.info("abc78 edges = ",t);let r=0,s={},n,a;if(t.defaultStyle!==void 0){const o=ii(t.defaultStyle);n=o.style,a=o.labelStyle}t.forEach(function(o){r++;const l="L-"+o.start+"-"+o.end;s[l]===void 0?(s[l]=0,I.info("abc78 new entry",l,s[l])):(s[l]++,I.info("abc78 new entry",l,s[l]));let h=l+"-"+s[l];I.info("abc78 new link id to be used is",l,h,s[l]);const u="LS-"+o.start,p="LE-"+o.end,d={style:"",labelStyle:""};switch(d.minlen=o.length||1,o.type==="arrow_open"?d.arrowhead="none":d.arrowhead="normal",d.arrowTypeStart="arrow_open",d.arrowTypeEnd="arrow_open",o.type){case"double_arrow_cross":d.arrowTypeStart="arrow_cross";case"arrow_cross":d.arrowTypeEnd="arrow_cross";break;case"double_arrow_point":d.arrowTypeStart="arrow_point";case"arrow_point":d.arrowTypeEnd="arrow_point";break;case"double_arrow_circle":d.arrowTypeStart="arrow_circle";case"arrow_circle":d.arrowTypeEnd="arrow_circle";break}let g="",y="";switch(o.stroke){case"normal":g="fill:none;",n!==void 0&&(g=n),a!==void 0&&(y=a),d.thickness="normal",d.pattern="solid";break;case"dotted":d.thickness="normal",d.pattern="dotted",d.style="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":d.thickness="thick",d.pattern="solid",d.style="stroke-width: 3.5px;fill:none;";break;case"invisible":d.thickness="invisible",d.pattern="solid",d.style="stroke-width: 0;fill:none;";break}if(o.style!==void 0){const x=ii(o.style);g=x.style,y=x.labelStyle}d.style=d.style+=g,d.labelStyle=d.labelStyle+=y,o.interpolate!==void 0?d.curve=di(o.interpolate,ei):t.defaultInterpolate!==void 0?d.curve=di(t.defaultInterpolate,ei):d.curve=di(vu.curve,ei),o.text===void 0?o.style!==void 0&&(d.arrowheadStyle="fill: #333"):(d.arrowheadStyle="fill: #333",d.labelpos="c"),d.labelType=o.labelType,d.label=o.text.replace(mt.lineBreakRegex,`
`),o.style===void 0&&(d.style=d.style||"stroke: #333; stroke-width: 1.5px;fill:none;"),d.labelStyle=d.labelStyle.replace("color:","fill:"),d.id=h,d.classes="flowchart-link "+u+" "+p,e.setEdge(o.start,o.end,d,r)})},I4=function(t,e){return e.db.getClasses()},D4=async function(t,e,i,r){I.info("Drawing flowchart");let s=r.db.getDirection();s===void 0&&(s="TD");const{securityLevel:n,flowchart:a}=Y(),o=a.nodeSpacing||50,l=a.rankSpacing||50;let h;n==="sandbox"&&(h=yt("#i"+e));const u=n==="sandbox"?yt(h.nodes()[0].contentDocument.body):yt("body"),p=n==="sandbox"?h.nodes()[0].contentDocument:document,d=new Bi({multigraph:!0,compound:!0}).setGraph({rankdir:s,nodesep:o,ranksep:l,marginx:0,marginy:0}).setDefaultEdgeLabel(function(){return{}});let g;const y=r.db.getSubGraphs();I.info("Subgraphs - ",y);for(let T=y.length-1;T>=0;T--)g=y[T],I.info("Subgraph - ",g),r.db.addVertex(g.id,{text:g.title,type:g.labelType},"group",void 0,g.classes,g.dir);const x=r.db.getVertices(),_=r.db.getEdges();I.info("Edges",_);let v=0;for(v=y.length-1;v>=0;v--){g=y[v],oh("cluster").append("text");for(let T=0;T<g.nodes.length;T++)I.info("Setting up subgraphs",g.nodes[T],g.id),d.setParent(g.nodes[T],g.id)}wu(x,d,e,u,p,r),Au(_,d);const E=u.select(`[id="${e}"]`),F=u.select("#"+e+" g");if(await Zo(F,d,["point","circle","cross"],"flowchart",e),Rt.insertTitle(E,"flowchartTitleText",a.titleTopMargin,r.db.getDiagramTitle()),gr(d,E,a.diagramPadding,a.useMaxWidth),r.db.indexNodes("subGraph"+v),!a.htmlLabels){const T=p.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(const k of T){const A=k.getBBox(),S=p.createElementNS("http://www.w3.org/2000/svg","rect");S.setAttribute("rx",0),S.setAttribute("ry",0),S.setAttribute("width",A.width),S.setAttribute("height",A.height),k.insertBefore(S,k.firstChild)}}Object.keys(x).forEach(function(T){const k=x[T];if(k.link){const A=yt("#"+e+' [id="'+T+'"]');if(A){const S=p.createElementNS("http://www.w3.org/2000/svg","a");S.setAttributeNS("http://www.w3.org/2000/svg","class",k.classes.join(" ")),S.setAttributeNS("http://www.w3.org/2000/svg","href",k.link),S.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),n==="sandbox"?S.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):k.linkTarget&&S.setAttributeNS("http://www.w3.org/2000/svg","target",k.linkTarget);const m=A.insert(function(){return S},":first-child"),C=A.select(".label-container");C&&m.append(function(){return C.node()});const f=A.select(".label");f&&m.append(function(){return f.node()})}}})},Ga={setConf:B4,addVertices:wu,addEdges:Au,getClasses:I4,draw:D4},F4=(t,e)=>{const i=hh,r=i(t,"r"),s=i(t,"g"),n=i(t,"b");return Hr(r,s,n,e)},R4=t=>`.label {
    font-family: ${t.fontFamily};
    color: ${t.nodeTextColor||t.textColor};
  }
  .cluster-label text {
    fill: ${t.titleColor};
  }
  .cluster-label span,p {
    color: ${t.titleColor};
  }

  .label text,span,p {
    fill: ${t.nodeTextColor||t.textColor};
    color: ${t.nodeTextColor||t.textColor};
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }
  .flowchart-label text {
    text-anchor: middle;
  }
  // .flowchart-label .text-outer-tspan {
  //   text-anchor: middle;
  // }
  // .flowchart-label .text-inner-tspan {
  //   text-anchor: start;
  // }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${t.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${t.lineColor};
    stroke-width: 2.0px;
  }

  .flowchart-link {
    stroke: ${t.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${t.edgeLabelBackground};
    rect {
      opacity: 0.5;
      background-color: ${t.edgeLabelBackground};
      fill: ${t.edgeLabelBackground};
    }
    text-align: center;
  }

  /* For html labels only */
  .labelBkg {
    background-color: ${F4(t.edgeLabelBackground,.5)};
    // background-color: 
  }

  .cluster rect {
    fill: ${t.clusterBkg};
    stroke: ${t.clusterBorder};
    stroke-width: 1px;
  }

  .cluster text {
    fill: ${t.titleColor};
  }

  .cluster span,p {
    color: ${t.titleColor};
  }
  /* .cluster div {
    color: ${t.titleColor};
  } */

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${t.fontFamily};
    font-size: 12px;
    background: ${t.tertiaryColor};
    border: 1px solid ${t.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .flowchartTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.textColor};
  }
`,Lu=R4;function Bu(t,e,i){const r=e.width,s=e.height,n=(r+s)*.9,a=[{x:n/2,y:0},{x:n,y:-n/2},{x:n/2,y:-n},{x:0,y:-n/2}],o=er(t,n,n,a);return i.intersect=function(l){return tr(i,a,l)},o}function Iu(t,e,i){const s=e.height,n=s/4,a=e.width+2*n,o=[{x:n,y:0},{x:a-n,y:0},{x:a,y:-s/2},{x:a-n,y:-s},{x:n,y:-s},{x:0,y:-s/2}],l=er(t,a,s,o);return i.intersect=function(h){return tr(i,o,h)},l}function Du(t,e,i){const r=e.width,s=e.height,n=[{x:-s/2,y:0},{x:r,y:0},{x:r,y:-s},{x:-s/2,y:-s},{x:0,y:-s/2}],a=er(t,r,s,n);return i.intersect=function(o){return tr(i,n,o)},a}function Fu(t,e,i){const r=e.width,s=e.height,n=[{x:-2*s/6,y:0},{x:r-s/6,y:0},{x:r+2*s/6,y:-s},{x:s/6,y:-s}],a=er(t,r,s,n);return i.intersect=function(o){return tr(i,n,o)},a}function Ru(t,e,i){const r=e.width,s=e.height,n=[{x:2*s/6,y:0},{x:r+s/6,y:0},{x:r-2*s/6,y:-s},{x:-s/6,y:-s}],a=er(t,r,s,n);return i.intersect=function(o){return tr(i,n,o)},a}function Nu(t,e,i){const r=e.width,s=e.height,n=[{x:-2*s/6,y:0},{x:r+2*s/6,y:0},{x:r-s/6,y:-s},{x:s/6,y:-s}],a=er(t,r,s,n);return i.intersect=function(o){return tr(i,n,o)},a}function Ou(t,e,i){const r=e.width,s=e.height,n=[{x:s/6,y:0},{x:r-s/6,y:0},{x:r+2*s/6,y:-s},{x:-2*s/6,y:-s}],a=er(t,r,s,n);return i.intersect=function(o){return tr(i,n,o)},a}function Pu(t,e,i){const r=e.width,s=e.height,n=[{x:0,y:0},{x:r+s/2,y:0},{x:r,y:-s/2},{x:r+s/2,y:-s},{x:0,y:-s}],a=er(t,r,s,n);return i.intersect=function(o){return tr(i,n,o)},a}function Mu(t,e,i){const r=e.height,s=e.width+r/4,n=t.insert("rect",":first-child").attr("rx",r/2).attr("ry",r/2).attr("x",-s/2).attr("y",-r/2).attr("width",s).attr("height",r);return i.intersect=function(a){return ch(i,a)},n}function Vu(t,e,i){const r=e.width,s=e.height,n=[{x:0,y:0},{x:r,y:0},{x:r,y:-s},{x:0,y:-s},{x:0,y:0},{x:-8,y:0},{x:r+8,y:0},{x:r+8,y:-s},{x:-8,y:-s},{x:-8,y:0}],a=er(t,r,s,n);return i.intersect=function(o){return tr(i,n,o)},a}function zu(t,e,i){const r=e.width,s=r/2,n=s/(2.5+r/50),a=e.height+n,o="M 0,"+n+" a "+s+","+n+" 0,0,0 "+r+" 0 a "+s+","+n+" 0,0,0 "+-r+" 0 l 0,"+a+" a "+s+","+n+" 0,0,0 "+r+" 0 l 0,"+-a,l=t.attr("label-offset-y",n).insert("path",":first-child").attr("d",o).attr("transform","translate("+-r/2+","+-(a/2+n)+")");return i.intersect=function(h){const u=ch(i,h),p=u.x-i.x;if(s!=0&&(Math.abs(p)<i.width/2||Math.abs(p)==i.width/2&&Math.abs(u.y-i.y)>i.height/2-n)){let d=n*n*(1-p*p/(s*s));d!=0&&(d=Math.sqrt(d)),d=n-d,h.y-i.y>0&&(d=-d),u.y+=d}return u},l}function N4(t){t.shapes().question=Bu,t.shapes().hexagon=Iu,t.shapes().stadium=Mu,t.shapes().subroutine=Vu,t.shapes().cylinder=zu,t.shapes().rect_left_inv_arrow=Du,t.shapes().lean_right=Fu,t.shapes().lean_left=Ru,t.shapes().trapezoid=Nu,t.shapes().inv_trapezoid=Ou,t.shapes().rect_right_inv_arrow=Pu}function O4(t){t({question:Bu}),t({hexagon:Iu}),t({stadium:Mu}),t({subroutine:Vu}),t({cylinder:zu}),t({rect_left_inv_arrow:Du}),t({lean_right:Fu}),t({lean_left:Ru}),t({trapezoid:Nu}),t({inv_trapezoid:Ou}),t({rect_right_inv_arrow:Pu})}function er(t,e,i,r){return t.insert("polygon",":first-child").attr("points",r.map(function(s){return s.x+","+s.y}).join(" ")).attr("transform","translate("+-e/2+","+i/2+")")}const P4={addToRender:N4,addToRenderV2:O4},qu={},M4=function(t){const e=Object.keys(t);for(const i of e)qu[i]=t[i]},Wu=function(t,e,i,r,s,n){const a=r?r.select(`[id="${i}"]`):yt(`[id="${i}"]`),o=s||document;Object.keys(t).forEach(function(h){const u=t[h];let p="default";u.classes.length>0&&(p=u.classes.join(" "));const d=ii(u.styles);let g=u.text!==void 0?u.text:u.id,y;if(Ce(Y().flowchart.htmlLabels)){const v={label:g.replace(/fa[blrs]?:fa-[\w-]+/g,E=>`<i class='${E.replace(":"," ")}'></i>`)};y=lh(a,v).node(),y.parentNode.removeChild(y)}else{const v=o.createElementNS("http://www.w3.org/2000/svg","text");v.setAttribute("style",d.labelStyle.replace("color:","fill:"));const E=g.split(mt.lineBreakRegex);for(const F of E){const L=o.createElementNS("http://www.w3.org/2000/svg","tspan");L.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),L.setAttribute("dy","1em"),L.setAttribute("x","1"),L.textContent=F,v.appendChild(L)}y=v}let x=0,_="";switch(u.type){case"round":x=5,_="rect";break;case"square":_="rect";break;case"diamond":_="question";break;case"hexagon":_="hexagon";break;case"odd":_="rect_left_inv_arrow";break;case"lean_right":_="lean_right";break;case"lean_left":_="lean_left";break;case"trapezoid":_="trapezoid";break;case"inv_trapezoid":_="inv_trapezoid";break;case"odd_right":_="rect_left_inv_arrow";break;case"circle":_="circle";break;case"ellipse":_="ellipse";break;case"stadium":_="stadium";break;case"subroutine":_="subroutine";break;case"cylinder":_="cylinder";break;case"group":_="rect";break;default:_="rect"}I.warn("Adding node",u.id,u.domId),e.setNode(n.db.lookUpDomId(u.id),{labelType:"svg",labelStyle:d.labelStyle,shape:_,label:y,rx:x,ry:x,class:p,style:d.style,id:n.db.lookUpDomId(u.id)})})},Yu=function(t,e,i){let r=0,s,n;if(t.defaultStyle!==void 0){const a=ii(t.defaultStyle);s=a.style,n=a.labelStyle}t.forEach(function(a){r++;const o="L-"+a.start+"-"+a.end,l="LS-"+a.start,h="LE-"+a.end,u={};a.type==="arrow_open"?u.arrowhead="none":u.arrowhead="normal";let p="",d="";if(a.style!==void 0){const g=ii(a.style);p=g.style,d=g.labelStyle}else switch(a.stroke){case"normal":p="fill:none",s!==void 0&&(p=s),n!==void 0&&(d=n);break;case"dotted":p="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":p=" stroke-width: 3.5px;fill:none";break}u.style=p,u.labelStyle=d,a.interpolate!==void 0?u.curve=di(a.interpolate,ei):t.defaultInterpolate!==void 0?u.curve=di(t.defaultInterpolate,ei):u.curve=di(qu.curve,ei),a.text===void 0?a.style!==void 0&&(u.arrowheadStyle="fill: #333"):(u.arrowheadStyle="fill: #333",u.labelpos="c",Ce(Y().flowchart.htmlLabels)?(u.labelType="html",u.label=`<span id="L-${o}" class="edgeLabel L-${l}' L-${h}" style="${u.labelStyle}">${a.text.replace(/fa[blrs]?:fa-[\w-]+/g,g=>`<i class='${g.replace(":"," ")}'></i>`)}</span>`):(u.labelType="text",u.label=a.text.replace(mt.lineBreakRegex,`
`),a.style===void 0&&(u.style=u.style||"stroke: #333; stroke-width: 1.5px;fill:none"),u.labelStyle=u.labelStyle.replace("color:","fill:"))),u.id=o,u.class=l+" "+h,u.minlen=a.length||1,e.setEdge(i.db.lookUpDomId(a.start),i.db.lookUpDomId(a.end),u,r)})},V4=function(t,e){return I.info("Extracting classes"),e.db.getClasses()},z4=function(t,e,i,r){I.info("Drawing flowchart");const{securityLevel:s,flowchart:n}=Y();let a;s==="sandbox"&&(a=yt("#i"+e));const o=s==="sandbox"?yt(a.nodes()[0].contentDocument.body):yt("body"),l=s==="sandbox"?a.nodes()[0].contentDocument:document;let h=r.db.getDirection();h===void 0&&(h="TD");const u=n.nodeSpacing||50,p=n.rankSpacing||50,d=new Bi({multigraph:!0,compound:!0}).setGraph({rankdir:h,nodesep:u,ranksep:p,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});let g;const y=r.db.getSubGraphs();for(let k=y.length-1;k>=0;k--)g=y[k],r.db.addVertex(g.id,g.title,"group",void 0,g.classes);const x=r.db.getVertices();I.warn("Get vertices",x);const _=r.db.getEdges();let v=0;for(v=y.length-1;v>=0;v--){g=y[v],oh("cluster").append("text");for(let k=0;k<g.nodes.length;k++)I.warn("Setting subgraph",g.nodes[k],r.db.lookUpDomId(g.nodes[k]),r.db.lookUpDomId(g.id)),d.setParent(r.db.lookUpDomId(g.nodes[k]),r.db.lookUpDomId(g.id))}Wu(x,d,e,o,l,r),Yu(_,d,r);const E=new Gd;P4.addToRender(E),E.arrows().none=function(A,S,m,C){const B=A.append("marker").attr("id",S).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 0 0 L 0 0 z");jd(B,m[C+"Style"])},E.arrows().normal=function(A,S){A.append("marker").attr("id",S).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowheadPath").style("stroke-width",1).style("stroke-dasharray","1,0")};const F=o.select(`[id="${e}"]`),L=o.select("#"+e+" g");for(E(L,d),L.selectAll("g.node").attr("title",function(){return r.db.getTooltip(this.id)}),r.db.indexNodes("subGraph"+v),v=0;v<y.length;v++)if(g=y[v],g.title!=="undefined"){const k=l.querySelectorAll("#"+e+' [id="'+r.db.lookUpDomId(g.id)+'"] rect'),A=l.querySelectorAll("#"+e+' [id="'+r.db.lookUpDomId(g.id)+'"]'),S=k[0].x.baseVal.value,m=k[0].y.baseVal.value,C=k[0].width.baseVal.value,B=yt(A[0]).select(".label");B.attr("transform",`translate(${S+C/2}, ${m+14})`),B.attr("id",e+"Text");for(let b=0;b<g.classes.length;b++)A[0].classList.add(g.classes[b])}if(!n.htmlLabels){const k=l.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(const A of k){const S=A.getBBox(),m=l.createElementNS("http://www.w3.org/2000/svg","rect");m.setAttribute("rx",0),m.setAttribute("ry",0),m.setAttribute("width",S.width),m.setAttribute("height",S.height),A.insertBefore(m,A.firstChild)}}gr(d,F,n.diagramPadding,n.useMaxWidth),Object.keys(x).forEach(function(k){const A=x[k];if(A.link){const S=o.select("#"+e+' [id="'+r.db.lookUpDomId(k)+'"]');if(S){const m=l.createElementNS("http://www.w3.org/2000/svg","a");m.setAttributeNS("http://www.w3.org/2000/svg","class",A.classes.join(" ")),m.setAttributeNS("http://www.w3.org/2000/svg","href",A.link),m.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),s==="sandbox"?m.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):A.linkTarget&&m.setAttributeNS("http://www.w3.org/2000/svg","target",A.linkTarget);const C=S.insert(function(){return m},":first-child"),f=S.select(".label-container");f&&C.append(function(){return f.node()});const B=S.select(".label");B&&C.append(function(){return B.node()})}}})},q4={setConf:M4,addVertices:Wu,addEdges:Yu,getClasses:V4,draw:z4},W4={parser:Go,db:Er,renderer:Ga,styles:Lu,init:t=>{t.flowchart||(t.flowchart={}),t.flowchart.arrowMarkerAbsolute=t.arrowMarkerAbsolute,q4.setConf(t.flowchart),Er.clear(),Er.setGen("gen-1")}},Y4=Object.freeze(Object.defineProperty({__proto__:null,diagram:W4},Symbol.toStringTag,{value:"Module"})),U4={parser:Go,db:Er,renderer:Ga,styles:Lu,init:t=>{t.flowchart||(t.flowchart={}),t.flowchart.arrowMarkerAbsolute=t.arrowMarkerAbsolute,ig({flowchart:{arrowMarkerAbsolute:t.arrowMarkerAbsolute}}),Ga.setConf(t.flowchart),Er.clear(),Er.setGen("gen-2")}},H4=Object.freeze(Object.defineProperty({__proto__:null,diagram:U4},Symbol.toStringTag,{value:"Module"}));var ja=function(){var t=function(S,m,C,f){for(C=C||{},f=S.length;f--;C[S[f]]=m);return C},e=[6,8,10,20,22,24,26,27,28],i=[1,10],r=[1,11],s=[1,12],n=[1,13],a=[1,14],o=[1,15],l=[1,21],h=[1,22],u=[1,23],p=[1,24],d=[1,25],g=[6,8,10,13,15,18,19,20,22,24,26,27,28,41,42,43,44,45],y=[1,34],x=[27,28,46,47],_=[41,42,43,44,45],v=[17,34],E=[1,54],F=[1,53],L=[17,34,36,38],T={trace:function(){},yy:{},symbols_:{error:2,start:3,ER_DIAGRAM:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,entityName:11,relSpec:12,":":13,role:14,BLOCK_START:15,attributes:16,BLOCK_STOP:17,SQS:18,SQE:19,title:20,title_value:21,acc_title:22,acc_title_value:23,acc_descr:24,acc_descr_value:25,acc_descr_multiline_value:26,ALPHANUM:27,ENTITY_NAME:28,attribute:29,attributeType:30,attributeName:31,attributeKeyTypeList:32,attributeComment:33,ATTRIBUTE_WORD:34,attributeKeyType:35,COMMA:36,ATTRIBUTE_KEY:37,COMMENT:38,cardinality:39,relType:40,ZERO_OR_ONE:41,ZERO_OR_MORE:42,ONE_OR_MORE:43,ONLY_ONE:44,MD_PARENT:45,NON_IDENTIFYING:46,IDENTIFYING:47,WORD:48,$accept:0,$end:1},terminals_:{2:"error",4:"ER_DIAGRAM",6:"EOF",8:"SPACE",10:"NEWLINE",13:":",15:"BLOCK_START",17:"BLOCK_STOP",18:"SQS",19:"SQE",20:"title",21:"title_value",22:"acc_title",23:"acc_title_value",24:"acc_descr",25:"acc_descr_value",26:"acc_descr_multiline_value",27:"ALPHANUM",28:"ENTITY_NAME",34:"ATTRIBUTE_WORD",36:"COMMA",37:"ATTRIBUTE_KEY",38:"COMMENT",41:"ZERO_OR_ONE",42:"ZERO_OR_MORE",43:"ONE_OR_MORE",44:"ONLY_ONE",45:"MD_PARENT",46:"NON_IDENTIFYING",47:"IDENTIFYING",48:"WORD"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,5],[9,4],[9,3],[9,1],[9,7],[9,6],[9,4],[9,2],[9,2],[9,2],[9,1],[11,1],[11,1],[16,1],[16,2],[29,2],[29,3],[29,3],[29,4],[30,1],[31,1],[32,1],[32,3],[35,1],[33,1],[12,3],[39,1],[39,1],[39,1],[39,1],[39,1],[40,1],[40,1],[14,1],[14,1],[14,1]],performAction:function(m,C,f,B,b,P,U){var N=P.length-1;switch(b){case 1:break;case 2:this.$=[];break;case 3:P[N-1].push(P[N]),this.$=P[N-1];break;case 4:case 5:this.$=P[N];break;case 6:case 7:this.$=[];break;case 8:B.addEntity(P[N-4]),B.addEntity(P[N-2]),B.addRelationship(P[N-4],P[N],P[N-2],P[N-3]);break;case 9:B.addEntity(P[N-3]),B.addAttributes(P[N-3],P[N-1]);break;case 10:B.addEntity(P[N-2]);break;case 11:B.addEntity(P[N]);break;case 12:B.addEntity(P[N-6],P[N-4]),B.addAttributes(P[N-6],P[N-1]);break;case 13:B.addEntity(P[N-5],P[N-3]);break;case 14:B.addEntity(P[N-3],P[N-1]);break;case 15:case 16:this.$=P[N].trim(),B.setAccTitle(this.$);break;case 17:case 18:this.$=P[N].trim(),B.setAccDescription(this.$);break;case 19:case 43:this.$=P[N];break;case 20:case 41:case 42:this.$=P[N].replace(/"/g,"");break;case 21:case 29:this.$=[P[N]];break;case 22:P[N].push(P[N-1]),this.$=P[N];break;case 23:this.$={attributeType:P[N-1],attributeName:P[N]};break;case 24:this.$={attributeType:P[N-2],attributeName:P[N-1],attributeKeyTypeList:P[N]};break;case 25:this.$={attributeType:P[N-2],attributeName:P[N-1],attributeComment:P[N]};break;case 26:this.$={attributeType:P[N-3],attributeName:P[N-2],attributeKeyTypeList:P[N-1],attributeComment:P[N]};break;case 27:case 28:case 31:this.$=P[N];break;case 30:P[N-2].push(P[N]),this.$=P[N-2];break;case 32:this.$=P[N].replace(/"/g,"");break;case 33:this.$={cardA:P[N],relType:P[N-1],cardB:P[N-2]};break;case 34:this.$=B.Cardinality.ZERO_OR_ONE;break;case 35:this.$=B.Cardinality.ZERO_OR_MORE;break;case 36:this.$=B.Cardinality.ONE_OR_MORE;break;case 37:this.$=B.Cardinality.ONLY_ONE;break;case 38:this.$=B.Cardinality.MD_PARENT;break;case 39:this.$=B.Identification.NON_IDENTIFYING;break;case 40:this.$=B.Identification.IDENTIFYING;break}},table:[{3:1,4:[1,2]},{1:[3]},t(e,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:9,20:i,22:r,24:s,26:n,27:a,28:o},t(e,[2,7],{1:[2,1]}),t(e,[2,3]),{9:16,11:9,20:i,22:r,24:s,26:n,27:a,28:o},t(e,[2,5]),t(e,[2,6]),t(e,[2,11],{12:17,39:20,15:[1,18],18:[1,19],41:l,42:h,43:u,44:p,45:d}),{21:[1,26]},{23:[1,27]},{25:[1,28]},t(e,[2,18]),t(g,[2,19]),t(g,[2,20]),t(e,[2,4]),{11:29,27:a,28:o},{16:30,17:[1,31],29:32,30:33,34:y},{11:35,27:a,28:o},{40:36,46:[1,37],47:[1,38]},t(x,[2,34]),t(x,[2,35]),t(x,[2,36]),t(x,[2,37]),t(x,[2,38]),t(e,[2,15]),t(e,[2,16]),t(e,[2,17]),{13:[1,39]},{17:[1,40]},t(e,[2,10]),{16:41,17:[2,21],29:32,30:33,34:y},{31:42,34:[1,43]},{34:[2,27]},{19:[1,44]},{39:45,41:l,42:h,43:u,44:p,45:d},t(_,[2,39]),t(_,[2,40]),{14:46,27:[1,49],28:[1,48],48:[1,47]},t(e,[2,9]),{17:[2,22]},t(v,[2,23],{32:50,33:51,35:52,37:E,38:F}),t([17,34,37,38],[2,28]),t(e,[2,14],{15:[1,55]}),t([27,28],[2,33]),t(e,[2,8]),t(e,[2,41]),t(e,[2,42]),t(e,[2,43]),t(v,[2,24],{33:56,36:[1,57],38:F}),t(v,[2,25]),t(L,[2,29]),t(v,[2,32]),t(L,[2,31]),{16:58,17:[1,59],29:32,30:33,34:y},t(v,[2,26]),{35:60,37:E},{17:[1,61]},t(e,[2,13]),t(L,[2,30]),t(e,[2,12])],defaultActions:{34:[2,27],41:[2,22]},parseError:function(m,C){if(C.recoverable)this.trace(m);else{var f=new Error(m);throw f.hash=C,f}},parse:function(m){var C=this,f=[0],B=[],b=[null],P=[],U=this.table,N="",w=0,R=0,D=2,V=1,z=P.slice.call(arguments,1),st=Object.create(this.lexer),j={yy:{}};for(var dt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,dt)&&(j.yy[dt]=this.yy[dt]);st.setInput(m,j.yy),j.yy.lexer=st,j.yy.parser=this,typeof st.yylloc>"u"&&(st.yylloc={});var K=st.yylloc;P.push(K);var G=st.options&&st.options.ranges;typeof j.yy.parseError=="function"?this.parseError=j.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function tt(){var St;return St=B.pop()||st.lex()||V,typeof St!="number"&&(St instanceof Array&&(B=St,St=B.pop()),St=C.symbols_[St]||St),St}for(var nt,Q,J,O,at={},W,ft,M,wt;;){if(Q=f[f.length-1],this.defaultActions[Q]?J=this.defaultActions[Q]:((nt===null||typeof nt>"u")&&(nt=tt()),J=U[Q]&&U[Q][nt]),typeof J>"u"||!J.length||!J[0]){var X="";wt=[];for(W in U[Q])this.terminals_[W]&&W>D&&wt.push("'"+this.terminals_[W]+"'");st.showPosition?X="Parse error on line "+(w+1)+`:
`+st.showPosition()+`
Expecting `+wt.join(", ")+", got '"+(this.terminals_[nt]||nt)+"'":X="Parse error on line "+(w+1)+": Unexpected "+(nt==V?"end of input":"'"+(this.terminals_[nt]||nt)+"'"),this.parseError(X,{text:st.match,token:this.terminals_[nt]||nt,line:st.yylineno,loc:K,expected:wt})}if(J[0]instanceof Array&&J.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Q+", token: "+nt);switch(J[0]){case 1:f.push(nt),b.push(st.yytext),P.push(st.yylloc),f.push(J[1]),nt=null,R=st.yyleng,N=st.yytext,w=st.yylineno,K=st.yylloc;break;case 2:if(ft=this.productions_[J[1]][1],at.$=b[b.length-ft],at._$={first_line:P[P.length-(ft||1)].first_line,last_line:P[P.length-1].last_line,first_column:P[P.length-(ft||1)].first_column,last_column:P[P.length-1].last_column},G&&(at._$.range=[P[P.length-(ft||1)].range[0],P[P.length-1].range[1]]),O=this.performAction.apply(at,[N,R,w,j.yy,J[1],b,P].concat(z)),typeof O<"u")return O;ft&&(f=f.slice(0,-1*ft*2),b=b.slice(0,-1*ft),P=P.slice(0,-1*ft)),f.push(this.productions_[J[1]][0]),b.push(at.$),P.push(at._$),M=U[f[f.length-2]][f[f.length-1]],f.push(M);break;case 3:return!0}}return!0}},k=function(){var S={EOF:1,parseError:function(C,f){if(this.yy.parser)this.yy.parser.parseError(C,f);else throw new Error(C)},setInput:function(m,C){return this.yy=C||this.yy||{},this._input=m,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var m=this._input[0];this.yytext+=m,this.yyleng++,this.offset++,this.match+=m,this.matched+=m;var C=m.match(/(?:\r\n?|\n).*/g);return C?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),m},unput:function(m){var C=m.length,f=m.split(/(?:\r\n?|\n)/g);this._input=m+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-C),this.offset-=C;var B=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),f.length-1&&(this.yylineno-=f.length-1);var b=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:f?(f.length===B.length?this.yylloc.first_column:0)+B[B.length-f.length].length-f[0].length:this.yylloc.first_column-C},this.options.ranges&&(this.yylloc.range=[b[0],b[0]+this.yyleng-C]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(m){this.unput(this.match.slice(m))},pastInput:function(){var m=this.matched.substr(0,this.matched.length-this.match.length);return(m.length>20?"...":"")+m.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var m=this.match;return m.length<20&&(m+=this._input.substr(0,20-m.length)),(m.substr(0,20)+(m.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var m=this.pastInput(),C=new Array(m.length+1).join("-");return m+this.upcomingInput()+`
`+C+"^"},test_match:function(m,C){var f,B,b;if(this.options.backtrack_lexer&&(b={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(b.yylloc.range=this.yylloc.range.slice(0))),B=m[0].match(/(?:\r\n?|\n).*/g),B&&(this.yylineno+=B.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:B?B[B.length-1].length-B[B.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+m[0].length},this.yytext+=m[0],this.match+=m[0],this.matches=m,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(m[0].length),this.matched+=m[0],f=this.performAction.call(this,this.yy,this,C,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),f)return f;if(this._backtrack){for(var P in b)this[P]=b[P];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var m,C,f,B;this._more||(this.yytext="",this.match="");for(var b=this._currentRules(),P=0;P<b.length;P++)if(f=this._input.match(this.rules[b[P]]),f&&(!C||f[0].length>C[0].length)){if(C=f,B=P,this.options.backtrack_lexer){if(m=this.test_match(f,b[P]),m!==!1)return m;if(this._backtrack){C=!1;continue}else return!1}else if(!this.options.flex)break}return C?(m=this.test_match(C,b[B]),m!==!1?m:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var C=this.next();return C||this.lex()},begin:function(C){this.conditionStack.push(C)},popState:function(){var C=this.conditionStack.length-1;return C>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(C){return C=this.conditionStack.length-1-Math.abs(C||0),C>=0?this.conditionStack[C]:"INITIAL"},pushState:function(C){this.begin(C)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(C,f,B,b){switch(B){case 0:return this.begin("acc_title"),22;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),24;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return 10;case 8:break;case 9:return 8;case 10:return 28;case 11:return 48;case 12:return 4;case 13:return this.begin("block"),15;case 14:return 36;case 15:break;case 16:return 37;case 17:return 34;case 18:return 34;case 19:return 38;case 20:break;case 21:return this.popState(),17;case 22:return f.yytext[0];case 23:return 18;case 24:return 19;case 25:return 41;case 26:return 43;case 27:return 43;case 28:return 43;case 29:return 41;case 30:return 41;case 31:return 42;case 32:return 42;case 33:return 42;case 34:return 42;case 35:return 42;case 36:return 43;case 37:return 42;case 38:return 43;case 39:return 44;case 40:return 44;case 41:return 44;case 42:return 44;case 43:return 41;case 44:return 42;case 45:return 43;case 46:return 45;case 47:return 46;case 48:return 47;case 49:return 47;case 50:return 46;case 51:return 46;case 52:return 46;case 53:return 27;case 54:return f.yytext[0];case 55:return 6}},rules:[/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:[\s]+)/i,/^(?:"[^"%\r\n\v\b\\]+")/i,/^(?:"[^"]*")/i,/^(?:erDiagram\b)/i,/^(?:\{)/i,/^(?:,)/i,/^(?:\s+)/i,/^(?:\b((?:PK)|(?:FK)|(?:UK))\b)/i,/^(?:(.*?)[~](.*?)*[~])/i,/^(?:[\*A-Za-z_][A-Za-z0-9\-_\[\]\(\)]*)/i,/^(?:"[^"]*")/i,/^(?:[\n]+)/i,/^(?:\})/i,/^(?:.)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:one or zero\b)/i,/^(?:one or more\b)/i,/^(?:one or many\b)/i,/^(?:1\+)/i,/^(?:\|o\b)/i,/^(?:zero or one\b)/i,/^(?:zero or more\b)/i,/^(?:zero or many\b)/i,/^(?:0\+)/i,/^(?:\}o\b)/i,/^(?:many\(0\))/i,/^(?:many\(1\))/i,/^(?:many\b)/i,/^(?:\}\|)/i,/^(?:one\b)/i,/^(?:only one\b)/i,/^(?:1\b)/i,/^(?:\|\|)/i,/^(?:o\|)/i,/^(?:o\{)/i,/^(?:\|\{)/i,/^(?:\s*u\b)/i,/^(?:\.\.)/i,/^(?:--)/i,/^(?:to\b)/i,/^(?:optionally to\b)/i,/^(?:\.-)/i,/^(?:-\.)/i,/^(?:[A-Za-z_][A-Za-z0-9\-_]*)/i,/^(?:.)/i,/^(?:$)/i],conditions:{acc_descr_multiline:{rules:[5,6],inclusive:!1},acc_descr:{rules:[3],inclusive:!1},acc_title:{rules:[1],inclusive:!1},block:{rules:[14,15,16,17,18,19,20,21,22],inclusive:!1},INITIAL:{rules:[0,2,4,7,8,9,10,11,12,13,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55],inclusive:!0}}};return S}();T.lexer=k;function A(){this.yy={}}return A.prototype=T,T.Parser=A,new A}();ja.parser=ja;const G4=ja;let or={},Jo=[];const j4={ZERO_OR_ONE:"ZERO_OR_ONE",ZERO_OR_MORE:"ZERO_OR_MORE",ONE_OR_MORE:"ONE_OR_MORE",ONLY_ONE:"ONLY_ONE",MD_PARENT:"MD_PARENT"},X4={NON_IDENTIFYING:"NON_IDENTIFYING",IDENTIFYING:"IDENTIFYING"},Uu=function(t,e=void 0){return or[t]===void 0?(or[t]={attributes:[],alias:e},I.info("Added new entity :",t)):or[t]&&!or[t].alias&&e&&(or[t].alias=e,I.info(`Add alias '${e}' to entity '${t}'`)),or[t]},$4=()=>or,K4=function(t,e){let i=Uu(t),r;for(r=e.length-1;r>=0;r--)i.attributes.push(e[r]),I.debug("Added attribute ",e[r].attributeName)},Q4=function(t,e,i,r){let s={entityA:t,roleA:e,entityB:i,relSpec:r};Jo.push(s),I.debug("Added new relationship :",s)},Z4=()=>Jo,J4=function(){or={},Jo=[],Oe()},tb={Cardinality:j4,Identification:X4,getConfig:()=>Y().er,addEntity:Uu,addAttributes:K4,getEntities:$4,addRelationship:Q4,getRelationships:Z4,clear:J4,setAccTitle:Pe,getAccTitle:Ye,setAccDescription:Ue,getAccDescription:He,setDiagramTitle:ri,getDiagramTitle:Ge},fi={ONLY_ONE_START:"ONLY_ONE_START",ONLY_ONE_END:"ONLY_ONE_END",ZERO_OR_ONE_START:"ZERO_OR_ONE_START",ZERO_OR_ONE_END:"ZERO_OR_ONE_END",ONE_OR_MORE_START:"ONE_OR_MORE_START",ONE_OR_MORE_END:"ONE_OR_MORE_END",ZERO_OR_MORE_START:"ZERO_OR_MORE_START",ZERO_OR_MORE_END:"ZERO_OR_MORE_END",MD_PARENT_END:"MD_PARENT_END",MD_PARENT_START:"MD_PARENT_START"},eb=function(t,e){let i;t.append("defs").append("marker").attr("id",fi.MD_PARENT_START).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",fi.MD_PARENT_END).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",fi.ONLY_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M9,0 L9,18 M15,0 L15,18"),t.append("defs").append("marker").attr("id",fi.ONLY_ONE_END).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M3,0 L3,18 M9,0 L9,18"),i=t.append("defs").append("marker").attr("id",fi.ZERO_OR_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto"),i.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),i.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M9,0 L9,18"),i=t.append("defs").append("marker").attr("id",fi.ZERO_OR_ONE_END).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto"),i.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),i.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M21,0 L21,18"),t.append("defs").append("marker").attr("id",fi.ONE_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),t.append("defs").append("marker").attr("id",fi.ONE_OR_MORE_END).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18"),i=t.append("defs").append("marker").attr("id",fi.ZERO_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto"),i.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),i.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18"),i=t.append("defs").append("marker").attr("id",fi.ZERO_OR_MORE_END).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto"),i.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),i.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},pi={ERMarkers:fi,insertMarkers:eb},ib=/[^\dA-Za-z](\W)*/g;let ke={},Ds=new Map;const rb=function(t){const e=Object.keys(t);for(const i of e)ke[i]=t[i]},sb=(t,e,i)=>{const r=ke.entityPadding/3,s=ke.entityPadding/3,n=ke.fontSize*.85,a=e.node().getBBox(),o=[];let l=!1,h=!1,u=0,p=0,d=0,g=0,y=a.height+r*2,x=1;i.forEach(F=>{F.attributeKeyTypeList!==void 0&&F.attributeKeyTypeList.length>0&&(l=!0),F.attributeComment!==void 0&&(h=!0)}),i.forEach(F=>{const L=`${e.node().id}-attr-${x}`;let T=0;const k=xs(F.attributeType),A=t.append("text").classed("er entityLabel",!0).attr("id",`${L}-type`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",Y().fontFamily).style("font-size",n+"px").text(k),S=t.append("text").classed("er entityLabel",!0).attr("id",`${L}-name`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",Y().fontFamily).style("font-size",n+"px").text(F.attributeName),m={};m.tn=A,m.nn=S;const C=A.node().getBBox(),f=S.node().getBBox();if(u=Math.max(u,C.width),p=Math.max(p,f.width),T=Math.max(C.height,f.height),l){const B=F.attributeKeyTypeList!==void 0?F.attributeKeyTypeList.join(","):"",b=t.append("text").classed("er entityLabel",!0).attr("id",`${L}-key`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",Y().fontFamily).style("font-size",n+"px").text(B);m.kn=b;const P=b.node().getBBox();d=Math.max(d,P.width),T=Math.max(T,P.height)}if(h){const B=t.append("text").classed("er entityLabel",!0).attr("id",`${L}-comment`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",Y().fontFamily).style("font-size",n+"px").text(F.attributeComment||"");m.cn=B;const b=B.node().getBBox();g=Math.max(g,b.width),T=Math.max(T,b.height)}m.height=T,o.push(m),y+=T+r*2,x+=1});let _=4;l&&(_+=2),h&&(_+=2);const v=u+p+d+g,E={width:Math.max(ke.minEntityWidth,Math.max(a.width+ke.entityPadding*2,v+s*_)),height:i.length>0?y:Math.max(ke.minEntityHeight,a.height+ke.entityPadding*2)};if(i.length>0){const F=Math.max(0,(E.width-v-s*_)/(_/2));e.attr("transform","translate("+E.width/2+","+(r+a.height/2)+")");let L=a.height+r*2,T="attributeBoxOdd";o.forEach(k=>{const A=L+r+k.height/2;k.tn.attr("transform","translate("+s+","+A+")");const S=t.insert("rect","#"+k.tn.node().id).classed(`er ${T}`,!0).attr("x",0).attr("y",L).attr("width",u+s*2+F).attr("height",k.height+r*2),m=parseFloat(S.attr("x"))+parseFloat(S.attr("width"));k.nn.attr("transform","translate("+(m+s)+","+A+")");const C=t.insert("rect","#"+k.nn.node().id).classed(`er ${T}`,!0).attr("x",m).attr("y",L).attr("width",p+s*2+F).attr("height",k.height+r*2);let f=parseFloat(C.attr("x"))+parseFloat(C.attr("width"));if(l){k.kn.attr("transform","translate("+(f+s)+","+A+")");const B=t.insert("rect","#"+k.kn.node().id).classed(`er ${T}`,!0).attr("x",f).attr("y",L).attr("width",d+s*2+F).attr("height",k.height+r*2);f=parseFloat(B.attr("x"))+parseFloat(B.attr("width"))}h&&(k.cn.attr("transform","translate("+(f+s)+","+A+")"),t.insert("rect","#"+k.cn.node().id).classed(`er ${T}`,"true").attr("x",f).attr("y",L).attr("width",g+s*2+F).attr("height",k.height+r*2)),L+=k.height+r*2,T=T==="attributeBoxOdd"?"attributeBoxEven":"attributeBoxOdd"})}else E.height=Math.max(ke.minEntityHeight,y),e.attr("transform","translate("+E.width/2+","+E.height/2+")");return E},nb=function(t,e,i){const r=Object.keys(e);let s;return r.forEach(function(n){const a=ub(n,"entity");Ds.set(n,a);const o=t.append("g").attr("id",a);s=s===void 0?a:s;const l="text-"+a,h=o.append("text").classed("er entityLabel",!0).attr("id",l).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","middle").style("font-family",Y().fontFamily).style("font-size",ke.fontSize+"px").text(e[n].alias??n),{width:u,height:p}=sb(o,h,e[n].attributes),g=o.insert("rect","#"+l).classed("er entityBox",!0).attr("x",0).attr("y",0).attr("width",u).attr("height",p).node().getBBox();i.setNode(a,{width:g.width,height:g.height,shape:"rect",id:a})}),s},ab=function(t,e){e.nodes().forEach(function(i){i!==void 0&&e.node(i)!==void 0&&t.select("#"+i).attr("transform","translate("+(e.node(i).x-e.node(i).width/2)+","+(e.node(i).y-e.node(i).height/2)+" )")})},Hu=function(t){return(t.entityA+t.roleA+t.entityB).replace(/\s/g,"")},ob=function(t,e){return t.forEach(function(i){e.setEdge(Ds.get(i.entityA),Ds.get(i.entityB),{relationship:i},Hu(i))}),t};let bc=0;const lb=function(t,e,i,r,s){bc++;const n=i.edge(Ds.get(e.entityA),Ds.get(e.entityB),Hu(e)),a=dr().x(function(y){return y.x}).y(function(y){return y.y}).curve(Gs),o=t.insert("path","#"+r).classed("er relationshipLine",!0).attr("d",a(n.points)).style("stroke",ke.stroke).style("fill","none");e.relSpec.relType===s.db.Identification.NON_IDENTIFYING&&o.attr("stroke-dasharray","8,8");let l="";switch(ke.arrowMarkerAbsolute&&(l=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,l=l.replace(/\(/g,"\\("),l=l.replace(/\)/g,"\\)")),e.relSpec.cardA){case s.db.Cardinality.ZERO_OR_ONE:o.attr("marker-end","url("+l+"#"+pi.ERMarkers.ZERO_OR_ONE_END+")");break;case s.db.Cardinality.ZERO_OR_MORE:o.attr("marker-end","url("+l+"#"+pi.ERMarkers.ZERO_OR_MORE_END+")");break;case s.db.Cardinality.ONE_OR_MORE:o.attr("marker-end","url("+l+"#"+pi.ERMarkers.ONE_OR_MORE_END+")");break;case s.db.Cardinality.ONLY_ONE:o.attr("marker-end","url("+l+"#"+pi.ERMarkers.ONLY_ONE_END+")");break;case s.db.Cardinality.MD_PARENT:o.attr("marker-end","url("+l+"#"+pi.ERMarkers.MD_PARENT_END+")");break}switch(e.relSpec.cardB){case s.db.Cardinality.ZERO_OR_ONE:o.attr("marker-start","url("+l+"#"+pi.ERMarkers.ZERO_OR_ONE_START+")");break;case s.db.Cardinality.ZERO_OR_MORE:o.attr("marker-start","url("+l+"#"+pi.ERMarkers.ZERO_OR_MORE_START+")");break;case s.db.Cardinality.ONE_OR_MORE:o.attr("marker-start","url("+l+"#"+pi.ERMarkers.ONE_OR_MORE_START+")");break;case s.db.Cardinality.ONLY_ONE:o.attr("marker-start","url("+l+"#"+pi.ERMarkers.ONLY_ONE_START+")");break;case s.db.Cardinality.MD_PARENT:o.attr("marker-start","url("+l+"#"+pi.ERMarkers.MD_PARENT_START+")");break}const h=o.node().getTotalLength(),u=o.node().getPointAtLength(h*.5),p="rel"+bc,g=t.append("text").classed("er relationshipLabel",!0).attr("id",p).attr("x",u.x).attr("y",u.y).style("text-anchor","middle").style("dominant-baseline","middle").style("font-family",Y().fontFamily).style("font-size",ke.fontSize+"px").text(e.roleA).node().getBBox();t.insert("rect","#"+p).classed("er relationshipLabelBox",!0).attr("x",u.x-g.width/2).attr("y",u.y-g.height/2).attr("width",g.width).attr("height",g.height)},cb=function(t,e,i,r){ke=Y().er,I.info("Drawing ER diagram");const s=Y().securityLevel;let n;s==="sandbox"&&(n=yt("#i"+e));const o=(s==="sandbox"?yt(n.nodes()[0].contentDocument.body):yt("body")).select(`[id='${e}']`);pi.insertMarkers(o,ke);let l;l=new Bi({multigraph:!0,directed:!0,compound:!1}).setGraph({rankdir:ke.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel(function(){return{}});const h=nb(o,r.db.getEntities(),l),u=ob(r.db.getRelationships(),l);Hs(l),ab(o,l),u.forEach(function(x){lb(o,x,l,h,r)});const p=ke.diagramPadding;Rt.insertTitle(o,"entityTitleText",ke.titleTopMargin,r.db.getDiagramTitle());const d=o.node().getBBox(),g=d.width+p*2,y=d.height+p*2;Ne(o,y,g,ke.useMaxWidth),o.attr("viewBox",`${d.x-p} ${d.y-p} ${g} ${y}`)},hb="28e9f9db-3c8d-5aa5-9faf-44286ae5937c";function ub(t="",e=""){const i=t.replace(ib,"");return`${kc(e)}${kc(i)}${pf(t,hb)}`}function kc(t=""){return t.length>0?`${t}-`:""}const db={setConf:rb,draw:cb},fb=t=>`
  .entityBox {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
  }

  .attributeBoxOdd {
    fill: ${t.attributeBackgroundColorOdd};
    stroke: ${t.nodeBorder};
  }

  .attributeBoxEven {
    fill:  ${t.attributeBackgroundColorEven};
    stroke: ${t.nodeBorder};
  }

  .relationshipLabelBox {
    fill: ${t.tertiaryColor};
    opacity: 0.7;
    background-color: ${t.tertiaryColor};
      rect {
        opacity: 0.5;
      }
  }

    .relationshipLine {
      stroke: ${t.lineColor};
    }

  .entityTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.textColor};
  }    
  #MD_PARENT_START {
    fill: #f5f5f5 !important;
    stroke: ${t.lineColor} !important;
    stroke-width: 1;
  }
  #MD_PARENT_END {
    fill: #f5f5f5 !important;
    stroke: ${t.lineColor} !important;
    stroke-width: 1;
  }
  
`,pb=fb,gb={parser:G4,db:tb,renderer:db,styles:pb},yb=Object.freeze(Object.defineProperty({__proto__:null,diagram:gb},Symbol.toStringTag,{value:"Module"}));var Xa=function(){var t=function(T,k,A,S){for(A=A||{},S=T.length;S--;A[T[S]]=k);return A},e=[1,3],i=[1,6],r=[1,4],s=[1,5],n=[2,5],a=[1,12],o=[5,7,13,19,21,23,24,26,28,31,37,40,47],l=[7,13,19,21,23,24,26,28,31,37,40],h=[7,12,13,19,21,23,24,26,28,31,37,40],u=[7,13,47],p=[1,42],d=[1,41],g=[7,13,29,32,35,38,47],y=[1,55],x=[1,56],_=[1,57],v=[7,13,32,35,42,47],E={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,GG:5,document:6,EOF:7,":":8,DIR:9,options:10,body:11,OPT:12,NL:13,line:14,statement:15,commitStatement:16,mergeStatement:17,cherryPickStatement:18,acc_title:19,acc_title_value:20,acc_descr:21,acc_descr_value:22,acc_descr_multiline_value:23,section:24,branchStatement:25,CHECKOUT:26,ref:27,BRANCH:28,ORDER:29,NUM:30,CHERRY_PICK:31,COMMIT_ID:32,STR:33,PARENT_COMMIT:34,COMMIT_TAG:35,EMPTYSTR:36,MERGE:37,COMMIT_TYPE:38,commitType:39,COMMIT:40,commit_arg:41,COMMIT_MSG:42,NORMAL:43,REVERSE:44,HIGHLIGHT:45,ID:46,";":47,$accept:0,$end:1},terminals_:{2:"error",5:"GG",7:"EOF",8:":",9:"DIR",12:"OPT",13:"NL",19:"acc_title",20:"acc_title_value",21:"acc_descr",22:"acc_descr_value",23:"acc_descr_multiline_value",24:"section",26:"CHECKOUT",28:"BRANCH",29:"ORDER",30:"NUM",31:"CHERRY_PICK",32:"COMMIT_ID",33:"STR",34:"PARENT_COMMIT",35:"COMMIT_TAG",36:"EMPTYSTR",37:"MERGE",38:"COMMIT_TYPE",40:"COMMIT",42:"COMMIT_MSG",43:"NORMAL",44:"REVERSE",45:"HIGHLIGHT",46:"ID",47:";"},productions_:[0,[3,2],[3,3],[3,4],[3,5],[6,0],[6,2],[10,2],[10,1],[11,0],[11,2],[14,2],[14,1],[15,1],[15,1],[15,1],[15,2],[15,2],[15,1],[15,1],[15,1],[15,2],[25,2],[25,4],[18,3],[18,5],[18,5],[18,7],[18,7],[18,5],[18,5],[18,5],[18,7],[18,7],[18,7],[18,7],[17,2],[17,4],[17,4],[17,4],[17,6],[17,6],[17,6],[17,6],[17,6],[17,6],[17,8],[17,8],[17,8],[17,8],[17,8],[17,8],[16,2],[16,3],[16,3],[16,5],[16,5],[16,3],[16,5],[16,5],[16,5],[16,5],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,3],[16,5],[16,5],[16,5],[16,5],[16,5],[16,5],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[41,0],[41,1],[39,1],[39,1],[39,1],[27,1],[27,1],[4,1],[4,1],[4,1]],performAction:function(k,A,S,m,C,f,B){var b=f.length-1;switch(C){case 2:return f[b];case 3:return f[b-1];case 4:return m.setDirection(f[b-3]),f[b-1];case 6:m.setOptions(f[b-1]),this.$=f[b];break;case 7:f[b-1]+=f[b],this.$=f[b-1];break;case 9:this.$=[];break;case 10:f[b-1].push(f[b]),this.$=f[b-1];break;case 11:this.$=f[b-1];break;case 16:this.$=f[b].trim(),m.setAccTitle(this.$);break;case 17:case 18:this.$=f[b].trim(),m.setAccDescription(this.$);break;case 19:m.addSection(f[b].substr(8)),this.$=f[b].substr(8);break;case 21:m.checkout(f[b]);break;case 22:m.branch(f[b]);break;case 23:m.branch(f[b-2],f[b]);break;case 24:m.cherryPick(f[b],"",void 0);break;case 25:m.cherryPick(f[b-2],"",void 0,f[b]);break;case 26:m.cherryPick(f[b-2],"",f[b]);break;case 27:m.cherryPick(f[b-4],"",f[b],f[b-2]);break;case 28:m.cherryPick(f[b-4],"",f[b-2],f[b]);break;case 29:m.cherryPick(f[b],"",f[b-2]);break;case 30:m.cherryPick(f[b],"","");break;case 31:m.cherryPick(f[b-2],"","");break;case 32:m.cherryPick(f[b-4],"","",f[b-2]);break;case 33:m.cherryPick(f[b-4],"","",f[b]);break;case 34:m.cherryPick(f[b-2],"",f[b-4],f[b]);break;case 35:m.cherryPick(f[b-2],"","",f[b]);break;case 36:m.merge(f[b],"","","");break;case 37:m.merge(f[b-2],f[b],"","");break;case 38:m.merge(f[b-2],"",f[b],"");break;case 39:m.merge(f[b-2],"","",f[b]);break;case 40:m.merge(f[b-4],f[b],"",f[b-2]);break;case 41:m.merge(f[b-4],"",f[b],f[b-2]);break;case 42:m.merge(f[b-4],"",f[b-2],f[b]);break;case 43:m.merge(f[b-4],f[b-2],f[b],"");break;case 44:m.merge(f[b-4],f[b-2],"",f[b]);break;case 45:m.merge(f[b-4],f[b],f[b-2],"");break;case 46:m.merge(f[b-6],f[b-4],f[b-2],f[b]);break;case 47:m.merge(f[b-6],f[b],f[b-4],f[b-2]);break;case 48:m.merge(f[b-6],f[b-4],f[b],f[b-2]);break;case 49:m.merge(f[b-6],f[b-2],f[b-4],f[b]);break;case 50:m.merge(f[b-6],f[b],f[b-2],f[b-4]);break;case 51:m.merge(f[b-6],f[b-2],f[b],f[b-4]);break;case 52:m.commit(f[b]);break;case 53:m.commit("","",m.commitType.NORMAL,f[b]);break;case 54:m.commit("","",f[b],"");break;case 55:m.commit("","",f[b],f[b-2]);break;case 56:m.commit("","",f[b-2],f[b]);break;case 57:m.commit("",f[b],m.commitType.NORMAL,"");break;case 58:m.commit("",f[b-2],m.commitType.NORMAL,f[b]);break;case 59:m.commit("",f[b],m.commitType.NORMAL,f[b-2]);break;case 60:m.commit("",f[b-2],f[b],"");break;case 61:m.commit("",f[b],f[b-2],"");break;case 62:m.commit("",f[b-4],f[b-2],f[b]);break;case 63:m.commit("",f[b-4],f[b],f[b-2]);break;case 64:m.commit("",f[b-2],f[b-4],f[b]);break;case 65:m.commit("",f[b],f[b-4],f[b-2]);break;case 66:m.commit("",f[b],f[b-2],f[b-4]);break;case 67:m.commit("",f[b-2],f[b],f[b-4]);break;case 68:m.commit(f[b],"",m.commitType.NORMAL,"");break;case 69:m.commit(f[b],"",m.commitType.NORMAL,f[b-2]);break;case 70:m.commit(f[b-2],"",m.commitType.NORMAL,f[b]);break;case 71:m.commit(f[b-2],"",f[b],"");break;case 72:m.commit(f[b],"",f[b-2],"");break;case 73:m.commit(f[b],f[b-2],m.commitType.NORMAL,"");break;case 74:m.commit(f[b-2],f[b],m.commitType.NORMAL,"");break;case 75:m.commit(f[b-4],"",f[b-2],f[b]);break;case 76:m.commit(f[b-4],"",f[b],f[b-2]);break;case 77:m.commit(f[b-2],"",f[b-4],f[b]);break;case 78:m.commit(f[b],"",f[b-4],f[b-2]);break;case 79:m.commit(f[b],"",f[b-2],f[b-4]);break;case 80:m.commit(f[b-2],"",f[b],f[b-4]);break;case 81:m.commit(f[b-4],f[b],f[b-2],"");break;case 82:m.commit(f[b-4],f[b-2],f[b],"");break;case 83:m.commit(f[b-2],f[b],f[b-4],"");break;case 84:m.commit(f[b],f[b-2],f[b-4],"");break;case 85:m.commit(f[b],f[b-4],f[b-2],"");break;case 86:m.commit(f[b-2],f[b-4],f[b],"");break;case 87:m.commit(f[b-4],f[b],m.commitType.NORMAL,f[b-2]);break;case 88:m.commit(f[b-4],f[b-2],m.commitType.NORMAL,f[b]);break;case 89:m.commit(f[b-2],f[b],m.commitType.NORMAL,f[b-4]);break;case 90:m.commit(f[b],f[b-2],m.commitType.NORMAL,f[b-4]);break;case 91:m.commit(f[b],f[b-4],m.commitType.NORMAL,f[b-2]);break;case 92:m.commit(f[b-2],f[b-4],m.commitType.NORMAL,f[b]);break;case 93:m.commit(f[b-6],f[b-4],f[b-2],f[b]);break;case 94:m.commit(f[b-6],f[b-4],f[b],f[b-2]);break;case 95:m.commit(f[b-6],f[b-2],f[b-4],f[b]);break;case 96:m.commit(f[b-6],f[b],f[b-4],f[b-2]);break;case 97:m.commit(f[b-6],f[b-2],f[b],f[b-4]);break;case 98:m.commit(f[b-6],f[b],f[b-2],f[b-4]);break;case 99:m.commit(f[b-4],f[b-6],f[b-2],f[b]);break;case 100:m.commit(f[b-4],f[b-6],f[b],f[b-2]);break;case 101:m.commit(f[b-2],f[b-6],f[b-4],f[b]);break;case 102:m.commit(f[b],f[b-6],f[b-4],f[b-2]);break;case 103:m.commit(f[b-2],f[b-6],f[b],f[b-4]);break;case 104:m.commit(f[b],f[b-6],f[b-2],f[b-4]);break;case 105:m.commit(f[b],f[b-4],f[b-2],f[b-6]);break;case 106:m.commit(f[b-2],f[b-4],f[b],f[b-6]);break;case 107:m.commit(f[b],f[b-2],f[b-4],f[b-6]);break;case 108:m.commit(f[b-2],f[b],f[b-4],f[b-6]);break;case 109:m.commit(f[b-4],f[b-2],f[b],f[b-6]);break;case 110:m.commit(f[b-4],f[b],f[b-2],f[b-6]);break;case 111:m.commit(f[b-2],f[b-4],f[b-6],f[b]);break;case 112:m.commit(f[b],f[b-4],f[b-6],f[b-2]);break;case 113:m.commit(f[b-2],f[b],f[b-6],f[b-4]);break;case 114:m.commit(f[b],f[b-2],f[b-6],f[b-4]);break;case 115:m.commit(f[b-4],f[b-2],f[b-6],f[b]);break;case 116:m.commit(f[b-4],f[b],f[b-6],f[b-2]);break;case 117:this.$="";break;case 118:this.$=f[b];break;case 119:this.$=m.commitType.NORMAL;break;case 120:this.$=m.commitType.REVERSE;break;case 121:this.$=m.commitType.HIGHLIGHT;break}},table:[{3:1,4:2,5:e,7:i,13:r,47:s},{1:[3]},{3:7,4:2,5:e,7:i,13:r,47:s},{6:8,7:n,8:[1,9],9:[1,10],10:11,13:a},t(o,[2,124]),t(o,[2,125]),t(o,[2,126]),{1:[2,1]},{7:[1,13]},{6:14,7:n,10:11,13:a},{8:[1,15]},t(l,[2,9],{11:16,12:[1,17]}),t(h,[2,8]),{1:[2,2]},{7:[1,18]},{6:19,7:n,10:11,13:a},{7:[2,6],13:[1,22],14:20,15:21,16:23,17:24,18:25,19:[1,26],21:[1,27],23:[1,28],24:[1,29],25:30,26:[1,31],28:[1,35],31:[1,34],37:[1,33],40:[1,32]},t(h,[2,7]),{1:[2,3]},{7:[1,36]},t(l,[2,10]),{4:37,7:i,13:r,47:s},t(l,[2,12]),t(u,[2,13]),t(u,[2,14]),t(u,[2,15]),{20:[1,38]},{22:[1,39]},t(u,[2,18]),t(u,[2,19]),t(u,[2,20]),{27:40,33:p,46:d},t(u,[2,117],{41:43,32:[1,46],33:[1,48],35:[1,44],38:[1,45],42:[1,47]}),{27:49,33:p,46:d},{32:[1,50],35:[1,51]},{27:52,33:p,46:d},{1:[2,4]},t(l,[2,11]),t(u,[2,16]),t(u,[2,17]),t(u,[2,21]),t(g,[2,122]),t(g,[2,123]),t(u,[2,52]),{33:[1,53]},{39:54,43:y,44:x,45:_},{33:[1,58]},{33:[1,59]},t(u,[2,118]),t(u,[2,36],{32:[1,60],35:[1,62],38:[1,61]}),{33:[1,63]},{33:[1,64],36:[1,65]},t(u,[2,22],{29:[1,66]}),t(u,[2,53],{32:[1,68],38:[1,67],42:[1,69]}),t(u,[2,54],{32:[1,71],35:[1,70],42:[1,72]}),t(v,[2,119]),t(v,[2,120]),t(v,[2,121]),t(u,[2,57],{35:[1,73],38:[1,74],42:[1,75]}),t(u,[2,68],{32:[1,78],35:[1,76],38:[1,77]}),{33:[1,79]},{39:80,43:y,44:x,45:_},{33:[1,81]},t(u,[2,24],{34:[1,82],35:[1,83]}),{32:[1,84]},{32:[1,85]},{30:[1,86]},{39:87,43:y,44:x,45:_},{33:[1,88]},{33:[1,89]},{33:[1,90]},{33:[1,91]},{33:[1,92]},{33:[1,93]},{39:94,43:y,44:x,45:_},{33:[1,95]},{33:[1,96]},{39:97,43:y,44:x,45:_},{33:[1,98]},t(u,[2,37],{35:[1,100],38:[1,99]}),t(u,[2,38],{32:[1,102],35:[1,101]}),t(u,[2,39],{32:[1,103],38:[1,104]}),{33:[1,105]},{33:[1,106],36:[1,107]},{33:[1,108]},{33:[1,109]},t(u,[2,23]),t(u,[2,55],{32:[1,110],42:[1,111]}),t(u,[2,59],{38:[1,112],42:[1,113]}),t(u,[2,69],{32:[1,115],38:[1,114]}),t(u,[2,56],{32:[1,116],42:[1,117]}),t(u,[2,61],{35:[1,118],42:[1,119]}),t(u,[2,72],{32:[1,121],35:[1,120]}),t(u,[2,58],{38:[1,122],42:[1,123]}),t(u,[2,60],{35:[1,124],42:[1,125]}),t(u,[2,73],{35:[1,127],38:[1,126]}),t(u,[2,70],{32:[1,129],38:[1,128]}),t(u,[2,71],{32:[1,131],35:[1,130]}),t(u,[2,74],{35:[1,133],38:[1,132]}),{39:134,43:y,44:x,45:_},{33:[1,135]},{33:[1,136]},{33:[1,137]},{33:[1,138]},{39:139,43:y,44:x,45:_},t(u,[2,25],{35:[1,140]}),t(u,[2,26],{34:[1,141]}),t(u,[2,31],{34:[1,142]}),t(u,[2,29],{34:[1,143]}),t(u,[2,30],{34:[1,144]}),{33:[1,145]},{33:[1,146]},{39:147,43:y,44:x,45:_},{33:[1,148]},{39:149,43:y,44:x,45:_},{33:[1,150]},{33:[1,151]},{33:[1,152]},{33:[1,153]},{33:[1,154]},{33:[1,155]},{33:[1,156]},{39:157,43:y,44:x,45:_},{33:[1,158]},{33:[1,159]},{33:[1,160]},{39:161,43:y,44:x,45:_},{33:[1,162]},{39:163,43:y,44:x,45:_},{33:[1,164]},{33:[1,165]},{33:[1,166]},{39:167,43:y,44:x,45:_},{33:[1,168]},t(u,[2,43],{35:[1,169]}),t(u,[2,44],{38:[1,170]}),t(u,[2,42],{32:[1,171]}),t(u,[2,45],{35:[1,172]}),t(u,[2,40],{38:[1,173]}),t(u,[2,41],{32:[1,174]}),{33:[1,175],36:[1,176]},{33:[1,177]},{33:[1,178]},{33:[1,179]},{33:[1,180]},t(u,[2,66],{42:[1,181]}),t(u,[2,79],{32:[1,182]}),t(u,[2,67],{42:[1,183]}),t(u,[2,90],{38:[1,184]}),t(u,[2,80],{32:[1,185]}),t(u,[2,89],{38:[1,186]}),t(u,[2,65],{42:[1,187]}),t(u,[2,78],{32:[1,188]}),t(u,[2,64],{42:[1,189]}),t(u,[2,84],{35:[1,190]}),t(u,[2,77],{32:[1,191]}),t(u,[2,83],{35:[1,192]}),t(u,[2,63],{42:[1,193]}),t(u,[2,91],{38:[1,194]}),t(u,[2,62],{42:[1,195]}),t(u,[2,85],{35:[1,196]}),t(u,[2,86],{35:[1,197]}),t(u,[2,92],{38:[1,198]}),t(u,[2,76],{32:[1,199]}),t(u,[2,87],{38:[1,200]}),t(u,[2,75],{32:[1,201]}),t(u,[2,81],{35:[1,202]}),t(u,[2,82],{35:[1,203]}),t(u,[2,88],{38:[1,204]}),{33:[1,205]},{39:206,43:y,44:x,45:_},{33:[1,207]},{33:[1,208]},{39:209,43:y,44:x,45:_},{33:[1,210]},t(u,[2,27]),t(u,[2,32]),t(u,[2,28]),t(u,[2,33]),t(u,[2,34]),t(u,[2,35]),{33:[1,211]},{33:[1,212]},{33:[1,213]},{39:214,43:y,44:x,45:_},{33:[1,215]},{39:216,43:y,44:x,45:_},{33:[1,217]},{33:[1,218]},{33:[1,219]},{33:[1,220]},{33:[1,221]},{33:[1,222]},{33:[1,223]},{39:224,43:y,44:x,45:_},{33:[1,225]},{33:[1,226]},{33:[1,227]},{39:228,43:y,44:x,45:_},{33:[1,229]},{39:230,43:y,44:x,45:_},{33:[1,231]},{33:[1,232]},{33:[1,233]},{39:234,43:y,44:x,45:_},t(u,[2,46]),t(u,[2,48]),t(u,[2,47]),t(u,[2,49]),t(u,[2,51]),t(u,[2,50]),t(u,[2,107]),t(u,[2,108]),t(u,[2,105]),t(u,[2,106]),t(u,[2,110]),t(u,[2,109]),t(u,[2,114]),t(u,[2,113]),t(u,[2,112]),t(u,[2,111]),t(u,[2,116]),t(u,[2,115]),t(u,[2,104]),t(u,[2,103]),t(u,[2,102]),t(u,[2,101]),t(u,[2,99]),t(u,[2,100]),t(u,[2,98]),t(u,[2,97]),t(u,[2,96]),t(u,[2,95]),t(u,[2,93]),t(u,[2,94])],defaultActions:{7:[2,1],13:[2,2],18:[2,3],36:[2,4]},parseError:function(k,A){if(A.recoverable)this.trace(k);else{var S=new Error(k);throw S.hash=A,S}},parse:function(k){var A=this,S=[0],m=[],C=[null],f=[],B=this.table,b="",P=0,U=0,N=2,w=1,R=f.slice.call(arguments,1),D=Object.create(this.lexer),V={yy:{}};for(var z in this.yy)Object.prototype.hasOwnProperty.call(this.yy,z)&&(V.yy[z]=this.yy[z]);D.setInput(k,V.yy),V.yy.lexer=D,V.yy.parser=this,typeof D.yylloc>"u"&&(D.yylloc={});var st=D.yylloc;f.push(st);var j=D.options&&D.options.ranges;typeof V.yy.parseError=="function"?this.parseError=V.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function dt(){var M;return M=m.pop()||D.lex()||w,typeof M!="number"&&(M instanceof Array&&(m=M,M=m.pop()),M=A.symbols_[M]||M),M}for(var K,G,tt,nt,Q={},J,O,at,W;;){if(G=S[S.length-1],this.defaultActions[G]?tt=this.defaultActions[G]:((K===null||typeof K>"u")&&(K=dt()),tt=B[G]&&B[G][K]),typeof tt>"u"||!tt.length||!tt[0]){var ft="";W=[];for(J in B[G])this.terminals_[J]&&J>N&&W.push("'"+this.terminals_[J]+"'");D.showPosition?ft="Parse error on line "+(P+1)+`:
`+D.showPosition()+`
Expecting `+W.join(", ")+", got '"+(this.terminals_[K]||K)+"'":ft="Parse error on line "+(P+1)+": Unexpected "+(K==w?"end of input":"'"+(this.terminals_[K]||K)+"'"),this.parseError(ft,{text:D.match,token:this.terminals_[K]||K,line:D.yylineno,loc:st,expected:W})}if(tt[0]instanceof Array&&tt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+G+", token: "+K);switch(tt[0]){case 1:S.push(K),C.push(D.yytext),f.push(D.yylloc),S.push(tt[1]),K=null,U=D.yyleng,b=D.yytext,P=D.yylineno,st=D.yylloc;break;case 2:if(O=this.productions_[tt[1]][1],Q.$=C[C.length-O],Q._$={first_line:f[f.length-(O||1)].first_line,last_line:f[f.length-1].last_line,first_column:f[f.length-(O||1)].first_column,last_column:f[f.length-1].last_column},j&&(Q._$.range=[f[f.length-(O||1)].range[0],f[f.length-1].range[1]]),nt=this.performAction.apply(Q,[b,U,P,V.yy,tt[1],C,f].concat(R)),typeof nt<"u")return nt;O&&(S=S.slice(0,-1*O*2),C=C.slice(0,-1*O),f=f.slice(0,-1*O)),S.push(this.productions_[tt[1]][0]),C.push(Q.$),f.push(Q._$),at=B[S[S.length-2]][S[S.length-1]],S.push(at);break;case 3:return!0}}return!0}},F=function(){var T={EOF:1,parseError:function(A,S){if(this.yy.parser)this.yy.parser.parseError(A,S);else throw new Error(A)},setInput:function(k,A){return this.yy=A||this.yy||{},this._input=k,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var k=this._input[0];this.yytext+=k,this.yyleng++,this.offset++,this.match+=k,this.matched+=k;var A=k.match(/(?:\r\n?|\n).*/g);return A?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),k},unput:function(k){var A=k.length,S=k.split(/(?:\r\n?|\n)/g);this._input=k+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-A),this.offset-=A;var m=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),S.length-1&&(this.yylineno-=S.length-1);var C=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:S?(S.length===m.length?this.yylloc.first_column:0)+m[m.length-S.length].length-S[0].length:this.yylloc.first_column-A},this.options.ranges&&(this.yylloc.range=[C[0],C[0]+this.yyleng-A]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(k){this.unput(this.match.slice(k))},pastInput:function(){var k=this.matched.substr(0,this.matched.length-this.match.length);return(k.length>20?"...":"")+k.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var k=this.match;return k.length<20&&(k+=this._input.substr(0,20-k.length)),(k.substr(0,20)+(k.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var k=this.pastInput(),A=new Array(k.length+1).join("-");return k+this.upcomingInput()+`
`+A+"^"},test_match:function(k,A){var S,m,C;if(this.options.backtrack_lexer&&(C={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(C.yylloc.range=this.yylloc.range.slice(0))),m=k[0].match(/(?:\r\n?|\n).*/g),m&&(this.yylineno+=m.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:m?m[m.length-1].length-m[m.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+k[0].length},this.yytext+=k[0],this.match+=k[0],this.matches=k,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(k[0].length),this.matched+=k[0],S=this.performAction.call(this,this.yy,this,A,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),S)return S;if(this._backtrack){for(var f in C)this[f]=C[f];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var k,A,S,m;this._more||(this.yytext="",this.match="");for(var C=this._currentRules(),f=0;f<C.length;f++)if(S=this._input.match(this.rules[C[f]]),S&&(!A||S[0].length>A[0].length)){if(A=S,m=f,this.options.backtrack_lexer){if(k=this.test_match(S,C[f]),k!==!1)return k;if(this._backtrack){A=!1;continue}else return!1}else if(!this.options.flex)break}return A?(k=this.test_match(A,C[m]),k!==!1?k:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var A=this.next();return A||this.lex()},begin:function(A){this.conditionStack.push(A)},popState:function(){var A=this.conditionStack.length-1;return A>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(A){return A=this.conditionStack.length-1-Math.abs(A||0),A>=0?this.conditionStack[A]:"INITIAL"},pushState:function(A){this.begin(A)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(A,S,m,C){switch(m){case 0:return this.begin("acc_title"),19;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),21;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return 13;case 8:break;case 9:break;case 10:return 5;case 11:return 40;case 12:return 32;case 13:return 38;case 14:return 42;case 15:return 43;case 16:return 44;case 17:return 45;case 18:return 35;case 19:return 28;case 20:return 29;case 21:return 37;case 22:return 31;case 23:return 34;case 24:return 26;case 25:return 9;case 26:return 9;case 27:return 8;case 28:return"CARET";case 29:this.begin("options");break;case 30:this.popState();break;case 31:return 12;case 32:return 36;case 33:this.begin("string");break;case 34:this.popState();break;case 35:return 33;case 36:return 30;case 37:return 46;case 38:return 7}},rules:[/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:(\r?\n)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:gitGraph\b)/i,/^(?:commit(?=\s|$))/i,/^(?:id:)/i,/^(?:type:)/i,/^(?:msg:)/i,/^(?:NORMAL\b)/i,/^(?:REVERSE\b)/i,/^(?:HIGHLIGHT\b)/i,/^(?:tag:)/i,/^(?:branch(?=\s|$))/i,/^(?:order:)/i,/^(?:merge(?=\s|$))/i,/^(?:cherry-pick(?=\s|$))/i,/^(?:parent:)/i,/^(?:checkout(?=\s|$))/i,/^(?:LR\b)/i,/^(?:TB\b)/i,/^(?::)/i,/^(?:\^)/i,/^(?:options\r?\n)/i,/^(?:[ \r\n\t]+end\b)/i,/^(?:[\s\S]+(?=[ \r\n\t]+end))/i,/^(?:["]["])/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[0-9]+(?=\s|$))/i,/^(?:\w([-\./\w]*[-\w])?)/i,/^(?:$)/i,/^(?:\s+)/i],conditions:{acc_descr_multiline:{rules:[5,6],inclusive:!1},acc_descr:{rules:[3],inclusive:!1},acc_title:{rules:[1],inclusive:!1},options:{rules:[30,31],inclusive:!1},string:{rules:[34,35],inclusive:!1},INITIAL:{rules:[0,2,4,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,32,33,36,37,38,39],inclusive:!0}}};return T}();E.lexer=F;function L(){this.yy={}}return L.prototype=E,E.Parser=L,new L}();Xa.parser=Xa;const mb=Xa;let zn=Y().gitGraph.mainBranchName,xb=Y().gitGraph.mainBranchOrder,Te={},We=null,Fs={};Fs[zn]={name:zn,order:xb};let ge={};ge[zn]=We;let we=zn,Gu="LR",vr=0;function tl(){return wh({length:7})}function bb(t,e){const i=Object.create(null);return t.reduce((r,s)=>{const n=e(s);return i[n]||(i[n]=!0,r.push(s)),r},[])}const kb=function(t){Gu=t};let ju={};const _b=function(t){I.debug("options str",t),t=t&&t.trim(),t=t||"{}";try{ju=JSON.parse(t)}catch(e){I.error("error while parsing gitGraph options",e.message)}},Tb=function(){return ju},Cb=function(t,e,i,r){I.debug("Entering commit:",t,e,i,r),e=mt.sanitizeText(e,Y()),t=mt.sanitizeText(t,Y()),r=mt.sanitizeText(r,Y());const s={id:e||vr+"-"+tl(),message:t,seq:vr++,type:i||jr.NORMAL,tag:r||"",parents:We==null?[]:[We.id],branch:we};We=s,Te[s.id]=s,ge[we]=s.id,I.debug("in pushCommit "+s.id)},Eb=function(t,e){if(t=mt.sanitizeText(t,Y()),ge[t]===void 0)ge[t]=We!=null?We.id:null,Fs[t]={name:t,order:e?parseInt(e,10):null},Xu(t),I.debug("in createBranch");else{let i=new Error('Trying to create an existing branch. (Help: Either use a new name if you want create a new branch or try using "checkout '+t+'")');throw i.hash={text:"branch "+t,token:"branch "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"checkout '+t+'"']},i}},Sb=function(t,e,i,r){t=mt.sanitizeText(t,Y()),e=mt.sanitizeText(e,Y());const s=Te[ge[we]],n=Te[ge[t]];if(we===t){let o=new Error('Incorrect usage of "merge". Cannot merge a branch to itself');throw o.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch abc"]},o}else if(s===void 0||!s){let o=new Error('Incorrect usage of "merge". Current branch ('+we+")has no commits");throw o.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["commit"]},o}else if(ge[t]===void 0){let o=new Error('Incorrect usage of "merge". Branch to be merged ('+t+") does not exist");throw o.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch "+t]},o}else if(n===void 0||!n){let o=new Error('Incorrect usage of "merge". Branch to be merged ('+t+") has no commits");throw o.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"commit"']},o}else if(s===n){let o=new Error('Incorrect usage of "merge". Both branches have same head');throw o.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch abc"]},o}else if(e&&Te[e]!==void 0){let o=new Error('Incorrect usage of "merge". Commit with id:'+e+" already exists, use different custom Id");throw o.hash={text:"merge "+t+e+i+r,token:"merge "+t+e+i+r,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["merge "+t+" "+e+"_UNIQUE "+i+" "+r]},o}const a={id:e||vr+"-"+tl(),message:"merged branch "+t+" into "+we,seq:vr++,parents:[We==null?null:We.id,ge[t]],branch:we,type:jr.MERGE,customType:i,customId:!!e,tag:r||""};We=a,Te[a.id]=a,ge[we]=a.id,I.debug(ge),I.debug("in mergeBranch")},vb=function(t,e,i,r){if(I.debug("Entering cherryPick:",t,e,i),t=mt.sanitizeText(t,Y()),e=mt.sanitizeText(e,Y()),i=mt.sanitizeText(i,Y()),r=mt.sanitizeText(r,Y()),!t||Te[t]===void 0){let a=new Error('Incorrect usage of "cherryPick". Source commit id should exist and provided');throw a.hash={text:"cherryPick "+t+" "+e,token:"cherryPick "+t+" "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},a}let s=Te[t],n=s.branch;if(r&&!(Array.isArray(s.parents)&&s.parents.includes(r)))throw new Error("Invalid operation: The specified parent commit is not an immediate parent of the cherry-picked commit.");if(s.type===jr.MERGE&&!r)throw new Error("Incorrect usage of cherry-pick: If the source commit is a merge commit, an immediate parent commit must be specified.");if(!e||Te[e]===void 0){if(n===we){let l=new Error('Incorrect usage of "cherryPick". Source commit is already on current branch');throw l.hash={text:"cherryPick "+t+" "+e,token:"cherryPick "+t+" "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},l}const a=Te[ge[we]];if(a===void 0||!a){let l=new Error('Incorrect usage of "cherry-pick". Current branch ('+we+")has no commits");throw l.hash={text:"cherryPick "+t+" "+e,token:"cherryPick "+t+" "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},l}const o={id:vr+"-"+tl(),message:"cherry-picked "+s+" into "+we,seq:vr++,parents:[We==null?null:We.id,s.id],branch:we,type:jr.CHERRY_PICK,tag:i??`cherry-pick:${s.id}${s.type===jr.MERGE?`|parent:${r}`:""}`};We=o,Te[o.id]=o,ge[we]=o.id,I.debug(ge),I.debug("in cherryPick")}},Xu=function(t){if(t=mt.sanitizeText(t,Y()),ge[t]===void 0){let e=new Error('Trying to checkout branch which is not yet created. (Help try using "branch '+t+'")');throw e.hash={text:"checkout "+t,token:"checkout "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"branch '+t+'"']},e}else{we=t;const e=ge[we];We=Te[e]}};function _c(t,e,i){const r=t.indexOf(e);r===-1?t.push(i):t.splice(r,1,i)}function $u(t){const e=t.reduce((s,n)=>s.seq>n.seq?s:n,t[0]);let i="";t.forEach(function(s){s===e?i+="	*":i+="	|"});const r=[i,e.id,e.seq];for(let s in ge)ge[s]===e.id&&r.push(s);if(I.debug(r.join(" ")),e.parents&&e.parents.length==2){const s=Te[e.parents[0]];_c(t,e,s),t.push(Te[e.parents[1]])}else{if(e.parents.length==0)return;{const s=Te[e.parents];_c(t,e,s)}}t=bb(t,s=>s.id),$u(t)}const wb=function(){I.debug(Te);const t=Ku()[0];$u([t])},Ab=function(){Te={},We=null;let t=Y().gitGraph.mainBranchName,e=Y().gitGraph.mainBranchOrder;ge={},ge[t]=null,Fs={},Fs[t]={name:t,order:e},we=t,vr=0,Oe()},Lb=function(){return Object.values(Fs).map((e,i)=>e.order!==null?e:{...e,order:parseFloat(`0.${i}`,10)}).sort((e,i)=>e.order-i.order).map(({name:e})=>({name:e}))},Bb=function(){return ge},Ib=function(){return Te},Ku=function(){const t=Object.keys(Te).map(function(e){return Te[e]});return t.forEach(function(e){I.debug(e.id)}),t.sort((e,i)=>e.seq-i.seq),t},Db=function(){return we},Fb=function(){return Gu},Rb=function(){return We},jr={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},Nb={getConfig:()=>Y().gitGraph,setDirection:kb,setOptions:_b,getOptions:Tb,commit:Cb,branch:Eb,merge:Sb,cherryPick:vb,checkout:Xu,prettyPrint:wb,clear:Ab,getBranchesAsObjArray:Lb,getBranches:Bb,getCommits:Ib,getCommitsArray:Ku,getCurrentBranch:Db,getDirection:Fb,getHead:Rb,setAccTitle:Pe,getAccTitle:Ye,getAccDescription:He,setAccDescription:Ue,setDiagramTitle:ri,getDiagramTitle:Ge,commitType:jr};let ps={};const Je={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},br=8;let he={},$i={},qn=[],Rs=0,pe="LR";const Ob=()=>{he={},$i={},ps={},Rs=0,qn=[],pe="LR"},Qu=t=>{const e=document.createElementNS("http://www.w3.org/2000/svg","text");let i=[];typeof t=="string"?i=t.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(t)?i=t:i=[];for(const r of i){const s=document.createElementNS("http://www.w3.org/2000/svg","tspan");s.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),s.setAttribute("dy","1em"),s.setAttribute("x","0"),s.setAttribute("class","row"),s.textContent=r.trim(),e.appendChild(s)}return e},Pb=t=>{let e="",i=0;return t.forEach(r=>{const s=pe==="TB"?$i[r].y:$i[r].x;s>=i&&(e=r,i=s)}),e||void 0},Tc=(t,e,i)=>{const r=Y().gitGraph,s=t.append("g").attr("class","commit-bullets"),n=t.append("g").attr("class","commit-labels");let a=0;pe==="TB"&&(a=30);const l=Object.keys(e).sort((d,g)=>e[d].seq-e[g].seq),h=r.parallelCommits,u=10,p=40;l.forEach(d=>{const g=e[d];if(h)if(g.parents.length){const v=Pb(g.parents);a=pe==="TB"?$i[v].y+p:$i[v].x+p}else a=0,pe==="TB"&&(a=30);const y=a+u,x=pe==="TB"?y:he[g.branch].pos,_=pe==="TB"?he[g.branch].pos:y;if(i){let v,E=g.customType!==void 0&&g.customType!==""?g.customType:g.type;switch(E){case Je.NORMAL:v="commit-normal";break;case Je.REVERSE:v="commit-reverse";break;case Je.HIGHLIGHT:v="commit-highlight";break;case Je.MERGE:v="commit-merge";break;case Je.CHERRY_PICK:v="commit-cherry-pick";break;default:v="commit-normal"}if(E===Je.HIGHLIGHT){const F=s.append("rect");F.attr("x",_-10),F.attr("y",x-10),F.attr("height",20),F.attr("width",20),F.attr("class",`commit ${g.id} commit-highlight${he[g.branch].index%br} ${v}-outer`),s.append("rect").attr("x",_-6).attr("y",x-6).attr("height",12).attr("width",12).attr("class",`commit ${g.id} commit${he[g.branch].index%br} ${v}-inner`)}else if(E===Je.CHERRY_PICK)s.append("circle").attr("cx",_).attr("cy",x).attr("r",10).attr("class",`commit ${g.id} ${v}`),s.append("circle").attr("cx",_-3).attr("cy",x+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${g.id} ${v}`),s.append("circle").attr("cx",_+3).attr("cy",x+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${g.id} ${v}`),s.append("line").attr("x1",_+3).attr("y1",x+1).attr("x2",_).attr("y2",x-5).attr("stroke","#fff").attr("class",`commit ${g.id} ${v}`),s.append("line").attr("x1",_-3).attr("y1",x+1).attr("x2",_).attr("y2",x-5).attr("stroke","#fff").attr("class",`commit ${g.id} ${v}`);else{const F=s.append("circle");if(F.attr("cx",_),F.attr("cy",x),F.attr("r",g.type===Je.MERGE?9:10),F.attr("class",`commit ${g.id} commit${he[g.branch].index%br}`),E===Je.MERGE){const L=s.append("circle");L.attr("cx",_),L.attr("cy",x),L.attr("r",6),L.attr("class",`commit ${v} ${g.id} commit${he[g.branch].index%br}`)}E===Je.REVERSE&&s.append("path").attr("d",`M ${_-5},${x-5}L${_+5},${x+5}M${_-5},${x+5}L${_+5},${x-5}`).attr("class",`commit ${v} ${g.id} commit${he[g.branch].index%br}`)}}if(pe==="TB"?$i[g.id]={x:_,y}:$i[g.id]={x:y,y:x},i){if(g.type!==Je.CHERRY_PICK&&(g.customId&&g.type===Je.MERGE||g.type!==Je.MERGE)&&r.showCommitLabel){const F=n.append("g"),L=F.insert("rect").attr("class","commit-label-bkg"),T=F.append("text").attr("x",a).attr("y",x+25).attr("class","commit-label").text(g.id);let k=T.node().getBBox();if(L.attr("x",y-k.width/2-2).attr("y",x+13.5).attr("width",k.width+2*2).attr("height",k.height+2*2),pe==="TB"&&(L.attr("x",_-(k.width+4*4+5)).attr("y",x-12),T.attr("x",_-(k.width+4*4)).attr("y",x+k.height-12)),pe!=="TB"&&T.attr("x",y-k.width/2),r.rotateCommitLabel)if(pe==="TB")T.attr("transform","rotate(-45, "+_+", "+x+")"),L.attr("transform","rotate(-45, "+_+", "+x+")");else{let A=-7.5-(k.width+10)/25*9.5,S=10+k.width/25*8.5;F.attr("transform","translate("+A+", "+S+") rotate(-45, "+a+", "+x+")")}}if(g.tag){const F=n.insert("polygon"),L=n.append("circle"),T=n.append("text").attr("y",x-16).attr("class","tag-label").text(g.tag);let k=T.node().getBBox();T.attr("x",y-k.width/2);const A=k.height/2,S=x-19.2;F.attr("class","tag-label-bkg").attr("points",`
          ${a-k.width/2-4/2},${S+2}
          ${a-k.width/2-4/2},${S-2}
          ${y-k.width/2-4},${S-A-2}
          ${y+k.width/2+4},${S-A-2}
          ${y+k.width/2+4},${S+A+2}
          ${y-k.width/2-4},${S+A+2}`),L.attr("cx",a-k.width/2+4/2).attr("cy",S).attr("r",1.5).attr("class","tag-hole"),pe==="TB"&&(F.attr("class","tag-label-bkg").attr("points",`
            ${_},${a+2}
            ${_},${a-2}
            ${_+u},${a-A-2}
            ${_+u+k.width+4},${a-A-2}
            ${_+u+k.width+4},${a+A+2}
            ${_+u},${a+A+2}`).attr("transform","translate(12,12) rotate(45, "+_+","+a+")"),L.attr("cx",_+4/2).attr("cy",a).attr("transform","translate(12,12) rotate(45, "+_+","+a+")"),T.attr("x",_+5).attr("y",a+3).attr("transform","translate(14,14) rotate(45, "+_+","+a+")"))}}a+=p+u,a>Rs&&(Rs=a)})},Mb=(t,e,i,r,s)=>{const a=(pe==="TB"?i.x<r.x:i.y<r.y)?e.branch:t.branch,o=h=>h.branch===a,l=h=>h.seq>t.seq&&h.seq<e.seq;return Object.values(s).some(h=>l(h)&&o(h))},gs=(t,e,i=0)=>{const r=t+Math.abs(t-e)/2;if(i>5)return r;if(qn.every(a=>Math.abs(a-r)>=10))return qn.push(r),r;const n=Math.abs(t-e);return gs(t,e-n/5,i+1)},Vb=(t,e,i,r)=>{const s=$i[e.id],n=$i[i.id],a=Mb(e,i,s,n,r);let o="",l="",h=0,u=0,p=he[i.branch].index,d;if(a){o="A 10 10, 0, 0, 0,",l="A 10 10, 0, 0, 1,",h=10,u=10;const g=s.y<n.y?gs(s.y,n.y):gs(n.y,s.y),y=s.x<n.x?gs(s.x,n.x):gs(n.x,s.x);pe==="TB"?s.x<n.x?(p=he[i.branch].index,d=`M ${s.x} ${s.y} L ${y-h} ${s.y} ${l} ${y} ${s.y+u} L ${y} ${n.y-h} ${o} ${y+u} ${n.y} L ${n.x} ${n.y}`):(p=he[e.branch].index,d=`M ${s.x} ${s.y} L ${y+h} ${s.y} ${o} ${y} ${s.y+u} L ${y} ${n.y-h} ${l} ${y-u} ${n.y} L ${n.x} ${n.y}`):s.y<n.y?(p=he[i.branch].index,d=`M ${s.x} ${s.y} L ${s.x} ${g-h} ${o} ${s.x+u} ${g} L ${n.x-h} ${g} ${l} ${n.x} ${g+u} L ${n.x} ${n.y}`):(p=he[e.branch].index,d=`M ${s.x} ${s.y} L ${s.x} ${g+h} ${l} ${s.x+u} ${g} L ${n.x-h} ${g} ${o} ${n.x} ${g-u} L ${n.x} ${n.y}`)}else pe==="TB"?(s.x<n.x&&(o="A 20 20, 0, 0, 0,",l="A 20 20, 0, 0, 1,",h=20,u=20,p=he[i.branch].index,d=`M ${s.x} ${s.y} L ${n.x-h} ${s.y} ${l} ${n.x} ${s.y+u} L ${n.x} ${n.y}`),s.x>n.x&&(o="A 20 20, 0, 0, 0,",l="A 20 20, 0, 0, 1,",h=20,u=20,p=he[e.branch].index,d=`M ${s.x} ${s.y} L ${s.x} ${n.y-h} ${l} ${s.x-u} ${n.y} L ${n.x} ${n.y}`),s.x===n.x&&(p=he[e.branch].index,d=`M ${s.x} ${s.y} L ${s.x+h} ${s.y} ${o} ${s.x+u} ${n.y+h} L ${n.x} ${n.y}`)):(s.y<n.y&&(o="A 20 20, 0, 0, 0,",h=20,u=20,p=he[i.branch].index,d=`M ${s.x} ${s.y} L ${s.x} ${n.y-h} ${o} ${s.x+u} ${n.y} L ${n.x} ${n.y}`),s.y>n.y&&(o="A 20 20, 0, 0, 0,",h=20,u=20,p=he[e.branch].index,d=`M ${s.x} ${s.y} L ${n.x-h} ${s.y} ${o} ${n.x} ${s.y-u} L ${n.x} ${n.y}`),s.y===n.y&&(p=he[e.branch].index,d=`M ${s.x} ${s.y} L ${s.x} ${n.y-h} ${o} ${s.x+u} ${n.y} L ${n.x} ${n.y}`));t.append("path").attr("d",d).attr("class","arrow arrow"+p%br)},zb=(t,e)=>{const i=t.append("g").attr("class","commit-arrows");Object.keys(e).forEach(r=>{const s=e[r];s.parents&&s.parents.length>0&&s.parents.forEach(n=>{Vb(i,e[n],s,e)})})},qb=(t,e)=>{const i=Y().gitGraph,r=t.append("g");e.forEach((s,n)=>{const a=n%br,o=he[s.name].pos,l=r.append("line");l.attr("x1",0),l.attr("y1",o),l.attr("x2",Rs),l.attr("y2",o),l.attr("class","branch branch"+a),pe==="TB"&&(l.attr("y1",30),l.attr("x1",o),l.attr("y2",Rs),l.attr("x2",o)),qn.push(o);let h=s.name;const u=Qu(h),p=r.insert("rect"),g=r.insert("g").attr("class","branchLabel").insert("g").attr("class","label branch-label"+a);g.node().appendChild(u);let y=u.getBBox();p.attr("class","branchLabelBkg label"+a).attr("rx",4).attr("ry",4).attr("x",-y.width-4-(i.rotateCommitLabel===!0?30:0)).attr("y",-y.height/2+8).attr("width",y.width+18).attr("height",y.height+4),g.attr("transform","translate("+(-y.width-14-(i.rotateCommitLabel===!0?30:0))+", "+(o-y.height/2-1)+")"),pe==="TB"&&(p.attr("x",o-y.width/2-10).attr("y",0),g.attr("transform","translate("+(o-y.width/2-5)+", 0)")),pe!=="TB"&&p.attr("transform","translate(-19, "+(o-y.height/2)+")")})},Wb=function(t,e,i,r){Ob();const s=Y(),n=s.gitGraph;I.debug("in gitgraph renderer",t+`
`,"id:",e,i),ps=r.db.getCommits();const a=r.db.getBranchesAsObjArray();pe=r.db.getDirection();const o=yt(`[id="${e}"]`);let l=0;a.forEach((h,u)=>{const p=Qu(h.name),d=o.append("g"),g=d.insert("g").attr("class","branchLabel"),y=g.insert("g").attr("class","label branch-label");y.node().appendChild(p);let x=p.getBBox();he[h.name]={pos:l,index:u},l+=50+(n.rotateCommitLabel?40:0)+(pe==="TB"?x.width/2:0),y.remove(),g.remove(),d.remove()}),Tc(o,ps,!1),n.showBranches&&qb(o,a),zb(o,ps),Tc(o,ps,!0),Rt.insertTitle(o,"gitTitleText",n.titleTopMargin,r.db.getDiagramTitle()),t1(void 0,o,n.diagramPadding,n.useMaxWidth??s.useMaxWidth)},Yb={draw:Wb},Ub=t=>`
  .commit-id,
  .commit-msg,
  .branch-label {
    fill: lightgrey;
    color: lightgrey;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
  ${[0,1,2,3,4,5,6,7].map(e=>`
        .branch-label${e} { fill: ${t["gitBranchLabel"+e]}; }
        .commit${e} { stroke: ${t["git"+e]}; fill: ${t["git"+e]}; }
        .commit-highlight${e} { stroke: ${t["gitInv"+e]}; fill: ${t["gitInv"+e]}; }
        .label${e}  { fill: ${t["git"+e]}; }
        .arrow${e} { stroke: ${t["git"+e]}; }
        `).join(`
`)}

  .branch {
    stroke-width: 1;
    stroke: ${t.lineColor};
    stroke-dasharray: 2;
  }
  .commit-label { font-size: ${t.commitLabelFontSize}; fill: ${t.commitLabelColor};}
  .commit-label-bkg { font-size: ${t.commitLabelFontSize}; fill: ${t.commitLabelBackground}; opacity: 0.5; }
  .tag-label { font-size: ${t.tagLabelFontSize}; fill: ${t.tagLabelColor};}
  .tag-label-bkg { fill: ${t.tagLabelBackground}; stroke: ${t.tagLabelBorder}; }
  .tag-hole { fill: ${t.textColor}; }

  .commit-merge {
    stroke: ${t.primaryColor};
    fill: ${t.primaryColor};
  }
  .commit-reverse {
    stroke: ${t.primaryColor};
    fill: ${t.primaryColor};
    stroke-width: 3;
  }
  .commit-highlight-outer {
  }
  .commit-highlight-inner {
    stroke: ${t.primaryColor};
    fill: ${t.primaryColor};
  }

  .arrow { stroke-width: 8; stroke-linecap: round; fill: none}
  .gitTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.textColor};
  }
`,Hb=Ub,Gb={parser:mb,db:Nb,renderer:Yb,styles:Hb},jb=Object.freeze(Object.defineProperty({__proto__:null,diagram:Gb},Symbol.toStringTag,{value:"Module"}));var $a=function(){var t=function(f,B,b,P){for(b=b||{},P=f.length;P--;b[f[P]]=B);return b},e=[6,8,10,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,30,32,33,35,37],i=[1,25],r=[1,26],s=[1,27],n=[1,28],a=[1,29],o=[1,30],l=[1,31],h=[1,9],u=[1,10],p=[1,11],d=[1,12],g=[1,13],y=[1,14],x=[1,15],_=[1,16],v=[1,18],E=[1,19],F=[1,20],L=[1,21],T=[1,22],k=[1,24],A=[1,32],S={trace:function(){},yy:{},symbols_:{error:2,start:3,gantt:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NL:10,weekday:11,weekday_monday:12,weekday_tuesday:13,weekday_wednesday:14,weekday_thursday:15,weekday_friday:16,weekday_saturday:17,weekday_sunday:18,dateFormat:19,inclusiveEndDates:20,topAxis:21,axisFormat:22,tickInterval:23,excludes:24,includes:25,todayMarker:26,title:27,acc_title:28,acc_title_value:29,acc_descr:30,acc_descr_value:31,acc_descr_multiline_value:32,section:33,clickStatement:34,taskTxt:35,taskData:36,click:37,callbackname:38,callbackargs:39,href:40,clickStatementDebug:41,$accept:0,$end:1},terminals_:{2:"error",4:"gantt",6:"EOF",8:"SPACE",10:"NL",12:"weekday_monday",13:"weekday_tuesday",14:"weekday_wednesday",15:"weekday_thursday",16:"weekday_friday",17:"weekday_saturday",18:"weekday_sunday",19:"dateFormat",20:"inclusiveEndDates",21:"topAxis",22:"axisFormat",23:"tickInterval",24:"excludes",25:"includes",26:"todayMarker",27:"title",28:"acc_title",29:"acc_title_value",30:"acc_descr",31:"acc_descr_value",32:"acc_descr_multiline_value",33:"section",35:"taskTxt",36:"taskData",37:"click",38:"callbackname",39:"callbackargs",40:"href"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,1],[9,2],[34,2],[34,3],[34,3],[34,4],[34,3],[34,4],[34,2],[41,2],[41,3],[41,3],[41,4],[41,3],[41,4],[41,2]],performAction:function(B,b,P,U,N,w,R){var D=w.length-1;switch(N){case 1:return w[D-1];case 2:this.$=[];break;case 3:w[D-1].push(w[D]),this.$=w[D-1];break;case 4:case 5:this.$=w[D];break;case 6:case 7:this.$=[];break;case 8:U.setWeekday("monday");break;case 9:U.setWeekday("tuesday");break;case 10:U.setWeekday("wednesday");break;case 11:U.setWeekday("thursday");break;case 12:U.setWeekday("friday");break;case 13:U.setWeekday("saturday");break;case 14:U.setWeekday("sunday");break;case 15:U.setDateFormat(w[D].substr(11)),this.$=w[D].substr(11);break;case 16:U.enableInclusiveEndDates(),this.$=w[D].substr(18);break;case 17:U.TopAxis(),this.$=w[D].substr(8);break;case 18:U.setAxisFormat(w[D].substr(11)),this.$=w[D].substr(11);break;case 19:U.setTickInterval(w[D].substr(13)),this.$=w[D].substr(13);break;case 20:U.setExcludes(w[D].substr(9)),this.$=w[D].substr(9);break;case 21:U.setIncludes(w[D].substr(9)),this.$=w[D].substr(9);break;case 22:U.setTodayMarker(w[D].substr(12)),this.$=w[D].substr(12);break;case 24:U.setDiagramTitle(w[D].substr(6)),this.$=w[D].substr(6);break;case 25:this.$=w[D].trim(),U.setAccTitle(this.$);break;case 26:case 27:this.$=w[D].trim(),U.setAccDescription(this.$);break;case 28:U.addSection(w[D].substr(8)),this.$=w[D].substr(8);break;case 30:U.addTask(w[D-1],w[D]),this.$="task";break;case 31:this.$=w[D-1],U.setClickEvent(w[D-1],w[D],null);break;case 32:this.$=w[D-2],U.setClickEvent(w[D-2],w[D-1],w[D]);break;case 33:this.$=w[D-2],U.setClickEvent(w[D-2],w[D-1],null),U.setLink(w[D-2],w[D]);break;case 34:this.$=w[D-3],U.setClickEvent(w[D-3],w[D-2],w[D-1]),U.setLink(w[D-3],w[D]);break;case 35:this.$=w[D-2],U.setClickEvent(w[D-2],w[D],null),U.setLink(w[D-2],w[D-1]);break;case 36:this.$=w[D-3],U.setClickEvent(w[D-3],w[D-1],w[D]),U.setLink(w[D-3],w[D-2]);break;case 37:this.$=w[D-1],U.setLink(w[D-1],w[D]);break;case 38:case 44:this.$=w[D-1]+" "+w[D];break;case 39:case 40:case 42:this.$=w[D-2]+" "+w[D-1]+" "+w[D];break;case 41:case 43:this.$=w[D-3]+" "+w[D-2]+" "+w[D-1]+" "+w[D];break}},table:[{3:1,4:[1,2]},{1:[3]},t(e,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:17,12:i,13:r,14:s,15:n,16:a,17:o,18:l,19:h,20:u,21:p,22:d,23:g,24:y,25:x,26:_,27:v,28:E,30:F,32:L,33:T,34:23,35:k,37:A},t(e,[2,7],{1:[2,1]}),t(e,[2,3]),{9:33,11:17,12:i,13:r,14:s,15:n,16:a,17:o,18:l,19:h,20:u,21:p,22:d,23:g,24:y,25:x,26:_,27:v,28:E,30:F,32:L,33:T,34:23,35:k,37:A},t(e,[2,5]),t(e,[2,6]),t(e,[2,15]),t(e,[2,16]),t(e,[2,17]),t(e,[2,18]),t(e,[2,19]),t(e,[2,20]),t(e,[2,21]),t(e,[2,22]),t(e,[2,23]),t(e,[2,24]),{29:[1,34]},{31:[1,35]},t(e,[2,27]),t(e,[2,28]),t(e,[2,29]),{36:[1,36]},t(e,[2,8]),t(e,[2,9]),t(e,[2,10]),t(e,[2,11]),t(e,[2,12]),t(e,[2,13]),t(e,[2,14]),{38:[1,37],40:[1,38]},t(e,[2,4]),t(e,[2,25]),t(e,[2,26]),t(e,[2,30]),t(e,[2,31],{39:[1,39],40:[1,40]}),t(e,[2,37],{38:[1,41]}),t(e,[2,32],{40:[1,42]}),t(e,[2,33]),t(e,[2,35],{39:[1,43]}),t(e,[2,34]),t(e,[2,36])],defaultActions:{},parseError:function(B,b){if(b.recoverable)this.trace(B);else{var P=new Error(B);throw P.hash=b,P}},parse:function(B){var b=this,P=[0],U=[],N=[null],w=[],R=this.table,D="",V=0,z=0,st=2,j=1,dt=w.slice.call(arguments,1),K=Object.create(this.lexer),G={yy:{}};for(var tt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,tt)&&(G.yy[tt]=this.yy[tt]);K.setInput(B,G.yy),G.yy.lexer=K,G.yy.parser=this,typeof K.yylloc>"u"&&(K.yylloc={});var nt=K.yylloc;w.push(nt);var Q=K.options&&K.options.ranges;typeof G.yy.parseError=="function"?this.parseError=G.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function J(){var Bt;return Bt=U.pop()||K.lex()||j,typeof Bt!="number"&&(Bt instanceof Array&&(U=Bt,Bt=U.pop()),Bt=b.symbols_[Bt]||Bt),Bt}for(var O,at,W,ft,M={},wt,X,St,bt;;){if(at=P[P.length-1],this.defaultActions[at]?W=this.defaultActions[at]:((O===null||typeof O>"u")&&(O=J()),W=R[at]&&R[at][O]),typeof W>"u"||!W.length||!W[0]){var Vt="";bt=[];for(wt in R[at])this.terminals_[wt]&&wt>st&&bt.push("'"+this.terminals_[wt]+"'");K.showPosition?Vt="Parse error on line "+(V+1)+`:
`+K.showPosition()+`
Expecting `+bt.join(", ")+", got '"+(this.terminals_[O]||O)+"'":Vt="Parse error on line "+(V+1)+": Unexpected "+(O==j?"end of input":"'"+(this.terminals_[O]||O)+"'"),this.parseError(Vt,{text:K.match,token:this.terminals_[O]||O,line:K.yylineno,loc:nt,expected:bt})}if(W[0]instanceof Array&&W.length>1)throw new Error("Parse Error: multiple actions possible at state: "+at+", token: "+O);switch(W[0]){case 1:P.push(O),N.push(K.yytext),w.push(K.yylloc),P.push(W[1]),O=null,z=K.yyleng,D=K.yytext,V=K.yylineno,nt=K.yylloc;break;case 2:if(X=this.productions_[W[1]][1],M.$=N[N.length-X],M._$={first_line:w[w.length-(X||1)].first_line,last_line:w[w.length-1].last_line,first_column:w[w.length-(X||1)].first_column,last_column:w[w.length-1].last_column},Q&&(M._$.range=[w[w.length-(X||1)].range[0],w[w.length-1].range[1]]),ft=this.performAction.apply(M,[D,z,V,G.yy,W[1],N,w].concat(dt)),typeof ft<"u")return ft;X&&(P=P.slice(0,-1*X*2),N=N.slice(0,-1*X),w=w.slice(0,-1*X)),P.push(this.productions_[W[1]][0]),N.push(M.$),w.push(M._$),St=R[P[P.length-2]][P[P.length-1]],P.push(St);break;case 3:return!0}}return!0}},m=function(){var f={EOF:1,parseError:function(b,P){if(this.yy.parser)this.yy.parser.parseError(b,P);else throw new Error(b)},setInput:function(B,b){return this.yy=b||this.yy||{},this._input=B,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var B=this._input[0];this.yytext+=B,this.yyleng++,this.offset++,this.match+=B,this.matched+=B;var b=B.match(/(?:\r\n?|\n).*/g);return b?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),B},unput:function(B){var b=B.length,P=B.split(/(?:\r\n?|\n)/g);this._input=B+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-b),this.offset-=b;var U=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),P.length-1&&(this.yylineno-=P.length-1);var N=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:P?(P.length===U.length?this.yylloc.first_column:0)+U[U.length-P.length].length-P[0].length:this.yylloc.first_column-b},this.options.ranges&&(this.yylloc.range=[N[0],N[0]+this.yyleng-b]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(B){this.unput(this.match.slice(B))},pastInput:function(){var B=this.matched.substr(0,this.matched.length-this.match.length);return(B.length>20?"...":"")+B.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var B=this.match;return B.length<20&&(B+=this._input.substr(0,20-B.length)),(B.substr(0,20)+(B.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var B=this.pastInput(),b=new Array(B.length+1).join("-");return B+this.upcomingInput()+`
`+b+"^"},test_match:function(B,b){var P,U,N;if(this.options.backtrack_lexer&&(N={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(N.yylloc.range=this.yylloc.range.slice(0))),U=B[0].match(/(?:\r\n?|\n).*/g),U&&(this.yylineno+=U.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:U?U[U.length-1].length-U[U.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+B[0].length},this.yytext+=B[0],this.match+=B[0],this.matches=B,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(B[0].length),this.matched+=B[0],P=this.performAction.call(this,this.yy,this,b,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),P)return P;if(this._backtrack){for(var w in N)this[w]=N[w];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var B,b,P,U;this._more||(this.yytext="",this.match="");for(var N=this._currentRules(),w=0;w<N.length;w++)if(P=this._input.match(this.rules[N[w]]),P&&(!b||P[0].length>b[0].length)){if(b=P,U=w,this.options.backtrack_lexer){if(B=this.test_match(P,N[w]),B!==!1)return B;if(this._backtrack){b=!1;continue}else return!1}else if(!this.options.flex)break}return b?(B=this.test_match(b,N[U]),B!==!1?B:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var b=this.next();return b||this.lex()},begin:function(b){this.conditionStack.push(b)},popState:function(){var b=this.conditionStack.length-1;return b>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(b){return b=this.conditionStack.length-1-Math.abs(b||0),b>=0?this.conditionStack[b]:"INITIAL"},pushState:function(b){this.begin(b)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(b,P,U,N){switch(U){case 0:return this.begin("open_directive"),"open_directive";case 1:return this.begin("acc_title"),28;case 2:return this.popState(),"acc_title_value";case 3:return this.begin("acc_descr"),30;case 4:return this.popState(),"acc_descr_value";case 5:this.begin("acc_descr_multiline");break;case 6:this.popState();break;case 7:return"acc_descr_multiline_value";case 8:break;case 9:break;case 10:break;case 11:return 10;case 12:break;case 13:break;case 14:this.begin("href");break;case 15:this.popState();break;case 16:return 40;case 17:this.begin("callbackname");break;case 18:this.popState();break;case 19:this.popState(),this.begin("callbackargs");break;case 20:return 38;case 21:this.popState();break;case 22:return 39;case 23:this.begin("click");break;case 24:this.popState();break;case 25:return 37;case 26:return 4;case 27:return 19;case 28:return 20;case 29:return 21;case 30:return 22;case 31:return 23;case 32:return 25;case 33:return 24;case 34:return 26;case 35:return 12;case 36:return 13;case 37:return 14;case 38:return 15;case 39:return 16;case 40:return 17;case 41:return 18;case 42:return"date";case 43:return 27;case 44:return"accDescription";case 45:return 33;case 46:return 35;case 47:return 36;case 48:return":";case 49:return 6;case 50:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:%%(?!\{)*[^\n]*)/i,/^(?:[^\}]%%*[^\n]*)/i,/^(?:%%*[^\n]*[\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:%[^\n]*)/i,/^(?:href[\s]+["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:call[\s]+)/i,/^(?:\([\s]*\))/i,/^(?:\()/i,/^(?:[^(]*)/i,/^(?:\))/i,/^(?:[^)]*)/i,/^(?:click[\s]+)/i,/^(?:[\s\n])/i,/^(?:[^\s\n]*)/i,/^(?:gantt\b)/i,/^(?:dateFormat\s[^#\n;]+)/i,/^(?:inclusiveEndDates\b)/i,/^(?:topAxis\b)/i,/^(?:axisFormat\s[^#\n;]+)/i,/^(?:tickInterval\s[^#\n;]+)/i,/^(?:includes\s[^#\n;]+)/i,/^(?:excludes\s[^#\n;]+)/i,/^(?:todayMarker\s[^\n;]+)/i,/^(?:weekday\s+monday\b)/i,/^(?:weekday\s+tuesday\b)/i,/^(?:weekday\s+wednesday\b)/i,/^(?:weekday\s+thursday\b)/i,/^(?:weekday\s+friday\b)/i,/^(?:weekday\s+saturday\b)/i,/^(?:weekday\s+sunday\b)/i,/^(?:\d\d\d\d-\d\d-\d\d\b)/i,/^(?:title\s[^\n]+)/i,/^(?:accDescription\s[^#\n;]+)/i,/^(?:section\s[^\n]+)/i,/^(?:[^:\n]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[6,7],inclusive:!1},acc_descr:{rules:[4],inclusive:!1},acc_title:{rules:[2],inclusive:!1},callbackargs:{rules:[21,22],inclusive:!1},callbackname:{rules:[18,19,20],inclusive:!1},href:{rules:[15,16],inclusive:!1},click:{rules:[24,25],inclusive:!1},INITIAL:{rules:[0,1,3,5,8,9,10,11,12,13,14,17,23,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],inclusive:!0}}};return f}();S.lexer=m;function C(){this.yy={}}return C.prototype=S,S.Parser=C,new C}();$a.parser=$a;const Xb=$a;De.extend(Yd);De.extend(Ud);De.extend(Hd);let Si="",el="",il,rl="",Zs=[],Js=[],sl={},nl=[],Wn=[],is="",al="";const Zu=["active","done","crit","milestone"];let ol=[],tn=!1,ll=!1,cl="sunday",Ka=0;const $b=function(){nl=[],Wn=[],is="",ol=[],yn=0,Za=void 0,mn=void 0,be=[],Si="",el="",al="",il=void 0,rl="",Zs=[],Js=[],tn=!1,ll=!1,Ka=0,sl={},Oe(),cl="sunday"},Kb=function(t){el=t},Qb=function(){return el},Zb=function(t){il=t},Jb=function(){return il},t5=function(t){rl=t},e5=function(){return rl},i5=function(t){Si=t},r5=function(){tn=!0},s5=function(){return tn},n5=function(){ll=!0},a5=function(){return ll},o5=function(t){al=t},l5=function(){return al},c5=function(){return Si},h5=function(t){Zs=t.toLowerCase().split(/[\s,]+/)},u5=function(){return Zs},d5=function(t){Js=t.toLowerCase().split(/[\s,]+/)},f5=function(){return Js},p5=function(){return sl},g5=function(t){is=t,nl.push(t)},y5=function(){return nl},m5=function(){let t=Cc();const e=10;let i=0;for(;!t&&i<e;)t=Cc(),i++;return Wn=be,Wn},Ju=function(t,e,i,r){return r.includes(t.format(e.trim()))?!1:t.isoWeekday()>=6&&i.includes("weekends")||i.includes(t.format("dddd").toLowerCase())?!0:i.includes(t.format(e.trim()))},x5=function(t){cl=t},b5=function(){return cl},t0=function(t,e,i,r){if(!i.length||t.manualEndTime)return;let s;t.startTime instanceof Date?s=De(t.startTime):s=De(t.startTime,e,!0),s=s.add(1,"d");let n;t.endTime instanceof Date?n=De(t.endTime):n=De(t.endTime,e,!0);const[a,o]=k5(s,n,e,i,r);t.endTime=a.toDate(),t.renderEndTime=o},k5=function(t,e,i,r,s){let n=!1,a=null;for(;t<=e;)n||(a=e.toDate()),n=Ju(t,i,r,s),n&&(e=e.add(1,"d")),t=t.add(1,"d");return[e,a]},Qa=function(t,e,i){i=i.trim();const s=/^after\s+([\d\w- ]+)/.exec(i.trim());if(s!==null){let a=null;if(s[1].split(" ").forEach(function(o){let l=cs(o);l!==void 0&&(a?l.endTime>a.endTime&&(a=l):a=l)}),a)return a.endTime;{const o=new Date;return o.setHours(0,0,0,0),o}}let n=De(i,e.trim(),!0);if(n.isValid())return n.toDate();{I.debug("Invalid date:"+i),I.debug("With date format:"+e.trim());const a=new Date(i);if(a===void 0||isNaN(a.getTime())||a.getFullYear()<-1e4||a.getFullYear()>1e4)throw new Error("Invalid date:"+i);return a}},e0=function(t){const e=/^(\d+(?:\.\d+)?)([Mdhmswy]|ms)$/.exec(t.trim());return e!==null?[Number.parseFloat(e[1]),e[2]]:[NaN,"ms"]},i0=function(t,e,i,r=!1){i=i.trim();let s=De(i,e.trim(),!0);if(s.isValid())return r&&(s=s.add(1,"d")),s.toDate();let n=De(t);const[a,o]=e0(i);if(!Number.isNaN(a)){const l=n.add(a,o);l.isValid()&&(n=l)}return n.toDate()};let yn=0;const Xr=function(t){return t===void 0?(yn=yn+1,"task"+yn):t},_5=function(t,e){let i;e.substr(0,1)===":"?i=e.substr(1,e.length):i=e;const r=i.split(","),s={};a0(r,s,Zu);for(let a=0;a<r.length;a++)r[a]=r[a].trim();let n="";switch(r.length){case 1:s.id=Xr(),s.startTime=t.endTime,n=r[0];break;case 2:s.id=Xr(),s.startTime=Qa(void 0,Si,r[0]),n=r[1];break;case 3:s.id=Xr(r[0]),s.startTime=Qa(void 0,Si,r[1]),n=r[2];break}return n&&(s.endTime=i0(s.startTime,Si,n,tn),s.manualEndTime=De(n,"YYYY-MM-DD",!0).isValid(),t0(s,Si,Js,Zs)),s},T5=function(t,e){let i;e.substr(0,1)===":"?i=e.substr(1,e.length):i=e;const r=i.split(","),s={};a0(r,s,Zu);for(let n=0;n<r.length;n++)r[n]=r[n].trim();switch(r.length){case 1:s.id=Xr(),s.startTime={type:"prevTaskEnd",id:t},s.endTime={data:r[0]};break;case 2:s.id=Xr(),s.startTime={type:"getStartDate",startData:r[0]},s.endTime={data:r[1]};break;case 3:s.id=Xr(r[0]),s.startTime={type:"getStartDate",startData:r[1]},s.endTime={data:r[2]};break}return s};let Za,mn,be=[];const r0={},C5=function(t,e){const i={section:is,type:is,processed:!1,manualEndTime:!1,renderEndTime:null,raw:{data:e},task:t,classes:[]},r=T5(mn,e);i.raw.startTime=r.startTime,i.raw.endTime=r.endTime,i.id=r.id,i.prevTaskId=mn,i.active=r.active,i.done=r.done,i.crit=r.crit,i.milestone=r.milestone,i.order=Ka,Ka++;const s=be.push(i);mn=i.id,r0[i.id]=s-1},cs=function(t){const e=r0[t];return be[e]},E5=function(t,e){const i={section:is,type:is,description:t,task:t,classes:[]},r=_5(Za,e);i.startTime=r.startTime,i.endTime=r.endTime,i.id=r.id,i.active=r.active,i.done=r.done,i.crit=r.crit,i.milestone=r.milestone,Za=i,Wn.push(i)},Cc=function(){const t=function(i){const r=be[i];let s="";switch(be[i].raw.startTime.type){case"prevTaskEnd":{const n=cs(r.prevTaskId);r.startTime=n.endTime;break}case"getStartDate":s=Qa(void 0,Si,be[i].raw.startTime.startData),s&&(be[i].startTime=s);break}return be[i].startTime&&(be[i].endTime=i0(be[i].startTime,Si,be[i].raw.endTime.data,tn),be[i].endTime&&(be[i].processed=!0,be[i].manualEndTime=De(be[i].raw.endTime.data,"YYYY-MM-DD",!0).isValid(),t0(be[i],Si,Js,Zs))),be[i].processed};let e=!0;for(const[i,r]of be.entries())t(i),e=e&&r.processed;return e},S5=function(t,e){let i=e;Y().securityLevel!=="loose"&&(i=Dr.sanitizeUrl(e)),t.split(",").forEach(function(r){cs(r)!==void 0&&(n0(r,()=>{window.open(i,"_self")}),sl[r]=i)}),s0(t,"clickable")},s0=function(t,e){t.split(",").forEach(function(i){let r=cs(i);r!==void 0&&r.classes.push(e)})},v5=function(t,e,i){if(Y().securityLevel!=="loose"||e===void 0)return;let r=[];if(typeof i=="string"){r=i.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let n=0;n<r.length;n++){let a=r[n].trim();a.charAt(0)==='"'&&a.charAt(a.length-1)==='"'&&(a=a.substr(1,a.length-2)),r[n]=a}}r.length===0&&r.push(t),cs(t)!==void 0&&n0(t,()=>{Rt.runFunc(e,...r)})},n0=function(t,e){ol.push(function(){const i=document.querySelector(`[id="${t}"]`);i!==null&&i.addEventListener("click",function(){e()})},function(){const i=document.querySelector(`[id="${t}-text"]`);i!==null&&i.addEventListener("click",function(){e()})})},w5=function(t,e,i){t.split(",").forEach(function(r){v5(r,e,i)}),s0(t,"clickable")},A5=function(t){ol.forEach(function(e){e(t)})},L5={getConfig:()=>Y().gantt,clear:$b,setDateFormat:i5,getDateFormat:c5,enableInclusiveEndDates:r5,endDatesAreInclusive:s5,enableTopAxis:n5,topAxisEnabled:a5,setAxisFormat:Kb,getAxisFormat:Qb,setTickInterval:Zb,getTickInterval:Jb,setTodayMarker:t5,getTodayMarker:e5,setAccTitle:Pe,getAccTitle:Ye,setDiagramTitle:ri,getDiagramTitle:Ge,setDisplayMode:o5,getDisplayMode:l5,setAccDescription:Ue,getAccDescription:He,addSection:g5,getSections:y5,getTasks:m5,addTask:C5,findTaskById:cs,addTaskOrg:E5,setIncludes:h5,getIncludes:u5,setExcludes:d5,getExcludes:f5,setClickEvent:w5,setLink:S5,getLinks:p5,bindFunctions:A5,parseDuration:e0,isInvalidDate:Ju,setWeekday:x5,getWeekday:b5};function a0(t,e,i){let r=!0;for(;r;)r=!1,i.forEach(function(s){const n="^\\s*"+s+"\\s*$",a=new RegExp(n);t[0].match(a)&&(e[s]=!0,t.shift(1),r=!0)})}const B5=function(){I.debug("Something is calling, setConf, remove the call")},Ec={monday:_f,tuesday:Tf,wednesday:Cf,thursday:Ef,friday:Sf,saturday:vf,sunday:wf},I5=(t,e)=>{let i=[...t].map(()=>-1/0),r=[...t].sort((n,a)=>n.startTime-a.startTime||n.order-a.order),s=0;for(const n of r)for(let a=0;a<i.length;a++)if(n.startTime>=i[a]){i[a]=n.endTime,n.order=a+e,a>s&&(s=a);break}return s};let Ui;const D5=function(t,e,i,r){const s=Y().gantt,n=Y().securityLevel;let a;n==="sandbox"&&(a=yt("#i"+e));const o=n==="sandbox"?yt(a.nodes()[0].contentDocument.body):yt("body"),l=n==="sandbox"?a.nodes()[0].contentDocument:document,h=l.getElementById(e);Ui=h.parentElement.offsetWidth,Ui===void 0&&(Ui=1200),s.useWidth!==void 0&&(Ui=s.useWidth);const u=r.db.getTasks();let p=[];for(const S of u)p.push(S.type);p=A(p);const d={};let g=2*s.topPadding;if(r.db.getDisplayMode()==="compact"||s.displayMode==="compact"){const S={};for(const C of u)S[C.section]===void 0?S[C.section]=[C]:S[C.section].push(C);let m=0;for(const C of Object.keys(S)){const f=I5(S[C],m)+1;m+=f,g+=f*(s.barHeight+s.barGap),d[C]=f}}else{g+=u.length*(s.barHeight+s.barGap);for(const S of p)d[S]=u.filter(m=>m.type===S).length}h.setAttribute("viewBox","0 0 "+Ui+" "+g);const y=o.select(`[id="${e}"]`),x=gf().domain([yf(u,function(S){return S.startTime}),mf(u,function(S){return S.endTime})]).rangeRound([0,Ui-s.leftPadding-s.rightPadding]);function _(S,m){const C=S.startTime,f=m.startTime;let B=0;return C>f?B=1:C<f&&(B=-1),B}u.sort(_),v(u,Ui,g),Ne(y,g,Ui,s.useMaxWidth),y.append("text").text(r.db.getDiagramTitle()).attr("x",Ui/2).attr("y",s.titleTopMargin).attr("class","titleText");function v(S,m,C){const f=s.barHeight,B=f+s.barGap,b=s.topPadding,P=s.leftPadding,U=ws().domain([0,p.length]).range(["#00B9FA","#F95002"]).interpolate(xf);F(B,b,P,m,C,S,r.db.getExcludes(),r.db.getIncludes()),L(P,b,m,C),E(S,B,b,P,f,U,m),T(B,b),k(P,b,m,C)}function E(S,m,C,f,B,b,P){const N=[...new Set(S.map(V=>V.order))].map(V=>S.find(z=>z.order===V));y.append("g").selectAll("rect").data(N).enter().append("rect").attr("x",0).attr("y",function(V,z){return z=V.order,z*m+C-2}).attr("width",function(){return P-s.rightPadding/2}).attr("height",m).attr("class",function(V){for(const[z,st]of p.entries())if(V.type===st)return"section section"+z%s.numberSectionStyles;return"section section0"});const w=y.append("g").selectAll("rect").data(S).enter(),R=r.db.getLinks();if(w.append("rect").attr("id",function(V){return V.id}).attr("rx",3).attr("ry",3).attr("x",function(V){return V.milestone?x(V.startTime)+f+.5*(x(V.endTime)-x(V.startTime))-.5*B:x(V.startTime)+f}).attr("y",function(V,z){return z=V.order,z*m+C}).attr("width",function(V){return V.milestone?B:x(V.renderEndTime||V.endTime)-x(V.startTime)}).attr("height",B).attr("transform-origin",function(V,z){return z=V.order,(x(V.startTime)+f+.5*(x(V.endTime)-x(V.startTime))).toString()+"px "+(z*m+C+.5*B).toString()+"px"}).attr("class",function(V){const z="task";let st="";V.classes.length>0&&(st=V.classes.join(" "));let j=0;for(const[K,G]of p.entries())V.type===G&&(j=K%s.numberSectionStyles);let dt="";return V.active?V.crit?dt+=" activeCrit":dt=" active":V.done?V.crit?dt=" doneCrit":dt=" done":V.crit&&(dt+=" crit"),dt.length===0&&(dt=" task"),V.milestone&&(dt=" milestone "+dt),dt+=j,dt+=" "+st,z+dt}),w.append("text").attr("id",function(V){return V.id+"-text"}).text(function(V){return V.task}).attr("font-size",s.fontSize).attr("x",function(V){let z=x(V.startTime),st=x(V.renderEndTime||V.endTime);V.milestone&&(z+=.5*(x(V.endTime)-x(V.startTime))-.5*B),V.milestone&&(st=z+B);const j=this.getBBox().width;return j>st-z?st+j+1.5*s.leftPadding>P?z+f-5:st+f+5:(st-z)/2+z+f}).attr("y",function(V,z){return z=V.order,z*m+s.barHeight/2+(s.fontSize/2-2)+C}).attr("text-height",B).attr("class",function(V){const z=x(V.startTime);let st=x(V.endTime);V.milestone&&(st=z+B);const j=this.getBBox().width;let dt="";V.classes.length>0&&(dt=V.classes.join(" "));let K=0;for(const[tt,nt]of p.entries())V.type===nt&&(K=tt%s.numberSectionStyles);let G="";return V.active&&(V.crit?G="activeCritText"+K:G="activeText"+K),V.done?V.crit?G=G+" doneCritText"+K:G=G+" doneText"+K:V.crit&&(G=G+" critText"+K),V.milestone&&(G+=" milestoneText"),j>st-z?st+j+1.5*s.leftPadding>P?dt+" taskTextOutsideLeft taskTextOutside"+K+" "+G:dt+" taskTextOutsideRight taskTextOutside"+K+" "+G+" width-"+j:dt+" taskText taskText"+K+" "+G+" width-"+j}),Y().securityLevel==="sandbox"){let V;V=yt("#i"+e);const z=V.nodes()[0].contentDocument;w.filter(function(st){return R[st.id]!==void 0}).each(function(st){var j=z.querySelector("#"+st.id),dt=z.querySelector("#"+st.id+"-text");const K=j.parentNode;var G=z.createElement("a");G.setAttribute("xlink:href",R[st.id]),G.setAttribute("target","_top"),K.appendChild(G),G.appendChild(j),G.appendChild(dt)})}}function F(S,m,C,f,B,b,P,U){if(P.length===0&&U.length===0)return;let N,w;for(const{startTime:j,endTime:dt}of b)(N===void 0||j<N)&&(N=j),(w===void 0||dt>w)&&(w=dt);if(!N||!w)return;if(De(w).diff(De(N),"year")>5){I.warn("The difference between the min and max time is more than 5 years. This will cause performance issues. Skipping drawing exclude days.");return}const R=r.db.getDateFormat(),D=[];let V=null,z=De(N);for(;z.valueOf()<=w;)r.db.isInvalidDate(z,R,P,U)?V?V.end=z:V={start:z,end:z}:V&&(D.push(V),V=null),z=z.add(1,"d");y.append("g").selectAll("rect").data(D).enter().append("rect").attr("id",function(j){return"exclude-"+j.start.format("YYYY-MM-DD")}).attr("x",function(j){return x(j.start)+C}).attr("y",s.gridLineStartPadding).attr("width",function(j){const dt=j.end.add(1,"day");return x(dt)-x(j.start)}).attr("height",B-m-s.gridLineStartPadding).attr("transform-origin",function(j,dt){return(x(j.start)+C+.5*(x(j.end)-x(j.start))).toString()+"px "+(dt*S+.5*B).toString()+"px"}).attr("class","exclude-range")}function L(S,m,C,f){let B=bf(x).tickSize(-f+m+s.gridLineStartPadding).tickFormat(Vl(r.db.getAxisFormat()||s.axisFormat||"%Y-%m-%d"));const P=/^([1-9]\d*)(millisecond|second|minute|hour|day|week|month)$/.exec(r.db.getTickInterval()||s.tickInterval);if(P!==null){const U=P[1],N=P[2],w=r.db.getWeekday()||s.weekday;switch(N){case"millisecond":B.ticks(Hl.every(U));break;case"second":B.ticks(Ul.every(U));break;case"minute":B.ticks(Yl.every(U));break;case"hour":B.ticks(Wl.every(U));break;case"day":B.ticks(ql.every(U));break;case"week":B.ticks(Ec[w].every(U));break;case"month":B.ticks(zl.every(U));break}}if(y.append("g").attr("class","grid").attr("transform","translate("+S+", "+(f-50)+")").call(B).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10).attr("dy","1em"),r.db.topAxisEnabled()||s.topAxis){let U=kf(x).tickSize(-f+m+s.gridLineStartPadding).tickFormat(Vl(r.db.getAxisFormat()||s.axisFormat||"%Y-%m-%d"));if(P!==null){const N=P[1],w=P[2],R=r.db.getWeekday()||s.weekday;switch(w){case"millisecond":U.ticks(Hl.every(N));break;case"second":U.ticks(Ul.every(N));break;case"minute":U.ticks(Yl.every(N));break;case"hour":U.ticks(Wl.every(N));break;case"day":U.ticks(ql.every(N));break;case"week":U.ticks(Ec[R].every(N));break;case"month":U.ticks(zl.every(N));break}}y.append("g").attr("class","grid").attr("transform","translate("+S+", "+m+")").call(U).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10)}}function T(S,m){let C=0;const f=Object.keys(d).map(B=>[B,d[B]]);y.append("g").selectAll("text").data(f).enter().append(function(B){const b=B[0].split(mt.lineBreakRegex),P=-(b.length-1)/2,U=l.createElementNS("http://www.w3.org/2000/svg","text");U.setAttribute("dy",P+"em");for(const[N,w]of b.entries()){const R=l.createElementNS("http://www.w3.org/2000/svg","tspan");R.setAttribute("alignment-baseline","central"),R.setAttribute("x","10"),N>0&&R.setAttribute("dy","1em"),R.textContent=w,U.appendChild(R)}return U}).attr("x",10).attr("y",function(B,b){if(b>0)for(let P=0;P<b;P++)return C+=f[b-1][1],B[1]*S/2+C*S+m;else return B[1]*S/2+m}).attr("font-size",s.sectionFontSize).attr("class",function(B){for(const[b,P]of p.entries())if(B[0]===P)return"sectionTitle sectionTitle"+b%s.numberSectionStyles;return"sectionTitle"})}function k(S,m,C,f){const B=r.db.getTodayMarker();if(B==="off")return;const b=y.append("g").attr("class","today"),P=new Date,U=b.append("line");U.attr("x1",x(P)+S).attr("x2",x(P)+S).attr("y1",s.titleTopMargin).attr("y2",f-s.titleTopMargin).attr("class","today"),B!==""&&U.attr("style",B.replace(/,/g,";"))}function A(S){const m={},C=[];for(let f=0,B=S.length;f<B;++f)Object.prototype.hasOwnProperty.call(m,S[f])||(m[S[f]]=!0,C.push(S[f]));return C}},F5={setConf:B5,draw:D5},R5=t=>`
  .mermaid-main-font {
    font-family: var(--mermaid-font-family, "trebuchet ms", verdana, arial, sans-serif);
  }

  .exclude-range {
    fill: ${t.excludeBkgColor};
  }

  .section {
    stroke: none;
    opacity: 0.2;
  }

  .section0 {
    fill: ${t.sectionBkgColor};
  }

  .section2 {
    fill: ${t.sectionBkgColor2};
  }

  .section1,
  .section3 {
    fill: ${t.altSectionBkgColor};
    opacity: 0.2;
  }

  .sectionTitle0 {
    fill: ${t.titleColor};
  }

  .sectionTitle1 {
    fill: ${t.titleColor};
  }

  .sectionTitle2 {
    fill: ${t.titleColor};
  }

  .sectionTitle3 {
    fill: ${t.titleColor};
  }

  .sectionTitle {
    text-anchor: start;
    font-family: var(--mermaid-font-family, "trebuchet ms", verdana, arial, sans-serif);
  }


  /* Grid and axis */

  .grid .tick {
    stroke: ${t.gridColor};
    opacity: 0.8;
    shape-rendering: crispEdges;
  }

  .grid .tick text {
    font-family: ${t.fontFamily};
    fill: ${t.textColor};
  }

  .grid path {
    stroke-width: 0;
  }


  /* Today line */

  .today {
    fill: none;
    stroke: ${t.todayLineColor};
    stroke-width: 2px;
  }


  /* Task styling */

  /* Default task */

  .task {
    stroke-width: 2;
  }

  .taskText {
    text-anchor: middle;
    font-family: var(--mermaid-font-family, "trebuchet ms", verdana, arial, sans-serif);
  }

  .taskTextOutsideRight {
    fill: ${t.taskTextDarkColor};
    text-anchor: start;
    font-family: var(--mermaid-font-family, "trebuchet ms", verdana, arial, sans-serif);
  }

  .taskTextOutsideLeft {
    fill: ${t.taskTextDarkColor};
    text-anchor: end;
  }


  /* Special case clickable */

  .task.clickable {
    cursor: pointer;
  }

  .taskText.clickable {
    cursor: pointer;
    fill: ${t.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideLeft.clickable {
    cursor: pointer;
    fill: ${t.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideRight.clickable {
    cursor: pointer;
    fill: ${t.taskTextClickableColor} !important;
    font-weight: bold;
  }


  /* Specific task settings for the sections*/

  .taskText0,
  .taskText1,
  .taskText2,
  .taskText3 {
    fill: ${t.taskTextColor};
  }

  .task0,
  .task1,
  .task2,
  .task3 {
    fill: ${t.taskBkgColor};
    stroke: ${t.taskBorderColor};
  }

  .taskTextOutside0,
  .taskTextOutside2
  {
    fill: ${t.taskTextOutsideColor};
  }

  .taskTextOutside1,
  .taskTextOutside3 {
    fill: ${t.taskTextOutsideColor};
  }


  /* Active task */

  .active0,
  .active1,
  .active2,
  .active3 {
    fill: ${t.activeTaskBkgColor};
    stroke: ${t.activeTaskBorderColor};
  }

  .activeText0,
  .activeText1,
  .activeText2,
  .activeText3 {
    fill: ${t.taskTextDarkColor} !important;
  }


  /* Completed task */

  .done0,
  .done1,
  .done2,
  .done3 {
    stroke: ${t.doneTaskBorderColor};
    fill: ${t.doneTaskBkgColor};
    stroke-width: 2;
  }

  .doneText0,
  .doneText1,
  .doneText2,
  .doneText3 {
    fill: ${t.taskTextDarkColor} !important;
  }


  /* Tasks on the critical line */

  .crit0,
  .crit1,
  .crit2,
  .crit3 {
    stroke: ${t.critBorderColor};
    fill: ${t.critBkgColor};
    stroke-width: 2;
  }

  .activeCrit0,
  .activeCrit1,
  .activeCrit2,
  .activeCrit3 {
    stroke: ${t.critBorderColor};
    fill: ${t.activeTaskBkgColor};
    stroke-width: 2;
  }

  .doneCrit0,
  .doneCrit1,
  .doneCrit2,
  .doneCrit3 {
    stroke: ${t.critBorderColor};
    fill: ${t.doneTaskBkgColor};
    stroke-width: 2;
    cursor: pointer;
    shape-rendering: crispEdges;
  }

  .milestone {
    transform: rotate(45deg) scale(0.8,0.8);
  }

  .milestoneText {
    font-style: italic;
  }
  .doneCritText0,
  .doneCritText1,
  .doneCritText2,
  .doneCritText3 {
    fill: ${t.taskTextDarkColor} !important;
  }

  .activeCritText0,
  .activeCritText1,
  .activeCritText2,
  .activeCritText3 {
    fill: ${t.taskTextDarkColor} !important;
  }

  .titleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.titleColor||t.textColor};
    font-family: var(--mermaid-font-family, "trebuchet ms", verdana, arial, sans-serif);
  }
`,N5=R5,O5={parser:Xb,db:L5,renderer:F5,styles:N5},P5=Object.freeze(Object.defineProperty({__proto__:null,diagram:O5},Symbol.toStringTag,{value:"Module"}));var Ja=function(){var t=function(n,a,o,l){for(o=o||{},l=n.length;l--;o[n[l]]=a);return o},e=[6,9,10],i={trace:function(){},yy:{},symbols_:{error:2,start:3,info:4,document:5,EOF:6,line:7,statement:8,NL:9,showInfo:10,$accept:0,$end:1},terminals_:{2:"error",4:"info",6:"EOF",9:"NL",10:"showInfo"},productions_:[0,[3,3],[5,0],[5,2],[7,1],[7,1],[8,1]],performAction:function(a,o,l,h,u,p,d){switch(p.length-1,u){case 1:return h;case 4:break;case 6:h.setInfo(!0);break}},table:[{3:1,4:[1,2]},{1:[3]},t(e,[2,2],{5:3}),{6:[1,4],7:5,8:6,9:[1,7],10:[1,8]},{1:[2,1]},t(e,[2,3]),t(e,[2,4]),t(e,[2,5]),t(e,[2,6])],defaultActions:{4:[2,1]},parseError:function(a,o){if(o.recoverable)this.trace(a);else{var l=new Error(a);throw l.hash=o,l}},parse:function(a){var o=this,l=[0],h=[],u=[null],p=[],d=this.table,g="",y=0,x=0,_=2,v=1,E=p.slice.call(arguments,1),F=Object.create(this.lexer),L={yy:{}};for(var T in this.yy)Object.prototype.hasOwnProperty.call(this.yy,T)&&(L.yy[T]=this.yy[T]);F.setInput(a,L.yy),L.yy.lexer=F,L.yy.parser=this,typeof F.yylloc>"u"&&(F.yylloc={});var k=F.yylloc;p.push(k);var A=F.options&&F.options.ranges;typeof L.yy.parseError=="function"?this.parseError=L.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function S(){var D;return D=h.pop()||F.lex()||v,typeof D!="number"&&(D instanceof Array&&(h=D,D=h.pop()),D=o.symbols_[D]||D),D}for(var m,C,f,B,b={},P,U,N,w;;){if(C=l[l.length-1],this.defaultActions[C]?f=this.defaultActions[C]:((m===null||typeof m>"u")&&(m=S()),f=d[C]&&d[C][m]),typeof f>"u"||!f.length||!f[0]){var R="";w=[];for(P in d[C])this.terminals_[P]&&P>_&&w.push("'"+this.terminals_[P]+"'");F.showPosition?R="Parse error on line "+(y+1)+`:
`+F.showPosition()+`
Expecting `+w.join(", ")+", got '"+(this.terminals_[m]||m)+"'":R="Parse error on line "+(y+1)+": Unexpected "+(m==v?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(R,{text:F.match,token:this.terminals_[m]||m,line:F.yylineno,loc:k,expected:w})}if(f[0]instanceof Array&&f.length>1)throw new Error("Parse Error: multiple actions possible at state: "+C+", token: "+m);switch(f[0]){case 1:l.push(m),u.push(F.yytext),p.push(F.yylloc),l.push(f[1]),m=null,x=F.yyleng,g=F.yytext,y=F.yylineno,k=F.yylloc;break;case 2:if(U=this.productions_[f[1]][1],b.$=u[u.length-U],b._$={first_line:p[p.length-(U||1)].first_line,last_line:p[p.length-1].last_line,first_column:p[p.length-(U||1)].first_column,last_column:p[p.length-1].last_column},A&&(b._$.range=[p[p.length-(U||1)].range[0],p[p.length-1].range[1]]),B=this.performAction.apply(b,[g,x,y,L.yy,f[1],u,p].concat(E)),typeof B<"u")return B;U&&(l=l.slice(0,-1*U*2),u=u.slice(0,-1*U),p=p.slice(0,-1*U)),l.push(this.productions_[f[1]][0]),u.push(b.$),p.push(b._$),N=d[l[l.length-2]][l[l.length-1]],l.push(N);break;case 3:return!0}}return!0}},r=function(){var n={EOF:1,parseError:function(o,l){if(this.yy.parser)this.yy.parser.parseError(o,l);else throw new Error(o)},setInput:function(a,o){return this.yy=o||this.yy||{},this._input=a,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var a=this._input[0];this.yytext+=a,this.yyleng++,this.offset++,this.match+=a,this.matched+=a;var o=a.match(/(?:\r\n?|\n).*/g);return o?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),a},unput:function(a){var o=a.length,l=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-o),this.offset-=o;var h=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),l.length-1&&(this.yylineno-=l.length-1);var u=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:l?(l.length===h.length?this.yylloc.first_column:0)+h[h.length-l.length].length-l[0].length:this.yylloc.first_column-o},this.options.ranges&&(this.yylloc.range=[u[0],u[0]+this.yyleng-o]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),o=new Array(a.length+1).join("-");return a+this.upcomingInput()+`
`+o+"^"},test_match:function(a,o){var l,h,u;if(this.options.backtrack_lexer&&(u={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(u.yylloc.range=this.yylloc.range.slice(0))),h=a[0].match(/(?:\r\n?|\n).*/g),h&&(this.yylineno+=h.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:h?h[h.length-1].length-h[h.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+a[0].length},this.yytext+=a[0],this.match+=a[0],this.matches=a,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(a[0].length),this.matched+=a[0],l=this.performAction.call(this,this.yy,this,o,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),l)return l;if(this._backtrack){for(var p in u)this[p]=u[p];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,o,l,h;this._more||(this.yytext="",this.match="");for(var u=this._currentRules(),p=0;p<u.length;p++)if(l=this._input.match(this.rules[u[p]]),l&&(!o||l[0].length>o[0].length)){if(o=l,h=p,this.options.backtrack_lexer){if(a=this.test_match(l,u[p]),a!==!1)return a;if(this._backtrack){o=!1;continue}else return!1}else if(!this.options.flex)break}return o?(a=this.test_match(o,u[h]),a!==!1?a:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var o=this.next();return o||this.lex()},begin:function(o){this.conditionStack.push(o)},popState:function(){var o=this.conditionStack.length-1;return o>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(o){return o=this.conditionStack.length-1-Math.abs(o||0),o>=0?this.conditionStack[o]:"INITIAL"},pushState:function(o){this.begin(o)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(o,l,h,u){switch(h){case 0:return 4;case 1:return 9;case 2:return"space";case 3:return 10;case 4:return 6;case 5:return"TXT"}},rules:[/^(?:info\b)/i,/^(?:[\s\n\r]+)/i,/^(?:[\s]+)/i,/^(?:showInfo\b)/i,/^(?:$)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5],inclusive:!0}}};return n}();i.lexer=r;function s(){this.yy={}}return s.prototype=i,i.Parser=s,new s}();Ja.parser=Ja;const M5=Ja,o0={info:!1};let hl=o0.info;const V5=t=>{hl=t},z5=()=>hl,q5=()=>{hl=o0.info},W5={clear:q5,setInfo:V5,getInfo:z5},Y5=(t,e,i)=>{I.debug(`rendering info diagram
`+t);const r=$s(e);Ne(r,100,400,!0),r.append("g").append("text").attr("x",100).attr("y",40).attr("class","version").attr("font-size",32).style("text-anchor","middle").text(`v${i}`)},U5={draw:Y5},H5={parser:M5,db:W5,renderer:U5},G5=Object.freeze(Object.defineProperty({__proto__:null,diagram:H5},Symbol.toStringTag,{value:"Module"}));var to=function(){var t=function(F,L,T,k){for(T=T||{},k=F.length;k--;T[F[k]]=L);return T},e=[1,3],i=[1,4],r=[1,5],s=[1,6],n=[1,10,12,14,16,18,19,20,21,22],a=[2,4],o=[1,5,10,12,14,16,18,19,20,21,22],l=[20,21,22],h=[2,7],u=[1,12],p=[1,13],d=[1,14],g=[1,15],y=[1,16],x=[1,17],_={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,PIE:5,document:6,showData:7,line:8,statement:9,txt:10,value:11,title:12,title_value:13,acc_title:14,acc_title_value:15,acc_descr:16,acc_descr_value:17,acc_descr_multiline_value:18,section:19,NEWLINE:20,";":21,EOF:22,$accept:0,$end:1},terminals_:{2:"error",5:"PIE",7:"showData",10:"txt",11:"value",12:"title",13:"title_value",14:"acc_title",15:"acc_title_value",16:"acc_descr",17:"acc_descr_value",18:"acc_descr_multiline_value",19:"section",20:"NEWLINE",21:";",22:"EOF"},productions_:[0,[3,2],[3,2],[3,3],[6,0],[6,2],[8,2],[9,0],[9,2],[9,2],[9,2],[9,2],[9,1],[9,1],[4,1],[4,1],[4,1]],performAction:function(L,T,k,A,S,m,C){var f=m.length-1;switch(S){case 3:A.setShowData(!0);break;case 6:this.$=m[f-1];break;case 8:A.addSection(m[f-1],A.cleanupValue(m[f]));break;case 9:this.$=m[f].trim(),A.setDiagramTitle(this.$);break;case 10:this.$=m[f].trim(),A.setAccTitle(this.$);break;case 11:case 12:this.$=m[f].trim(),A.setAccDescription(this.$);break;case 13:A.addSection(m[f].substr(8)),this.$=m[f].substr(8);break}},table:[{3:1,4:2,5:e,20:i,21:r,22:s},{1:[3]},{3:7,4:2,5:e,20:i,21:r,22:s},t(n,a,{6:8,7:[1,9]}),t(o,[2,14]),t(o,[2,15]),t(o,[2,16]),{1:[2,1]},t(l,h,{8:10,9:11,1:[2,2],10:u,12:p,14:d,16:g,18:y,19:x}),t(n,a,{6:18}),t(n,[2,5]),{4:19,20:i,21:r,22:s},{11:[1,20]},{13:[1,21]},{15:[1,22]},{17:[1,23]},t(l,[2,12]),t(l,[2,13]),t(l,h,{8:10,9:11,1:[2,3],10:u,12:p,14:d,16:g,18:y,19:x}),t(n,[2,6]),t(l,[2,8]),t(l,[2,9]),t(l,[2,10]),t(l,[2,11])],defaultActions:{7:[2,1]},parseError:function(L,T){if(T.recoverable)this.trace(L);else{var k=new Error(L);throw k.hash=T,k}},parse:function(L){var T=this,k=[0],A=[],S=[null],m=[],C=this.table,f="",B=0,b=0,P=2,U=1,N=m.slice.call(arguments,1),w=Object.create(this.lexer),R={yy:{}};for(var D in this.yy)Object.prototype.hasOwnProperty.call(this.yy,D)&&(R.yy[D]=this.yy[D]);w.setInput(L,R.yy),R.yy.lexer=w,R.yy.parser=this,typeof w.yylloc>"u"&&(w.yylloc={});var V=w.yylloc;m.push(V);var z=w.options&&w.options.ranges;typeof R.yy.parseError=="function"?this.parseError=R.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function st(){var W;return W=A.pop()||w.lex()||U,typeof W!="number"&&(W instanceof Array&&(A=W,W=A.pop()),W=T.symbols_[W]||W),W}for(var j,dt,K,G,tt={},nt,Q,J,O;;){if(dt=k[k.length-1],this.defaultActions[dt]?K=this.defaultActions[dt]:((j===null||typeof j>"u")&&(j=st()),K=C[dt]&&C[dt][j]),typeof K>"u"||!K.length||!K[0]){var at="";O=[];for(nt in C[dt])this.terminals_[nt]&&nt>P&&O.push("'"+this.terminals_[nt]+"'");w.showPosition?at="Parse error on line "+(B+1)+`:
`+w.showPosition()+`
Expecting `+O.join(", ")+", got '"+(this.terminals_[j]||j)+"'":at="Parse error on line "+(B+1)+": Unexpected "+(j==U?"end of input":"'"+(this.terminals_[j]||j)+"'"),this.parseError(at,{text:w.match,token:this.terminals_[j]||j,line:w.yylineno,loc:V,expected:O})}if(K[0]instanceof Array&&K.length>1)throw new Error("Parse Error: multiple actions possible at state: "+dt+", token: "+j);switch(K[0]){case 1:k.push(j),S.push(w.yytext),m.push(w.yylloc),k.push(K[1]),j=null,b=w.yyleng,f=w.yytext,B=w.yylineno,V=w.yylloc;break;case 2:if(Q=this.productions_[K[1]][1],tt.$=S[S.length-Q],tt._$={first_line:m[m.length-(Q||1)].first_line,last_line:m[m.length-1].last_line,first_column:m[m.length-(Q||1)].first_column,last_column:m[m.length-1].last_column},z&&(tt._$.range=[m[m.length-(Q||1)].range[0],m[m.length-1].range[1]]),G=this.performAction.apply(tt,[f,b,B,R.yy,K[1],S,m].concat(N)),typeof G<"u")return G;Q&&(k=k.slice(0,-1*Q*2),S=S.slice(0,-1*Q),m=m.slice(0,-1*Q)),k.push(this.productions_[K[1]][0]),S.push(tt.$),m.push(tt._$),J=C[k[k.length-2]][k[k.length-1]],k.push(J);break;case 3:return!0}}return!0}},v=function(){var F={EOF:1,parseError:function(T,k){if(this.yy.parser)this.yy.parser.parseError(T,k);else throw new Error(T)},setInput:function(L,T){return this.yy=T||this.yy||{},this._input=L,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var L=this._input[0];this.yytext+=L,this.yyleng++,this.offset++,this.match+=L,this.matched+=L;var T=L.match(/(?:\r\n?|\n).*/g);return T?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),L},unput:function(L){var T=L.length,k=L.split(/(?:\r\n?|\n)/g);this._input=L+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-T),this.offset-=T;var A=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),k.length-1&&(this.yylineno-=k.length-1);var S=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:k?(k.length===A.length?this.yylloc.first_column:0)+A[A.length-k.length].length-k[0].length:this.yylloc.first_column-T},this.options.ranges&&(this.yylloc.range=[S[0],S[0]+this.yyleng-T]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(L){this.unput(this.match.slice(L))},pastInput:function(){var L=this.matched.substr(0,this.matched.length-this.match.length);return(L.length>20?"...":"")+L.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var L=this.match;return L.length<20&&(L+=this._input.substr(0,20-L.length)),(L.substr(0,20)+(L.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var L=this.pastInput(),T=new Array(L.length+1).join("-");return L+this.upcomingInput()+`
`+T+"^"},test_match:function(L,T){var k,A,S;if(this.options.backtrack_lexer&&(S={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(S.yylloc.range=this.yylloc.range.slice(0))),A=L[0].match(/(?:\r\n?|\n).*/g),A&&(this.yylineno+=A.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:A?A[A.length-1].length-A[A.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+L[0].length},this.yytext+=L[0],this.match+=L[0],this.matches=L,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(L[0].length),this.matched+=L[0],k=this.performAction.call(this,this.yy,this,T,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),k)return k;if(this._backtrack){for(var m in S)this[m]=S[m];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var L,T,k,A;this._more||(this.yytext="",this.match="");for(var S=this._currentRules(),m=0;m<S.length;m++)if(k=this._input.match(this.rules[S[m]]),k&&(!T||k[0].length>T[0].length)){if(T=k,A=m,this.options.backtrack_lexer){if(L=this.test_match(k,S[m]),L!==!1)return L;if(this._backtrack){T=!1;continue}else return!1}else if(!this.options.flex)break}return T?(L=this.test_match(T,S[A]),L!==!1?L:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var T=this.next();return T||this.lex()},begin:function(T){this.conditionStack.push(T)},popState:function(){var T=this.conditionStack.length-1;return T>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(T){return T=this.conditionStack.length-1-Math.abs(T||0),T>=0?this.conditionStack[T]:"INITIAL"},pushState:function(T){this.begin(T)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(T,k,A,S){switch(A){case 0:break;case 1:break;case 2:return 20;case 3:break;case 4:break;case 5:return this.begin("title"),12;case 6:return this.popState(),"title_value";case 7:return this.begin("acc_title"),14;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),16;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:this.begin("string");break;case 15:this.popState();break;case 16:return"txt";case 17:return 5;case 18:return 7;case 19:return"value";case 20:return 22}},rules:[/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:[\s]+)/i,/^(?:title\b)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:pie\b)/i,/^(?:showData\b)/i,/^(?::[\s]*[\d]+(?:\.[\d]+)?)/i,/^(?:$)/i],conditions:{acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},title:{rules:[6],inclusive:!1},string:{rules:[15,16],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,7,9,11,14,17,18,19,20],inclusive:!0}}};return F}();_.lexer=v;function E(){this.yy={}}return E.prototype=_,_.Parser=E,new E}();to.parser=to;const j5=to,l0=$t.pie,Yn={sections:{},showData:!1,config:l0};let Un=Yn.sections,ul=Yn.showData;const X5=structuredClone(l0),$5=()=>structuredClone(X5),K5=()=>{Un=structuredClone(Yn.sections),ul=Yn.showData,Oe()},Q5=(t,e)=>{t=ue(t,Y()),Un[t]===void 0&&(Un[t]=e,I.debug(`added new section: ${t}, with value: ${e}`))},Z5=()=>Un,J5=t=>(t.substring(0,1)===":"&&(t=t.substring(1).trim()),Number(t.trim())),tk=t=>{ul=t},ek=()=>ul,ik={getConfig:$5,clear:K5,setDiagramTitle:ri,getDiagramTitle:Ge,setAccTitle:Pe,getAccTitle:Ye,setAccDescription:Ue,getAccDescription:He,addSection:Q5,getSections:Z5,cleanupValue:J5,setShowData:tk,getShowData:ek},rk=t=>`
  .pieCircle{
    stroke: ${t.pieStrokeColor};
    stroke-width : ${t.pieStrokeWidth};
    opacity : ${t.pieOpacity};
  }
  .pieOuterCircle{
    stroke: ${t.pieOuterStrokeColor};
    stroke-width: ${t.pieOuterStrokeWidth};
    fill: none;
  }
  .pieTitleText {
    text-anchor: middle;
    font-size: ${t.pieTitleTextSize};
    fill: ${t.pieTitleTextColor};
    font-family: ${t.fontFamily};
  }
  .slice {
    font-family: ${t.fontFamily};
    fill: ${t.pieSectionTextColor};
    font-size:${t.pieSectionTextSize};
    // fill: white;
  }
  .legend text {
    fill: ${t.pieLegendTextColor};
    font-family: ${t.fontFamily};
    font-size: ${t.pieLegendTextSize};
  }
`,sk=rk,nk=t=>{const e=Object.entries(t).map(r=>({label:r[0],value:r[1]})).sort((r,s)=>s.value-r.value);return ff().value(r=>r.value)(e)},ak=(t,e,i,r)=>{I.debug(`rendering pie chart
`+t);const s=r.db,n=Y(),a=Xs(s.getConfig(),n.pie),o=40,l=18,h=4,u=450,p=u,d=$s(e),g=d.append("g"),y=s.getSections();g.attr("transform","translate("+p/2+","+u/2+")");const{themeVariables:x}=n;let[_]=Rr(x.pieOuterStrokeWidth);_??(_=2);const v=a.textPosition,E=Math.min(p,u)/2-o,F=Kr().innerRadius(0).outerRadius(E),L=Kr().innerRadius(E*v).outerRadius(E*v);g.append("circle").attr("cx",0).attr("cy",0).attr("r",E+_/2).attr("class","pieOuterCircle");const T=nk(y),k=[x.pie1,x.pie2,x.pie3,x.pie4,x.pie5,x.pie6,x.pie7,x.pie8,x.pie9,x.pie10,x.pie11,x.pie12],A=vo(k);g.selectAll("mySlices").data(T).enter().append("path").attr("d",F).attr("fill",B=>A(B.data.label)).attr("class","pieCircle");let S=0;Object.keys(y).forEach(B=>{S+=y[B]}),g.selectAll("mySlices").data(T).enter().append("text").text(B=>(B.data.value/S*100).toFixed(0)+"%").attr("transform",B=>"translate("+L.centroid(B)+")").style("text-anchor","middle").attr("class","slice"),g.append("text").text(s.getDiagramTitle()).attr("x",0).attr("y",-(u-50)/2).attr("class","pieTitleText");const m=g.selectAll(".legend").data(A.domain()).enter().append("g").attr("class","legend").attr("transform",(B,b)=>{const P=l+h,U=P*A.domain().length/2,N=12*l,w=b*P-U;return"translate("+N+","+w+")"});m.append("rect").attr("width",l).attr("height",l).style("fill",A).style("stroke",A),m.data(T).append("text").attr("x",l+h).attr("y",l-h).text(B=>{const{label:b,value:P}=B.data;return s.getShowData()?`${b} [${P}]`:b});const C=Math.max(...m.selectAll("text").nodes().map(B=>(B==null?void 0:B.getBoundingClientRect().width)??0)),f=p+o+l+h+C;d.attr("viewBox",`0 0 ${f} ${u}`),Ne(d,u,f,a.useMaxWidth)},ok={draw:ak},lk={parser:j5,db:ik,renderer:ok,styles:sk},ck=Object.freeze(Object.defineProperty({__proto__:null,diagram:lk},Symbol.toStringTag,{value:"Module"}));var eo=function(){var t=function(K,G,tt,nt){for(tt=tt||{},nt=K.length;nt--;tt[K[nt]]=G);return tt},e=[1,3],i=[1,4],r=[1,5],s=[1,6],n=[1,7],a=[1,5,13,15,17,19,20,25,27,28,29,30,31,32,33,34,37,38,40,41,42,43,44,45,46,47,48,49,50],o=[1,5,6,13,15,17,19,20,25,27,28,29,30,31,32,33,34,37,38,40,41,42,43,44,45,46,47,48,49,50],l=[32,33,34],h=[2,7],u=[1,13],p=[1,17],d=[1,18],g=[1,19],y=[1,20],x=[1,21],_=[1,22],v=[1,23],E=[1,24],F=[1,25],L=[1,26],T=[1,27],k=[1,30],A=[1,31],S=[1,32],m=[1,33],C=[1,34],f=[1,35],B=[1,36],b=[1,37],P=[1,38],U=[1,39],N=[1,40],w=[1,41],R=[1,42],D=[1,57],V=[1,58],z=[5,22,26,32,33,34,40,41,42,43,44,45,46,47,48,49,50,51],st={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,SPACE:5,QUADRANT:6,document:7,line:8,statement:9,axisDetails:10,quadrantDetails:11,points:12,title:13,title_value:14,acc_title:15,acc_title_value:16,acc_descr:17,acc_descr_value:18,acc_descr_multiline_value:19,section:20,text:21,point_start:22,point_x:23,point_y:24,"X-AXIS":25,"AXIS-TEXT-DELIMITER":26,"Y-AXIS":27,QUADRANT_1:28,QUADRANT_2:29,QUADRANT_3:30,QUADRANT_4:31,NEWLINE:32,SEMI:33,EOF:34,alphaNumToken:35,textNoTagsToken:36,STR:37,MD_STR:38,alphaNum:39,PUNCTUATION:40,AMP:41,NUM:42,ALPHA:43,COMMA:44,PLUS:45,EQUALS:46,MULT:47,DOT:48,BRKT:49,UNDERSCORE:50,MINUS:51,$accept:0,$end:1},terminals_:{2:"error",5:"SPACE",6:"QUADRANT",13:"title",14:"title_value",15:"acc_title",16:"acc_title_value",17:"acc_descr",18:"acc_descr_value",19:"acc_descr_multiline_value",20:"section",22:"point_start",23:"point_x",24:"point_y",25:"X-AXIS",26:"AXIS-TEXT-DELIMITER",27:"Y-AXIS",28:"QUADRANT_1",29:"QUADRANT_2",30:"QUADRANT_3",31:"QUADRANT_4",32:"NEWLINE",33:"SEMI",34:"EOF",37:"STR",38:"MD_STR",40:"PUNCTUATION",41:"AMP",42:"NUM",43:"ALPHA",44:"COMMA",45:"PLUS",46:"EQUALS",47:"MULT",48:"DOT",49:"BRKT",50:"UNDERSCORE",51:"MINUS"},productions_:[0,[3,2],[3,2],[3,2],[7,0],[7,2],[8,2],[9,0],[9,2],[9,1],[9,1],[9,1],[9,2],[9,2],[9,2],[9,1],[9,1],[12,4],[10,4],[10,3],[10,2],[10,4],[10,3],[10,2],[11,2],[11,2],[11,2],[11,2],[4,1],[4,1],[4,1],[21,1],[21,2],[21,1],[21,1],[39,1],[39,2],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[36,1],[36,1],[36,1]],performAction:function(G,tt,nt,Q,J,O,at){var W=O.length-1;switch(J){case 12:this.$=O[W].trim(),Q.setDiagramTitle(this.$);break;case 13:this.$=O[W].trim(),Q.setAccTitle(this.$);break;case 14:case 15:this.$=O[W].trim(),Q.setAccDescription(this.$);break;case 16:Q.addSection(O[W].substr(8)),this.$=O[W].substr(8);break;case 17:Q.addPoint(O[W-3],O[W-1],O[W]);break;case 18:Q.setXAxisLeftText(O[W-2]),Q.setXAxisRightText(O[W]);break;case 19:O[W-1].text+=" ⟶ ",Q.setXAxisLeftText(O[W-1]);break;case 20:Q.setXAxisLeftText(O[W]);break;case 21:Q.setYAxisBottomText(O[W-2]),Q.setYAxisTopText(O[W]);break;case 22:O[W-1].text+=" ⟶ ",Q.setYAxisBottomText(O[W-1]);break;case 23:Q.setYAxisBottomText(O[W]);break;case 24:Q.setQuadrant1Text(O[W]);break;case 25:Q.setQuadrant2Text(O[W]);break;case 26:Q.setQuadrant3Text(O[W]);break;case 27:Q.setQuadrant4Text(O[W]);break;case 31:this.$={text:O[W],type:"text"};break;case 32:this.$={text:O[W-1].text+""+O[W],type:O[W-1].type};break;case 33:this.$={text:O[W],type:"text"};break;case 34:this.$={text:O[W],type:"markdown"};break;case 35:this.$=O[W];break;case 36:this.$=O[W-1]+""+O[W];break}},table:[{3:1,4:2,5:e,6:i,32:r,33:s,34:n},{1:[3]},{3:8,4:2,5:e,6:i,32:r,33:s,34:n},{3:9,4:2,5:e,6:i,32:r,33:s,34:n},t(a,[2,4],{7:10}),t(o,[2,28]),t(o,[2,29]),t(o,[2,30]),{1:[2,1]},{1:[2,2]},t(l,h,{8:11,9:12,10:14,11:15,12:16,21:28,35:29,1:[2,3],5:u,13:p,15:d,17:g,19:y,20:x,25:_,27:v,28:E,29:F,30:L,31:T,37:k,38:A,40:S,41:m,42:C,43:f,44:B,45:b,46:P,47:U,48:N,49:w,50:R}),t(a,[2,5]),{4:43,32:r,33:s,34:n},t(l,h,{10:14,11:15,12:16,21:28,35:29,9:44,5:u,13:p,15:d,17:g,19:y,20:x,25:_,27:v,28:E,29:F,30:L,31:T,37:k,38:A,40:S,41:m,42:C,43:f,44:B,45:b,46:P,47:U,48:N,49:w,50:R}),t(l,[2,9]),t(l,[2,10]),t(l,[2,11]),{14:[1,45]},{16:[1,46]},{18:[1,47]},t(l,[2,15]),t(l,[2,16]),{21:48,35:29,37:k,38:A,40:S,41:m,42:C,43:f,44:B,45:b,46:P,47:U,48:N,49:w,50:R},{21:49,35:29,37:k,38:A,40:S,41:m,42:C,43:f,44:B,45:b,46:P,47:U,48:N,49:w,50:R},{21:50,35:29,37:k,38:A,40:S,41:m,42:C,43:f,44:B,45:b,46:P,47:U,48:N,49:w,50:R},{21:51,35:29,37:k,38:A,40:S,41:m,42:C,43:f,44:B,45:b,46:P,47:U,48:N,49:w,50:R},{21:52,35:29,37:k,38:A,40:S,41:m,42:C,43:f,44:B,45:b,46:P,47:U,48:N,49:w,50:R},{21:53,35:29,37:k,38:A,40:S,41:m,42:C,43:f,44:B,45:b,46:P,47:U,48:N,49:w,50:R},{5:D,22:[1,54],35:56,36:55,40:S,41:m,42:C,43:f,44:B,45:b,46:P,47:U,48:N,49:w,50:R,51:V},t(z,[2,31]),t(z,[2,33]),t(z,[2,34]),t(z,[2,37]),t(z,[2,38]),t(z,[2,39]),t(z,[2,40]),t(z,[2,41]),t(z,[2,42]),t(z,[2,43]),t(z,[2,44]),t(z,[2,45]),t(z,[2,46]),t(z,[2,47]),t(a,[2,6]),t(l,[2,8]),t(l,[2,12]),t(l,[2,13]),t(l,[2,14]),t(l,[2,20],{36:55,35:56,5:D,26:[1,59],40:S,41:m,42:C,43:f,44:B,45:b,46:P,47:U,48:N,49:w,50:R,51:V}),t(l,[2,23],{36:55,35:56,5:D,26:[1,60],40:S,41:m,42:C,43:f,44:B,45:b,46:P,47:U,48:N,49:w,50:R,51:V}),t(l,[2,24],{36:55,35:56,5:D,40:S,41:m,42:C,43:f,44:B,45:b,46:P,47:U,48:N,49:w,50:R,51:V}),t(l,[2,25],{36:55,35:56,5:D,40:S,41:m,42:C,43:f,44:B,45:b,46:P,47:U,48:N,49:w,50:R,51:V}),t(l,[2,26],{36:55,35:56,5:D,40:S,41:m,42:C,43:f,44:B,45:b,46:P,47:U,48:N,49:w,50:R,51:V}),t(l,[2,27],{36:55,35:56,5:D,40:S,41:m,42:C,43:f,44:B,45:b,46:P,47:U,48:N,49:w,50:R,51:V}),{23:[1,61]},t(z,[2,32]),t(z,[2,48]),t(z,[2,49]),t(z,[2,50]),t(l,[2,19],{35:29,21:62,37:k,38:A,40:S,41:m,42:C,43:f,44:B,45:b,46:P,47:U,48:N,49:w,50:R}),t(l,[2,22],{35:29,21:63,37:k,38:A,40:S,41:m,42:C,43:f,44:B,45:b,46:P,47:U,48:N,49:w,50:R}),{24:[1,64]},t(l,[2,18],{36:55,35:56,5:D,40:S,41:m,42:C,43:f,44:B,45:b,46:P,47:U,48:N,49:w,50:R,51:V}),t(l,[2,21],{36:55,35:56,5:D,40:S,41:m,42:C,43:f,44:B,45:b,46:P,47:U,48:N,49:w,50:R,51:V}),t(l,[2,17])],defaultActions:{8:[2,1],9:[2,2]},parseError:function(G,tt){if(tt.recoverable)this.trace(G);else{var nt=new Error(G);throw nt.hash=tt,nt}},parse:function(G){var tt=this,nt=[0],Q=[],J=[null],O=[],at=this.table,W="",ft=0,M=0,wt=2,X=1,St=O.slice.call(arguments,1),bt=Object.create(this.lexer),Vt={yy:{}};for(var Bt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Bt)&&(Vt.yy[Bt]=this.yy[Bt]);bt.setInput(G,Vt.yy),Vt.yy.lexer=bt,Vt.yy.parser=this,typeof bt.yylloc>"u"&&(bt.yylloc={});var Wt=bt.yylloc;O.push(Wt);var pt=bt.options&&bt.options.ranges;typeof Vt.yy.parseError=="function"?this.parseError=Vt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function ut(){var zt;return zt=Q.pop()||bt.lex()||X,typeof zt!="number"&&(zt instanceof Array&&(Q=zt,zt=Q.pop()),zt=tt.symbols_[zt]||zt),zt}for(var ot,lt,ht,$,rt={},it,ct,ee,Qt;;){if(lt=nt[nt.length-1],this.defaultActions[lt]?ht=this.defaultActions[lt]:((ot===null||typeof ot>"u")&&(ot=ut()),ht=at[lt]&&at[lt][ot]),typeof ht>"u"||!ht.length||!ht[0]){var de="";Qt=[];for(it in at[lt])this.terminals_[it]&&it>wt&&Qt.push("'"+this.terminals_[it]+"'");bt.showPosition?de="Parse error on line "+(ft+1)+`:
`+bt.showPosition()+`
Expecting `+Qt.join(", ")+", got '"+(this.terminals_[ot]||ot)+"'":de="Parse error on line "+(ft+1)+": Unexpected "+(ot==X?"end of input":"'"+(this.terminals_[ot]||ot)+"'"),this.parseError(de,{text:bt.match,token:this.terminals_[ot]||ot,line:bt.yylineno,loc:Wt,expected:Qt})}if(ht[0]instanceof Array&&ht.length>1)throw new Error("Parse Error: multiple actions possible at state: "+lt+", token: "+ot);switch(ht[0]){case 1:nt.push(ot),J.push(bt.yytext),O.push(bt.yylloc),nt.push(ht[1]),ot=null,M=bt.yyleng,W=bt.yytext,ft=bt.yylineno,Wt=bt.yylloc;break;case 2:if(ct=this.productions_[ht[1]][1],rt.$=J[J.length-ct],rt._$={first_line:O[O.length-(ct||1)].first_line,last_line:O[O.length-1].last_line,first_column:O[O.length-(ct||1)].first_column,last_column:O[O.length-1].last_column},pt&&(rt._$.range=[O[O.length-(ct||1)].range[0],O[O.length-1].range[1]]),$=this.performAction.apply(rt,[W,M,ft,Vt.yy,ht[1],J,O].concat(St)),typeof $<"u")return $;ct&&(nt=nt.slice(0,-1*ct*2),J=J.slice(0,-1*ct),O=O.slice(0,-1*ct)),nt.push(this.productions_[ht[1]][0]),J.push(rt.$),O.push(rt._$),ee=at[nt[nt.length-2]][nt[nt.length-1]],nt.push(ee);break;case 3:return!0}}return!0}},j=function(){var K={EOF:1,parseError:function(tt,nt){if(this.yy.parser)this.yy.parser.parseError(tt,nt);else throw new Error(tt)},setInput:function(G,tt){return this.yy=tt||this.yy||{},this._input=G,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var G=this._input[0];this.yytext+=G,this.yyleng++,this.offset++,this.match+=G,this.matched+=G;var tt=G.match(/(?:\r\n?|\n).*/g);return tt?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),G},unput:function(G){var tt=G.length,nt=G.split(/(?:\r\n?|\n)/g);this._input=G+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-tt),this.offset-=tt;var Q=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),nt.length-1&&(this.yylineno-=nt.length-1);var J=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:nt?(nt.length===Q.length?this.yylloc.first_column:0)+Q[Q.length-nt.length].length-nt[0].length:this.yylloc.first_column-tt},this.options.ranges&&(this.yylloc.range=[J[0],J[0]+this.yyleng-tt]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(G){this.unput(this.match.slice(G))},pastInput:function(){var G=this.matched.substr(0,this.matched.length-this.match.length);return(G.length>20?"...":"")+G.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var G=this.match;return G.length<20&&(G+=this._input.substr(0,20-G.length)),(G.substr(0,20)+(G.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var G=this.pastInput(),tt=new Array(G.length+1).join("-");return G+this.upcomingInput()+`
`+tt+"^"},test_match:function(G,tt){var nt,Q,J;if(this.options.backtrack_lexer&&(J={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(J.yylloc.range=this.yylloc.range.slice(0))),Q=G[0].match(/(?:\r\n?|\n).*/g),Q&&(this.yylineno+=Q.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Q?Q[Q.length-1].length-Q[Q.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+G[0].length},this.yytext+=G[0],this.match+=G[0],this.matches=G,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(G[0].length),this.matched+=G[0],nt=this.performAction.call(this,this.yy,this,tt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),nt)return nt;if(this._backtrack){for(var O in J)this[O]=J[O];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var G,tt,nt,Q;this._more||(this.yytext="",this.match="");for(var J=this._currentRules(),O=0;O<J.length;O++)if(nt=this._input.match(this.rules[J[O]]),nt&&(!tt||nt[0].length>tt[0].length)){if(tt=nt,Q=O,this.options.backtrack_lexer){if(G=this.test_match(nt,J[O]),G!==!1)return G;if(this._backtrack){tt=!1;continue}else return!1}else if(!this.options.flex)break}return tt?(G=this.test_match(tt,J[Q]),G!==!1?G:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var tt=this.next();return tt||this.lex()},begin:function(tt){this.conditionStack.push(tt)},popState:function(){var tt=this.conditionStack.length-1;return tt>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(tt){return tt=this.conditionStack.length-1-Math.abs(tt||0),tt>=0?this.conditionStack[tt]:"INITIAL"},pushState:function(tt){this.begin(tt)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(tt,nt,Q,J){switch(Q){case 0:break;case 1:break;case 2:return 32;case 3:break;case 4:return this.begin("title"),13;case 5:return this.popState(),"title_value";case 6:return this.begin("acc_title"),15;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),17;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:return 25;case 14:return 27;case 15:return 26;case 16:return 28;case 17:return 29;case 18:return 30;case 19:return 31;case 20:this.begin("md_string");break;case 21:return"MD_STR";case 22:this.popState();break;case 23:this.begin("string");break;case 24:this.popState();break;case 25:return"STR";case 26:return this.begin("point_start"),22;case 27:return this.begin("point_x"),23;case 28:this.popState();break;case 29:this.popState(),this.begin("point_y");break;case 30:return this.popState(),24;case 31:return 6;case 32:return 43;case 33:return"COLON";case 34:return 45;case 35:return 44;case 36:return 46;case 37:return 46;case 38:return 47;case 39:return 49;case 40:return 50;case 41:return 48;case 42:return 41;case 43:return 51;case 44:return 42;case 45:return 5;case 46:return 33;case 47:return 40;case 48:return 34}},rules:[/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:title\b)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?: *x-axis *)/i,/^(?: *y-axis *)/i,/^(?: *--+> *)/i,/^(?: *quadrant-1 *)/i,/^(?: *quadrant-2 *)/i,/^(?: *quadrant-3 *)/i,/^(?: *quadrant-4 *)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:\s*:\s*\[\s*)/i,/^(?:(1)|(0(.\d+)?))/i,/^(?:\s*\] *)/i,/^(?:\s*,\s*)/i,/^(?:(1)|(0(.\d+)?))/i,/^(?: *quadrantChart *)/i,/^(?:[A-Za-z]+)/i,/^(?::)/i,/^(?:\+)/i,/^(?:,)/i,/^(?:=)/i,/^(?:=)/i,/^(?:\*)/i,/^(?:#)/i,/^(?:[\_])/i,/^(?:\.)/i,/^(?:&)/i,/^(?:-)/i,/^(?:[0-9]+)/i,/^(?:\s)/i,/^(?:;)/i,/^(?:[!"#$%&'*+,-.`?\\_/])/i,/^(?:$)/i],conditions:{point_y:{rules:[30],inclusive:!1},point_x:{rules:[29],inclusive:!1},point_start:{rules:[27,28],inclusive:!1},acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},title:{rules:[5],inclusive:!1},md_string:{rules:[21,22],inclusive:!1},string:{rules:[24,25],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,6,8,10,13,14,15,16,17,18,19,20,23,26,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48],inclusive:!0}}};return K}();st.lexer=j;function dt(){this.yy={}}return dt.prototype=st,st.Parser=dt,new dt}();eo.parser=eo;const hk=eo,Me=Lo();class uk{constructor(){this.config=this.getDefaultConfig(),this.themeConfig=this.getDefaultThemeConfig(),this.data=this.getDefaultData()}getDefaultData(){return{titleText:"",quadrant1Text:"",quadrant2Text:"",quadrant3Text:"",quadrant4Text:"",xAxisLeftText:"",xAxisRightText:"",yAxisBottomText:"",yAxisTopText:"",points:[]}}getDefaultConfig(){var e,i,r,s,n,a,o,l,h,u,p,d,g,y,x,_,v,E;return{showXAxis:!0,showYAxis:!0,showTitle:!0,chartHeight:((e=$t.quadrantChart)==null?void 0:e.chartWidth)||500,chartWidth:((i=$t.quadrantChart)==null?void 0:i.chartHeight)||500,titlePadding:((r=$t.quadrantChart)==null?void 0:r.titlePadding)||10,titleFontSize:((s=$t.quadrantChart)==null?void 0:s.titleFontSize)||20,quadrantPadding:((n=$t.quadrantChart)==null?void 0:n.quadrantPadding)||5,xAxisLabelPadding:((a=$t.quadrantChart)==null?void 0:a.xAxisLabelPadding)||5,yAxisLabelPadding:((o=$t.quadrantChart)==null?void 0:o.yAxisLabelPadding)||5,xAxisLabelFontSize:((l=$t.quadrantChart)==null?void 0:l.xAxisLabelFontSize)||16,yAxisLabelFontSize:((h=$t.quadrantChart)==null?void 0:h.yAxisLabelFontSize)||16,quadrantLabelFontSize:((u=$t.quadrantChart)==null?void 0:u.quadrantLabelFontSize)||16,quadrantTextTopPadding:((p=$t.quadrantChart)==null?void 0:p.quadrantTextTopPadding)||5,pointTextPadding:((d=$t.quadrantChart)==null?void 0:d.pointTextPadding)||5,pointLabelFontSize:((g=$t.quadrantChart)==null?void 0:g.pointLabelFontSize)||12,pointRadius:((y=$t.quadrantChart)==null?void 0:y.pointRadius)||5,xAxisPosition:((x=$t.quadrantChart)==null?void 0:x.xAxisPosition)||"top",yAxisPosition:((_=$t.quadrantChart)==null?void 0:_.yAxisPosition)||"left",quadrantInternalBorderStrokeWidth:((v=$t.quadrantChart)==null?void 0:v.quadrantInternalBorderStrokeWidth)||1,quadrantExternalBorderStrokeWidth:((E=$t.quadrantChart)==null?void 0:E.quadrantExternalBorderStrokeWidth)||2}}getDefaultThemeConfig(){return{quadrant1Fill:Me.quadrant1Fill,quadrant2Fill:Me.quadrant2Fill,quadrant3Fill:Me.quadrant3Fill,quadrant4Fill:Me.quadrant4Fill,quadrant1TextFill:Me.quadrant1TextFill,quadrant2TextFill:Me.quadrant2TextFill,quadrant3TextFill:Me.quadrant3TextFill,quadrant4TextFill:Me.quadrant4TextFill,quadrantPointFill:Me.quadrantPointFill,quadrantPointTextFill:Me.quadrantPointTextFill,quadrantXAxisTextFill:Me.quadrantXAxisTextFill,quadrantYAxisTextFill:Me.quadrantYAxisTextFill,quadrantTitleFill:Me.quadrantTitleFill,quadrantInternalBorderStrokeFill:Me.quadrantInternalBorderStrokeFill,quadrantExternalBorderStrokeFill:Me.quadrantExternalBorderStrokeFill}}clear(){this.config=this.getDefaultConfig(),this.themeConfig=this.getDefaultThemeConfig(),this.data=this.getDefaultData(),I.info("clear called")}setData(e){this.data={...this.data,...e}}addPoints(e){this.data.points=[...e,...this.data.points]}setConfig(e){I.trace("setConfig called with: ",e),this.config={...this.config,...e}}setThemeConfig(e){I.trace("setThemeConfig called with: ",e),this.themeConfig={...this.themeConfig,...e}}calculateSpace(e,i,r,s){const n=this.config.xAxisLabelPadding*2+this.config.xAxisLabelFontSize,a={top:e==="top"&&i?n:0,bottom:e==="bottom"&&i?n:0},o=this.config.yAxisLabelPadding*2+this.config.yAxisLabelFontSize,l={left:this.config.yAxisPosition==="left"&&r?o:0,right:this.config.yAxisPosition==="right"&&r?o:0},h=this.config.titleFontSize+this.config.titlePadding*2,u={top:s?h:0},p=this.config.quadrantPadding+l.left,d=this.config.quadrantPadding+a.top+u.top,g=this.config.chartWidth-this.config.quadrantPadding*2-l.left-l.right,y=this.config.chartHeight-this.config.quadrantPadding*2-a.top-a.bottom-u.top,x=g/2,_=y/2;return{xAxisSpace:a,yAxisSpace:l,titleSpace:u,quadrantSpace:{quadrantLeft:p,quadrantTop:d,quadrantWidth:g,quadrantHalfWidth:x,quadrantHeight:y,quadrantHalfHeight:_}}}getAxisLabels(e,i,r,s){const{quadrantSpace:n,titleSpace:a}=s,{quadrantHalfHeight:o,quadrantHeight:l,quadrantLeft:h,quadrantHalfWidth:u,quadrantTop:p,quadrantWidth:d}=n,g=!!this.data.xAxisRightText,y=!!this.data.yAxisTopText,x=[];return this.data.xAxisLeftText&&i&&x.push({text:this.data.xAxisLeftText,fill:this.themeConfig.quadrantXAxisTextFill,x:h+(g?u/2:0),y:e==="top"?this.config.xAxisLabelPadding+a.top:this.config.xAxisLabelPadding+p+l+this.config.quadrantPadding,fontSize:this.config.xAxisLabelFontSize,verticalPos:g?"center":"left",horizontalPos:"top",rotation:0}),this.data.xAxisRightText&&i&&x.push({text:this.data.xAxisRightText,fill:this.themeConfig.quadrantXAxisTextFill,x:h+u+(g?u/2:0),y:e==="top"?this.config.xAxisLabelPadding+a.top:this.config.xAxisLabelPadding+p+l+this.config.quadrantPadding,fontSize:this.config.xAxisLabelFontSize,verticalPos:g?"center":"left",horizontalPos:"top",rotation:0}),this.data.yAxisBottomText&&r&&x.push({text:this.data.yAxisBottomText,fill:this.themeConfig.quadrantYAxisTextFill,x:this.config.yAxisPosition==="left"?this.config.yAxisLabelPadding:this.config.yAxisLabelPadding+h+d+this.config.quadrantPadding,y:p+l-(y?o/2:0),fontSize:this.config.yAxisLabelFontSize,verticalPos:y?"center":"left",horizontalPos:"top",rotation:-90}),this.data.yAxisTopText&&r&&x.push({text:this.data.yAxisTopText,fill:this.themeConfig.quadrantYAxisTextFill,x:this.config.yAxisPosition==="left"?this.config.yAxisLabelPadding:this.config.yAxisLabelPadding+h+d+this.config.quadrantPadding,y:p+o-(y?o/2:0),fontSize:this.config.yAxisLabelFontSize,verticalPos:y?"center":"left",horizontalPos:"top",rotation:-90}),x}getQuadrants(e){const{quadrantSpace:i}=e,{quadrantHalfHeight:r,quadrantLeft:s,quadrantHalfWidth:n,quadrantTop:a}=i,o=[{text:{text:this.data.quadrant1Text,fill:this.themeConfig.quadrant1TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:s+n,y:a,width:n,height:r,fill:this.themeConfig.quadrant1Fill},{text:{text:this.data.quadrant2Text,fill:this.themeConfig.quadrant2TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:s,y:a,width:n,height:r,fill:this.themeConfig.quadrant2Fill},{text:{text:this.data.quadrant3Text,fill:this.themeConfig.quadrant3TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:s,y:a+r,width:n,height:r,fill:this.themeConfig.quadrant3Fill},{text:{text:this.data.quadrant4Text,fill:this.themeConfig.quadrant4TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:s+n,y:a+r,width:n,height:r,fill:this.themeConfig.quadrant4Fill}];for(const l of o)l.text.x=l.x+l.width/2,this.data.points.length===0?(l.text.y=l.y+l.height/2,l.text.horizontalPos="middle"):(l.text.y=l.y+this.config.quadrantTextTopPadding,l.text.horizontalPos="top");return o}getQuadrantPoints(e){const{quadrantSpace:i}=e,{quadrantHeight:r,quadrantLeft:s,quadrantTop:n,quadrantWidth:a}=i,o=ws().domain([0,1]).range([s,a+s]),l=ws().domain([0,1]).range([r+n,n]);return this.data.points.map(u=>({x:o(u.x),y:l(u.y),fill:this.themeConfig.quadrantPointFill,radius:this.config.pointRadius,text:{text:u.text,fill:this.themeConfig.quadrantPointTextFill,x:o(u.x),y:l(u.y)+this.config.pointTextPadding,verticalPos:"center",horizontalPos:"top",fontSize:this.config.pointLabelFontSize,rotation:0}}))}getBorders(e){const i=this.config.quadrantExternalBorderStrokeWidth/2,{quadrantSpace:r}=e,{quadrantHalfHeight:s,quadrantHeight:n,quadrantLeft:a,quadrantHalfWidth:o,quadrantTop:l,quadrantWidth:h}=r;return[{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:a-i,y1:l,x2:a+h+i,y2:l},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:a+h,y1:l+i,x2:a+h,y2:l+n-i},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:a-i,y1:l+n,x2:a+h+i,y2:l+n},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:a,y1:l+i,x2:a,y2:l+n-i},{strokeFill:this.themeConfig.quadrantInternalBorderStrokeFill,strokeWidth:this.config.quadrantInternalBorderStrokeWidth,x1:a+o,y1:l+i,x2:a+o,y2:l+n-i},{strokeFill:this.themeConfig.quadrantInternalBorderStrokeFill,strokeWidth:this.config.quadrantInternalBorderStrokeWidth,x1:a+i,y1:l+s,x2:a+h-i,y2:l+s}]}getTitle(e){if(e)return{text:this.data.titleText,fill:this.themeConfig.quadrantTitleFill,fontSize:this.config.titleFontSize,horizontalPos:"top",verticalPos:"center",rotation:0,y:this.config.titlePadding,x:this.config.chartWidth/2}}build(){const e=this.config.showXAxis&&!!(this.data.xAxisLeftText||this.data.xAxisRightText),i=this.config.showYAxis&&!!(this.data.yAxisTopText||this.data.yAxisBottomText),r=this.config.showTitle&&!!this.data.titleText,s=this.data.points.length>0?"bottom":this.config.xAxisPosition,n=this.calculateSpace(s,e,i,r);return{points:this.getQuadrantPoints(n),quadrants:this.getQuadrants(n),axisLabels:this.getAxisLabels(s,e,i,n),borderLines:this.getBorders(n),title:this.getTitle(r)}}}const dk=Y();function ir(t){return ue(t.trim(),dk)}const Fe=new uk;function fk(t){Fe.setData({quadrant1Text:ir(t.text)})}function pk(t){Fe.setData({quadrant2Text:ir(t.text)})}function gk(t){Fe.setData({quadrant3Text:ir(t.text)})}function yk(t){Fe.setData({quadrant4Text:ir(t.text)})}function mk(t){Fe.setData({xAxisLeftText:ir(t.text)})}function xk(t){Fe.setData({xAxisRightText:ir(t.text)})}function bk(t){Fe.setData({yAxisTopText:ir(t.text)})}function kk(t){Fe.setData({yAxisBottomText:ir(t.text)})}function _k(t,e,i){Fe.addPoints([{x:e,y:i,text:ir(t.text)}])}function Tk(t){Fe.setConfig({chartWidth:t})}function Ck(t){Fe.setConfig({chartHeight:t})}function Ek(){const t=Y(),{themeVariables:e,quadrantChart:i}=t;return i&&Fe.setConfig(i),Fe.setThemeConfig({quadrant1Fill:e.quadrant1Fill,quadrant2Fill:e.quadrant2Fill,quadrant3Fill:e.quadrant3Fill,quadrant4Fill:e.quadrant4Fill,quadrant1TextFill:e.quadrant1TextFill,quadrant2TextFill:e.quadrant2TextFill,quadrant3TextFill:e.quadrant3TextFill,quadrant4TextFill:e.quadrant4TextFill,quadrantPointFill:e.quadrantPointFill,quadrantPointTextFill:e.quadrantPointTextFill,quadrantXAxisTextFill:e.quadrantXAxisTextFill,quadrantYAxisTextFill:e.quadrantYAxisTextFill,quadrantExternalBorderStrokeFill:e.quadrantExternalBorderStrokeFill,quadrantInternalBorderStrokeFill:e.quadrantInternalBorderStrokeFill,quadrantTitleFill:e.quadrantTitleFill}),Fe.setData({titleText:Ge()}),Fe.build()}const Sk=function(){Fe.clear(),Oe()},vk={setWidth:Tk,setHeight:Ck,setQuadrant1Text:fk,setQuadrant2Text:pk,setQuadrant3Text:gk,setQuadrant4Text:yk,setXAxisLeftText:mk,setXAxisRightText:xk,setYAxisTopText:bk,setYAxisBottomText:kk,addPoint:_k,getQuadrantData:Ek,clear:Sk,setAccTitle:Pe,getAccTitle:Ye,setDiagramTitle:ri,getDiagramTitle:Ge,getAccDescription:He,setAccDescription:Ue},wk=(t,e,i,r)=>{var s,n,a;function o(f){return f==="top"?"hanging":"middle"}function l(f){return f==="left"?"start":"middle"}function h(f){return`translate(${f.x}, ${f.y}) rotate(${f.rotation||0})`}const u=Y();I.debug(`Rendering quadrant chart
`+t);const p=u.securityLevel;let d;p==="sandbox"&&(d=yt("#i"+e));const y=(p==="sandbox"?yt(d.nodes()[0].contentDocument.body):yt("body")).select(`[id="${e}"]`),x=y.append("g").attr("class","main"),_=((s=u.quadrantChart)==null?void 0:s.chartWidth)||500,v=((n=u.quadrantChart)==null?void 0:n.chartHeight)||500;Ne(y,v,_,((a=u.quadrantChart)==null?void 0:a.useMaxWidth)||!0),y.attr("viewBox","0 0 "+_+" "+v),r.db.setHeight(v),r.db.setWidth(_);const E=r.db.getQuadrantData(),F=x.append("g").attr("class","quadrants"),L=x.append("g").attr("class","border"),T=x.append("g").attr("class","data-points"),k=x.append("g").attr("class","labels"),A=x.append("g").attr("class","title");E.title&&A.append("text").attr("x",0).attr("y",0).attr("fill",E.title.fill).attr("font-size",E.title.fontSize).attr("dominant-baseline",o(E.title.horizontalPos)).attr("text-anchor",l(E.title.verticalPos)).attr("transform",h(E.title)).text(E.title.text),E.borderLines&&L.selectAll("line").data(E.borderLines).enter().append("line").attr("x1",f=>f.x1).attr("y1",f=>f.y1).attr("x2",f=>f.x2).attr("y2",f=>f.y2).style("stroke",f=>f.strokeFill).style("stroke-width",f=>f.strokeWidth);const S=F.selectAll("g.quadrant").data(E.quadrants).enter().append("g").attr("class","quadrant");S.append("rect").attr("x",f=>f.x).attr("y",f=>f.y).attr("width",f=>f.width).attr("height",f=>f.height).attr("fill",f=>f.fill),S.append("text").attr("x",0).attr("y",0).attr("fill",f=>f.text.fill).attr("font-size",f=>f.text.fontSize).attr("dominant-baseline",f=>o(f.text.horizontalPos)).attr("text-anchor",f=>l(f.text.verticalPos)).attr("transform",f=>h(f.text)).text(f=>f.text.text),k.selectAll("g.label").data(E.axisLabels).enter().append("g").attr("class","label").append("text").attr("x",0).attr("y",0).text(f=>f.text).attr("fill",f=>f.fill).attr("font-size",f=>f.fontSize).attr("dominant-baseline",f=>o(f.horizontalPos)).attr("text-anchor",f=>l(f.verticalPos)).attr("transform",f=>h(f));const C=T.selectAll("g.data-point").data(E.points).enter().append("g").attr("class","data-point");C.append("circle").attr("cx",f=>f.x).attr("cy",f=>f.y).attr("r",f=>f.radius).attr("fill",f=>f.fill),C.append("text").attr("x",0).attr("y",0).text(f=>f.text.text).attr("fill",f=>f.text.fill).attr("font-size",f=>f.text.fontSize).attr("dominant-baseline",f=>o(f.text.horizontalPos)).attr("text-anchor",f=>l(f.text.verticalPos)).attr("transform",f=>h(f.text))},Ak={draw:wk},Lk={parser:hk,db:vk,renderer:Ak,styles:()=>""},Bk=Object.freeze(Object.defineProperty({__proto__:null,diagram:Lk},Symbol.toStringTag,{value:"Module"}));var io=function(){var t=function(U,N,w,R){for(w=w||{},R=U.length;R--;w[U[R]]=N);return w},e=[1,10,12,14,16,18,19,21,23],i=[2,6],r=[1,3],s=[1,5],n=[1,6],a=[1,7],o=[1,5,10,12,14,16,18,19,21,23,34,35,36],l=[1,25],h=[1,26],u=[1,28],p=[1,29],d=[1,30],g=[1,31],y=[1,32],x=[1,33],_=[1,34],v=[1,35],E=[1,36],F=[1,37],L=[1,43],T=[1,42],k=[1,47],A=[1,50],S=[1,10,12,14,16,18,19,21,23,34,35,36],m=[1,10,12,14,16,18,19,21,23,24,26,27,28,34,35,36],C=[1,10,12,14,16,18,19,21,23,24,26,27,28,34,35,36,41,42,43,44,45,46,47,48,49,50],f=[1,64],B={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,XYCHART:5,chartConfig:6,document:7,CHART_ORIENTATION:8,statement:9,title:10,text:11,X_AXIS:12,parseXAxis:13,Y_AXIS:14,parseYAxis:15,LINE:16,plotData:17,BAR:18,acc_title:19,acc_title_value:20,acc_descr:21,acc_descr_value:22,acc_descr_multiline_value:23,SQUARE_BRACES_START:24,commaSeparatedNumbers:25,SQUARE_BRACES_END:26,NUMBER_WITH_DECIMAL:27,COMMA:28,xAxisData:29,bandData:30,ARROW_DELIMITER:31,commaSeparatedTexts:32,yAxisData:33,NEWLINE:34,SEMI:35,EOF:36,alphaNum:37,STR:38,MD_STR:39,alphaNumToken:40,AMP:41,NUM:42,ALPHA:43,PLUS:44,EQUALS:45,MULT:46,DOT:47,BRKT:48,MINUS:49,UNDERSCORE:50,$accept:0,$end:1},terminals_:{2:"error",5:"XYCHART",8:"CHART_ORIENTATION",10:"title",12:"X_AXIS",14:"Y_AXIS",16:"LINE",18:"BAR",19:"acc_title",20:"acc_title_value",21:"acc_descr",22:"acc_descr_value",23:"acc_descr_multiline_value",24:"SQUARE_BRACES_START",26:"SQUARE_BRACES_END",27:"NUMBER_WITH_DECIMAL",28:"COMMA",31:"ARROW_DELIMITER",34:"NEWLINE",35:"SEMI",36:"EOF",38:"STR",39:"MD_STR",41:"AMP",42:"NUM",43:"ALPHA",44:"PLUS",45:"EQUALS",46:"MULT",47:"DOT",48:"BRKT",49:"MINUS",50:"UNDERSCORE"},productions_:[0,[3,2],[3,3],[3,2],[3,1],[6,1],[7,0],[7,2],[9,2],[9,2],[9,2],[9,2],[9,2],[9,3],[9,2],[9,3],[9,2],[9,2],[9,1],[17,3],[25,3],[25,1],[13,1],[13,2],[13,1],[29,1],[29,3],[30,3],[32,3],[32,1],[15,1],[15,2],[15,1],[33,3],[4,1],[4,1],[4,1],[11,1],[11,1],[11,1],[37,1],[37,2],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1]],performAction:function(N,w,R,D,V,z,st){var j=z.length-1;switch(V){case 5:D.setOrientation(z[j]);break;case 9:D.setDiagramTitle(z[j].text.trim());break;case 12:D.setLineData({text:"",type:"text"},z[j]);break;case 13:D.setLineData(z[j-1],z[j]);break;case 14:D.setBarData({text:"",type:"text"},z[j]);break;case 15:D.setBarData(z[j-1],z[j]);break;case 16:this.$=z[j].trim(),D.setAccTitle(this.$);break;case 17:case 18:this.$=z[j].trim(),D.setAccDescription(this.$);break;case 19:this.$=z[j-1];break;case 20:this.$=[Number(z[j-2]),...z[j]];break;case 21:this.$=[Number(z[j])];break;case 22:D.setXAxisTitle(z[j]);break;case 23:D.setXAxisTitle(z[j-1]);break;case 24:D.setXAxisTitle({type:"text",text:""});break;case 25:D.setXAxisBand(z[j]);break;case 26:D.setXAxisRangeData(Number(z[j-2]),Number(z[j]));break;case 27:this.$=z[j-1];break;case 28:this.$=[z[j-2],...z[j]];break;case 29:this.$=[z[j]];break;case 30:D.setYAxisTitle(z[j]);break;case 31:D.setYAxisTitle(z[j-1]);break;case 32:D.setYAxisTitle({type:"text",text:""});break;case 33:D.setYAxisRangeData(Number(z[j-2]),Number(z[j]));break;case 37:this.$={text:z[j],type:"text"};break;case 38:this.$={text:z[j],type:"text"};break;case 39:this.$={text:z[j],type:"markdown"};break;case 40:this.$=z[j];break;case 41:this.$=z[j-1]+""+z[j];break}},table:[t(e,i,{3:1,4:2,7:4,5:r,34:s,35:n,36:a}),{1:[3]},t(e,i,{4:2,7:4,3:8,5:r,34:s,35:n,36:a}),t(e,i,{4:2,7:4,6:9,3:10,5:r,8:[1,11],34:s,35:n,36:a}),{1:[2,4],9:12,10:[1,13],12:[1,14],14:[1,15],16:[1,16],18:[1,17],19:[1,18],21:[1,19],23:[1,20]},t(o,[2,34]),t(o,[2,35]),t(o,[2,36]),{1:[2,1]},t(e,i,{4:2,7:4,3:21,5:r,34:s,35:n,36:a}),{1:[2,3]},t(o,[2,5]),t(e,[2,7],{4:22,34:s,35:n,36:a}),{11:23,37:24,38:l,39:h,40:27,41:u,42:p,43:d,44:g,45:y,46:x,47:_,48:v,49:E,50:F},{11:39,13:38,24:L,27:T,29:40,30:41,37:24,38:l,39:h,40:27,41:u,42:p,43:d,44:g,45:y,46:x,47:_,48:v,49:E,50:F},{11:45,15:44,27:k,33:46,37:24,38:l,39:h,40:27,41:u,42:p,43:d,44:g,45:y,46:x,47:_,48:v,49:E,50:F},{11:49,17:48,24:A,37:24,38:l,39:h,40:27,41:u,42:p,43:d,44:g,45:y,46:x,47:_,48:v,49:E,50:F},{11:52,17:51,24:A,37:24,38:l,39:h,40:27,41:u,42:p,43:d,44:g,45:y,46:x,47:_,48:v,49:E,50:F},{20:[1,53]},{22:[1,54]},t(S,[2,18]),{1:[2,2]},t(S,[2,8]),t(S,[2,9]),t(m,[2,37],{40:55,41:u,42:p,43:d,44:g,45:y,46:x,47:_,48:v,49:E,50:F}),t(m,[2,38]),t(m,[2,39]),t(C,[2,40]),t(C,[2,42]),t(C,[2,43]),t(C,[2,44]),t(C,[2,45]),t(C,[2,46]),t(C,[2,47]),t(C,[2,48]),t(C,[2,49]),t(C,[2,50]),t(C,[2,51]),t(S,[2,10]),t(S,[2,22],{30:41,29:56,24:L,27:T}),t(S,[2,24]),t(S,[2,25]),{31:[1,57]},{11:59,32:58,37:24,38:l,39:h,40:27,41:u,42:p,43:d,44:g,45:y,46:x,47:_,48:v,49:E,50:F},t(S,[2,11]),t(S,[2,30],{33:60,27:k}),t(S,[2,32]),{31:[1,61]},t(S,[2,12]),{17:62,24:A},{25:63,27:f},t(S,[2,14]),{17:65,24:A},t(S,[2,16]),t(S,[2,17]),t(C,[2,41]),t(S,[2,23]),{27:[1,66]},{26:[1,67]},{26:[2,29],28:[1,68]},t(S,[2,31]),{27:[1,69]},t(S,[2,13]),{26:[1,70]},{26:[2,21],28:[1,71]},t(S,[2,15]),t(S,[2,26]),t(S,[2,27]),{11:59,32:72,37:24,38:l,39:h,40:27,41:u,42:p,43:d,44:g,45:y,46:x,47:_,48:v,49:E,50:F},t(S,[2,33]),t(S,[2,19]),{25:73,27:f},{26:[2,28]},{26:[2,20]}],defaultActions:{8:[2,1],10:[2,3],21:[2,2],72:[2,28],73:[2,20]},parseError:function(N,w){if(w.recoverable)this.trace(N);else{var R=new Error(N);throw R.hash=w,R}},parse:function(N){var w=this,R=[0],D=[],V=[null],z=[],st=this.table,j="",dt=0,K=0,G=2,tt=1,nt=z.slice.call(arguments,1),Q=Object.create(this.lexer),J={yy:{}};for(var O in this.yy)Object.prototype.hasOwnProperty.call(this.yy,O)&&(J.yy[O]=this.yy[O]);Q.setInput(N,J.yy),J.yy.lexer=Q,J.yy.parser=this,typeof Q.yylloc>"u"&&(Q.yylloc={});var at=Q.yylloc;z.push(at);var W=Q.options&&Q.options.ranges;typeof J.yy.parseError=="function"?this.parseError=J.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function ft(){var ot;return ot=D.pop()||Q.lex()||tt,typeof ot!="number"&&(ot instanceof Array&&(D=ot,ot=D.pop()),ot=w.symbols_[ot]||ot),ot}for(var M,wt,X,St,bt={},Vt,Bt,Wt,pt;;){if(wt=R[R.length-1],this.defaultActions[wt]?X=this.defaultActions[wt]:((M===null||typeof M>"u")&&(M=ft()),X=st[wt]&&st[wt][M]),typeof X>"u"||!X.length||!X[0]){var ut="";pt=[];for(Vt in st[wt])this.terminals_[Vt]&&Vt>G&&pt.push("'"+this.terminals_[Vt]+"'");Q.showPosition?ut="Parse error on line "+(dt+1)+`:
`+Q.showPosition()+`
Expecting `+pt.join(", ")+", got '"+(this.terminals_[M]||M)+"'":ut="Parse error on line "+(dt+1)+": Unexpected "+(M==tt?"end of input":"'"+(this.terminals_[M]||M)+"'"),this.parseError(ut,{text:Q.match,token:this.terminals_[M]||M,line:Q.yylineno,loc:at,expected:pt})}if(X[0]instanceof Array&&X.length>1)throw new Error("Parse Error: multiple actions possible at state: "+wt+", token: "+M);switch(X[0]){case 1:R.push(M),V.push(Q.yytext),z.push(Q.yylloc),R.push(X[1]),M=null,K=Q.yyleng,j=Q.yytext,dt=Q.yylineno,at=Q.yylloc;break;case 2:if(Bt=this.productions_[X[1]][1],bt.$=V[V.length-Bt],bt._$={first_line:z[z.length-(Bt||1)].first_line,last_line:z[z.length-1].last_line,first_column:z[z.length-(Bt||1)].first_column,last_column:z[z.length-1].last_column},W&&(bt._$.range=[z[z.length-(Bt||1)].range[0],z[z.length-1].range[1]]),St=this.performAction.apply(bt,[j,K,dt,J.yy,X[1],V,z].concat(nt)),typeof St<"u")return St;Bt&&(R=R.slice(0,-1*Bt*2),V=V.slice(0,-1*Bt),z=z.slice(0,-1*Bt)),R.push(this.productions_[X[1]][0]),V.push(bt.$),z.push(bt._$),Wt=st[R[R.length-2]][R[R.length-1]],R.push(Wt);break;case 3:return!0}}return!0}},b=function(){var U={EOF:1,parseError:function(w,R){if(this.yy.parser)this.yy.parser.parseError(w,R);else throw new Error(w)},setInput:function(N,w){return this.yy=w||this.yy||{},this._input=N,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var N=this._input[0];this.yytext+=N,this.yyleng++,this.offset++,this.match+=N,this.matched+=N;var w=N.match(/(?:\r\n?|\n).*/g);return w?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),N},unput:function(N){var w=N.length,R=N.split(/(?:\r\n?|\n)/g);this._input=N+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-w),this.offset-=w;var D=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),R.length-1&&(this.yylineno-=R.length-1);var V=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:R?(R.length===D.length?this.yylloc.first_column:0)+D[D.length-R.length].length-R[0].length:this.yylloc.first_column-w},this.options.ranges&&(this.yylloc.range=[V[0],V[0]+this.yyleng-w]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(N){this.unput(this.match.slice(N))},pastInput:function(){var N=this.matched.substr(0,this.matched.length-this.match.length);return(N.length>20?"...":"")+N.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var N=this.match;return N.length<20&&(N+=this._input.substr(0,20-N.length)),(N.substr(0,20)+(N.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var N=this.pastInput(),w=new Array(N.length+1).join("-");return N+this.upcomingInput()+`
`+w+"^"},test_match:function(N,w){var R,D,V;if(this.options.backtrack_lexer&&(V={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(V.yylloc.range=this.yylloc.range.slice(0))),D=N[0].match(/(?:\r\n?|\n).*/g),D&&(this.yylineno+=D.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:D?D[D.length-1].length-D[D.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+N[0].length},this.yytext+=N[0],this.match+=N[0],this.matches=N,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(N[0].length),this.matched+=N[0],R=this.performAction.call(this,this.yy,this,w,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),R)return R;if(this._backtrack){for(var z in V)this[z]=V[z];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var N,w,R,D;this._more||(this.yytext="",this.match="");for(var V=this._currentRules(),z=0;z<V.length;z++)if(R=this._input.match(this.rules[V[z]]),R&&(!w||R[0].length>w[0].length)){if(w=R,D=z,this.options.backtrack_lexer){if(N=this.test_match(R,V[z]),N!==!1)return N;if(this._backtrack){w=!1;continue}else return!1}else if(!this.options.flex)break}return w?(N=this.test_match(w,V[D]),N!==!1?N:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var w=this.next();return w||this.lex()},begin:function(w){this.conditionStack.push(w)},popState:function(){var w=this.conditionStack.length-1;return w>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(w){return w=this.conditionStack.length-1-Math.abs(w||0),w>=0?this.conditionStack[w]:"INITIAL"},pushState:function(w){this.begin(w)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(w,R,D,V){switch(D){case 0:break;case 1:break;case 2:return this.popState(),34;case 3:return this.popState(),34;case 4:return 34;case 5:break;case 6:return 10;case 7:return this.pushState("acc_title"),19;case 8:return this.popState(),"acc_title_value";case 9:return this.pushState("acc_descr"),21;case 10:return this.popState(),"acc_descr_value";case 11:this.pushState("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:return 5;case 15:return 8;case 16:return this.pushState("axis_data"),"X_AXIS";case 17:return this.pushState("axis_data"),"Y_AXIS";case 18:return this.pushState("axis_band_data"),24;case 19:return 31;case 20:return this.pushState("data"),16;case 21:return this.pushState("data"),18;case 22:return this.pushState("data_inner"),24;case 23:return 27;case 24:return this.popState(),26;case 25:this.popState();break;case 26:this.pushState("string");break;case 27:this.popState();break;case 28:return"STR";case 29:return 24;case 30:return 26;case 31:return 43;case 32:return"COLON";case 33:return 44;case 34:return 28;case 35:return 45;case 36:return 46;case 37:return 48;case 38:return 50;case 39:return 47;case 40:return 41;case 41:return 49;case 42:return 42;case 43:break;case 44:return 35;case 45:return 36}},rules:[/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:(\r?\n))/i,/^(?:(\r?\n))/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:title\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:\{)/i,/^(?:[^\}]*)/i,/^(?:xychart-beta\b)/i,/^(?:(?:vertical|horizontal))/i,/^(?:x-axis\b)/i,/^(?:y-axis\b)/i,/^(?:\[)/i,/^(?:-->)/i,/^(?:line\b)/i,/^(?:bar\b)/i,/^(?:\[)/i,/^(?:[+-]?(?:\d+(?:\.\d+)?|\.\d+))/i,/^(?:\])/i,/^(?:(?:`\)                                    \{ this\.pushState\(md_string\); \}\n<md_string>\(\?:\(\?!`"\)\.\)\+                  \{ return MD_STR; \}\n<md_string>\(\?:`))/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:[A-Za-z]+)/i,/^(?::)/i,/^(?:\+)/i,/^(?:,)/i,/^(?:=)/i,/^(?:\*)/i,/^(?:#)/i,/^(?:[\_])/i,/^(?:\.)/i,/^(?:&)/i,/^(?:-)/i,/^(?:[0-9]+)/i,/^(?:\s+)/i,/^(?:;)/i,/^(?:$)/i],conditions:{data_inner:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,20,21,23,24,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0},data:{rules:[0,1,3,4,5,6,7,9,11,14,15,16,17,20,21,22,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0},axis_band_data:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,20,21,24,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0},axis_data:{rules:[0,1,2,4,5,6,7,9,11,14,15,16,17,18,19,20,21,23,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0},acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},title:{rules:[],inclusive:!1},md_string:{rules:[],inclusive:!1},string:{rules:[27,28],inclusive:!1},INITIAL:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,20,21,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0}}};return U}();B.lexer=b;function P(){this.yy={}}return P.prototype=B,B.Parser=P,new P}();io.parser=io;const Ik=io;function Sc(t){return t.type==="bar"}function c0(t){return t.type==="band"}function _s(t){return t.type==="linear"}class h0{constructor(e){this.parentGroup=e}getMaxDimension(e,i){if(!this.parentGroup)return{width:e.reduce((n,a)=>Math.max(a.length,n),0)*i,height:i};const r={width:0,height:0},s=this.parentGroup.append("g").attr("visibility","hidden").attr("font-size",i);for(const n of e){const a=_x(s,1,n),o=a?a.width:n.length*i,l=a?a.height:i;r.width=Math.max(r.width,o),r.height=Math.max(r.height,l)}return s.remove(),r}}const vc=.7,wc=.2;class u0{constructor(e,i,r,s){this.axisConfig=e,this.title=i,this.textDimensionCalculator=r,this.axisThemeConfig=s,this.boundingRect={x:0,y:0,width:0,height:0},this.axisPosition="left",this.showTitle=!1,this.showLabel=!1,this.showTick=!1,this.showAxisLine=!1,this.outerPadding=0,this.titleTextHeight=0,this.labelTextHeight=0,this.range=[0,10],this.boundingRect={x:0,y:0,width:0,height:0},this.axisPosition="left"}setRange(e){this.range=e,this.axisPosition==="left"||this.axisPosition==="right"?this.boundingRect.height=e[1]-e[0]:this.boundingRect.width=e[1]-e[0],this.recalculateScale()}getRange(){return[this.range[0]+this.outerPadding,this.range[1]-this.outerPadding]}setAxisPosition(e){this.axisPosition=e,this.setRange(this.range)}getTickDistance(){const e=this.getRange();return Math.abs(e[0]-e[1])/this.getTickValues().length}getAxisOuterPadding(){return this.outerPadding}getLabelDimension(){return this.textDimensionCalculator.getMaxDimension(this.getTickValues().map(e=>e.toString()),this.axisConfig.labelFontSize)}recalculateOuterPaddingToDrawBar(){vc*this.getTickDistance()>this.outerPadding*2&&(this.outerPadding=Math.floor(vc*this.getTickDistance()/2)),this.recalculateScale()}calculateSpaceIfDrawnHorizontally(e){let i=e.height;if(this.axisConfig.showAxisLine&&i>this.axisConfig.axisLineWidth&&(i-=this.axisConfig.axisLineWidth,this.showAxisLine=!0),this.axisConfig.showLabel){const r=this.getLabelDimension(),s=wc*e.width;this.outerPadding=Math.min(r.width/2,s);const n=r.height+this.axisConfig.labelPadding*2;this.labelTextHeight=r.height,n<=i&&(i-=n,this.showLabel=!0)}if(this.axisConfig.showTick&&i>=this.axisConfig.tickLength&&(this.showTick=!0,i-=this.axisConfig.tickLength),this.axisConfig.showTitle&&this.title){const r=this.textDimensionCalculator.getMaxDimension([this.title],this.axisConfig.titleFontSize),s=r.height+this.axisConfig.titlePadding*2;this.titleTextHeight=r.height,s<=i&&(i-=s,this.showTitle=!0)}this.boundingRect.width=e.width,this.boundingRect.height=e.height-i}calculateSpaceIfDrawnVertical(e){let i=e.width;if(this.axisConfig.showAxisLine&&i>this.axisConfig.axisLineWidth&&(i-=this.axisConfig.axisLineWidth,this.showAxisLine=!0),this.axisConfig.showLabel){const r=this.getLabelDimension(),s=wc*e.height;this.outerPadding=Math.min(r.height/2,s);const n=r.width+this.axisConfig.labelPadding*2;n<=i&&(i-=n,this.showLabel=!0)}if(this.axisConfig.showTick&&i>=this.axisConfig.tickLength&&(this.showTick=!0,i-=this.axisConfig.tickLength),this.axisConfig.showTitle&&this.title){const r=this.textDimensionCalculator.getMaxDimension([this.title],this.axisConfig.titleFontSize),s=r.height+this.axisConfig.titlePadding*2;this.titleTextHeight=r.height,s<=i&&(i-=s,this.showTitle=!0)}this.boundingRect.width=e.width-i,this.boundingRect.height=e.height}calculateSpace(e){return this.axisPosition==="left"||this.axisPosition==="right"?this.calculateSpaceIfDrawnVertical(e):this.calculateSpaceIfDrawnHorizontally(e),this.recalculateScale(),{width:this.boundingRect.width,height:this.boundingRect.height}}setBoundingBoxXY(e){this.boundingRect.x=e.x,this.boundingRect.y=e.y}getDrawableElementsForLeftAxis(){const e=[];if(this.showAxisLine){const i=this.boundingRect.x+this.boundingRect.width-this.axisConfig.axisLineWidth/2;e.push({type:"path",groupTexts:["left-axis","axisl-line"],data:[{path:`M ${i},${this.boundingRect.y} L ${i},${this.boundingRect.y+this.boundingRect.height} `,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&e.push({type:"text",groupTexts:["left-axis","label"],data:this.getTickValues().map(i=>({text:i.toString(),x:this.boundingRect.x+this.boundingRect.width-(this.showLabel?this.axisConfig.labelPadding:0)-(this.showTick?this.axisConfig.tickLength:0)-(this.showAxisLine?this.axisConfig.axisLineWidth:0),y:this.getScaleValue(i),fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"middle",horizontalPos:"right"}))}),this.showTick){const i=this.boundingRect.x+this.boundingRect.width-(this.showAxisLine?this.axisConfig.axisLineWidth:0);e.push({type:"path",groupTexts:["left-axis","ticks"],data:this.getTickValues().map(r=>({path:`M ${i},${this.getScaleValue(r)} L ${i-this.axisConfig.tickLength},${this.getScaleValue(r)}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth}))})}return this.showTitle&&e.push({type:"text",groupTexts:["left-axis","title"],data:[{text:this.title,x:this.boundingRect.x+this.axisConfig.titlePadding,y:this.boundingRect.y+this.boundingRect.height/2,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:270,verticalPos:"top",horizontalPos:"center"}]}),e}getDrawableElementsForBottomAxis(){const e=[];if(this.showAxisLine){const i=this.boundingRect.y+this.axisConfig.axisLineWidth/2;e.push({type:"path",groupTexts:["bottom-axis","axis-line"],data:[{path:`M ${this.boundingRect.x},${i} L ${this.boundingRect.x+this.boundingRect.width},${i}`,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&e.push({type:"text",groupTexts:["bottom-axis","label"],data:this.getTickValues().map(i=>({text:i.toString(),x:this.getScaleValue(i),y:this.boundingRect.y+this.axisConfig.labelPadding+(this.showTick?this.axisConfig.tickLength:0)+(this.showAxisLine?this.axisConfig.axisLineWidth:0),fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}))}),this.showTick){const i=this.boundingRect.y+(this.showAxisLine?this.axisConfig.axisLineWidth:0);e.push({type:"path",groupTexts:["bottom-axis","ticks"],data:this.getTickValues().map(r=>({path:`M ${this.getScaleValue(r)},${i} L ${this.getScaleValue(r)},${i+this.axisConfig.tickLength}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth}))})}return this.showTitle&&e.push({type:"text",groupTexts:["bottom-axis","title"],data:[{text:this.title,x:this.range[0]+(this.range[1]-this.range[0])/2,y:this.boundingRect.y+this.boundingRect.height-this.axisConfig.titlePadding-this.titleTextHeight,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}]}),e}getDrawableElementsForTopAxis(){const e=[];if(this.showAxisLine){const i=this.boundingRect.y+this.boundingRect.height-this.axisConfig.axisLineWidth/2;e.push({type:"path",groupTexts:["top-axis","axis-line"],data:[{path:`M ${this.boundingRect.x},${i} L ${this.boundingRect.x+this.boundingRect.width},${i}`,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&e.push({type:"text",groupTexts:["top-axis","label"],data:this.getTickValues().map(i=>({text:i.toString(),x:this.getScaleValue(i),y:this.boundingRect.y+(this.showTitle?this.titleTextHeight+this.axisConfig.titlePadding*2:0)+this.axisConfig.labelPadding,fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}))}),this.showTick){const i=this.boundingRect.y;e.push({type:"path",groupTexts:["top-axis","ticks"],data:this.getTickValues().map(r=>({path:`M ${this.getScaleValue(r)},${i+this.boundingRect.height-(this.showAxisLine?this.axisConfig.axisLineWidth:0)} L ${this.getScaleValue(r)},${i+this.boundingRect.height-this.axisConfig.tickLength-(this.showAxisLine?this.axisConfig.axisLineWidth:0)}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth}))})}return this.showTitle&&e.push({type:"text",groupTexts:["top-axis","title"],data:[{text:this.title,x:this.boundingRect.x+this.boundingRect.width/2,y:this.boundingRect.y+this.axisConfig.titlePadding,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}]}),e}getDrawableElements(){if(this.axisPosition==="left")return this.getDrawableElementsForLeftAxis();if(this.axisPosition==="right")throw Error("Drawing of right axis is not implemented");return this.axisPosition==="bottom"?this.getDrawableElementsForBottomAxis():this.axisPosition==="top"?this.getDrawableElementsForTopAxis():[]}}class Dk extends u0{constructor(e,i,r,s,n){super(e,s,n,i),this.categories=r,this.scale=Ml().domain(this.categories).range(this.getRange())}setRange(e){super.setRange(e)}recalculateScale(){this.scale=Ml().domain(this.categories).range(this.getRange()).paddingInner(1).paddingOuter(0).align(.5),I.trace("BandAxis axis final categories, range: ",this.categories,this.getRange())}getTickValues(){return this.categories}getScaleValue(e){return this.scale(e)||this.getRange()[0]}}class Fk extends u0{constructor(e,i,r,s,n){super(e,s,n,i),this.domain=r,this.scale=ws().domain(this.domain).range(this.getRange())}getTickValues(){return this.scale.ticks()}recalculateScale(){const e=[...this.domain];this.axisPosition==="left"&&e.reverse(),this.scale=ws().domain(e).range(this.getRange())}getScaleValue(e){return this.scale(e)}}function Ac(t,e,i,r){const s=new h0(r);return c0(t)?new Dk(e,i,t.categories,t.title,s):new Fk(e,i,[t.min,t.max],t.title,s)}class Rk{constructor(e,i,r,s){this.textDimensionCalculator=e,this.chartConfig=i,this.chartData=r,this.chartThemeConfig=s,this.boundingRect={x:0,y:0,width:0,height:0},this.showChartTitle=!1}setBoundingBoxXY(e){this.boundingRect.x=e.x,this.boundingRect.y=e.y}calculateSpace(e){const i=this.textDimensionCalculator.getMaxDimension([this.chartData.title],this.chartConfig.titleFontSize),r=Math.max(i.width,e.width),s=i.height+2*this.chartConfig.titlePadding;return i.width<=r&&i.height<=s&&this.chartConfig.showTitle&&this.chartData.title&&(this.boundingRect.width=r,this.boundingRect.height=s,this.showChartTitle=!0),{width:this.boundingRect.width,height:this.boundingRect.height}}getDrawableElements(){const e=[];return this.showChartTitle&&e.push({groupTexts:["chart-title"],type:"text",data:[{fontSize:this.chartConfig.titleFontSize,text:this.chartData.title,verticalPos:"middle",horizontalPos:"center",x:this.boundingRect.x+this.boundingRect.width/2,y:this.boundingRect.y+this.boundingRect.height/2,fill:this.chartThemeConfig.titleColor,rotation:0}]}),e}}function Nk(t,e,i,r){const s=new h0(r);return new Rk(s,t,e,i)}class Ok{constructor(e,i,r,s,n){this.plotData=e,this.xAxis=i,this.yAxis=r,this.orientation=s,this.plotIndex=n}getDrawableElement(){const e=this.plotData.data.map(r=>[this.xAxis.getScaleValue(r[0]),this.yAxis.getScaleValue(r[1])]);let i;return this.orientation==="horizontal"?i=dr().y(r=>r[0]).x(r=>r[1])(e):i=dr().x(r=>r[0]).y(r=>r[1])(e),i?[{groupTexts:["plot",`line-plot-${this.plotIndex}`],type:"path",data:[{path:i,strokeFill:this.plotData.strokeFill,strokeWidth:this.plotData.strokeWidth}]}]:[]}}class Pk{constructor(e,i,r,s,n,a){this.barData=e,this.boundingRect=i,this.xAxis=r,this.yAxis=s,this.orientation=n,this.plotIndex=a}getDrawableElement(){const e=this.barData.data.map(n=>[this.xAxis.getScaleValue(n[0]),this.yAxis.getScaleValue(n[1])]),i=.05,r=Math.min(this.xAxis.getAxisOuterPadding()*2,this.xAxis.getTickDistance())*(1-i),s=r/2;return this.orientation==="horizontal"?[{groupTexts:["plot",`bar-plot-${this.plotIndex}`],type:"rect",data:e.map(n=>({x:this.boundingRect.x,y:n[0]-s,height:r,width:n[1]-this.boundingRect.x,fill:this.barData.fill,strokeWidth:0,strokeFill:this.barData.fill}))}]:[{groupTexts:["plot",`bar-plot-${this.plotIndex}`],type:"rect",data:e.map(n=>({x:n[0]-s,y:n[1],width:r,height:this.boundingRect.y+this.boundingRect.height-n[1],fill:this.barData.fill,strokeWidth:0,strokeFill:this.barData.fill}))}]}}class Mk{constructor(e,i,r){this.chartConfig=e,this.chartData=i,this.chartThemeConfig=r,this.boundingRect={x:0,y:0,width:0,height:0}}setAxes(e,i){this.xAxis=e,this.yAxis=i}setBoundingBoxXY(e){this.boundingRect.x=e.x,this.boundingRect.y=e.y}calculateSpace(e){return this.boundingRect.width=e.width,this.boundingRect.height=e.height,{width:this.boundingRect.width,height:this.boundingRect.height}}getDrawableElements(){if(!(this.xAxis&&this.yAxis))throw Error("Axes must be passed to render Plots");const e=[];for(const[i,r]of this.chartData.plots.entries())switch(r.type){case"line":{const s=new Ok(r,this.xAxis,this.yAxis,this.chartConfig.chartOrientation,i);e.push(...s.getDrawableElement())}break;case"bar":{const s=new Pk(r,this.boundingRect,this.xAxis,this.yAxis,this.chartConfig.chartOrientation,i);e.push(...s.getDrawableElement())}break}return e}}function Vk(t,e,i){return new Mk(t,e,i)}class zk{constructor(e,i,r,s){this.chartConfig=e,this.chartData=i,this.componentStore={title:Nk(e,i,r,s),plot:Vk(e,i,r),xAxis:Ac(i.xAxis,e.xAxis,{titleColor:r.xAxisTitleColor,labelColor:r.xAxisLabelColor,tickColor:r.xAxisTickColor,axisLineColor:r.xAxisLineColor},s),yAxis:Ac(i.yAxis,e.yAxis,{titleColor:r.yAxisTitleColor,labelColor:r.yAxisLabelColor,tickColor:r.yAxisTickColor,axisLineColor:r.yAxisLineColor},s)}}calculateVerticalSpace(){let e=this.chartConfig.width,i=this.chartConfig.height,r=0,s=0,n=Math.floor(e*this.chartConfig.plotReservedSpacePercent/100),a=Math.floor(i*this.chartConfig.plotReservedSpacePercent/100),o=this.componentStore.plot.calculateSpace({width:n,height:a});e-=o.width,i-=o.height,o=this.componentStore.title.calculateSpace({width:this.chartConfig.width,height:i}),s=o.height,i-=o.height,this.componentStore.xAxis.setAxisPosition("bottom"),o=this.componentStore.xAxis.calculateSpace({width:e,height:i}),i-=o.height,this.componentStore.yAxis.setAxisPosition("left"),o=this.componentStore.yAxis.calculateSpace({width:e,height:i}),r=o.width,e-=o.width,e>0&&(n+=e,e=0),i>0&&(a+=i,i=0),this.componentStore.plot.calculateSpace({width:n,height:a}),this.componentStore.plot.setBoundingBoxXY({x:r,y:s}),this.componentStore.xAxis.setRange([r,r+n]),this.componentStore.xAxis.setBoundingBoxXY({x:r,y:s+a}),this.componentStore.yAxis.setRange([s,s+a]),this.componentStore.yAxis.setBoundingBoxXY({x:0,y:s}),this.chartData.plots.some(l=>Sc(l))&&this.componentStore.xAxis.recalculateOuterPaddingToDrawBar()}calculateHorizonatalSpace(){let e=this.chartConfig.width,i=this.chartConfig.height,r=0,s=0,n=0,a=Math.floor(e*this.chartConfig.plotReservedSpacePercent/100),o=Math.floor(i*this.chartConfig.plotReservedSpacePercent/100),l=this.componentStore.plot.calculateSpace({width:a,height:o});e-=l.width,i-=l.height,l=this.componentStore.title.calculateSpace({width:this.chartConfig.width,height:i}),r=l.height,i-=l.height,this.componentStore.xAxis.setAxisPosition("left"),l=this.componentStore.xAxis.calculateSpace({width:e,height:i}),e-=l.width,s=l.width,this.componentStore.yAxis.setAxisPosition("top"),l=this.componentStore.yAxis.calculateSpace({width:e,height:i}),i-=l.height,n=r+l.height,e>0&&(a+=e,e=0),i>0&&(o+=i,i=0),this.componentStore.plot.calculateSpace({width:a,height:o}),this.componentStore.plot.setBoundingBoxXY({x:s,y:n}),this.componentStore.yAxis.setRange([s,s+a]),this.componentStore.yAxis.setBoundingBoxXY({x:s,y:r}),this.componentStore.xAxis.setRange([n,n+o]),this.componentStore.xAxis.setBoundingBoxXY({x:0,y:n}),this.chartData.plots.some(h=>Sc(h))&&this.componentStore.xAxis.recalculateOuterPaddingToDrawBar()}calculateSpace(){this.chartConfig.chartOrientation==="horizontal"?this.calculateHorizonatalSpace():this.calculateVerticalSpace()}getDrawableElement(){this.calculateSpace();const e=[];this.componentStore.plot.setAxes(this.componentStore.xAxis,this.componentStore.yAxis);for(const i of Object.values(this.componentStore))e.push(...i.getDrawableElements());return e}}class qk{static build(e,i,r,s){return new zk(e,i,r,s).getDrawableElement()}}let Ns=0,d0,Os=p0(),Ps=f0(),Ht=g0(),ro=Ps.plotColorPalette.split(",").map(t=>t.trim()),da=!1,dl=!1;function f0(){const t=Lo(),e=me();return Xs(t.xyChart,e.themeVariables.xyChart)}function p0(){const t=me();return Xs($t.xyChart,t.xyChart)}function g0(){return{yAxis:{type:"linear",title:"",min:1/0,max:-1/0},xAxis:{type:"band",title:"",categories:[]},title:"",plots:[]}}function fl(t){const e=me();return ue(t.trim(),e)}function Wk(t){d0=t}function Yk(t){t==="horizontal"?Os.chartOrientation="horizontal":Os.chartOrientation="vertical"}function Uk(t){Ht.xAxis.title=fl(t.text)}function y0(t,e){Ht.xAxis={type:"linear",title:Ht.xAxis.title,min:t,max:e},da=!0}function Hk(t){Ht.xAxis={type:"band",title:Ht.xAxis.title,categories:t.map(e=>fl(e.text))},da=!0}function Gk(t){Ht.yAxis.title=fl(t.text)}function jk(t,e){Ht.yAxis={type:"linear",title:Ht.yAxis.title,min:t,max:e},dl=!0}function Xk(t){const e=Math.min(...t),i=Math.max(...t),r=_s(Ht.yAxis)?Ht.yAxis.min:1/0,s=_s(Ht.yAxis)?Ht.yAxis.max:-1/0;Ht.yAxis={type:"linear",title:Ht.yAxis.title,min:Math.min(r,e),max:Math.max(s,i)}}function m0(t){let e=[];if(t.length===0)return e;if(!da){const i=_s(Ht.xAxis)?Ht.xAxis.min:1/0,r=_s(Ht.xAxis)?Ht.xAxis.max:-1/0;y0(Math.min(i,1),Math.max(r,t.length))}if(dl||Xk(t),c0(Ht.xAxis)&&(e=Ht.xAxis.categories.map((i,r)=>[i,t[r]])),_s(Ht.xAxis)){const i=Ht.xAxis.min,r=Ht.xAxis.max,s=(r-i+1)/t.length,n=[];for(let a=i;a<=r;a+=s)n.push(`${a}`);e=n.map((a,o)=>[a,t[o]])}return e}function x0(t){return ro[t===0?0:t%ro.length]}function $k(t,e){const i=m0(e);Ht.plots.push({type:"line",strokeFill:x0(Ns),strokeWidth:2,data:i}),Ns++}function Kk(t,e){const i=m0(e);Ht.plots.push({type:"bar",fill:x0(Ns),data:i}),Ns++}function Qk(){if(Ht.plots.length===0)throw Error("No Plot to render, please provide a plot with some data");return Ht.title=Ge(),qk.build(Os,Ht,Ps,d0)}function Zk(){return Ps}function Jk(){return Os}const t6=function(){Oe(),Ns=0,Os=p0(),Ht=g0(),Ps=f0(),ro=Ps.plotColorPalette.split(",").map(t=>t.trim()),da=!1,dl=!1},e6={getDrawableElem:Qk,clear:t6,setAccTitle:Pe,getAccTitle:Ye,setDiagramTitle:ri,getDiagramTitle:Ge,getAccDescription:He,setAccDescription:Ue,setOrientation:Yk,setXAxisTitle:Uk,setXAxisRangeData:y0,setXAxisBand:Hk,setYAxisTitle:Gk,setYAxisRangeData:jk,setLineData:$k,setBarData:Kk,setTmpSVGG:Wk,getChartThemeConfig:Zk,getChartConfig:Jk},i6=(t,e,i,r)=>{const s=r.db,n=s.getChartThemeConfig(),a=s.getChartConfig();function o(_){return _==="top"?"text-before-edge":"middle"}function l(_){return _==="left"?"start":_==="right"?"end":"middle"}function h(_){return`translate(${_.x}, ${_.y}) rotate(${_.rotation||0})`}I.debug(`Rendering xychart chart
`+t);const u=$s(e),p=u.append("g").attr("class","main"),d=p.append("rect").attr("width",a.width).attr("height",a.height).attr("class","background");Ne(u,a.height,a.width,!0),u.attr("viewBox",`0 0 ${a.width} ${a.height}`),d.attr("fill",n.backgroundColor),s.setTmpSVGG(u.append("g").attr("class","mermaid-tmp-group"));const g=s.getDrawableElem(),y={};function x(_){let v=p,E="";for(const[F]of _.entries()){let L=p;F>0&&y[E]&&(L=y[E]),E+=_[F],v=y[E],v||(v=y[E]=L.append("g").attr("class",_[F]))}return v}for(const _ of g){if(_.data.length===0)continue;const v=x(_.groupTexts);switch(_.type){case"rect":v.selectAll("rect").data(_.data).enter().append("rect").attr("x",E=>E.x).attr("y",E=>E.y).attr("width",E=>E.width).attr("height",E=>E.height).attr("fill",E=>E.fill).attr("stroke",E=>E.strokeFill).attr("stroke-width",E=>E.strokeWidth);break;case"text":v.selectAll("text").data(_.data).enter().append("text").attr("x",0).attr("y",0).attr("fill",E=>E.fill).attr("font-size",E=>E.fontSize).attr("dominant-baseline",E=>o(E.verticalPos)).attr("text-anchor",E=>l(E.horizontalPos)).attr("transform",E=>h(E)).text(E=>E.text);break;case"path":v.selectAll("path").data(_.data).enter().append("path").attr("d",E=>E.path).attr("fill",E=>E.fill?E.fill:"none").attr("stroke",E=>E.strokeFill).attr("stroke-width",E=>E.strokeWidth);break}}},r6={draw:i6},s6={parser:Ik,db:e6,renderer:r6},n6=Object.freeze(Object.defineProperty({__proto__:null,diagram:s6},Symbol.toStringTag,{value:"Module"}));var so=function(){var t=function(K,G,tt,nt){for(tt=tt||{},nt=K.length;nt--;tt[K[nt]]=G);return tt},e=[1,3],i=[1,4],r=[1,5],s=[1,6],n=[5,6,8,9,11,13,31,32,33,34,35,36,44,62,63],a=[1,18],o=[2,7],l=[1,22],h=[1,23],u=[1,24],p=[1,25],d=[1,26],g=[1,27],y=[1,20],x=[1,28],_=[1,29],v=[62,63],E=[5,8,9,11,13,31,32,33,34,35,36,44,51,53,62,63],F=[1,47],L=[1,48],T=[1,49],k=[1,50],A=[1,51],S=[1,52],m=[1,53],C=[53,54],f=[1,64],B=[1,60],b=[1,61],P=[1,62],U=[1,63],N=[1,65],w=[1,69],R=[1,70],D=[1,67],V=[1,68],z=[5,8,9,11,13,31,32,33,34,35,36,44,62,63],st={trace:function(){},yy:{},symbols_:{error:2,start:3,directive:4,NEWLINE:5,RD:6,diagram:7,EOF:8,acc_title:9,acc_title_value:10,acc_descr:11,acc_descr_value:12,acc_descr_multiline_value:13,requirementDef:14,elementDef:15,relationshipDef:16,requirementType:17,requirementName:18,STRUCT_START:19,requirementBody:20,ID:21,COLONSEP:22,id:23,TEXT:24,text:25,RISK:26,riskLevel:27,VERIFYMTHD:28,verifyType:29,STRUCT_STOP:30,REQUIREMENT:31,FUNCTIONAL_REQUIREMENT:32,INTERFACE_REQUIREMENT:33,PERFORMANCE_REQUIREMENT:34,PHYSICAL_REQUIREMENT:35,DESIGN_CONSTRAINT:36,LOW_RISK:37,MED_RISK:38,HIGH_RISK:39,VERIFY_ANALYSIS:40,VERIFY_DEMONSTRATION:41,VERIFY_INSPECTION:42,VERIFY_TEST:43,ELEMENT:44,elementName:45,elementBody:46,TYPE:47,type:48,DOCREF:49,ref:50,END_ARROW_L:51,relationship:52,LINE:53,END_ARROW_R:54,CONTAINS:55,COPIES:56,DERIVES:57,SATISFIES:58,VERIFIES:59,REFINES:60,TRACES:61,unqString:62,qString:63,$accept:0,$end:1},terminals_:{2:"error",5:"NEWLINE",6:"RD",8:"EOF",9:"acc_title",10:"acc_title_value",11:"acc_descr",12:"acc_descr_value",13:"acc_descr_multiline_value",19:"STRUCT_START",21:"ID",22:"COLONSEP",24:"TEXT",26:"RISK",28:"VERIFYMTHD",30:"STRUCT_STOP",31:"REQUIREMENT",32:"FUNCTIONAL_REQUIREMENT",33:"INTERFACE_REQUIREMENT",34:"PERFORMANCE_REQUIREMENT",35:"PHYSICAL_REQUIREMENT",36:"DESIGN_CONSTRAINT",37:"LOW_RISK",38:"MED_RISK",39:"HIGH_RISK",40:"VERIFY_ANALYSIS",41:"VERIFY_DEMONSTRATION",42:"VERIFY_INSPECTION",43:"VERIFY_TEST",44:"ELEMENT",47:"TYPE",49:"DOCREF",51:"END_ARROW_L",53:"LINE",54:"END_ARROW_R",55:"CONTAINS",56:"COPIES",57:"DERIVES",58:"SATISFIES",59:"VERIFIES",60:"REFINES",61:"TRACES",62:"unqString",63:"qString"},productions_:[0,[3,3],[3,2],[3,4],[4,2],[4,2],[4,1],[7,0],[7,2],[7,2],[7,2],[7,2],[7,2],[14,5],[20,5],[20,5],[20,5],[20,5],[20,2],[20,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[27,1],[27,1],[27,1],[29,1],[29,1],[29,1],[29,1],[15,5],[46,5],[46,5],[46,2],[46,1],[16,5],[16,5],[52,1],[52,1],[52,1],[52,1],[52,1],[52,1],[52,1],[18,1],[18,1],[23,1],[23,1],[25,1],[25,1],[45,1],[45,1],[48,1],[48,1],[50,1],[50,1]],performAction:function(G,tt,nt,Q,J,O,at){var W=O.length-1;switch(J){case 4:this.$=O[W].trim(),Q.setAccTitle(this.$);break;case 5:case 6:this.$=O[W].trim(),Q.setAccDescription(this.$);break;case 7:this.$=[];break;case 13:Q.addRequirement(O[W-3],O[W-4]);break;case 14:Q.setNewReqId(O[W-2]);break;case 15:Q.setNewReqText(O[W-2]);break;case 16:Q.setNewReqRisk(O[W-2]);break;case 17:Q.setNewReqVerifyMethod(O[W-2]);break;case 20:this.$=Q.RequirementType.REQUIREMENT;break;case 21:this.$=Q.RequirementType.FUNCTIONAL_REQUIREMENT;break;case 22:this.$=Q.RequirementType.INTERFACE_REQUIREMENT;break;case 23:this.$=Q.RequirementType.PERFORMANCE_REQUIREMENT;break;case 24:this.$=Q.RequirementType.PHYSICAL_REQUIREMENT;break;case 25:this.$=Q.RequirementType.DESIGN_CONSTRAINT;break;case 26:this.$=Q.RiskLevel.LOW_RISK;break;case 27:this.$=Q.RiskLevel.MED_RISK;break;case 28:this.$=Q.RiskLevel.HIGH_RISK;break;case 29:this.$=Q.VerifyType.VERIFY_ANALYSIS;break;case 30:this.$=Q.VerifyType.VERIFY_DEMONSTRATION;break;case 31:this.$=Q.VerifyType.VERIFY_INSPECTION;break;case 32:this.$=Q.VerifyType.VERIFY_TEST;break;case 33:Q.addElement(O[W-3]);break;case 34:Q.setNewElementType(O[W-2]);break;case 35:Q.setNewElementDocRef(O[W-2]);break;case 38:Q.addRelationship(O[W-2],O[W],O[W-4]);break;case 39:Q.addRelationship(O[W-2],O[W-4],O[W]);break;case 40:this.$=Q.Relationships.CONTAINS;break;case 41:this.$=Q.Relationships.COPIES;break;case 42:this.$=Q.Relationships.DERIVES;break;case 43:this.$=Q.Relationships.SATISFIES;break;case 44:this.$=Q.Relationships.VERIFIES;break;case 45:this.$=Q.Relationships.REFINES;break;case 46:this.$=Q.Relationships.TRACES;break}},table:[{3:1,4:2,6:e,9:i,11:r,13:s},{1:[3]},{3:8,4:2,5:[1,7],6:e,9:i,11:r,13:s},{5:[1,9]},{10:[1,10]},{12:[1,11]},t(n,[2,6]),{3:12,4:2,6:e,9:i,11:r,13:s},{1:[2,2]},{4:17,5:a,7:13,8:o,9:i,11:r,13:s,14:14,15:15,16:16,17:19,23:21,31:l,32:h,33:u,34:p,35:d,36:g,44:y,62:x,63:_},t(n,[2,4]),t(n,[2,5]),{1:[2,1]},{8:[1,30]},{4:17,5:a,7:31,8:o,9:i,11:r,13:s,14:14,15:15,16:16,17:19,23:21,31:l,32:h,33:u,34:p,35:d,36:g,44:y,62:x,63:_},{4:17,5:a,7:32,8:o,9:i,11:r,13:s,14:14,15:15,16:16,17:19,23:21,31:l,32:h,33:u,34:p,35:d,36:g,44:y,62:x,63:_},{4:17,5:a,7:33,8:o,9:i,11:r,13:s,14:14,15:15,16:16,17:19,23:21,31:l,32:h,33:u,34:p,35:d,36:g,44:y,62:x,63:_},{4:17,5:a,7:34,8:o,9:i,11:r,13:s,14:14,15:15,16:16,17:19,23:21,31:l,32:h,33:u,34:p,35:d,36:g,44:y,62:x,63:_},{4:17,5:a,7:35,8:o,9:i,11:r,13:s,14:14,15:15,16:16,17:19,23:21,31:l,32:h,33:u,34:p,35:d,36:g,44:y,62:x,63:_},{18:36,62:[1,37],63:[1,38]},{45:39,62:[1,40],63:[1,41]},{51:[1,42],53:[1,43]},t(v,[2,20]),t(v,[2,21]),t(v,[2,22]),t(v,[2,23]),t(v,[2,24]),t(v,[2,25]),t(E,[2,49]),t(E,[2,50]),{1:[2,3]},{8:[2,8]},{8:[2,9]},{8:[2,10]},{8:[2,11]},{8:[2,12]},{19:[1,44]},{19:[2,47]},{19:[2,48]},{19:[1,45]},{19:[2,53]},{19:[2,54]},{52:46,55:F,56:L,57:T,58:k,59:A,60:S,61:m},{52:54,55:F,56:L,57:T,58:k,59:A,60:S,61:m},{5:[1,55]},{5:[1,56]},{53:[1,57]},t(C,[2,40]),t(C,[2,41]),t(C,[2,42]),t(C,[2,43]),t(C,[2,44]),t(C,[2,45]),t(C,[2,46]),{54:[1,58]},{5:f,20:59,21:B,24:b,26:P,28:U,30:N},{5:w,30:R,46:66,47:D,49:V},{23:71,62:x,63:_},{23:72,62:x,63:_},t(z,[2,13]),{22:[1,73]},{22:[1,74]},{22:[1,75]},{22:[1,76]},{5:f,20:77,21:B,24:b,26:P,28:U,30:N},t(z,[2,19]),t(z,[2,33]),{22:[1,78]},{22:[1,79]},{5:w,30:R,46:80,47:D,49:V},t(z,[2,37]),t(z,[2,38]),t(z,[2,39]),{23:81,62:x,63:_},{25:82,62:[1,83],63:[1,84]},{27:85,37:[1,86],38:[1,87],39:[1,88]},{29:89,40:[1,90],41:[1,91],42:[1,92],43:[1,93]},t(z,[2,18]),{48:94,62:[1,95],63:[1,96]},{50:97,62:[1,98],63:[1,99]},t(z,[2,36]),{5:[1,100]},{5:[1,101]},{5:[2,51]},{5:[2,52]},{5:[1,102]},{5:[2,26]},{5:[2,27]},{5:[2,28]},{5:[1,103]},{5:[2,29]},{5:[2,30]},{5:[2,31]},{5:[2,32]},{5:[1,104]},{5:[2,55]},{5:[2,56]},{5:[1,105]},{5:[2,57]},{5:[2,58]},{5:f,20:106,21:B,24:b,26:P,28:U,30:N},{5:f,20:107,21:B,24:b,26:P,28:U,30:N},{5:f,20:108,21:B,24:b,26:P,28:U,30:N},{5:f,20:109,21:B,24:b,26:P,28:U,30:N},{5:w,30:R,46:110,47:D,49:V},{5:w,30:R,46:111,47:D,49:V},t(z,[2,14]),t(z,[2,15]),t(z,[2,16]),t(z,[2,17]),t(z,[2,34]),t(z,[2,35])],defaultActions:{8:[2,2],12:[2,1],30:[2,3],31:[2,8],32:[2,9],33:[2,10],34:[2,11],35:[2,12],37:[2,47],38:[2,48],40:[2,53],41:[2,54],83:[2,51],84:[2,52],86:[2,26],87:[2,27],88:[2,28],90:[2,29],91:[2,30],92:[2,31],93:[2,32],95:[2,55],96:[2,56],98:[2,57],99:[2,58]},parseError:function(G,tt){if(tt.recoverable)this.trace(G);else{var nt=new Error(G);throw nt.hash=tt,nt}},parse:function(G){var tt=this,nt=[0],Q=[],J=[null],O=[],at=this.table,W="",ft=0,M=0,wt=2,X=1,St=O.slice.call(arguments,1),bt=Object.create(this.lexer),Vt={yy:{}};for(var Bt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Bt)&&(Vt.yy[Bt]=this.yy[Bt]);bt.setInput(G,Vt.yy),Vt.yy.lexer=bt,Vt.yy.parser=this,typeof bt.yylloc>"u"&&(bt.yylloc={});var Wt=bt.yylloc;O.push(Wt);var pt=bt.options&&bt.options.ranges;typeof Vt.yy.parseError=="function"?this.parseError=Vt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function ut(){var zt;return zt=Q.pop()||bt.lex()||X,typeof zt!="number"&&(zt instanceof Array&&(Q=zt,zt=Q.pop()),zt=tt.symbols_[zt]||zt),zt}for(var ot,lt,ht,$,rt={},it,ct,ee,Qt;;){if(lt=nt[nt.length-1],this.defaultActions[lt]?ht=this.defaultActions[lt]:((ot===null||typeof ot>"u")&&(ot=ut()),ht=at[lt]&&at[lt][ot]),typeof ht>"u"||!ht.length||!ht[0]){var de="";Qt=[];for(it in at[lt])this.terminals_[it]&&it>wt&&Qt.push("'"+this.terminals_[it]+"'");bt.showPosition?de="Parse error on line "+(ft+1)+`:
`+bt.showPosition()+`
Expecting `+Qt.join(", ")+", got '"+(this.terminals_[ot]||ot)+"'":de="Parse error on line "+(ft+1)+": Unexpected "+(ot==X?"end of input":"'"+(this.terminals_[ot]||ot)+"'"),this.parseError(de,{text:bt.match,token:this.terminals_[ot]||ot,line:bt.yylineno,loc:Wt,expected:Qt})}if(ht[0]instanceof Array&&ht.length>1)throw new Error("Parse Error: multiple actions possible at state: "+lt+", token: "+ot);switch(ht[0]){case 1:nt.push(ot),J.push(bt.yytext),O.push(bt.yylloc),nt.push(ht[1]),ot=null,M=bt.yyleng,W=bt.yytext,ft=bt.yylineno,Wt=bt.yylloc;break;case 2:if(ct=this.productions_[ht[1]][1],rt.$=J[J.length-ct],rt._$={first_line:O[O.length-(ct||1)].first_line,last_line:O[O.length-1].last_line,first_column:O[O.length-(ct||1)].first_column,last_column:O[O.length-1].last_column},pt&&(rt._$.range=[O[O.length-(ct||1)].range[0],O[O.length-1].range[1]]),$=this.performAction.apply(rt,[W,M,ft,Vt.yy,ht[1],J,O].concat(St)),typeof $<"u")return $;ct&&(nt=nt.slice(0,-1*ct*2),J=J.slice(0,-1*ct),O=O.slice(0,-1*ct)),nt.push(this.productions_[ht[1]][0]),J.push(rt.$),O.push(rt._$),ee=at[nt[nt.length-2]][nt[nt.length-1]],nt.push(ee);break;case 3:return!0}}return!0}},j=function(){var K={EOF:1,parseError:function(tt,nt){if(this.yy.parser)this.yy.parser.parseError(tt,nt);else throw new Error(tt)},setInput:function(G,tt){return this.yy=tt||this.yy||{},this._input=G,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var G=this._input[0];this.yytext+=G,this.yyleng++,this.offset++,this.match+=G,this.matched+=G;var tt=G.match(/(?:\r\n?|\n).*/g);return tt?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),G},unput:function(G){var tt=G.length,nt=G.split(/(?:\r\n?|\n)/g);this._input=G+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-tt),this.offset-=tt;var Q=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),nt.length-1&&(this.yylineno-=nt.length-1);var J=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:nt?(nt.length===Q.length?this.yylloc.first_column:0)+Q[Q.length-nt.length].length-nt[0].length:this.yylloc.first_column-tt},this.options.ranges&&(this.yylloc.range=[J[0],J[0]+this.yyleng-tt]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(G){this.unput(this.match.slice(G))},pastInput:function(){var G=this.matched.substr(0,this.matched.length-this.match.length);return(G.length>20?"...":"")+G.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var G=this.match;return G.length<20&&(G+=this._input.substr(0,20-G.length)),(G.substr(0,20)+(G.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var G=this.pastInput(),tt=new Array(G.length+1).join("-");return G+this.upcomingInput()+`
`+tt+"^"},test_match:function(G,tt){var nt,Q,J;if(this.options.backtrack_lexer&&(J={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(J.yylloc.range=this.yylloc.range.slice(0))),Q=G[0].match(/(?:\r\n?|\n).*/g),Q&&(this.yylineno+=Q.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Q?Q[Q.length-1].length-Q[Q.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+G[0].length},this.yytext+=G[0],this.match+=G[0],this.matches=G,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(G[0].length),this.matched+=G[0],nt=this.performAction.call(this,this.yy,this,tt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),nt)return nt;if(this._backtrack){for(var O in J)this[O]=J[O];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var G,tt,nt,Q;this._more||(this.yytext="",this.match="");for(var J=this._currentRules(),O=0;O<J.length;O++)if(nt=this._input.match(this.rules[J[O]]),nt&&(!tt||nt[0].length>tt[0].length)){if(tt=nt,Q=O,this.options.backtrack_lexer){if(G=this.test_match(nt,J[O]),G!==!1)return G;if(this._backtrack){tt=!1;continue}else return!1}else if(!this.options.flex)break}return tt?(G=this.test_match(tt,J[Q]),G!==!1?G:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var tt=this.next();return tt||this.lex()},begin:function(tt){this.conditionStack.push(tt)},popState:function(){var tt=this.conditionStack.length-1;return tt>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(tt){return tt=this.conditionStack.length-1-Math.abs(tt||0),tt>=0?this.conditionStack[tt]:"INITIAL"},pushState:function(tt){this.begin(tt)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(tt,nt,Q,J){switch(Q){case 0:return"title";case 1:return this.begin("acc_title"),9;case 2:return this.popState(),"acc_title_value";case 3:return this.begin("acc_descr"),11;case 4:return this.popState(),"acc_descr_value";case 5:this.begin("acc_descr_multiline");break;case 6:this.popState();break;case 7:return"acc_descr_multiline_value";case 8:return 5;case 9:break;case 10:break;case 11:break;case 12:return 8;case 13:return 6;case 14:return 19;case 15:return 30;case 16:return 22;case 17:return 21;case 18:return 24;case 19:return 26;case 20:return 28;case 21:return 31;case 22:return 32;case 23:return 33;case 24:return 34;case 25:return 35;case 26:return 36;case 27:return 37;case 28:return 38;case 29:return 39;case 30:return 40;case 31:return 41;case 32:return 42;case 33:return 43;case 34:return 44;case 35:return 55;case 36:return 56;case 37:return 57;case 38:return 58;case 39:return 59;case 40:return 60;case 41:return 61;case 42:return 47;case 43:return 49;case 44:return 51;case 45:return 54;case 46:return 53;case 47:this.begin("string");break;case 48:this.popState();break;case 49:return"qString";case 50:return nt.yytext=nt.yytext.trim(),62}},rules:[/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:(\r?\n)+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:$)/i,/^(?:requirementDiagram\b)/i,/^(?:\{)/i,/^(?:\})/i,/^(?::)/i,/^(?:id\b)/i,/^(?:text\b)/i,/^(?:risk\b)/i,/^(?:verifyMethod\b)/i,/^(?:requirement\b)/i,/^(?:functionalRequirement\b)/i,/^(?:interfaceRequirement\b)/i,/^(?:performanceRequirement\b)/i,/^(?:physicalRequirement\b)/i,/^(?:designConstraint\b)/i,/^(?:low\b)/i,/^(?:medium\b)/i,/^(?:high\b)/i,/^(?:analysis\b)/i,/^(?:demonstration\b)/i,/^(?:inspection\b)/i,/^(?:test\b)/i,/^(?:element\b)/i,/^(?:contains\b)/i,/^(?:copies\b)/i,/^(?:derives\b)/i,/^(?:satisfies\b)/i,/^(?:verifies\b)/i,/^(?:refines\b)/i,/^(?:traces\b)/i,/^(?:type\b)/i,/^(?:docref\b)/i,/^(?:<-)/i,/^(?:->)/i,/^(?:-)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[\w][^\r\n\{\<\>\-\=]*)/i],conditions:{acc_descr_multiline:{rules:[6,7],inclusive:!1},acc_descr:{rules:[4],inclusive:!1},acc_title:{rules:[2],inclusive:!1},unqString:{rules:[],inclusive:!1},token:{rules:[],inclusive:!1},string:{rules:[48,49],inclusive:!1},INITIAL:{rules:[0,1,3,5,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,50],inclusive:!0}}};return K}();st.lexer=j;function dt(){this.yy={}}return dt.prototype=st,st.Parser=dt,new dt}();so.parser=so;const a6=so;let pl=[],Ke={},Ts={},ur={},Cs={};const o6={REQUIREMENT:"Requirement",FUNCTIONAL_REQUIREMENT:"Functional Requirement",INTERFACE_REQUIREMENT:"Interface Requirement",PERFORMANCE_REQUIREMENT:"Performance Requirement",PHYSICAL_REQUIREMENT:"Physical Requirement",DESIGN_CONSTRAINT:"Design Constraint"},l6={LOW_RISK:"Low",MED_RISK:"Medium",HIGH_RISK:"High"},c6={VERIFY_ANALYSIS:"Analysis",VERIFY_DEMONSTRATION:"Demonstration",VERIFY_INSPECTION:"Inspection",VERIFY_TEST:"Test"},h6={CONTAINS:"contains",COPIES:"copies",DERIVES:"derives",SATISFIES:"satisfies",VERIFIES:"verifies",REFINES:"refines",TRACES:"traces"},u6=(t,e)=>(Ts[t]===void 0&&(Ts[t]={name:t,type:e,id:Ke.id,text:Ke.text,risk:Ke.risk,verifyMethod:Ke.verifyMethod}),Ke={},Ts[t]),d6=()=>Ts,f6=t=>{Ke!==void 0&&(Ke.id=t)},p6=t=>{Ke!==void 0&&(Ke.text=t)},g6=t=>{Ke!==void 0&&(Ke.risk=t)},y6=t=>{Ke!==void 0&&(Ke.verifyMethod=t)},m6=t=>(Cs[t]===void 0&&(Cs[t]={name:t,type:ur.type,docRef:ur.docRef},I.info("Added new requirement: ",t)),ur={},Cs[t]),x6=()=>Cs,b6=t=>{ur!==void 0&&(ur.type=t)},k6=t=>{ur!==void 0&&(ur.docRef=t)},_6=(t,e,i)=>{pl.push({type:t,src:e,dst:i})},T6=()=>pl,C6=()=>{pl=[],Ke={},Ts={},ur={},Cs={},Oe()},E6={RequirementType:o6,RiskLevel:l6,VerifyType:c6,Relationships:h6,getConfig:()=>Y().req,addRequirement:u6,getRequirements:d6,setNewReqId:f6,setNewReqText:p6,setNewReqRisk:g6,setNewReqVerifyMethod:y6,setAccTitle:Pe,getAccTitle:Ye,setAccDescription:Ue,getAccDescription:He,addElement:m6,getElements:x6,setNewElementType:b6,setNewElementDocRef:k6,addRelationship:_6,getRelationships:T6,clear:C6},S6=t=>`

  marker {
    fill: ${t.relationColor};
    stroke: ${t.relationColor};
  }

  marker.cross {
    stroke: ${t.lineColor};
  }

  svg {
    font-family: ${t.fontFamily};
    font-size: ${t.fontSize};
  }

  .reqBox {
    fill: ${t.requirementBackground};
    fill-opacity: 1.0;
    stroke: ${t.requirementBorderColor};
    stroke-width: ${t.requirementBorderSize};
  }
  
  .reqTitle, .reqLabel{
    fill:  ${t.requirementTextColor};
  }
  .reqLabelBox {
    fill: ${t.relationLabelBackground};
    fill-opacity: 1.0;
  }

  .req-title-line {
    stroke: ${t.requirementBorderColor};
    stroke-width: ${t.requirementBorderSize};
  }
  .relationshipLine {
    stroke: ${t.relationColor};
    stroke-width: 1;
  }
  .relationshipLabel {
    fill: ${t.relationLabelColor};
  }

`,v6=S6,no={CONTAINS:"contains",ARROW:"arrow"},w6=(t,e)=>{let i=t.append("defs").append("marker").attr("id",no.CONTAINS+"_line_ending").attr("refX",0).attr("refY",e.line_height/2).attr("markerWidth",e.line_height).attr("markerHeight",e.line_height).attr("orient","auto").append("g");i.append("circle").attr("cx",e.line_height/2).attr("cy",e.line_height/2).attr("r",e.line_height/2).attr("fill","none"),i.append("line").attr("x1",0).attr("x2",e.line_height).attr("y1",e.line_height/2).attr("y2",e.line_height/2).attr("stroke-width",1),i.append("line").attr("y1",0).attr("y2",e.line_height).attr("x1",e.line_height/2).attr("x2",e.line_height/2).attr("stroke-width",1),t.append("defs").append("marker").attr("id",no.ARROW+"_line_ending").attr("refX",e.line_height).attr("refY",.5*e.line_height).attr("markerWidth",e.line_height).attr("markerHeight",e.line_height).attr("orient","auto").append("path").attr("d",`M0,0
      L${e.line_height},${e.line_height/2}
      M${e.line_height},${e.line_height/2}
      L0,${e.line_height}`).attr("stroke-width",1)},b0={ReqMarkers:no,insertLineEndings:w6};let ne={},Lc=0;const k0=(t,e)=>t.insert("rect","#"+e).attr("class","req reqBox").attr("x",0).attr("y",0).attr("width",ne.rect_min_width+"px").attr("height",ne.rect_min_height+"px"),_0=(t,e,i)=>{let r=ne.rect_min_width/2,s=t.append("text").attr("class","req reqLabel reqTitle").attr("id",e).attr("x",r).attr("y",ne.rect_padding).attr("dominant-baseline","hanging"),n=0;i.forEach(h=>{n==0?s.append("tspan").attr("text-anchor","middle").attr("x",ne.rect_min_width/2).attr("dy",0).text(h):s.append("tspan").attr("text-anchor","middle").attr("x",ne.rect_min_width/2).attr("dy",ne.line_height*.75).text(h),n++});let a=1.5*ne.rect_padding,o=n*ne.line_height*.75,l=a+o;return t.append("line").attr("class","req-title-line").attr("x1","0").attr("x2",ne.rect_min_width).attr("y1",l).attr("y2",l),{titleNode:s,y:l}},T0=(t,e,i,r)=>{let s=t.append("text").attr("class","req reqLabel").attr("id",e).attr("x",ne.rect_padding).attr("y",r).attr("dominant-baseline","hanging"),n=0;const a=30;let o=[];return i.forEach(l=>{let h=l.length;for(;h>a&&n<3;){let u=l.substring(0,a);l=l.substring(a,l.length),h=l.length,o[o.length]=u,n++}if(n==3){let u=o[o.length-1];o[o.length-1]=u.substring(0,u.length-4)+"..."}else o[o.length]=l;n=0}),o.forEach(l=>{s.append("tspan").attr("x",ne.rect_padding).attr("dy",ne.line_height).text(l)}),s},A6=(t,e,i,r)=>{const s=e.node().getTotalLength(),n=e.node().getPointAtLength(s*.5),a="rel"+Lc;Lc++;const l=t.append("text").attr("class","req relationshipLabel").attr("id",a).attr("x",n.x).attr("y",n.y).attr("text-anchor","middle").attr("dominant-baseline","middle").text(r).node().getBBox();t.insert("rect","#"+a).attr("class","req reqLabelBox").attr("x",n.x-l.width/2).attr("y",n.y-l.height/2).attr("width",l.width).attr("height",l.height).attr("fill","white").attr("fill-opacity","85%")},L6=function(t,e,i,r,s){const n=i.edge(rs(e.src),rs(e.dst)),a=dr().x(function(l){return l.x}).y(function(l){return l.y}),o=t.insert("path","#"+r).attr("class","er relationshipLine").attr("d",a(n.points)).attr("fill","none");e.type==s.db.Relationships.CONTAINS?o.attr("marker-start","url("+mt.getUrl(ne.arrowMarkerAbsolute)+"#"+e.type+"_line_ending)"):(o.attr("stroke-dasharray","10,7"),o.attr("marker-end","url("+mt.getUrl(ne.arrowMarkerAbsolute)+"#"+b0.ReqMarkers.ARROW+"_line_ending)")),A6(t,o,ne,`<<${e.type}>>`)},B6=(t,e,i)=>{Object.keys(t).forEach(r=>{let s=t[r];r=rs(r),I.info("Added new requirement: ",r);const n=i.append("g").attr("id",r),a="req-"+r,o=k0(n,a);let l=_0(n,r+"_title",[`<<${s.type}>>`,`${s.name}`]);T0(n,r+"_body",[`Id: ${s.id}`,`Text: ${s.text}`,`Risk: ${s.risk}`,`Verification: ${s.verifyMethod}`],l.y);const h=o.node().getBBox();e.setNode(r,{width:h.width,height:h.height,shape:"rect",id:r})})},I6=(t,e,i)=>{Object.keys(t).forEach(r=>{let s=t[r];const n=rs(r),a=i.append("g").attr("id",n),o="element-"+n,l=k0(a,o);let h=_0(a,o+"_title",["<<Element>>",`${r}`]);T0(a,o+"_body",[`Type: ${s.type||"Not Specified"}`,`Doc Ref: ${s.docRef||"None"}`],h.y);const u=l.node().getBBox();e.setNode(n,{width:u.width,height:u.height,shape:"rect",id:n})})},D6=(t,e)=>(t.forEach(function(i){let r=rs(i.src),s=rs(i.dst);e.setEdge(r,s,{relationship:i})}),t),F6=function(t,e){e.nodes().forEach(function(i){i!==void 0&&e.node(i)!==void 0&&(t.select("#"+i),t.select("#"+i).attr("transform","translate("+(e.node(i).x-e.node(i).width/2)+","+(e.node(i).y-e.node(i).height/2)+" )"))})},rs=t=>t.replace(/\s/g,"").replace(/\./g,"_"),R6=(t,e,i,r)=>{ne=Y().requirement;const s=ne.securityLevel;let n;s==="sandbox"&&(n=yt("#i"+e));const o=(s==="sandbox"?yt(n.nodes()[0].contentDocument.body):yt("body")).select(`[id='${e}']`);b0.insertLineEndings(o,ne);const l=new Bi({multigraph:!1,compound:!1,directed:!0}).setGraph({rankdir:ne.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel(function(){return{}});let h=r.db.getRequirements(),u=r.db.getElements(),p=r.db.getRelationships();B6(h,l,o),I6(u,l,o),D6(p,l),Hs(l),F6(o,l),p.forEach(function(_){L6(o,_,l,e,r)});const d=ne.rect_padding,g=o.node().getBBox(),y=g.width+d*2,x=g.height+d*2;Ne(o,x,y,ne.useMaxWidth),o.attr("viewBox",`${g.x-d} ${g.y-d} ${y} ${x}`)},N6={draw:R6},O6={parser:a6,db:E6,renderer:N6,styles:v6},P6=Object.freeze(Object.defineProperty({__proto__:null,diagram:O6},Symbol.toStringTag,{value:"Module"}));var ao=function(){var t=function(Q,J,O,at){for(O=O||{},at=Q.length;at--;O[Q[at]]=J);return O},e=[1,2],i=[1,3],r=[1,4],s=[2,4],n=[1,9],a=[1,11],o=[1,13],l=[1,14],h=[1,16],u=[1,17],p=[1,18],d=[1,24],g=[1,25],y=[1,26],x=[1,27],_=[1,28],v=[1,29],E=[1,30],F=[1,31],L=[1,32],T=[1,33],k=[1,34],A=[1,35],S=[1,36],m=[1,37],C=[1,38],f=[1,39],B=[1,41],b=[1,42],P=[1,43],U=[1,44],N=[1,45],w=[1,46],R=[1,4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,47,48,49,50,52,53,54,59,60,61,62,70],D=[4,5,16,50,52,53],V=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,50,52,53,54,59,60,61,62,70],z=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,49,50,52,53,54,59,60,61,62,70],st=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,48,50,52,53,54,59,60,61,62,70],j=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,47,50,52,53,54,59,60,61,62,70],dt=[68,69,70],K=[1,120],G={trace:function(){},yy:{},symbols_:{error:2,start:3,SPACE:4,NEWLINE:5,SD:6,document:7,line:8,statement:9,box_section:10,box_line:11,participant_statement:12,create:13,box:14,restOfLine:15,end:16,signal:17,autonumber:18,NUM:19,off:20,activate:21,actor:22,deactivate:23,note_statement:24,links_statement:25,link_statement:26,properties_statement:27,details_statement:28,title:29,legacy_title:30,acc_title:31,acc_title_value:32,acc_descr:33,acc_descr_value:34,acc_descr_multiline_value:35,loop:36,rect:37,opt:38,alt:39,else_sections:40,par:41,par_sections:42,par_over:43,critical:44,option_sections:45,break:46,option:47,and:48,else:49,participant:50,AS:51,participant_actor:52,destroy:53,note:54,placement:55,text2:56,over:57,actor_pair:58,links:59,link:60,properties:61,details:62,spaceList:63,",":64,left_of:65,right_of:66,signaltype:67,"+":68,"-":69,ACTOR:70,SOLID_OPEN_ARROW:71,DOTTED_OPEN_ARROW:72,SOLID_ARROW:73,DOTTED_ARROW:74,SOLID_CROSS:75,DOTTED_CROSS:76,SOLID_POINT:77,DOTTED_POINT:78,TXT:79,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NEWLINE",6:"SD",13:"create",14:"box",15:"restOfLine",16:"end",18:"autonumber",19:"NUM",20:"off",21:"activate",23:"deactivate",29:"title",30:"legacy_title",31:"acc_title",32:"acc_title_value",33:"acc_descr",34:"acc_descr_value",35:"acc_descr_multiline_value",36:"loop",37:"rect",38:"opt",39:"alt",41:"par",43:"par_over",44:"critical",46:"break",47:"option",48:"and",49:"else",50:"participant",51:"AS",52:"participant_actor",53:"destroy",54:"note",57:"over",59:"links",60:"link",61:"properties",62:"details",64:",",65:"left_of",66:"right_of",68:"+",69:"-",70:"ACTOR",71:"SOLID_OPEN_ARROW",72:"DOTTED_OPEN_ARROW",73:"SOLID_ARROW",74:"DOTTED_ARROW",75:"SOLID_CROSS",76:"DOTTED_CROSS",77:"SOLID_POINT",78:"DOTTED_POINT",79:"TXT"},productions_:[0,[3,2],[3,2],[3,2],[7,0],[7,2],[8,2],[8,1],[8,1],[10,0],[10,2],[11,2],[11,1],[11,1],[9,1],[9,2],[9,4],[9,2],[9,4],[9,3],[9,3],[9,2],[9,3],[9,3],[9,2],[9,2],[9,2],[9,2],[9,2],[9,1],[9,1],[9,2],[9,2],[9,1],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[45,1],[45,4],[42,1],[42,4],[40,1],[40,4],[12,5],[12,3],[12,5],[12,3],[12,3],[24,4],[24,4],[25,3],[26,3],[27,3],[28,3],[63,2],[63,1],[58,3],[58,1],[55,1],[55,1],[17,5],[17,5],[17,4],[22,1],[67,1],[67,1],[67,1],[67,1],[67,1],[67,1],[67,1],[67,1],[56,1]],performAction:function(J,O,at,W,ft,M,wt){var X=M.length-1;switch(ft){case 3:return W.apply(M[X]),M[X];case 4:case 9:this.$=[];break;case 5:case 10:M[X-1].push(M[X]),this.$=M[X-1];break;case 6:case 7:case 11:case 12:this.$=M[X];break;case 8:case 13:this.$=[];break;case 15:M[X].type="createParticipant",this.$=M[X];break;case 16:M[X-1].unshift({type:"boxStart",boxData:W.parseBoxData(M[X-2])}),M[X-1].push({type:"boxEnd",boxText:M[X-2]}),this.$=M[X-1];break;case 18:this.$={type:"sequenceIndex",sequenceIndex:Number(M[X-2]),sequenceIndexStep:Number(M[X-1]),sequenceVisible:!0,signalType:W.LINETYPE.AUTONUMBER};break;case 19:this.$={type:"sequenceIndex",sequenceIndex:Number(M[X-1]),sequenceIndexStep:1,sequenceVisible:!0,signalType:W.LINETYPE.AUTONUMBER};break;case 20:this.$={type:"sequenceIndex",sequenceVisible:!1,signalType:W.LINETYPE.AUTONUMBER};break;case 21:this.$={type:"sequenceIndex",sequenceVisible:!0,signalType:W.LINETYPE.AUTONUMBER};break;case 22:this.$={type:"activeStart",signalType:W.LINETYPE.ACTIVE_START,actor:M[X-1]};break;case 23:this.$={type:"activeEnd",signalType:W.LINETYPE.ACTIVE_END,actor:M[X-1]};break;case 29:W.setDiagramTitle(M[X].substring(6)),this.$=M[X].substring(6);break;case 30:W.setDiagramTitle(M[X].substring(7)),this.$=M[X].substring(7);break;case 31:this.$=M[X].trim(),W.setAccTitle(this.$);break;case 32:case 33:this.$=M[X].trim(),W.setAccDescription(this.$);break;case 34:M[X-1].unshift({type:"loopStart",loopText:W.parseMessage(M[X-2]),signalType:W.LINETYPE.LOOP_START}),M[X-1].push({type:"loopEnd",loopText:M[X-2],signalType:W.LINETYPE.LOOP_END}),this.$=M[X-1];break;case 35:M[X-1].unshift({type:"rectStart",color:W.parseMessage(M[X-2]),signalType:W.LINETYPE.RECT_START}),M[X-1].push({type:"rectEnd",color:W.parseMessage(M[X-2]),signalType:W.LINETYPE.RECT_END}),this.$=M[X-1];break;case 36:M[X-1].unshift({type:"optStart",optText:W.parseMessage(M[X-2]),signalType:W.LINETYPE.OPT_START}),M[X-1].push({type:"optEnd",optText:W.parseMessage(M[X-2]),signalType:W.LINETYPE.OPT_END}),this.$=M[X-1];break;case 37:M[X-1].unshift({type:"altStart",altText:W.parseMessage(M[X-2]),signalType:W.LINETYPE.ALT_START}),M[X-1].push({type:"altEnd",signalType:W.LINETYPE.ALT_END}),this.$=M[X-1];break;case 38:M[X-1].unshift({type:"parStart",parText:W.parseMessage(M[X-2]),signalType:W.LINETYPE.PAR_START}),M[X-1].push({type:"parEnd",signalType:W.LINETYPE.PAR_END}),this.$=M[X-1];break;case 39:M[X-1].unshift({type:"parStart",parText:W.parseMessage(M[X-2]),signalType:W.LINETYPE.PAR_OVER_START}),M[X-1].push({type:"parEnd",signalType:W.LINETYPE.PAR_END}),this.$=M[X-1];break;case 40:M[X-1].unshift({type:"criticalStart",criticalText:W.parseMessage(M[X-2]),signalType:W.LINETYPE.CRITICAL_START}),M[X-1].push({type:"criticalEnd",signalType:W.LINETYPE.CRITICAL_END}),this.$=M[X-1];break;case 41:M[X-1].unshift({type:"breakStart",breakText:W.parseMessage(M[X-2]),signalType:W.LINETYPE.BREAK_START}),M[X-1].push({type:"breakEnd",optText:W.parseMessage(M[X-2]),signalType:W.LINETYPE.BREAK_END}),this.$=M[X-1];break;case 43:this.$=M[X-3].concat([{type:"option",optionText:W.parseMessage(M[X-1]),signalType:W.LINETYPE.CRITICAL_OPTION},M[X]]);break;case 45:this.$=M[X-3].concat([{type:"and",parText:W.parseMessage(M[X-1]),signalType:W.LINETYPE.PAR_AND},M[X]]);break;case 47:this.$=M[X-3].concat([{type:"else",altText:W.parseMessage(M[X-1]),signalType:W.LINETYPE.ALT_ELSE},M[X]]);break;case 48:M[X-3].draw="participant",M[X-3].type="addParticipant",M[X-3].description=W.parseMessage(M[X-1]),this.$=M[X-3];break;case 49:M[X-1].draw="participant",M[X-1].type="addParticipant",this.$=M[X-1];break;case 50:M[X-3].draw="actor",M[X-3].type="addParticipant",M[X-3].description=W.parseMessage(M[X-1]),this.$=M[X-3];break;case 51:M[X-1].draw="actor",M[X-1].type="addParticipant",this.$=M[X-1];break;case 52:M[X-1].type="destroyParticipant",this.$=M[X-1];break;case 53:this.$=[M[X-1],{type:"addNote",placement:M[X-2],actor:M[X-1].actor,text:M[X]}];break;case 54:M[X-2]=[].concat(M[X-1],M[X-1]).slice(0,2),M[X-2][0]=M[X-2][0].actor,M[X-2][1]=M[X-2][1].actor,this.$=[M[X-1],{type:"addNote",placement:W.PLACEMENT.OVER,actor:M[X-2].slice(0,2),text:M[X]}];break;case 55:this.$=[M[X-1],{type:"addLinks",actor:M[X-1].actor,text:M[X]}];break;case 56:this.$=[M[X-1],{type:"addALink",actor:M[X-1].actor,text:M[X]}];break;case 57:this.$=[M[X-1],{type:"addProperties",actor:M[X-1].actor,text:M[X]}];break;case 58:this.$=[M[X-1],{type:"addDetails",actor:M[X-1].actor,text:M[X]}];break;case 61:this.$=[M[X-2],M[X]];break;case 62:this.$=M[X];break;case 63:this.$=W.PLACEMENT.LEFTOF;break;case 64:this.$=W.PLACEMENT.RIGHTOF;break;case 65:this.$=[M[X-4],M[X-1],{type:"addMessage",from:M[X-4].actor,to:M[X-1].actor,signalType:M[X-3],msg:M[X],activate:!0},{type:"activeStart",signalType:W.LINETYPE.ACTIVE_START,actor:M[X-1]}];break;case 66:this.$=[M[X-4],M[X-1],{type:"addMessage",from:M[X-4].actor,to:M[X-1].actor,signalType:M[X-3],msg:M[X]},{type:"activeEnd",signalType:W.LINETYPE.ACTIVE_END,actor:M[X-4]}];break;case 67:this.$=[M[X-3],M[X-1],{type:"addMessage",from:M[X-3].actor,to:M[X-1].actor,signalType:M[X-2],msg:M[X]}];break;case 68:this.$={type:"addParticipant",actor:M[X]};break;case 69:this.$=W.LINETYPE.SOLID_OPEN;break;case 70:this.$=W.LINETYPE.DOTTED_OPEN;break;case 71:this.$=W.LINETYPE.SOLID;break;case 72:this.$=W.LINETYPE.DOTTED;break;case 73:this.$=W.LINETYPE.SOLID_CROSS;break;case 74:this.$=W.LINETYPE.DOTTED_CROSS;break;case 75:this.$=W.LINETYPE.SOLID_POINT;break;case 76:this.$=W.LINETYPE.DOTTED_POINT;break;case 77:this.$=W.parseMessage(M[X].trim().substring(1));break}},table:[{3:1,4:e,5:i,6:r},{1:[3]},{3:5,4:e,5:i,6:r},{3:6,4:e,5:i,6:r},t([1,4,5,13,14,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,50,52,53,54,59,60,61,62,70],s,{7:7}),{1:[2,1]},{1:[2,2]},{1:[2,3],4:n,5:a,8:8,9:10,12:12,13:o,14:l,17:15,18:h,21:u,22:40,23:p,24:19,25:20,26:21,27:22,28:23,29:d,30:g,31:y,33:x,35:_,36:v,37:E,38:F,39:L,41:T,43:k,44:A,46:S,50:m,52:C,53:f,54:B,59:b,60:P,61:U,62:N,70:w},t(R,[2,5]),{9:47,12:12,13:o,14:l,17:15,18:h,21:u,22:40,23:p,24:19,25:20,26:21,27:22,28:23,29:d,30:g,31:y,33:x,35:_,36:v,37:E,38:F,39:L,41:T,43:k,44:A,46:S,50:m,52:C,53:f,54:B,59:b,60:P,61:U,62:N,70:w},t(R,[2,7]),t(R,[2,8]),t(R,[2,14]),{12:48,50:m,52:C,53:f},{15:[1,49]},{5:[1,50]},{5:[1,53],19:[1,51],20:[1,52]},{22:54,70:w},{22:55,70:w},{5:[1,56]},{5:[1,57]},{5:[1,58]},{5:[1,59]},{5:[1,60]},t(R,[2,29]),t(R,[2,30]),{32:[1,61]},{34:[1,62]},t(R,[2,33]),{15:[1,63]},{15:[1,64]},{15:[1,65]},{15:[1,66]},{15:[1,67]},{15:[1,68]},{15:[1,69]},{15:[1,70]},{22:71,70:w},{22:72,70:w},{22:73,70:w},{67:74,71:[1,75],72:[1,76],73:[1,77],74:[1,78],75:[1,79],76:[1,80],77:[1,81],78:[1,82]},{55:83,57:[1,84],65:[1,85],66:[1,86]},{22:87,70:w},{22:88,70:w},{22:89,70:w},{22:90,70:w},t([5,51,64,71,72,73,74,75,76,77,78,79],[2,68]),t(R,[2,6]),t(R,[2,15]),t(D,[2,9],{10:91}),t(R,[2,17]),{5:[1,93],19:[1,92]},{5:[1,94]},t(R,[2,21]),{5:[1,95]},{5:[1,96]},t(R,[2,24]),t(R,[2,25]),t(R,[2,26]),t(R,[2,27]),t(R,[2,28]),t(R,[2,31]),t(R,[2,32]),t(V,s,{7:97}),t(V,s,{7:98}),t(V,s,{7:99}),t(z,s,{40:100,7:101}),t(st,s,{42:102,7:103}),t(st,s,{7:103,42:104}),t(j,s,{45:105,7:106}),t(V,s,{7:107}),{5:[1,109],51:[1,108]},{5:[1,111],51:[1,110]},{5:[1,112]},{22:115,68:[1,113],69:[1,114],70:w},t(dt,[2,69]),t(dt,[2,70]),t(dt,[2,71]),t(dt,[2,72]),t(dt,[2,73]),t(dt,[2,74]),t(dt,[2,75]),t(dt,[2,76]),{22:116,70:w},{22:118,58:117,70:w},{70:[2,63]},{70:[2,64]},{56:119,79:K},{56:121,79:K},{56:122,79:K},{56:123,79:K},{4:[1,126],5:[1,128],11:125,12:127,16:[1,124],50:m,52:C,53:f},{5:[1,129]},t(R,[2,19]),t(R,[2,20]),t(R,[2,22]),t(R,[2,23]),{4:n,5:a,8:8,9:10,12:12,13:o,14:l,16:[1,130],17:15,18:h,21:u,22:40,23:p,24:19,25:20,26:21,27:22,28:23,29:d,30:g,31:y,33:x,35:_,36:v,37:E,38:F,39:L,41:T,43:k,44:A,46:S,50:m,52:C,53:f,54:B,59:b,60:P,61:U,62:N,70:w},{4:n,5:a,8:8,9:10,12:12,13:o,14:l,16:[1,131],17:15,18:h,21:u,22:40,23:p,24:19,25:20,26:21,27:22,28:23,29:d,30:g,31:y,33:x,35:_,36:v,37:E,38:F,39:L,41:T,43:k,44:A,46:S,50:m,52:C,53:f,54:B,59:b,60:P,61:U,62:N,70:w},{4:n,5:a,8:8,9:10,12:12,13:o,14:l,16:[1,132],17:15,18:h,21:u,22:40,23:p,24:19,25:20,26:21,27:22,28:23,29:d,30:g,31:y,33:x,35:_,36:v,37:E,38:F,39:L,41:T,43:k,44:A,46:S,50:m,52:C,53:f,54:B,59:b,60:P,61:U,62:N,70:w},{16:[1,133]},{4:n,5:a,8:8,9:10,12:12,13:o,14:l,16:[2,46],17:15,18:h,21:u,22:40,23:p,24:19,25:20,26:21,27:22,28:23,29:d,30:g,31:y,33:x,35:_,36:v,37:E,38:F,39:L,41:T,43:k,44:A,46:S,49:[1,134],50:m,52:C,53:f,54:B,59:b,60:P,61:U,62:N,70:w},{16:[1,135]},{4:n,5:a,8:8,9:10,12:12,13:o,14:l,16:[2,44],17:15,18:h,21:u,22:40,23:p,24:19,25:20,26:21,27:22,28:23,29:d,30:g,31:y,33:x,35:_,36:v,37:E,38:F,39:L,41:T,43:k,44:A,46:S,48:[1,136],50:m,52:C,53:f,54:B,59:b,60:P,61:U,62:N,70:w},{16:[1,137]},{16:[1,138]},{4:n,5:a,8:8,9:10,12:12,13:o,14:l,16:[2,42],17:15,18:h,21:u,22:40,23:p,24:19,25:20,26:21,27:22,28:23,29:d,30:g,31:y,33:x,35:_,36:v,37:E,38:F,39:L,41:T,43:k,44:A,46:S,47:[1,139],50:m,52:C,53:f,54:B,59:b,60:P,61:U,62:N,70:w},{4:n,5:a,8:8,9:10,12:12,13:o,14:l,16:[1,140],17:15,18:h,21:u,22:40,23:p,24:19,25:20,26:21,27:22,28:23,29:d,30:g,31:y,33:x,35:_,36:v,37:E,38:F,39:L,41:T,43:k,44:A,46:S,50:m,52:C,53:f,54:B,59:b,60:P,61:U,62:N,70:w},{15:[1,141]},t(R,[2,49]),{15:[1,142]},t(R,[2,51]),t(R,[2,52]),{22:143,70:w},{22:144,70:w},{56:145,79:K},{56:146,79:K},{56:147,79:K},{64:[1,148],79:[2,62]},{5:[2,55]},{5:[2,77]},{5:[2,56]},{5:[2,57]},{5:[2,58]},t(R,[2,16]),t(D,[2,10]),{12:149,50:m,52:C,53:f},t(D,[2,12]),t(D,[2,13]),t(R,[2,18]),t(R,[2,34]),t(R,[2,35]),t(R,[2,36]),t(R,[2,37]),{15:[1,150]},t(R,[2,38]),{15:[1,151]},t(R,[2,39]),t(R,[2,40]),{15:[1,152]},t(R,[2,41]),{5:[1,153]},{5:[1,154]},{56:155,79:K},{56:156,79:K},{5:[2,67]},{5:[2,53]},{5:[2,54]},{22:157,70:w},t(D,[2,11]),t(z,s,{7:101,40:158}),t(st,s,{7:103,42:159}),t(j,s,{7:106,45:160}),t(R,[2,48]),t(R,[2,50]),{5:[2,65]},{5:[2,66]},{79:[2,61]},{16:[2,47]},{16:[2,45]},{16:[2,43]}],defaultActions:{5:[2,1],6:[2,2],85:[2,63],86:[2,64],119:[2,55],120:[2,77],121:[2,56],122:[2,57],123:[2,58],145:[2,67],146:[2,53],147:[2,54],155:[2,65],156:[2,66],157:[2,61],158:[2,47],159:[2,45],160:[2,43]},parseError:function(J,O){if(O.recoverable)this.trace(J);else{var at=new Error(J);throw at.hash=O,at}},parse:function(J){var O=this,at=[0],W=[],ft=[null],M=[],wt=this.table,X="",St=0,bt=0,Vt=2,Bt=1,Wt=M.slice.call(arguments,1),pt=Object.create(this.lexer),ut={yy:{}};for(var ot in this.yy)Object.prototype.hasOwnProperty.call(this.yy,ot)&&(ut.yy[ot]=this.yy[ot]);pt.setInput(J,ut.yy),ut.yy.lexer=pt,ut.yy.parser=this,typeof pt.yylloc>"u"&&(pt.yylloc={});var lt=pt.yylloc;M.push(lt);var ht=pt.options&&pt.options.ranges;typeof ut.yy.parseError=="function"?this.parseError=ut.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function $(){var fe;return fe=W.pop()||pt.lex()||Bt,typeof fe!="number"&&(fe instanceof Array&&(W=fe,fe=W.pop()),fe=O.symbols_[fe]||fe),fe}for(var rt,it,ct,ee,Qt={},de,zt,Gt,qt;;){if(it=at[at.length-1],this.defaultActions[it]?ct=this.defaultActions[it]:((rt===null||typeof rt>"u")&&(rt=$()),ct=wt[it]&&wt[it][rt]),typeof ct>"u"||!ct.length||!ct[0]){var Se="";qt=[];for(de in wt[it])this.terminals_[de]&&de>Vt&&qt.push("'"+this.terminals_[de]+"'");pt.showPosition?Se="Parse error on line "+(St+1)+`:
`+pt.showPosition()+`
Expecting `+qt.join(", ")+", got '"+(this.terminals_[rt]||rt)+"'":Se="Parse error on line "+(St+1)+": Unexpected "+(rt==Bt?"end of input":"'"+(this.terminals_[rt]||rt)+"'"),this.parseError(Se,{text:pt.match,token:this.terminals_[rt]||rt,line:pt.yylineno,loc:lt,expected:qt})}if(ct[0]instanceof Array&&ct.length>1)throw new Error("Parse Error: multiple actions possible at state: "+it+", token: "+rt);switch(ct[0]){case 1:at.push(rt),ft.push(pt.yytext),M.push(pt.yylloc),at.push(ct[1]),rt=null,bt=pt.yyleng,X=pt.yytext,St=pt.yylineno,lt=pt.yylloc;break;case 2:if(zt=this.productions_[ct[1]][1],Qt.$=ft[ft.length-zt],Qt._$={first_line:M[M.length-(zt||1)].first_line,last_line:M[M.length-1].last_line,first_column:M[M.length-(zt||1)].first_column,last_column:M[M.length-1].last_column},ht&&(Qt._$.range=[M[M.length-(zt||1)].range[0],M[M.length-1].range[1]]),ee=this.performAction.apply(Qt,[X,bt,St,ut.yy,ct[1],ft,M].concat(Wt)),typeof ee<"u")return ee;zt&&(at=at.slice(0,-1*zt*2),ft=ft.slice(0,-1*zt),M=M.slice(0,-1*zt)),at.push(this.productions_[ct[1]][0]),ft.push(Qt.$),M.push(Qt._$),Gt=wt[at[at.length-2]][at[at.length-1]],at.push(Gt);break;case 3:return!0}}return!0}},tt=function(){var Q={EOF:1,parseError:function(O,at){if(this.yy.parser)this.yy.parser.parseError(O,at);else throw new Error(O)},setInput:function(J,O){return this.yy=O||this.yy||{},this._input=J,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var J=this._input[0];this.yytext+=J,this.yyleng++,this.offset++,this.match+=J,this.matched+=J;var O=J.match(/(?:\r\n?|\n).*/g);return O?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),J},unput:function(J){var O=J.length,at=J.split(/(?:\r\n?|\n)/g);this._input=J+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-O),this.offset-=O;var W=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),at.length-1&&(this.yylineno-=at.length-1);var ft=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:at?(at.length===W.length?this.yylloc.first_column:0)+W[W.length-at.length].length-at[0].length:this.yylloc.first_column-O},this.options.ranges&&(this.yylloc.range=[ft[0],ft[0]+this.yyleng-O]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(J){this.unput(this.match.slice(J))},pastInput:function(){var J=this.matched.substr(0,this.matched.length-this.match.length);return(J.length>20?"...":"")+J.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var J=this.match;return J.length<20&&(J+=this._input.substr(0,20-J.length)),(J.substr(0,20)+(J.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var J=this.pastInput(),O=new Array(J.length+1).join("-");return J+this.upcomingInput()+`
`+O+"^"},test_match:function(J,O){var at,W,ft;if(this.options.backtrack_lexer&&(ft={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(ft.yylloc.range=this.yylloc.range.slice(0))),W=J[0].match(/(?:\r\n?|\n).*/g),W&&(this.yylineno+=W.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:W?W[W.length-1].length-W[W.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+J[0].length},this.yytext+=J[0],this.match+=J[0],this.matches=J,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(J[0].length),this.matched+=J[0],at=this.performAction.call(this,this.yy,this,O,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),at)return at;if(this._backtrack){for(var M in ft)this[M]=ft[M];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var J,O,at,W;this._more||(this.yytext="",this.match="");for(var ft=this._currentRules(),M=0;M<ft.length;M++)if(at=this._input.match(this.rules[ft[M]]),at&&(!O||at[0].length>O[0].length)){if(O=at,W=M,this.options.backtrack_lexer){if(J=this.test_match(at,ft[M]),J!==!1)return J;if(this._backtrack){O=!1;continue}else return!1}else if(!this.options.flex)break}return O?(J=this.test_match(O,ft[W]),J!==!1?J:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var O=this.next();return O||this.lex()},begin:function(O){this.conditionStack.push(O)},popState:function(){var O=this.conditionStack.length-1;return O>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(O){return O=this.conditionStack.length-1-Math.abs(O||0),O>=0?this.conditionStack[O]:"INITIAL"},pushState:function(O){this.begin(O)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(O,at,W,ft){switch(W){case 0:return 5;case 1:break;case 2:break;case 3:break;case 4:break;case 5:break;case 6:return 19;case 7:return this.begin("LINE"),14;case 8:return this.begin("ID"),50;case 9:return this.begin("ID"),52;case 10:return 13;case 11:return this.begin("ID"),53;case 12:return at.yytext=at.yytext.trim(),this.begin("ALIAS"),70;case 13:return this.popState(),this.popState(),this.begin("LINE"),51;case 14:return this.popState(),this.popState(),5;case 15:return this.begin("LINE"),36;case 16:return this.begin("LINE"),37;case 17:return this.begin("LINE"),38;case 18:return this.begin("LINE"),39;case 19:return this.begin("LINE"),49;case 20:return this.begin("LINE"),41;case 21:return this.begin("LINE"),43;case 22:return this.begin("LINE"),48;case 23:return this.begin("LINE"),44;case 24:return this.begin("LINE"),47;case 25:return this.begin("LINE"),46;case 26:return this.popState(),15;case 27:return 16;case 28:return 65;case 29:return 66;case 30:return 59;case 31:return 60;case 32:return 61;case 33:return 62;case 34:return 57;case 35:return 54;case 36:return this.begin("ID"),21;case 37:return this.begin("ID"),23;case 38:return 29;case 39:return 30;case 40:return this.begin("acc_title"),31;case 41:return this.popState(),"acc_title_value";case 42:return this.begin("acc_descr"),33;case 43:return this.popState(),"acc_descr_value";case 44:this.begin("acc_descr_multiline");break;case 45:this.popState();break;case 46:return"acc_descr_multiline_value";case 47:return 6;case 48:return 18;case 49:return 20;case 50:return 64;case 51:return 5;case 52:return at.yytext=at.yytext.trim(),70;case 53:return 73;case 54:return 74;case 55:return 71;case 56:return 72;case 57:return 75;case 58:return 76;case 59:return 77;case 60:return 78;case 61:return 79;case 62:return 68;case 63:return 69;case 64:return 5;case 65:return"INVALID"}},rules:[/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[0-9]+(?=[ \n]+))/i,/^(?:box\b)/i,/^(?:participant\b)/i,/^(?:actor\b)/i,/^(?:create\b)/i,/^(?:destroy\b)/i,/^(?:[^\->:\n,;]+?([\-]*[^\->:\n,;]+?)*?(?=((?!\n)\s)+as(?!\n)\s|[#\n;]|$))/i,/^(?:as\b)/i,/^(?:(?:))/i,/^(?:loop\b)/i,/^(?:rect\b)/i,/^(?:opt\b)/i,/^(?:alt\b)/i,/^(?:else\b)/i,/^(?:par\b)/i,/^(?:par_over\b)/i,/^(?:and\b)/i,/^(?:critical\b)/i,/^(?:option\b)/i,/^(?:break\b)/i,/^(?:(?:[:]?(?:no)?wrap)?[^#\n;]*)/i,/^(?:end\b)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:links\b)/i,/^(?:link\b)/i,/^(?:properties\b)/i,/^(?:details\b)/i,/^(?:over\b)/i,/^(?:note\b)/i,/^(?:activate\b)/i,/^(?:deactivate\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:title:\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:sequenceDiagram\b)/i,/^(?:autonumber\b)/i,/^(?:off\b)/i,/^(?:,)/i,/^(?:;)/i,/^(?:[^\+\->:\n,;]+((?!(-x|--x|-\)|--\)))[\-]*[^\+\->:\n,;]+)*)/i,/^(?:->>)/i,/^(?:-->>)/i,/^(?:->)/i,/^(?:-->)/i,/^(?:-[x])/i,/^(?:--[x])/i,/^(?:-[\)])/i,/^(?:--[\)])/i,/^(?::(?:(?:no)?wrap)?[^#\n;]+)/i,/^(?:\+)/i,/^(?:-)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[45,46],inclusive:!1},acc_descr:{rules:[43],inclusive:!1},acc_title:{rules:[41],inclusive:!1},ID:{rules:[2,3,12],inclusive:!1},ALIAS:{rules:[2,3,13,14],inclusive:!1},LINE:{rules:[2,3,26],inclusive:!1},INITIAL:{rules:[0,1,3,4,5,6,7,8,9,10,11,15,16,17,18,19,20,21,22,23,24,25,27,28,29,30,31,32,33,34,35,36,37,38,39,40,42,44,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65],inclusive:!0}}};return Q}();G.lexer=tt;function nt(){this.yy={}}return nt.prototype=G,G.Parser=nt,new nt}();ao.parser=ao;const M6=ao;class V6{constructor(e){this.init=e,this.records=this.init()}reset(){this.records=this.init()}}const _t=new V6(()=>({prevActor:void 0,actors:{},createdActors:{},destroyedActors:{},boxes:[],messages:[],notes:[],sequenceNumbersEnabled:!1,wrapEnabled:void 0,currentBox:void 0,lastCreated:void 0,lastDestroyed:void 0})),z6=function(t){_t.records.boxes.push({name:t.text,wrap:t.wrap===void 0&&wr()||!!t.wrap,fill:t.color,actorKeys:[]}),_t.records.currentBox=_t.records.boxes.slice(-1)[0]},oo=function(t,e,i,r){let s=_t.records.currentBox;const n=_t.records.actors[t];if(n){if(_t.records.currentBox&&n.box&&_t.records.currentBox!==n.box)throw new Error("A same participant should only be defined in one Box: "+n.name+" can't be in '"+n.box.name+"' and in '"+_t.records.currentBox.name+"' at the same time.");if(s=n.box?n.box:_t.records.currentBox,n.box=s,n&&e===n.name&&i==null)return}(i==null||i.text==null)&&(i={text:e,wrap:null,type:r}),(r==null||i.text==null)&&(i={text:e,wrap:null,type:r}),_t.records.actors[t]={box:s,name:e,description:i.text,wrap:i.wrap===void 0&&wr()||!!i.wrap,prevActor:_t.records.prevActor,links:{},properties:{},actorCnt:null,rectData:null,type:r||"participant"},_t.records.prevActor&&_t.records.actors[_t.records.prevActor]&&(_t.records.actors[_t.records.prevActor].nextActor=t),_t.records.currentBox&&_t.records.currentBox.actorKeys.push(t),_t.records.prevActor=t},q6=t=>{let e,i=0;for(e=0;e<_t.records.messages.length;e++)_t.records.messages[e].type===Ms.ACTIVE_START&&_t.records.messages[e].from.actor===t&&i++,_t.records.messages[e].type===Ms.ACTIVE_END&&_t.records.messages[e].from.actor===t&&i--;return i},W6=function(t,e,i,r){_t.records.messages.push({from:t,to:e,message:i.text,wrap:i.wrap===void 0&&wr()||!!i.wrap,answer:r})},oe=function(t,e,i={text:void 0,wrap:void 0},r,s=!1){if(r===Ms.ACTIVE_END&&q6(t.actor)<1){let a=new Error("Trying to inactivate an inactive participant ("+t.actor+")");throw a.hash={text:"->>-",token:"->>-",line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["'ACTIVE_PARTICIPANT'"]},a}return _t.records.messages.push({from:t,to:e,message:i.text,wrap:i.wrap===void 0&&wr()||!!i.wrap,type:r,activate:s}),!0},Y6=function(){return _t.records.boxes.length>0},U6=function(){return _t.records.boxes.some(t=>t.name)},H6=function(){return _t.records.messages},G6=function(){return _t.records.boxes},j6=function(){return _t.records.actors},X6=function(){return _t.records.createdActors},$6=function(){return _t.records.destroyedActors},en=function(t){return _t.records.actors[t]},K6=function(){return Object.keys(_t.records.actors)},Q6=function(){_t.records.sequenceNumbersEnabled=!0},Z6=function(){_t.records.sequenceNumbersEnabled=!1},J6=()=>_t.records.sequenceNumbersEnabled,t_=function(t){_t.records.wrapEnabled=t},wr=()=>_t.records.wrapEnabled!==void 0?_t.records.wrapEnabled:Y().sequence.wrap,e_=function(){_t.reset(),Oe()},i_=function(t){const e=t.trim(),i={text:e.replace(/^:?(?:no)?wrap:/,"").trim(),wrap:e.match(/^:?wrap:/)!==null?!0:e.match(/^:?nowrap:/)!==null?!1:void 0};return I.debug("parseMessage:",i),i},r_=function(t){const e=t.match(/^((?:rgba?|hsla?)\s*\(.*\)|\w*)(.*)$/);let i=e!=null&&e[1]?e[1].trim():"transparent",r=e!=null&&e[2]?e[2].trim():void 0;if(window&&window.CSS)window.CSS.supports("color",i)||(i="transparent",r=t.trim());else{const s=new Option().style;s.color=i,s.color!==i&&(i="transparent",r=t.trim())}return{color:i,text:r!==void 0?ue(r.replace(/^:?(?:no)?wrap:/,""),Y()):void 0,wrap:r!==void 0?r.match(/^:?wrap:/)!==null?!0:r.match(/^:?nowrap:/)!==null?!1:void 0:void 0}},Ms={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25,AUTONUMBER:26,CRITICAL_START:27,CRITICAL_OPTION:28,CRITICAL_END:29,BREAK_START:30,BREAK_END:31,PAR_OVER_START:32},s_={FILLED:0,OPEN:1},n_={LEFTOF:0,RIGHTOF:1,OVER:2},C0=function(t,e,i){const r={actor:t,placement:e,message:i.text,wrap:i.wrap===void 0&&wr()||!!i.wrap},s=[].concat(t,t);_t.records.notes.push(r),_t.records.messages.push({from:s[0],to:s[1],message:i.text,wrap:i.wrap===void 0&&wr()||!!i.wrap,type:Ms.NOTE,placement:e})},E0=function(t,e){const i=en(t);try{let r=ue(e.text,Y());r=r.replace(/&amp;/g,"&"),r=r.replace(/&equals;/g,"=");const s=JSON.parse(r);gl(i,s)}catch(r){I.error("error while parsing actor link text",r)}},a_=function(t,e){const i=en(t);try{const a={};let o=ue(e.text,Y());var r=o.indexOf("@");o=o.replace(/&amp;/g,"&"),o=o.replace(/&equals;/g,"=");var s=o.slice(0,r-1).trim(),n=o.slice(r+1).trim();a[s]=n,gl(i,a)}catch(a){I.error("error while parsing actor link text",a)}};function gl(t,e){if(t.links==null)t.links=e;else for(let i in e)t.links[i]=e[i]}const S0=function(t,e){const i=en(t);try{let r=ue(e.text,Y());const s=JSON.parse(r);v0(i,s)}catch(r){I.error("error while parsing actor properties text",r)}};function v0(t,e){if(t.properties==null)t.properties=e;else for(let i in e)t.properties[i]=e[i]}function o_(){_t.records.currentBox=void 0}const w0=function(t,e){const i=en(t),r=document.getElementById(e.text);try{const s=r.innerHTML,n=JSON.parse(s);n.properties&&v0(i,n.properties),n.links&&gl(i,n.links)}catch(s){I.error("error while parsing actor details text",s)}},l_=function(t,e){if(t!==void 0&&t.properties!==void 0)return t.properties[e]},A0=function(t){if(Array.isArray(t))t.forEach(function(e){A0(e)});else switch(t.type){case"sequenceIndex":_t.records.messages.push({from:void 0,to:void 0,message:{start:t.sequenceIndex,step:t.sequenceIndexStep,visible:t.sequenceVisible},wrap:!1,type:t.signalType});break;case"addParticipant":oo(t.actor,t.actor,t.description,t.draw);break;case"createParticipant":if(_t.records.actors[t.actor])throw new Error("It is not possible to have actors with the same id, even if one is destroyed before the next is created. Use 'AS' aliases to simulate the behavior");_t.records.lastCreated=t.actor,oo(t.actor,t.actor,t.description,t.draw),_t.records.createdActors[t.actor]=_t.records.messages.length;break;case"destroyParticipant":_t.records.lastDestroyed=t.actor,_t.records.destroyedActors[t.actor]=_t.records.messages.length;break;case"activeStart":oe(t.actor,void 0,void 0,t.signalType);break;case"activeEnd":oe(t.actor,void 0,void 0,t.signalType);break;case"addNote":C0(t.actor,t.placement,t.text);break;case"addLinks":E0(t.actor,t.text);break;case"addALink":a_(t.actor,t.text);break;case"addProperties":S0(t.actor,t.text);break;case"addDetails":w0(t.actor,t.text);break;case"addMessage":if(_t.records.lastCreated){if(t.to!==_t.records.lastCreated)throw new Error("The created participant "+_t.records.lastCreated+" does not have an associated creating message after its declaration. Please check the sequence diagram.");_t.records.lastCreated=void 0}else if(_t.records.lastDestroyed){if(t.to!==_t.records.lastDestroyed&&t.from!==_t.records.lastDestroyed)throw new Error("The destroyed participant "+_t.records.lastDestroyed+" does not have an associated destroying message after its declaration. Please check the sequence diagram.");_t.records.lastDestroyed=void 0}oe(t.from,t.to,t.msg,t.signalType,t.activate);break;case"boxStart":z6(t.boxData);break;case"boxEnd":o_();break;case"loopStart":oe(void 0,void 0,t.loopText,t.signalType);break;case"loopEnd":oe(void 0,void 0,void 0,t.signalType);break;case"rectStart":oe(void 0,void 0,t.color,t.signalType);break;case"rectEnd":oe(void 0,void 0,void 0,t.signalType);break;case"optStart":oe(void 0,void 0,t.optText,t.signalType);break;case"optEnd":oe(void 0,void 0,void 0,t.signalType);break;case"altStart":oe(void 0,void 0,t.altText,t.signalType);break;case"else":oe(void 0,void 0,t.altText,t.signalType);break;case"altEnd":oe(void 0,void 0,void 0,t.signalType);break;case"setAccTitle":Pe(t.text);break;case"parStart":oe(void 0,void 0,t.parText,t.signalType);break;case"and":oe(void 0,void 0,t.parText,t.signalType);break;case"parEnd":oe(void 0,void 0,void 0,t.signalType);break;case"criticalStart":oe(void 0,void 0,t.criticalText,t.signalType);break;case"option":oe(void 0,void 0,t.optionText,t.signalType);break;case"criticalEnd":oe(void 0,void 0,void 0,t.signalType);break;case"breakStart":oe(void 0,void 0,t.breakText,t.signalType);break;case"breakEnd":oe(void 0,void 0,void 0,t.signalType);break}},Bc={addActor:oo,addMessage:W6,addSignal:oe,addLinks:E0,addDetails:w0,addProperties:S0,autoWrap:wr,setWrap:t_,enableSequenceNumbers:Q6,disableSequenceNumbers:Z6,showSequenceNumbers:J6,getMessages:H6,getActors:j6,getCreatedActors:X6,getDestroyedActors:$6,getActor:en,getActorKeys:K6,getActorProperty:l_,getAccTitle:Ye,getBoxes:G6,getDiagramTitle:Ge,setDiagramTitle:ri,getConfig:()=>Y().sequence,clear:e_,parseMessage:i_,parseBoxData:r_,LINETYPE:Ms,ARROWTYPE:s_,PLACEMENT:n_,addNote:C0,setAccTitle:Pe,apply:A0,setAccDescription:Ue,getAccDescription:He,hasAtLeastOneBox:Y6,hasAtLeastOneBoxWithTitle:U6},c_=t=>`.actor {
    stroke: ${t.actorBorder};
    fill: ${t.actorBkg};
  }

  text.actor > tspan {
    fill: ${t.actorTextColor};
    stroke: none;
  }

  .actor-line {
    stroke: ${t.actorLineColor};
  }

  .messageLine0 {
    stroke-width: 1.5;
    stroke-dasharray: none;
    stroke: ${t.signalColor};
  }

  .messageLine1 {
    stroke-width: 1.5;
    stroke-dasharray: 2, 2;
    stroke: ${t.signalColor};
  }

  #arrowhead path {
    fill: ${t.signalColor};
    stroke: ${t.signalColor};
  }

  .sequenceNumber {
    fill: ${t.sequenceNumberColor};
  }

  #sequencenumber {
    fill: ${t.signalColor};
  }

  #crosshead path {
    fill: ${t.signalColor};
    stroke: ${t.signalColor};
  }

  .messageText {
    fill: ${t.signalTextColor};
    stroke: none;
  }

  .labelBox {
    stroke: ${t.labelBoxBorderColor};
    fill: ${t.labelBoxBkgColor};
  }

  .labelText, .labelText > tspan {
    fill: ${t.labelTextColor};
    stroke: none;
  }

  .loopText, .loopText > tspan {
    fill: ${t.loopTextColor};
    stroke: none;
  }

  .loopLine {
    stroke-width: 2px;
    stroke-dasharray: 2, 2;
    stroke: ${t.labelBoxBorderColor};
    fill: ${t.labelBoxBorderColor};
  }

  .note {
    //stroke: #decc93;
    stroke: ${t.noteBorderColor};
    fill: ${t.noteBkgColor};
  }

  .noteText, .noteText > tspan {
    fill: ${t.noteTextColor};
    stroke: none;
  }

  .activation0 {
    fill: ${t.activationBkgColor};
    stroke: ${t.activationBorderColor};
  }

  .activation1 {
    fill: ${t.activationBkgColor};
    stroke: ${t.activationBorderColor};
  }

  .activation2 {
    fill: ${t.activationBkgColor};
    stroke: ${t.activationBorderColor};
  }

  .actorPopupMenu {
    position: absolute;
  }

  .actorPopupMenuPanel {
    position: absolute;
    fill: ${t.actorBkg};
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    filter: drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));
}
  .actor-man line {
    stroke: ${t.actorBorder};
    fill: ${t.actorBkg};
  }
  .actor-man circle, line {
    stroke: ${t.actorBorder};
    fill: ${t.actorBkg};
    stroke-width: 2px;
  }
`,h_=c_,Tr=18*2,L0="actor-top",B0="actor-bottom",yl=function(t,e){return sa(t,e)},u_=function(t,e,i,r,s){if(e.links===void 0||e.links===null||Object.keys(e.links).length===0)return{height:0,width:0};const n=e.links,a=e.actorCnt,o=e.rectData;var l="none";s&&(l="block !important");const h=t.append("g");h.attr("id","actor"+a+"_popup"),h.attr("class","actorPopupMenu"),h.attr("display",l);var u="";o.class!==void 0&&(u=" "+o.class);let p=o.width>i?o.width:i;const d=h.append("rect");if(d.attr("class","actorPopupMenuPanel"+u),d.attr("x",o.x),d.attr("y",o.height),d.attr("fill",o.fill),d.attr("stroke",o.stroke),d.attr("width",p),d.attr("height",o.height),d.attr("rx",o.rx),d.attr("ry",o.ry),n!=null){var g=20;for(let _ in n){var y=h.append("a"),x=Dr.sanitizeUrl(n[_]);y.attr("xlink:href",x),y.attr("target","_blank"),A_(r)(_,y,o.x+10,o.height+g,p,20,{class:"actor"},r),g+=30}}return d.attr("height",g),{height:o.height+g,width:p}},d_=function(t){return"var pu = document.getElementById('"+t+"'); if (pu != null) { pu.style.display = pu.style.display == 'block' ? 'none' : 'block'; }"},ss=function(t,e){let i=0,r=0;const s=e.text.split(mt.lineBreakRegex),[n,a]=Rr(e.fontSize);let o=[],l=0,h=()=>e.y;if(e.valign!==void 0&&e.textMargin!==void 0&&e.textMargin>0)switch(e.valign){case"top":case"start":h=()=>Math.round(e.y+e.textMargin);break;case"middle":case"center":h=()=>Math.round(e.y+(i+r+e.textMargin)/2);break;case"bottom":case"end":h=()=>Math.round(e.y+(i+r+2*e.textMargin)-e.textMargin);break}if(e.anchor!==void 0&&e.textMargin!==void 0&&e.width!==void 0)switch(e.anchor){case"left":case"start":e.x=Math.round(e.x+e.textMargin),e.anchor="start",e.dominantBaseline="middle",e.alignmentBaseline="middle";break;case"middle":case"center":e.x=Math.round(e.x+e.width/2),e.anchor="middle",e.dominantBaseline="middle",e.alignmentBaseline="middle";break;case"right":case"end":e.x=Math.round(e.x+e.width-e.textMargin),e.anchor="end",e.dominantBaseline="middle",e.alignmentBaseline="middle";break}for(let[u,p]of s.entries()){e.textMargin!==void 0&&e.textMargin===0&&n!==void 0&&(l=u*n);const d=t.append("text");d.attr("x",e.x),d.attr("y",h()),e.anchor!==void 0&&d.attr("text-anchor",e.anchor).attr("dominant-baseline",e.dominantBaseline).attr("alignment-baseline",e.alignmentBaseline),e.fontFamily!==void 0&&d.style("font-family",e.fontFamily),a!==void 0&&d.style("font-size",a),e.fontWeight!==void 0&&d.style("font-weight",e.fontWeight),e.fill!==void 0&&d.attr("fill",e.fill),e.class!==void 0&&d.attr("class",e.class),e.dy!==void 0?d.attr("dy",e.dy):l!==0&&d.attr("dy",l);const g=p||Ch;if(e.tspan){const y=d.append("tspan");y.attr("x",e.x),e.fill!==void 0&&y.attr("fill",e.fill),y.text(g)}else d.text(g);e.valign!==void 0&&e.textMargin!==void 0&&e.textMargin>0&&(r+=(d._groups||d)[0][0].getBBox().height,i=r),o.push(d)}return o},I0=function(t,e){function i(s,n,a,o,l){return s+","+n+" "+(s+a)+","+n+" "+(s+a)+","+(n+o-l)+" "+(s+a-l*1.2)+","+(n+o)+" "+s+","+(n+o)}const r=t.append("polygon");return r.attr("points",i(e.x,e.y,e.width,e.height,7)),r.attr("class","labelBox"),e.y=e.y+e.height/2,ss(t,e),r};let Ei=-1;const D0=(t,e,i,r)=>{t.select&&i.forEach(s=>{const n=e[s],a=t.select("#actor"+n.actorCnt);!r.mirrorActors&&n.stopy?a.attr("y2",n.stopy+n.height/2):r.mirrorActors&&a.attr("y2",n.stopy)})},f_=function(t,e,i,r){const s=r?e.stopy:e.starty,n=e.x+e.width/2,a=s+5,o=t.append("g").lower();var l=o;r||(Ei++,Object.keys(e.links||{}).length&&!i.forceMenus&&l.attr("onclick",d_(`actor${Ei}_popup`)).attr("cursor","pointer"),l.append("line").attr("id","actor"+Ei).attr("x1",n).attr("y1",a).attr("x2",n).attr("y2",2e3).attr("class","actor-line").attr("class","200").attr("stroke-width","0.5px").attr("stroke","#999"),l=o.append("g"),e.actorCnt=Ei,e.links!=null&&l.attr("id","root-"+Ei));const h=Nr();var u="actor";e.properties!=null&&e.properties.class?u=e.properties.class:h.fill="#eaeaea",r?u+=` ${B0}`:u+=` ${L0}`,h.x=e.x,h.y=s,h.width=e.width,h.height=e.height,h.class=u,h.rx=3,h.ry=3;const p=yl(l,h);if(e.rectData=h,e.properties!=null&&e.properties.icon){const g=e.properties.icon.trim();g.charAt(0)==="@"?lm(l,h.x+h.width-20,h.y+10,g.substr(1)):om(l,h.x+h.width-20,h.y+10,g)}ml(i)(e.description,l,h.x,h.y,h.width,h.height,{class:"actor"},i);let d=e.height;if(p.node){const g=p.node().getBBox();e.height=g.height,d=g.height}return d},p_=function(t,e,i,r){const s=r?e.stopy:e.starty,n=e.x+e.width/2,a=s+80;t.lower(),r||(Ei++,t.append("line").attr("id","actor"+Ei).attr("x1",n).attr("y1",a).attr("x2",n).attr("y2",2e3).attr("class","actor-line").attr("class","200").attr("stroke-width","0.5px").attr("stroke","#999"),e.actorCnt=Ei);const o=t.append("g");let l="actor-man";r?l+=` ${B0}`:l+=` ${L0}`,o.attr("class",l);const h=Nr();h.x=e.x,h.y=s,h.fill="#eaeaea",h.width=e.width,h.height=e.height,h.class="actor",h.rx=3,h.ry=3,o.append("line").attr("id","actor-man-torso"+Ei).attr("x1",n).attr("y1",s+25).attr("x2",n).attr("y2",s+45),o.append("line").attr("id","actor-man-arms"+Ei).attr("x1",n-Tr/2).attr("y1",s+33).attr("x2",n+Tr/2).attr("y2",s+33),o.append("line").attr("x1",n-Tr/2).attr("y1",s+60).attr("x2",n).attr("y2",s+45),o.append("line").attr("x1",n).attr("y1",s+45).attr("x2",n+Tr/2-2).attr("y2",s+60);const u=o.append("circle");u.attr("cx",e.x+e.width/2),u.attr("cy",s+10),u.attr("r",15),u.attr("width",e.width),u.attr("height",e.height);const p=o.node().getBBox();return e.height=p.height,ml(i)(e.description,o,h.x,h.y+35,h.width,h.height,{class:"actor"},i),e.height},g_=function(t,e,i,r){switch(e.type){case"actor":return p_(t,e,i,r);case"participant":return f_(t,e,i,r)}},y_=function(t,e,i){const s=t.append("g");F0(s,e),e.name&&ml(i)(e.name,s,e.x,e.y+(e.textMaxHeight||0)/2,e.width,0,{class:"text"},i),s.lower()},m_=function(t){return t.append("g")},x_=function(t,e,i,r,s){const n=Nr(),a=e.anchored;n.x=e.startx,n.y=e.starty,n.class="activation"+s%3,n.width=e.stopx-e.startx,n.height=i-e.starty,yl(a,n)},b_=function(t,e,i,r){const{boxMargin:s,boxTextMargin:n,labelBoxHeight:a,labelBoxWidth:o,messageFontFamily:l,messageFontSize:h,messageFontWeight:u}=r,p=t.append("g"),d=function(x,_,v,E){return p.append("line").attr("x1",x).attr("y1",_).attr("x2",v).attr("y2",E).attr("class","loopLine")};d(e.startx,e.starty,e.stopx,e.starty),d(e.stopx,e.starty,e.stopx,e.stopy),d(e.startx,e.stopy,e.stopx,e.stopy),d(e.startx,e.starty,e.startx,e.stopy),e.sections!==void 0&&e.sections.forEach(function(x){d(e.startx,x.y,e.stopx,x.y).style("stroke-dasharray","3, 3")});let g=Wo();g.text=i,g.x=e.startx,g.y=e.starty,g.fontFamily=l,g.fontSize=h,g.fontWeight=u,g.anchor="middle",g.valign="middle",g.tspan=!1,g.width=o||50,g.height=a||20,g.textMargin=n,g.class="labelText",I0(p,g),g=R0(),g.text=e.title,g.x=e.startx+o/2+(e.stopx-e.startx)/2,g.y=e.starty+s+n,g.anchor="middle",g.valign="middle",g.textMargin=n,g.class="loopText",g.fontFamily=l,g.fontSize=h,g.fontWeight=u,g.wrap=!0;let y=ss(p,g);return e.sectionTitles!==void 0&&e.sectionTitles.forEach(function(x,_){if(x.message){g.text=x.message,g.x=e.startx+(e.stopx-e.startx)/2,g.y=e.sections[_].y+s+n,g.class="loopText",g.anchor="middle",g.valign="middle",g.tspan=!1,g.fontFamily=l,g.fontSize=h,g.fontWeight=u,g.wrap=e.wrap,y=ss(p,g);let v=Math.round(y.map(E=>(E._groups||E)[0][0].getBBox().height).reduce((E,F)=>E+F));e.sections[_].height+=v-(s+n)}}),e.height=Math.round(e.stopy-e.starty),p},F0=function(t,e){A1(t,e)},k_=function(t){t.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},__=function(t){t.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},T_=function(t){t.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},C_=function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",7.9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},E_=function(t){t.append("defs").append("marker").attr("id","filled-head").attr("refX",15.5).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},S_=function(t){t.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},v_=function(t){t.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",4).attr("refY",4.5).append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1pt").attr("d","M 1,2 L 6,7 M 6,2 L 1,7")},R0=function(){return{x:0,y:0,fill:void 0,anchor:void 0,style:"#666",width:void 0,height:void 0,textMargin:0,rx:0,ry:0,tspan:!0,valign:void 0}},w_=function(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}},ml=function(){function t(s,n,a,o,l,h,u){const p=n.append("text").attr("x",a+l/2).attr("y",o+h/2+5).style("text-anchor","middle").text(s);r(p,u)}function e(s,n,a,o,l,h,u,p){const{actorFontSize:d,actorFontFamily:g,actorFontWeight:y}=p,[x,_]=Rr(d),v=s.split(mt.lineBreakRegex);for(let E=0;E<v.length;E++){const F=E*x-x*(v.length-1)/2,L=n.append("text").attr("x",a+l/2).attr("y",o).style("text-anchor","middle").style("font-size",_).style("font-weight",y).style("font-family",g);L.append("tspan").attr("x",a+l/2).attr("dy",F).text(v[E]),L.attr("y",o+h/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),r(L,u)}}function i(s,n,a,o,l,h,u,p){const d=n.append("switch"),y=d.append("foreignObject").attr("x",a).attr("y",o).attr("width",l).attr("height",h).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");y.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(s),e(s,d,a,o,l,h,u,p),r(y,u)}function r(s,n){for(const a in n)n.hasOwnProperty(a)&&s.attr(a,n[a])}return function(s){return s.textPlacement==="fo"?i:s.textPlacement==="old"?t:e}}(),A_=function(){function t(s,n,a,o,l,h,u){const p=n.append("text").attr("x",a).attr("y",o).style("text-anchor","start").text(s);r(p,u)}function e(s,n,a,o,l,h,u,p){const{actorFontSize:d,actorFontFamily:g,actorFontWeight:y}=p,x=s.split(mt.lineBreakRegex);for(let _=0;_<x.length;_++){const v=_*d-d*(x.length-1)/2,E=n.append("text").attr("x",a).attr("y",o).style("text-anchor","start").style("font-size",d).style("font-weight",y).style("font-family",g);E.append("tspan").attr("x",a).attr("dy",v).text(x[_]),E.attr("y",o+h/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),r(E,u)}}function i(s,n,a,o,l,h,u,p){const d=n.append("switch"),y=d.append("foreignObject").attr("x",a).attr("y",o).attr("width",l).attr("height",h).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");y.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(s),e(s,d,a,o,l,h,u,p),r(y,u)}function r(s,n){for(const a in n)n.hasOwnProperty(a)&&s.attr(a,n[a])}return function(s){return s.textPlacement==="fo"?i:s.textPlacement==="old"?t:e}}(),le={drawRect:yl,drawText:ss,drawLabel:I0,drawActor:g_,drawBox:y_,drawPopup:u_,anchorElement:m_,drawActivation:x_,drawLoop:b_,drawBackgroundRect:F0,insertArrowHead:C_,insertArrowFilledHead:E_,insertSequenceNumber:S_,insertArrowCrossHead:v_,insertDatabaseIcon:k_,insertComputerIcon:__,insertClockIcon:T_,getTextObj:R0,getNoteRect:w_,fixLifeLineHeights:D0,sanitizeUrl:Dr.sanitizeUrl};let Z={};const gt={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],activations:[],models:{getHeight:function(){return Math.max.apply(null,this.actors.length===0?[0]:this.actors.map(t=>t.height||0))+(this.loops.length===0?0:this.loops.map(t=>t.height||0).reduce((t,e)=>t+e))+(this.messages.length===0?0:this.messages.map(t=>t.height||0).reduce((t,e)=>t+e))+(this.notes.length===0?0:this.notes.map(t=>t.height||0).reduce((t,e)=>t+e))},clear:function(){this.actors=[],this.boxes=[],this.loops=[],this.messages=[],this.notes=[]},addBox:function(t){this.boxes.push(t)},addActor:function(t){this.actors.push(t)},addLoop:function(t){this.loops.push(t)},addMessage:function(t){this.messages.push(t)},addNote:function(t){this.notes.push(t)},lastActor:function(){return this.actors[this.actors.length-1]},lastLoop:function(){return this.loops[this.loops.length-1]},lastMessage:function(){return this.messages[this.messages.length-1]},lastNote:function(){return this.notes[this.notes.length-1]},actors:[],boxes:[],loops:[],messages:[],notes:[]},init:function(){this.sequenceItems=[],this.activations=[],this.models.clear(),this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0,O0(Y())},updateVal:function(t,e,i,r){t[e]===void 0?t[e]=i:t[e]=r(i,t[e])},updateBounds:function(t,e,i,r){const s=this;let n=0;function a(o){return function(h){n++;const u=s.sequenceItems.length-n+1;s.updateVal(h,"starty",e-u*Z.boxMargin,Math.min),s.updateVal(h,"stopy",r+u*Z.boxMargin,Math.max),s.updateVal(gt.data,"startx",t-u*Z.boxMargin,Math.min),s.updateVal(gt.data,"stopx",i+u*Z.boxMargin,Math.max),o!=="activation"&&(s.updateVal(h,"startx",t-u*Z.boxMargin,Math.min),s.updateVal(h,"stopx",i+u*Z.boxMargin,Math.max),s.updateVal(gt.data,"starty",e-u*Z.boxMargin,Math.min),s.updateVal(gt.data,"stopy",r+u*Z.boxMargin,Math.max))}}this.sequenceItems.forEach(a()),this.activations.forEach(a("activation"))},insert:function(t,e,i,r){const s=mt.getMin(t,i),n=mt.getMax(t,i),a=mt.getMin(e,r),o=mt.getMax(e,r);this.updateVal(gt.data,"startx",s,Math.min),this.updateVal(gt.data,"starty",a,Math.min),this.updateVal(gt.data,"stopx",n,Math.max),this.updateVal(gt.data,"stopy",o,Math.max),this.updateBounds(s,a,n,o)},newActivation:function(t,e,i){const r=i[t.from.actor],s=fa(t.from.actor).length||0,n=r.x+r.width/2+(s-1)*Z.activationWidth/2;this.activations.push({startx:n,starty:this.verticalPos+2,stopx:n+Z.activationWidth,stopy:void 0,actor:t.from.actor,anchored:le.anchorElement(e)})},endActivation:function(t){const e=this.activations.map(function(i){return i.actor}).lastIndexOf(t.from.actor);return this.activations.splice(e,1)[0]},createLoop:function(t={message:void 0,wrap:!1,width:void 0},e){return{startx:void 0,starty:this.verticalPos,stopx:void 0,stopy:void 0,title:t.message,wrap:t.wrap,width:t.width,height:0,fill:e}},newLoop:function(t={message:void 0,wrap:!1,width:void 0},e){this.sequenceItems.push(this.createLoop(t,e))},endLoop:function(){return this.sequenceItems.pop()},isLoopOverlap:function(){return this.sequenceItems.length?this.sequenceItems[this.sequenceItems.length-1].overlap:!1},addSectionToLoop:function(t){const e=this.sequenceItems.pop();e.sections=e.sections||[],e.sectionTitles=e.sectionTitles||[],e.sections.push({y:gt.getVerticalPos(),height:0}),e.sectionTitles.push(t),this.sequenceItems.push(e)},saveVerticalPos:function(){this.isLoopOverlap()&&(this.savedVerticalPos=this.verticalPos)},resetVerticalPos:function(){this.isLoopOverlap()&&(this.verticalPos=this.savedVerticalPos)},bumpVerticalPos:function(t){this.verticalPos=this.verticalPos+t,this.data.stopy=mt.getMax(this.data.stopy,this.verticalPos)},getVerticalPos:function(){return this.verticalPos},getBounds:function(){return{bounds:this.data,models:this.models}}},L_=function(t,e){gt.bumpVerticalPos(Z.boxMargin),e.height=Z.boxMargin,e.starty=gt.getVerticalPos();const i=Nr();i.x=e.startx,i.y=e.starty,i.width=e.width||Z.width,i.class="note";const r=t.append("g"),s=le.drawRect(r,i),n=Wo();n.x=e.startx,n.y=e.starty,n.width=i.width,n.dy="1em",n.text=e.message,n.class="noteText",n.fontFamily=Z.noteFontFamily,n.fontSize=Z.noteFontSize,n.fontWeight=Z.noteFontWeight,n.anchor=Z.noteAlign,n.textMargin=Z.noteMargin,n.valign="center";const a=ss(r,n),o=Math.round(a.map(l=>(l._groups||l)[0][0].getBBox().height).reduce((l,h)=>l+h));s.attr("height",o+2*Z.noteMargin),e.height+=o+2*Z.noteMargin,gt.bumpVerticalPos(o+2*Z.noteMargin),e.stopy=e.starty+o+2*Z.noteMargin,e.stopx=e.startx+i.width,gt.insert(e.startx,e.starty,e.stopx,e.stopy),gt.models.addNote(e)},Ar=t=>({fontFamily:t.messageFontFamily,fontSize:t.messageFontSize,fontWeight:t.messageFontWeight}),zr=t=>({fontFamily:t.noteFontFamily,fontSize:t.noteFontSize,fontWeight:t.noteFontWeight}),lo=t=>({fontFamily:t.actorFontFamily,fontSize:t.actorFontSize,fontWeight:t.actorFontWeight});function B_(t,e){gt.bumpVerticalPos(10);const{startx:i,stopx:r,message:s}=e,n=mt.splitBreaks(s).length,a=Rt.calculateTextDimensions(s,Ar(Z)),o=a.height/n;e.height+=o,gt.bumpVerticalPos(o);let l,h=a.height-10;const u=a.width;if(i===r){l=gt.getVerticalPos()+h,Z.rightAngles||(h+=Z.boxMargin,l=gt.getVerticalPos()+h),h+=30;const p=mt.getMax(u/2,Z.width/2);gt.insert(i-p,gt.getVerticalPos()-10+h,r+p,gt.getVerticalPos()+30+h)}else h+=Z.boxMargin,l=gt.getVerticalPos()+h,gt.insert(i,l-10,r,l);return gt.bumpVerticalPos(h),e.height+=h,e.stopy=e.starty+e.height,gt.insert(e.fromBounds,e.starty,e.toBounds,e.stopy),l}const I_=function(t,e,i,r){const{startx:s,stopx:n,starty:a,message:o,type:l,sequenceIndex:h,sequenceVisible:u}=e,p=Rt.calculateTextDimensions(o,Ar(Z)),d=Wo();d.x=s,d.y=a+10,d.width=n-s,d.class="messageText",d.dy="1em",d.text=o,d.fontFamily=Z.messageFontFamily,d.fontSize=Z.messageFontSize,d.fontWeight=Z.messageFontWeight,d.anchor=Z.messageAlign,d.valign="center",d.textMargin=Z.wrapPadding,d.tspan=!1,ss(t,d);const g=p.width;let y;s===n?Z.rightAngles?y=t.append("path").attr("d",`M  ${s},${i} H ${s+mt.getMax(Z.width/2,g/2)} V ${i+25} H ${s}`):y=t.append("path").attr("d","M "+s+","+i+" C "+(s+60)+","+(i-10)+" "+(s+60)+","+(i+30)+" "+s+","+(i+20)):(y=t.append("line"),y.attr("x1",s),y.attr("y1",i),y.attr("x2",n),y.attr("y2",i)),l===r.db.LINETYPE.DOTTED||l===r.db.LINETYPE.DOTTED_CROSS||l===r.db.LINETYPE.DOTTED_POINT||l===r.db.LINETYPE.DOTTED_OPEN?(y.style("stroke-dasharray","3, 3"),y.attr("class","messageLine1")):y.attr("class","messageLine0");let x="";Z.arrowMarkerAbsolute&&(x=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,x=x.replace(/\(/g,"\\("),x=x.replace(/\)/g,"\\)")),y.attr("stroke-width",2),y.attr("stroke","none"),y.style("fill","none"),(l===r.db.LINETYPE.SOLID||l===r.db.LINETYPE.DOTTED)&&y.attr("marker-end","url("+x+"#arrowhead)"),(l===r.db.LINETYPE.SOLID_POINT||l===r.db.LINETYPE.DOTTED_POINT)&&y.attr("marker-end","url("+x+"#filled-head)"),(l===r.db.LINETYPE.SOLID_CROSS||l===r.db.LINETYPE.DOTTED_CROSS)&&y.attr("marker-end","url("+x+"#crosshead)"),(u||Z.showSequenceNumbers)&&(y.attr("marker-start","url("+x+"#sequencenumber)"),t.append("text").attr("x",s).attr("y",i+4).attr("font-family","sans-serif").attr("font-size","12px").attr("text-anchor","middle").attr("class","sequenceNumber").text(h))},D_=function(t,e,i,r,s,n,a){let o=0,l=0,h,u=0;for(const p of r){const d=e[p],g=d.box;h&&h!=g&&(a||gt.models.addBox(h),l+=Z.boxMargin+h.margin),g&&g!=h&&(a||(g.x=o+l,g.y=s),l+=g.margin),d.width=d.width||Z.width,d.height=mt.getMax(d.height||Z.height,Z.height),d.margin=d.margin||Z.actorMargin,u=mt.getMax(u,d.height),i[d.name]&&(l+=d.width/2),d.x=o+l,d.starty=gt.getVerticalPos(),gt.insert(d.x,s,d.x+d.width,d.height),o+=d.width+l,d.box&&(d.box.width=o+g.margin-d.box.x),l=d.margin,h=d.box,gt.models.addActor(d)}h&&!a&&gt.models.addBox(h),gt.bumpVerticalPos(u)},co=function(t,e,i,r){if(r){let s=0;gt.bumpVerticalPos(Z.boxMargin*2);for(const n of i){const a=e[n];a.stopy||(a.stopy=gt.getVerticalPos());const o=le.drawActor(t,a,Z,!0);s=mt.getMax(s,o)}gt.bumpVerticalPos(s+Z.boxMargin)}else for(const s of i){const n=e[s];le.drawActor(t,n,Z,!1)}},N0=function(t,e,i,r){let s=0,n=0;for(const a of i){const o=e[a],l=O_(o),h=le.drawPopup(t,o,l,Z,Z.forceMenus,r);h.height>s&&(s=h.height),h.width+o.x>n&&(n=h.width+o.x)}return{maxHeight:s,maxWidth:n}},O0=function(t){Ae(Z,t),t.fontFamily&&(Z.actorFontFamily=Z.noteFontFamily=Z.messageFontFamily=t.fontFamily),t.fontSize&&(Z.actorFontSize=Z.noteFontSize=Z.messageFontSize=t.fontSize),t.fontWeight&&(Z.actorFontWeight=Z.noteFontWeight=Z.messageFontWeight=t.fontWeight)},fa=function(t){return gt.activations.filter(function(e){return e.actor===t})},Ic=function(t,e){const i=e[t],r=fa(t),s=r.reduce(function(a,o){return mt.getMin(a,o.startx)},i.x+i.width/2-1),n=r.reduce(function(a,o){return mt.getMax(a,o.stopx)},i.x+i.width/2+1);return[s,n]};function Ti(t,e,i,r,s){gt.bumpVerticalPos(i);let n=r;if(e.id&&e.message&&t[e.id]){const a=t[e.id].width,o=Ar(Z);e.message=Rt.wrapLabel(`[${e.message}]`,a-2*Z.wrapPadding,o),e.width=a,e.wrap=!0;const l=Rt.calculateTextDimensions(e.message,o),h=mt.getMax(l.height,Z.labelBoxHeight);n=r+h,I.debug(`${h} - ${e.message}`)}s(e),gt.bumpVerticalPos(n)}function F_(t,e,i,r,s,n,a){function o(h,u){h.x<s[t.from].x?(gt.insert(e.stopx-u,e.starty,e.startx,e.stopy+h.height/2+Z.noteMargin),e.stopx=e.stopx+u):(gt.insert(e.startx,e.starty,e.stopx+u,e.stopy+h.height/2+Z.noteMargin),e.stopx=e.stopx-u)}function l(h,u){h.x<s[t.to].x?(gt.insert(e.startx-u,e.starty,e.stopx,e.stopy+h.height/2+Z.noteMargin),e.startx=e.startx+u):(gt.insert(e.stopx,e.starty,e.startx+u,e.stopy+h.height/2+Z.noteMargin),e.startx=e.startx-u)}if(n[t.to]==r){const h=s[t.to],u=h.type=="actor"?Tr/2+3:h.width/2+3;o(h,u),h.starty=i-h.height/2,gt.bumpVerticalPos(h.height/2)}else if(a[t.from]==r){const h=s[t.from];if(Z.mirrorActors){const u=h.type=="actor"?Tr/2:h.width/2;l(h,u)}h.stopy=i-h.height/2,gt.bumpVerticalPos(h.height/2)}else if(a[t.to]==r){const h=s[t.to];if(Z.mirrorActors){const u=h.type=="actor"?Tr/2+3:h.width/2+3;o(h,u)}h.stopy=i-h.height/2,gt.bumpVerticalPos(h.height/2)}}const R_=function(t,e,i,r){const{securityLevel:s,sequence:n}=Y();Z=n;let a;s==="sandbox"&&(a=yt("#i"+e));const o=s==="sandbox"?yt(a.nodes()[0].contentDocument.body):yt("body"),l=s==="sandbox"?a.nodes()[0].contentDocument:document;gt.init(),I.debug(r.db);const h=s==="sandbox"?o.select(`[id="${e}"]`):yt(`[id="${e}"]`),u=r.db.getActors(),p=r.db.getCreatedActors(),d=r.db.getDestroyedActors(),g=r.db.getBoxes();let y=r.db.getActorKeys();const x=r.db.getMessages(),_=r.db.getDiagramTitle(),v=r.db.hasAtLeastOneBox(),E=r.db.hasAtLeastOneBoxWithTitle(),F=N_(u,x,r);if(Z.height=P_(u,F,g),le.insertComputerIcon(h),le.insertDatabaseIcon(h),le.insertClockIcon(h),v&&(gt.bumpVerticalPos(Z.boxMargin),E&&gt.bumpVerticalPos(g[0].textMaxHeight)),Z.hideUnusedParticipants===!0){const w=new Set;x.forEach(R=>{w.add(R.from),w.add(R.to)}),y=y.filter(R=>w.has(R))}D_(h,u,p,y,0,x,!1);const L=z_(x,u,F,r);le.insertArrowHead(h),le.insertArrowCrossHead(h),le.insertArrowFilledHead(h),le.insertSequenceNumber(h);function T(w,R){const D=gt.endActivation(w);D.starty+18>R&&(D.starty=R-6,R+=12),le.drawActivation(h,D,R,Z,fa(w.from.actor).length),gt.insert(D.startx,R-10,D.stopx,R)}let k=1,A=1;const S=[],m=[];x.forEach(function(w,R){let D,V,z;switch(w.type){case r.db.LINETYPE.NOTE:gt.resetVerticalPos(),V=w.noteModel,L_(h,V);break;case r.db.LINETYPE.ACTIVE_START:gt.newActivation(w,h,u);break;case r.db.LINETYPE.ACTIVE_END:T(w,gt.getVerticalPos());break;case r.db.LINETYPE.LOOP_START:Ti(L,w,Z.boxMargin,Z.boxMargin+Z.boxTextMargin,st=>gt.newLoop(st));break;case r.db.LINETYPE.LOOP_END:D=gt.endLoop(),le.drawLoop(h,D,"loop",Z),gt.bumpVerticalPos(D.stopy-gt.getVerticalPos()),gt.models.addLoop(D);break;case r.db.LINETYPE.RECT_START:Ti(L,w,Z.boxMargin,Z.boxMargin,st=>gt.newLoop(void 0,st.message));break;case r.db.LINETYPE.RECT_END:D=gt.endLoop(),m.push(D),gt.models.addLoop(D),gt.bumpVerticalPos(D.stopy-gt.getVerticalPos());break;case r.db.LINETYPE.OPT_START:Ti(L,w,Z.boxMargin,Z.boxMargin+Z.boxTextMargin,st=>gt.newLoop(st));break;case r.db.LINETYPE.OPT_END:D=gt.endLoop(),le.drawLoop(h,D,"opt",Z),gt.bumpVerticalPos(D.stopy-gt.getVerticalPos()),gt.models.addLoop(D);break;case r.db.LINETYPE.ALT_START:Ti(L,w,Z.boxMargin,Z.boxMargin+Z.boxTextMargin,st=>gt.newLoop(st));break;case r.db.LINETYPE.ALT_ELSE:Ti(L,w,Z.boxMargin+Z.boxTextMargin,Z.boxMargin,st=>gt.addSectionToLoop(st));break;case r.db.LINETYPE.ALT_END:D=gt.endLoop(),le.drawLoop(h,D,"alt",Z),gt.bumpVerticalPos(D.stopy-gt.getVerticalPos()),gt.models.addLoop(D);break;case r.db.LINETYPE.PAR_START:case r.db.LINETYPE.PAR_OVER_START:Ti(L,w,Z.boxMargin,Z.boxMargin+Z.boxTextMargin,st=>gt.newLoop(st)),gt.saveVerticalPos();break;case r.db.LINETYPE.PAR_AND:Ti(L,w,Z.boxMargin+Z.boxTextMargin,Z.boxMargin,st=>gt.addSectionToLoop(st));break;case r.db.LINETYPE.PAR_END:D=gt.endLoop(),le.drawLoop(h,D,"par",Z),gt.bumpVerticalPos(D.stopy-gt.getVerticalPos()),gt.models.addLoop(D);break;case r.db.LINETYPE.AUTONUMBER:k=w.message.start||k,A=w.message.step||A,w.message.visible?r.db.enableSequenceNumbers():r.db.disableSequenceNumbers();break;case r.db.LINETYPE.CRITICAL_START:Ti(L,w,Z.boxMargin,Z.boxMargin+Z.boxTextMargin,st=>gt.newLoop(st));break;case r.db.LINETYPE.CRITICAL_OPTION:Ti(L,w,Z.boxMargin+Z.boxTextMargin,Z.boxMargin,st=>gt.addSectionToLoop(st));break;case r.db.LINETYPE.CRITICAL_END:D=gt.endLoop(),le.drawLoop(h,D,"critical",Z),gt.bumpVerticalPos(D.stopy-gt.getVerticalPos()),gt.models.addLoop(D);break;case r.db.LINETYPE.BREAK_START:Ti(L,w,Z.boxMargin,Z.boxMargin+Z.boxTextMargin,st=>gt.newLoop(st));break;case r.db.LINETYPE.BREAK_END:D=gt.endLoop(),le.drawLoop(h,D,"break",Z),gt.bumpVerticalPos(D.stopy-gt.getVerticalPos()),gt.models.addLoop(D);break;default:try{z=w.msgModel,z.starty=gt.getVerticalPos(),z.sequenceIndex=k,z.sequenceVisible=r.db.showSequenceNumbers();const st=B_(h,z);F_(w,z,st,R,u,p,d),S.push({messageModel:z,lineStartY:st}),gt.models.addMessage(z)}catch(st){I.error("error while drawing message",st)}}[r.db.LINETYPE.SOLID_OPEN,r.db.LINETYPE.DOTTED_OPEN,r.db.LINETYPE.SOLID,r.db.LINETYPE.DOTTED,r.db.LINETYPE.SOLID_CROSS,r.db.LINETYPE.DOTTED_CROSS,r.db.LINETYPE.SOLID_POINT,r.db.LINETYPE.DOTTED_POINT].includes(w.type)&&(k=k+A)}),I.debug("createdActors",p),I.debug("destroyedActors",d),co(h,u,y,!1),S.forEach(w=>I_(h,w.messageModel,w.lineStartY,r)),Z.mirrorActors&&co(h,u,y,!0),m.forEach(w=>le.drawBackgroundRect(h,w)),D0(h,u,y,Z),gt.models.boxes.forEach(function(w){w.height=gt.getVerticalPos()-w.y,gt.insert(w.x,w.y,w.x+w.width,w.height),w.startx=w.x,w.starty=w.y,w.stopx=w.startx+w.width,w.stopy=w.starty+w.height,w.stroke="rgb(0,0,0, 0.5)",le.drawBox(h,w,Z)}),v&&gt.bumpVerticalPos(Z.boxMargin);const C=N0(h,u,y,l),{bounds:f}=gt.getBounds();let B=f.stopy-f.starty;B<C.maxHeight&&(B=C.maxHeight);let b=B+2*Z.diagramMarginY;Z.mirrorActors&&(b=b-Z.boxMargin+Z.bottomMarginAdj);let P=f.stopx-f.startx;P<C.maxWidth&&(P=C.maxWidth);const U=P+2*Z.diagramMarginX;_&&h.append("text").text(_).attr("x",(f.stopx-f.startx)/2-2*Z.diagramMarginX).attr("y",-25),Ne(h,b,U,Z.useMaxWidth);const N=_?40:0;h.attr("viewBox",f.startx-Z.diagramMarginX+" -"+(Z.diagramMarginY+N)+" "+U+" "+(b+N)),I.debug("models:",gt.models)};function N_(t,e,i){const r={};return e.forEach(function(s){if(t[s.to]&&t[s.from]){const n=t[s.to];if(s.placement===i.db.PLACEMENT.LEFTOF&&!n.prevActor||s.placement===i.db.PLACEMENT.RIGHTOF&&!n.nextActor)return;const a=s.placement!==void 0,o=!a,l=a?zr(Z):Ar(Z),h=s.wrap?Rt.wrapLabel(s.message,Z.width-2*Z.wrapPadding,l):s.message,p=Rt.calculateTextDimensions(h,l).width+2*Z.wrapPadding;o&&s.from===n.nextActor?r[s.to]=mt.getMax(r[s.to]||0,p):o&&s.from===n.prevActor?r[s.from]=mt.getMax(r[s.from]||0,p):o&&s.from===s.to?(r[s.from]=mt.getMax(r[s.from]||0,p/2),r[s.to]=mt.getMax(r[s.to]||0,p/2)):s.placement===i.db.PLACEMENT.RIGHTOF?r[s.from]=mt.getMax(r[s.from]||0,p):s.placement===i.db.PLACEMENT.LEFTOF?r[n.prevActor]=mt.getMax(r[n.prevActor]||0,p):s.placement===i.db.PLACEMENT.OVER&&(n.prevActor&&(r[n.prevActor]=mt.getMax(r[n.prevActor]||0,p/2)),n.nextActor&&(r[s.from]=mt.getMax(r[s.from]||0,p/2)))}}),I.debug("maxMessageWidthPerActor:",r),r}const O_=function(t){let e=0;const i=lo(Z);for(const r in t.links){const n=Rt.calculateTextDimensions(r,i).width+2*Z.wrapPadding+2*Z.boxMargin;e<n&&(e=n)}return e};function P_(t,e,i){let r=0;Object.keys(t).forEach(n=>{const a=t[n];a.wrap&&(a.description=Rt.wrapLabel(a.description,Z.width-2*Z.wrapPadding,lo(Z)));const o=Rt.calculateTextDimensions(a.description,lo(Z));a.width=a.wrap?Z.width:mt.getMax(Z.width,o.width+2*Z.wrapPadding),a.height=a.wrap?mt.getMax(o.height,Z.height):Z.height,r=mt.getMax(r,a.height)});for(const n in e){const a=t[n];if(!a)continue;const o=t[a.nextActor];if(!o){const p=e[n]+Z.actorMargin-a.width/2;a.margin=mt.getMax(p,Z.actorMargin);continue}const h=e[n]+Z.actorMargin-a.width/2-o.width/2;a.margin=mt.getMax(h,Z.actorMargin)}let s=0;return i.forEach(n=>{const a=Ar(Z);let o=n.actorKeys.reduce((u,p)=>u+=t[p].width+(t[p].margin||0),0);o-=2*Z.boxTextMargin,n.wrap&&(n.name=Rt.wrapLabel(n.name,o-2*Z.wrapPadding,a));const l=Rt.calculateTextDimensions(n.name,a);s=mt.getMax(l.height,s);const h=mt.getMax(o,l.width+2*Z.wrapPadding);if(n.margin=Z.boxTextMargin,o<h){const u=(h-o)/2;n.margin+=u}}),i.forEach(n=>n.textMaxHeight=s),mt.getMax(r,Z.height)}const M_=function(t,e,i){const r=e[t.from].x,s=e[t.to].x,n=t.wrap&&t.message;let a=Rt.calculateTextDimensions(n?Rt.wrapLabel(t.message,Z.width,zr(Z)):t.message,zr(Z));const o={width:n?Z.width:mt.getMax(Z.width,a.width+2*Z.noteMargin),height:0,startx:e[t.from].x,stopx:0,starty:0,stopy:0,message:t.message};return t.placement===i.db.PLACEMENT.RIGHTOF?(o.width=n?mt.getMax(Z.width,a.width):mt.getMax(e[t.from].width/2+e[t.to].width/2,a.width+2*Z.noteMargin),o.startx=r+(e[t.from].width+Z.actorMargin)/2):t.placement===i.db.PLACEMENT.LEFTOF?(o.width=n?mt.getMax(Z.width,a.width+2*Z.noteMargin):mt.getMax(e[t.from].width/2+e[t.to].width/2,a.width+2*Z.noteMargin),o.startx=r-o.width+(e[t.from].width-Z.actorMargin)/2):t.to===t.from?(a=Rt.calculateTextDimensions(n?Rt.wrapLabel(t.message,mt.getMax(Z.width,e[t.from].width),zr(Z)):t.message,zr(Z)),o.width=n?mt.getMax(Z.width,e[t.from].width):mt.getMax(e[t.from].width,Z.width,a.width+2*Z.noteMargin),o.startx=r+(e[t.from].width-o.width)/2):(o.width=Math.abs(r+e[t.from].width/2-(s+e[t.to].width/2))+Z.actorMargin,o.startx=r<s?r+e[t.from].width/2-Z.actorMargin/2:s+e[t.to].width/2-Z.actorMargin/2),n&&(o.message=Rt.wrapLabel(t.message,o.width-2*Z.wrapPadding,zr(Z))),I.debug(`NM:[${o.startx},${o.stopx},${o.starty},${o.stopy}:${o.width},${o.height}=${t.message}]`),o},V_=function(t,e,i){if(![i.db.LINETYPE.SOLID_OPEN,i.db.LINETYPE.DOTTED_OPEN,i.db.LINETYPE.SOLID,i.db.LINETYPE.DOTTED,i.db.LINETYPE.SOLID_CROSS,i.db.LINETYPE.DOTTED_CROSS,i.db.LINETYPE.SOLID_POINT,i.db.LINETYPE.DOTTED_POINT].includes(t.type))return{};const[r,s]=Ic(t.from,e),[n,a]=Ic(t.to,e),o=r<=n,l=o?s:r;let h=o?n:a;const u=Math.abs(n-a)>2,p=x=>o?-x:x;t.from===t.to?h=l:(t.activate&&!u&&(h+=p(Z.activationWidth/2-1)),[i.db.LINETYPE.SOLID_OPEN,i.db.LINETYPE.DOTTED_OPEN].includes(t.type)||(h+=p(3)));const d=[r,s,n,a],g=Math.abs(l-h);t.wrap&&t.message&&(t.message=Rt.wrapLabel(t.message,mt.getMax(g+2*Z.wrapPadding,Z.width),Ar(Z)));const y=Rt.calculateTextDimensions(t.message,Ar(Z));return{width:mt.getMax(t.wrap?0:y.width+2*Z.wrapPadding,g+2*Z.wrapPadding,Z.width),height:0,startx:l,stopx:h,starty:0,stopy:0,message:t.message,type:t.type,wrap:t.wrap,fromBounds:Math.min.apply(null,d),toBounds:Math.max.apply(null,d)}},z_=function(t,e,i,r){const s={},n=[];let a,o,l;return t.forEach(function(h){switch(h.id=Rt.random({length:10}),h.type){case r.db.LINETYPE.LOOP_START:case r.db.LINETYPE.ALT_START:case r.db.LINETYPE.OPT_START:case r.db.LINETYPE.PAR_START:case r.db.LINETYPE.PAR_OVER_START:case r.db.LINETYPE.CRITICAL_START:case r.db.LINETYPE.BREAK_START:n.push({id:h.id,msg:h.message,from:Number.MAX_SAFE_INTEGER,to:Number.MIN_SAFE_INTEGER,width:0});break;case r.db.LINETYPE.ALT_ELSE:case r.db.LINETYPE.PAR_AND:case r.db.LINETYPE.CRITICAL_OPTION:h.message&&(a=n.pop(),s[a.id]=a,s[h.id]=a,n.push(a));break;case r.db.LINETYPE.LOOP_END:case r.db.LINETYPE.ALT_END:case r.db.LINETYPE.OPT_END:case r.db.LINETYPE.PAR_END:case r.db.LINETYPE.CRITICAL_END:case r.db.LINETYPE.BREAK_END:a=n.pop(),s[a.id]=a;break;case r.db.LINETYPE.ACTIVE_START:{const p=e[h.from?h.from.actor:h.to.actor],d=fa(h.from?h.from.actor:h.to.actor).length,g=p.x+p.width/2+(d-1)*Z.activationWidth/2,y={startx:g,stopx:g+Z.activationWidth,actor:h.from.actor,enabled:!0};gt.activations.push(y)}break;case r.db.LINETYPE.ACTIVE_END:{const p=gt.activations.map(d=>d.actor).lastIndexOf(h.from.actor);delete gt.activations.splice(p,1)[0]}break}h.placement!==void 0?(o=M_(h,e,r),h.noteModel=o,n.forEach(p=>{a=p,a.from=mt.getMin(a.from,o.startx),a.to=mt.getMax(a.to,o.startx+o.width),a.width=mt.getMax(a.width,Math.abs(a.from-a.to))-Z.labelBoxWidth})):(l=V_(h,e,r),h.msgModel=l,l.startx&&l.stopx&&n.length>0&&n.forEach(p=>{if(a=p,l.startx===l.stopx){const d=e[h.from],g=e[h.to];a.from=mt.getMin(d.x-l.width/2,d.x-d.width/2,a.from),a.to=mt.getMax(g.x+l.width/2,g.x+d.width/2,a.to),a.width=mt.getMax(a.width,Math.abs(a.to-a.from))-Z.labelBoxWidth}else a.from=mt.getMin(l.startx,a.from),a.to=mt.getMax(l.stopx,a.to),a.width=mt.getMax(a.width,l.width)-Z.labelBoxWidth}))}),gt.activations=[],I.debug("Loop type widths:",s),s},q_={bounds:gt,drawActors:co,drawActorsPopup:N0,setConf:O0,draw:R_},W_={parser:M6,db:Bc,renderer:q_,styles:h_,init:({wrap:t})=>{Bc.setWrap(t)}},Y_=Object.freeze(Object.defineProperty({__proto__:null,diagram:W_},Symbol.toStringTag,{value:"Module"}));var ho=function(){var t=function(Wt,pt,ut,ot){for(ut=ut||{},ot=Wt.length;ot--;ut[Wt[ot]]=pt);return ut},e=[1,17],i=[1,18],r=[1,19],s=[1,39],n=[1,40],a=[1,25],o=[1,23],l=[1,24],h=[1,31],u=[1,32],p=[1,33],d=[1,34],g=[1,35],y=[1,36],x=[1,26],_=[1,27],v=[1,28],E=[1,29],F=[1,43],L=[1,30],T=[1,42],k=[1,44],A=[1,41],S=[1,45],m=[1,9],C=[1,8,9],f=[1,56],B=[1,57],b=[1,58],P=[1,59],U=[1,60],N=[1,61],w=[1,62],R=[1,8,9,39],D=[1,74],V=[1,8,9,12,13,21,37,39,42,59,60,61,62,63,64,65,70,72],z=[1,8,9,12,13,19,21,37,39,42,46,59,60,61,62,63,64,65,70,72,74,80,95,97,98],st=[13,74,80,95,97,98],j=[13,64,65,74,80,95,97,98],dt=[13,59,60,61,62,63,74,80,95,97,98],K=[1,93],G=[1,110],tt=[1,108],nt=[1,102],Q=[1,103],J=[1,104],O=[1,105],at=[1,106],W=[1,107],ft=[1,109],M=[1,8,9,37,39,42],wt=[1,8,9,21],X=[1,8,9,78],St=[1,8,9,21,73,74,78,80,81,82,83,84,85],bt={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,statements:5,graphConfig:6,CLASS_DIAGRAM:7,NEWLINE:8,EOF:9,statement:10,classLabel:11,SQS:12,STR:13,SQE:14,namespaceName:15,alphaNumToken:16,className:17,classLiteralName:18,GENERICTYPE:19,relationStatement:20,LABEL:21,namespaceStatement:22,classStatement:23,memberStatement:24,annotationStatement:25,clickStatement:26,styleStatement:27,cssClassStatement:28,noteStatement:29,direction:30,acc_title:31,acc_title_value:32,acc_descr:33,acc_descr_value:34,acc_descr_multiline_value:35,namespaceIdentifier:36,STRUCT_START:37,classStatements:38,STRUCT_STOP:39,NAMESPACE:40,classIdentifier:41,STYLE_SEPARATOR:42,members:43,CLASS:44,ANNOTATION_START:45,ANNOTATION_END:46,MEMBER:47,SEPARATOR:48,relation:49,NOTE_FOR:50,noteText:51,NOTE:52,direction_tb:53,direction_bt:54,direction_rl:55,direction_lr:56,relationType:57,lineType:58,AGGREGATION:59,EXTENSION:60,COMPOSITION:61,DEPENDENCY:62,LOLLIPOP:63,LINE:64,DOTTED_LINE:65,CALLBACK:66,LINK:67,LINK_TARGET:68,CLICK:69,CALLBACK_NAME:70,CALLBACK_ARGS:71,HREF:72,STYLE:73,ALPHA:74,stylesOpt:75,CSSCLASS:76,style:77,COMMA:78,styleComponent:79,NUM:80,COLON:81,UNIT:82,SPACE:83,BRKT:84,PCT:85,commentToken:86,textToken:87,graphCodeTokens:88,textNoTagsToken:89,TAGSTART:90,TAGEND:91,"==":92,"--":93,DEFAULT:94,MINUS:95,keywords:96,UNICODE_TEXT:97,BQUOTE_STR:98,$accept:0,$end:1},terminals_:{2:"error",7:"CLASS_DIAGRAM",8:"NEWLINE",9:"EOF",12:"SQS",13:"STR",14:"SQE",19:"GENERICTYPE",21:"LABEL",31:"acc_title",32:"acc_title_value",33:"acc_descr",34:"acc_descr_value",35:"acc_descr_multiline_value",37:"STRUCT_START",39:"STRUCT_STOP",40:"NAMESPACE",42:"STYLE_SEPARATOR",44:"CLASS",45:"ANNOTATION_START",46:"ANNOTATION_END",47:"MEMBER",48:"SEPARATOR",50:"NOTE_FOR",52:"NOTE",53:"direction_tb",54:"direction_bt",55:"direction_rl",56:"direction_lr",59:"AGGREGATION",60:"EXTENSION",61:"COMPOSITION",62:"DEPENDENCY",63:"LOLLIPOP",64:"LINE",65:"DOTTED_LINE",66:"CALLBACK",67:"LINK",68:"LINK_TARGET",69:"CLICK",70:"CALLBACK_NAME",71:"CALLBACK_ARGS",72:"HREF",73:"STYLE",74:"ALPHA",76:"CSSCLASS",78:"COMMA",80:"NUM",81:"COLON",82:"UNIT",83:"SPACE",84:"BRKT",85:"PCT",88:"graphCodeTokens",90:"TAGSTART",91:"TAGEND",92:"==",93:"--",94:"DEFAULT",95:"MINUS",96:"keywords",97:"UNICODE_TEXT",98:"BQUOTE_STR"},productions_:[0,[3,1],[3,1],[4,1],[6,4],[5,1],[5,2],[5,3],[11,3],[15,1],[15,2],[17,1],[17,1],[17,2],[17,2],[17,2],[10,1],[10,2],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,2],[10,2],[10,1],[22,4],[22,5],[36,2],[38,1],[38,2],[38,3],[23,1],[23,3],[23,4],[23,6],[41,2],[41,3],[25,4],[43,1],[43,2],[24,1],[24,2],[24,1],[24,1],[20,3],[20,4],[20,4],[20,5],[29,3],[29,2],[30,1],[30,1],[30,1],[30,1],[49,3],[49,2],[49,2],[49,1],[57,1],[57,1],[57,1],[57,1],[57,1],[58,1],[58,1],[26,3],[26,4],[26,3],[26,4],[26,4],[26,5],[26,3],[26,4],[26,4],[26,5],[26,4],[26,5],[26,5],[26,6],[27,3],[28,3],[75,1],[75,3],[77,1],[77,2],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[86,1],[86,1],[87,1],[87,1],[87,1],[87,1],[87,1],[87,1],[87,1],[89,1],[89,1],[89,1],[89,1],[16,1],[16,1],[16,1],[16,1],[18,1],[51,1]],performAction:function(pt,ut,ot,lt,ht,$,rt){var it=$.length-1;switch(ht){case 8:this.$=$[it-1];break;case 9:case 11:case 12:this.$=$[it];break;case 10:case 13:this.$=$[it-1]+$[it];break;case 14:case 15:this.$=$[it-1]+"~"+$[it]+"~";break;case 16:lt.addRelation($[it]);break;case 17:$[it-1].title=lt.cleanupLabel($[it]),lt.addRelation($[it-1]);break;case 27:this.$=$[it].trim(),lt.setAccTitle(this.$);break;case 28:case 29:this.$=$[it].trim(),lt.setAccDescription(this.$);break;case 30:lt.addClassesToNamespace($[it-3],$[it-1]);break;case 31:lt.addClassesToNamespace($[it-4],$[it-1]);break;case 32:this.$=$[it],lt.addNamespace($[it]);break;case 33:this.$=[$[it]];break;case 34:this.$=[$[it-1]];break;case 35:$[it].unshift($[it-2]),this.$=$[it];break;case 37:lt.setCssClass($[it-2],$[it]);break;case 38:lt.addMembers($[it-3],$[it-1]);break;case 39:lt.setCssClass($[it-5],$[it-3]),lt.addMembers($[it-5],$[it-1]);break;case 40:this.$=$[it],lt.addClass($[it]);break;case 41:this.$=$[it-1],lt.addClass($[it-1]),lt.setClassLabel($[it-1],$[it]);break;case 42:lt.addAnnotation($[it],$[it-2]);break;case 43:this.$=[$[it]];break;case 44:$[it].push($[it-1]),this.$=$[it];break;case 45:break;case 46:lt.addMember($[it-1],lt.cleanupLabel($[it]));break;case 47:break;case 48:break;case 49:this.$={id1:$[it-2],id2:$[it],relation:$[it-1],relationTitle1:"none",relationTitle2:"none"};break;case 50:this.$={id1:$[it-3],id2:$[it],relation:$[it-1],relationTitle1:$[it-2],relationTitle2:"none"};break;case 51:this.$={id1:$[it-3],id2:$[it],relation:$[it-2],relationTitle1:"none",relationTitle2:$[it-1]};break;case 52:this.$={id1:$[it-4],id2:$[it],relation:$[it-2],relationTitle1:$[it-3],relationTitle2:$[it-1]};break;case 53:lt.addNote($[it],$[it-1]);break;case 54:lt.addNote($[it]);break;case 55:lt.setDirection("TB");break;case 56:lt.setDirection("BT");break;case 57:lt.setDirection("RL");break;case 58:lt.setDirection("LR");break;case 59:this.$={type1:$[it-2],type2:$[it],lineType:$[it-1]};break;case 60:this.$={type1:"none",type2:$[it],lineType:$[it-1]};break;case 61:this.$={type1:$[it-1],type2:"none",lineType:$[it]};break;case 62:this.$={type1:"none",type2:"none",lineType:$[it]};break;case 63:this.$=lt.relationType.AGGREGATION;break;case 64:this.$=lt.relationType.EXTENSION;break;case 65:this.$=lt.relationType.COMPOSITION;break;case 66:this.$=lt.relationType.DEPENDENCY;break;case 67:this.$=lt.relationType.LOLLIPOP;break;case 68:this.$=lt.lineType.LINE;break;case 69:this.$=lt.lineType.DOTTED_LINE;break;case 70:case 76:this.$=$[it-2],lt.setClickEvent($[it-1],$[it]);break;case 71:case 77:this.$=$[it-3],lt.setClickEvent($[it-2],$[it-1]),lt.setTooltip($[it-2],$[it]);break;case 72:this.$=$[it-2],lt.setLink($[it-1],$[it]);break;case 73:this.$=$[it-3],lt.setLink($[it-2],$[it-1],$[it]);break;case 74:this.$=$[it-3],lt.setLink($[it-2],$[it-1]),lt.setTooltip($[it-2],$[it]);break;case 75:this.$=$[it-4],lt.setLink($[it-3],$[it-2],$[it]),lt.setTooltip($[it-3],$[it-1]);break;case 78:this.$=$[it-3],lt.setClickEvent($[it-2],$[it-1],$[it]);break;case 79:this.$=$[it-4],lt.setClickEvent($[it-3],$[it-2],$[it-1]),lt.setTooltip($[it-3],$[it]);break;case 80:this.$=$[it-3],lt.setLink($[it-2],$[it]);break;case 81:this.$=$[it-4],lt.setLink($[it-3],$[it-1],$[it]);break;case 82:this.$=$[it-4],lt.setLink($[it-3],$[it-1]),lt.setTooltip($[it-3],$[it]);break;case 83:this.$=$[it-5],lt.setLink($[it-4],$[it-2],$[it]),lt.setTooltip($[it-4],$[it-1]);break;case 84:this.$=$[it-2],lt.setCssStyle($[it-1],$[it]);break;case 85:lt.setCssClass($[it-1],$[it]);break;case 86:this.$=[$[it]];break;case 87:$[it-2].push($[it]),this.$=$[it-2];break;case 89:this.$=$[it-1]+$[it];break}},table:[{3:1,4:2,5:3,6:4,7:[1,6],10:5,16:37,17:20,18:38,20:7,22:8,23:9,24:10,25:11,26:12,27:13,28:14,29:15,30:16,31:e,33:i,35:r,36:21,40:s,41:22,44:n,45:a,47:o,48:l,50:h,52:u,53:p,54:d,55:g,56:y,66:x,67:_,69:v,73:E,74:F,76:L,80:T,95:k,97:A,98:S},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,3]},t(m,[2,5],{8:[1,46]}),{8:[1,47]},t(C,[2,16],{21:[1,48]}),t(C,[2,18]),t(C,[2,19]),t(C,[2,20]),t(C,[2,21]),t(C,[2,22]),t(C,[2,23]),t(C,[2,24]),t(C,[2,25]),t(C,[2,26]),{32:[1,49]},{34:[1,50]},t(C,[2,29]),t(C,[2,45],{49:51,57:54,58:55,13:[1,52],21:[1,53],59:f,60:B,61:b,62:P,63:U,64:N,65:w}),{37:[1,63]},t(R,[2,36],{37:[1,65],42:[1,64]}),t(C,[2,47]),t(C,[2,48]),{16:66,74:F,80:T,95:k,97:A},{16:37,17:67,18:38,74:F,80:T,95:k,97:A,98:S},{16:37,17:68,18:38,74:F,80:T,95:k,97:A,98:S},{16:37,17:69,18:38,74:F,80:T,95:k,97:A,98:S},{74:[1,70]},{13:[1,71]},{16:37,17:72,18:38,74:F,80:T,95:k,97:A,98:S},{13:D,51:73},t(C,[2,55]),t(C,[2,56]),t(C,[2,57]),t(C,[2,58]),t(V,[2,11],{16:37,18:38,17:75,19:[1,76],74:F,80:T,95:k,97:A,98:S}),t(V,[2,12],{19:[1,77]}),{15:78,16:79,74:F,80:T,95:k,97:A},{16:37,17:80,18:38,74:F,80:T,95:k,97:A,98:S},t(z,[2,112]),t(z,[2,113]),t(z,[2,114]),t(z,[2,115]),t([1,8,9,12,13,19,21,37,39,42,59,60,61,62,63,64,65,70,72],[2,116]),t(m,[2,6],{10:5,20:7,22:8,23:9,24:10,25:11,26:12,27:13,28:14,29:15,30:16,17:20,36:21,41:22,16:37,18:38,5:81,31:e,33:i,35:r,40:s,44:n,45:a,47:o,48:l,50:h,52:u,53:p,54:d,55:g,56:y,66:x,67:_,69:v,73:E,74:F,76:L,80:T,95:k,97:A,98:S}),{5:82,10:5,16:37,17:20,18:38,20:7,22:8,23:9,24:10,25:11,26:12,27:13,28:14,29:15,30:16,31:e,33:i,35:r,36:21,40:s,41:22,44:n,45:a,47:o,48:l,50:h,52:u,53:p,54:d,55:g,56:y,66:x,67:_,69:v,73:E,74:F,76:L,80:T,95:k,97:A,98:S},t(C,[2,17]),t(C,[2,27]),t(C,[2,28]),{13:[1,84],16:37,17:83,18:38,74:F,80:T,95:k,97:A,98:S},{49:85,57:54,58:55,59:f,60:B,61:b,62:P,63:U,64:N,65:w},t(C,[2,46]),{58:86,64:N,65:w},t(st,[2,62],{57:87,59:f,60:B,61:b,62:P,63:U}),t(j,[2,63]),t(j,[2,64]),t(j,[2,65]),t(j,[2,66]),t(j,[2,67]),t(dt,[2,68]),t(dt,[2,69]),{8:[1,89],23:90,38:88,41:22,44:n},{16:91,74:F,80:T,95:k,97:A},{43:92,47:K},{46:[1,94]},{13:[1,95]},{13:[1,96]},{70:[1,97],72:[1,98]},{21:G,73:tt,74:nt,75:99,77:100,79:101,80:Q,81:J,82:O,83:at,84:W,85:ft},{74:[1,111]},{13:D,51:112},t(C,[2,54]),t(C,[2,117]),t(V,[2,13]),t(V,[2,14]),t(V,[2,15]),{37:[2,32]},{15:113,16:79,37:[2,9],74:F,80:T,95:k,97:A},t(M,[2,40],{11:114,12:[1,115]}),t(m,[2,7]),{9:[1,116]},t(wt,[2,49]),{16:37,17:117,18:38,74:F,80:T,95:k,97:A,98:S},{13:[1,119],16:37,17:118,18:38,74:F,80:T,95:k,97:A,98:S},t(st,[2,61],{57:120,59:f,60:B,61:b,62:P,63:U}),t(st,[2,60]),{39:[1,121]},{23:90,38:122,41:22,44:n},{8:[1,123],39:[2,33]},t(R,[2,37],{37:[1,124]}),{39:[1,125]},{39:[2,43],43:126,47:K},{16:37,17:127,18:38,74:F,80:T,95:k,97:A,98:S},t(C,[2,70],{13:[1,128]}),t(C,[2,72],{13:[1,130],68:[1,129]}),t(C,[2,76],{13:[1,131],71:[1,132]}),{13:[1,133]},t(C,[2,84],{78:[1,134]}),t(X,[2,86],{79:135,21:G,73:tt,74:nt,80:Q,81:J,82:O,83:at,84:W,85:ft}),t(St,[2,88]),t(St,[2,90]),t(St,[2,91]),t(St,[2,92]),t(St,[2,93]),t(St,[2,94]),t(St,[2,95]),t(St,[2,96]),t(St,[2,97]),t(St,[2,98]),t(C,[2,85]),t(C,[2,53]),{37:[2,10]},t(M,[2,41]),{13:[1,136]},{1:[2,4]},t(wt,[2,51]),t(wt,[2,50]),{16:37,17:137,18:38,74:F,80:T,95:k,97:A,98:S},t(st,[2,59]),t(C,[2,30]),{39:[1,138]},{23:90,38:139,39:[2,34],41:22,44:n},{43:140,47:K},t(R,[2,38]),{39:[2,44]},t(C,[2,42]),t(C,[2,71]),t(C,[2,73]),t(C,[2,74],{68:[1,141]}),t(C,[2,77]),t(C,[2,78],{13:[1,142]}),t(C,[2,80],{13:[1,144],68:[1,143]}),{21:G,73:tt,74:nt,77:145,79:101,80:Q,81:J,82:O,83:at,84:W,85:ft},t(St,[2,89]),{14:[1,146]},t(wt,[2,52]),t(C,[2,31]),{39:[2,35]},{39:[1,147]},t(C,[2,75]),t(C,[2,79]),t(C,[2,81]),t(C,[2,82],{68:[1,148]}),t(X,[2,87],{79:135,21:G,73:tt,74:nt,80:Q,81:J,82:O,83:at,84:W,85:ft}),t(M,[2,8]),t(R,[2,39]),t(C,[2,83])],defaultActions:{2:[2,1],3:[2,2],4:[2,3],78:[2,32],113:[2,10],116:[2,4],126:[2,44],139:[2,35]},parseError:function(pt,ut){if(ut.recoverable)this.trace(pt);else{var ot=new Error(pt);throw ot.hash=ut,ot}},parse:function(pt){var ut=this,ot=[0],lt=[],ht=[null],$=[],rt=this.table,it="",ct=0,ee=0,Qt=2,de=1,zt=$.slice.call(arguments,1),Gt=Object.create(this.lexer),qt={yy:{}};for(var Se in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Se)&&(qt.yy[Se]=this.yy[Se]);Gt.setInput(pt,qt.yy),qt.yy.lexer=Gt,qt.yy.parser=this,typeof Gt.yylloc>"u"&&(Gt.yylloc={});var fe=Gt.yylloc;$.push(fe);var rr=Gt.options&&Gt.options.ranges;typeof qt.yy.parseError=="function"?this.parseError=qt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Or(){var It;return It=lt.pop()||Gt.lex()||de,typeof It!="number"&&(It instanceof Array&&(lt=It,It=lt.pop()),It=ut.symbols_[It]||It),It}for(var xe,jt,ie,Ot,Zt={},Dt,Yt,Ut,Pt;;){if(jt=ot[ot.length-1],this.defaultActions[jt]?ie=this.defaultActions[jt]:((xe===null||typeof xe>"u")&&(xe=Or()),ie=rt[jt]&&rt[jt][xe]),typeof ie>"u"||!ie.length||!ie[0]){var Nt="";Pt=[];for(Dt in rt[jt])this.terminals_[Dt]&&Dt>Qt&&Pt.push("'"+this.terminals_[Dt]+"'");Gt.showPosition?Nt="Parse error on line "+(ct+1)+`:
`+Gt.showPosition()+`
Expecting `+Pt.join(", ")+", got '"+(this.terminals_[xe]||xe)+"'":Nt="Parse error on line "+(ct+1)+": Unexpected "+(xe==de?"end of input":"'"+(this.terminals_[xe]||xe)+"'"),this.parseError(Nt,{text:Gt.match,token:this.terminals_[xe]||xe,line:Gt.yylineno,loc:fe,expected:Pt})}if(ie[0]instanceof Array&&ie.length>1)throw new Error("Parse Error: multiple actions possible at state: "+jt+", token: "+xe);switch(ie[0]){case 1:ot.push(xe),ht.push(Gt.yytext),$.push(Gt.yylloc),ot.push(ie[1]),xe=null,ee=Gt.yyleng,it=Gt.yytext,ct=Gt.yylineno,fe=Gt.yylloc;break;case 2:if(Yt=this.productions_[ie[1]][1],Zt.$=ht[ht.length-Yt],Zt._$={first_line:$[$.length-(Yt||1)].first_line,last_line:$[$.length-1].last_line,first_column:$[$.length-(Yt||1)].first_column,last_column:$[$.length-1].last_column},rr&&(Zt._$.range=[$[$.length-(Yt||1)].range[0],$[$.length-1].range[1]]),Ot=this.performAction.apply(Zt,[it,ee,ct,qt.yy,ie[1],ht,$].concat(zt)),typeof Ot<"u")return Ot;Yt&&(ot=ot.slice(0,-1*Yt*2),ht=ht.slice(0,-1*Yt),$=$.slice(0,-1*Yt)),ot.push(this.productions_[ie[1]][0]),ht.push(Zt.$),$.push(Zt._$),Ut=rt[ot[ot.length-2]][ot[ot.length-1]],ot.push(Ut);break;case 3:return!0}}return!0}},Vt=function(){var Wt={EOF:1,parseError:function(ut,ot){if(this.yy.parser)this.yy.parser.parseError(ut,ot);else throw new Error(ut)},setInput:function(pt,ut){return this.yy=ut||this.yy||{},this._input=pt,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var pt=this._input[0];this.yytext+=pt,this.yyleng++,this.offset++,this.match+=pt,this.matched+=pt;var ut=pt.match(/(?:\r\n?|\n).*/g);return ut?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),pt},unput:function(pt){var ut=pt.length,ot=pt.split(/(?:\r\n?|\n)/g);this._input=pt+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-ut),this.offset-=ut;var lt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),ot.length-1&&(this.yylineno-=ot.length-1);var ht=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:ot?(ot.length===lt.length?this.yylloc.first_column:0)+lt[lt.length-ot.length].length-ot[0].length:this.yylloc.first_column-ut},this.options.ranges&&(this.yylloc.range=[ht[0],ht[0]+this.yyleng-ut]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(pt){this.unput(this.match.slice(pt))},pastInput:function(){var pt=this.matched.substr(0,this.matched.length-this.match.length);return(pt.length>20?"...":"")+pt.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var pt=this.match;return pt.length<20&&(pt+=this._input.substr(0,20-pt.length)),(pt.substr(0,20)+(pt.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var pt=this.pastInput(),ut=new Array(pt.length+1).join("-");return pt+this.upcomingInput()+`
`+ut+"^"},test_match:function(pt,ut){var ot,lt,ht;if(this.options.backtrack_lexer&&(ht={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(ht.yylloc.range=this.yylloc.range.slice(0))),lt=pt[0].match(/(?:\r\n?|\n).*/g),lt&&(this.yylineno+=lt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lt?lt[lt.length-1].length-lt[lt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+pt[0].length},this.yytext+=pt[0],this.match+=pt[0],this.matches=pt,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(pt[0].length),this.matched+=pt[0],ot=this.performAction.call(this,this.yy,this,ut,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),ot)return ot;if(this._backtrack){for(var $ in ht)this[$]=ht[$];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var pt,ut,ot,lt;this._more||(this.yytext="",this.match="");for(var ht=this._currentRules(),$=0;$<ht.length;$++)if(ot=this._input.match(this.rules[ht[$]]),ot&&(!ut||ot[0].length>ut[0].length)){if(ut=ot,lt=$,this.options.backtrack_lexer){if(pt=this.test_match(ot,ht[$]),pt!==!1)return pt;if(this._backtrack){ut=!1;continue}else return!1}else if(!this.options.flex)break}return ut?(pt=this.test_match(ut,ht[lt]),pt!==!1?pt:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var ut=this.next();return ut||this.lex()},begin:function(ut){this.conditionStack.push(ut)},popState:function(){var ut=this.conditionStack.length-1;return ut>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(ut){return ut=this.conditionStack.length-1-Math.abs(ut||0),ut>=0?this.conditionStack[ut]:"INITIAL"},pushState:function(ut){this.begin(ut)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(ut,ot,lt,ht){switch(lt){case 0:return 53;case 1:return 54;case 2:return 55;case 3:return 56;case 4:break;case 5:break;case 6:return this.begin("acc_title"),31;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),33;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:return 8;case 14:break;case 15:return 7;case 16:return 7;case 17:return"EDGE_STATE";case 18:this.begin("callback_name");break;case 19:this.popState();break;case 20:this.popState(),this.begin("callback_args");break;case 21:return 70;case 22:this.popState();break;case 23:return 71;case 24:this.popState();break;case 25:return"STR";case 26:this.begin("string");break;case 27:return 73;case 28:return this.begin("namespace"),40;case 29:return this.popState(),8;case 30:break;case 31:return this.begin("namespace-body"),37;case 32:return this.popState(),39;case 33:return"EOF_IN_STRUCT";case 34:return 8;case 35:break;case 36:return"EDGE_STATE";case 37:return this.begin("class"),44;case 38:return this.popState(),8;case 39:break;case 40:return this.popState(),this.popState(),39;case 41:return this.begin("class-body"),37;case 42:return this.popState(),39;case 43:return"EOF_IN_STRUCT";case 44:return"EDGE_STATE";case 45:return"OPEN_IN_STRUCT";case 46:break;case 47:return"MEMBER";case 48:return 76;case 49:return 66;case 50:return 67;case 51:return 69;case 52:return 50;case 53:return 52;case 54:return 45;case 55:return 46;case 56:return 72;case 57:this.popState();break;case 58:return"GENERICTYPE";case 59:this.begin("generic");break;case 60:this.popState();break;case 61:return"BQUOTE_STR";case 62:this.begin("bqstring");break;case 63:return 68;case 64:return 68;case 65:return 68;case 66:return 68;case 67:return 60;case 68:return 60;case 69:return 62;case 70:return 62;case 71:return 61;case 72:return 59;case 73:return 63;case 74:return 64;case 75:return 65;case 76:return 21;case 77:return 42;case 78:return 95;case 79:return"DOT";case 80:return"PLUS";case 81:return 81;case 82:return 78;case 83:return 84;case 84:return 84;case 85:return 85;case 86:return"EQUALS";case 87:return"EQUALS";case 88:return 74;case 89:return 12;case 90:return 14;case 91:return"PUNCTUATION";case 92:return 80;case 93:return 97;case 94:return 83;case 95:return 83;case 96:return 9}},rules:[/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:classDiagram-v2\b)/,/^(?:classDiagram\b)/,/^(?:\[\*\])/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:["])/,/^(?:[^"]*)/,/^(?:["])/,/^(?:style\b)/,/^(?:namespace\b)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:[{])/,/^(?:[}])/,/^(?:$)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:\[\*\])/,/^(?:class\b)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:[}])/,/^(?:[{])/,/^(?:[}])/,/^(?:$)/,/^(?:\[\*\])/,/^(?:[{])/,/^(?:[\n])/,/^(?:[^{}\n]*)/,/^(?:cssClass\b)/,/^(?:callback\b)/,/^(?:link\b)/,/^(?:click\b)/,/^(?:note for\b)/,/^(?:note\b)/,/^(?:<<)/,/^(?:>>)/,/^(?:href\b)/,/^(?:[~])/,/^(?:[^~]*)/,/^(?:~)/,/^(?:[`])/,/^(?:[^`]+)/,/^(?:[`])/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:\s*<\|)/,/^(?:\s*\|>)/,/^(?:\s*>)/,/^(?:\s*<)/,/^(?:\s*\*)/,/^(?:\s*o\b)/,/^(?:\s*\(\))/,/^(?:--)/,/^(?:\.\.)/,/^(?::{1}[^:\n;]+)/,/^(?::{3})/,/^(?:-)/,/^(?:\.)/,/^(?:\+)/,/^(?::)/,/^(?:,)/,/^(?:#)/,/^(?:#)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:\w+)/,/^(?:\[)/,/^(?:\])/,/^(?:[!"#$%&'*+,-.`?\\/])/,/^(?:[0-9]+)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\s)/,/^(?:\s)/,/^(?:$)/],conditions:{"namespace-body":{rules:[26,32,33,34,35,36,37,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},namespace:{rules:[26,28,29,30,31,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},"class-body":{rules:[26,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},class:{rules:[26,38,39,40,41,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},acc_descr_multiline:{rules:[11,12,26,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},acc_descr:{rules:[9,26,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},acc_title:{rules:[7,26,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},callback_args:{rules:[22,23,26,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},callback_name:{rules:[19,20,21,26,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},href:{rules:[26,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},struct:{rules:[26,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},generic:{rules:[26,48,49,50,51,52,53,54,55,56,57,58,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},bqstring:{rules:[26,48,49,50,51,52,53,54,55,56,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},string:{rules:[24,25,26,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,85,86,87,88,89,90,91,92,93,94,96],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,8,10,13,14,15,16,17,18,26,27,28,37,48,49,50,51,52,53,54,55,56,59,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96],inclusive:!0}}};return Wt}();bt.lexer=Vt;function Bt(){this.yy={}}return Bt.prototype=bt,bt.Parser=Bt,new Bt}();ho.parser=ho;const P0=ho,Dc=["#","+","~","-",""];class Fc{constructor(e,i){this.memberType=i,this.visibility="",this.classifier="";const r=ue(e,Y());this.parseMember(r)}getDisplayDetails(){let e=this.visibility+xs(this.id);this.memberType==="method"&&(e+=`(${xs(this.parameters.trim())})`,this.returnType&&(e+=" : "+xs(this.returnType))),e=e.trim();const i=this.parseClassifier();return{displayText:e,cssStyle:i}}parseMember(e){let i="";if(this.memberType==="method"){const r=/([#+~-])?(.+)\((.*)\)([\s$*])?(.*)([$*])?/,s=e.match(r);if(s){const n=s[1]?s[1].trim():"";if(Dc.includes(n)&&(this.visibility=n),this.id=s[2].trim(),this.parameters=s[3]?s[3].trim():"",i=s[4]?s[4].trim():"",this.returnType=s[5]?s[5].trim():"",i===""){const a=this.returnType.substring(this.returnType.length-1);a.match(/[$*]/)&&(i=a,this.returnType=this.returnType.substring(0,this.returnType.length-1))}}}else{const r=e.length,s=e.substring(0,1),n=e.substring(r-1);Dc.includes(s)&&(this.visibility=s),n.match(/[$*]/)&&(i=n),this.id=e.substring(this.visibility===""?0:1,i===""?r:r-1)}this.classifier=i}parseClassifier(){switch(this.classifier){case"*":return"font-style:italic;";case"$":return"text-decoration:underline;";default:return""}}}const pa="classId-";let xl=[],Jt={},Hn=[],Rc=0,pr={},uo=0,Vs=[];const Lr=t=>mt.sanitizeText(t,Y()),Br=function(t){const e=mt.sanitizeText(t,Y());let i="",r=e;if(e.indexOf("~")>0){const s=e.split("~");r=Lr(s[0]),i=Lr(s[1])}return{className:r,type:i}},U_=function(t,e){const i=mt.sanitizeText(t,Y());e&&(e=Lr(e));const{className:r}=Br(i);Jt[r].label=e},Gn=function(t){const e=mt.sanitizeText(t,Y()),{className:i,type:r}=Br(e);if(Object.hasOwn(Jt,i))return;const s=mt.sanitizeText(i,Y());Jt[s]={id:s,type:r,label:s,cssClasses:[],methods:[],members:[],annotations:[],styles:[],domId:pa+s+"-"+Rc},Rc++},M0=function(t){const e=mt.sanitizeText(t,Y());if(e in Jt)return Jt[e].domId;throw new Error("Class not found: "+e)},H_=function(){xl=[],Jt={},Hn=[],Vs=[],Vs.push(z0),pr={},uo=0,Oe()},G_=function(t){return Jt[t]},j_=function(){return Jt},X_=function(){return xl},$_=function(){return Hn},K_=function(t){I.debug("Adding relation: "+JSON.stringify(t)),Gn(t.id1),Gn(t.id2),t.id1=Br(t.id1).className,t.id2=Br(t.id2).className,t.relationTitle1=mt.sanitizeText(t.relationTitle1.trim(),Y()),t.relationTitle2=mt.sanitizeText(t.relationTitle2.trim(),Y()),xl.push(t)},Q_=function(t,e){const i=Br(t).className;Jt[i].annotations.push(e)},V0=function(t,e){Gn(t);const i=Br(t).className,r=Jt[i];if(typeof e=="string"){const s=e.trim();s.startsWith("<<")&&s.endsWith(">>")?r.annotations.push(Lr(s.substring(2,s.length-2))):s.indexOf(")")>0?r.methods.push(new Fc(s,"method")):s&&r.members.push(new Fc(s,"attribute"))}},Z_=function(t,e){Array.isArray(e)&&(e.reverse(),e.forEach(i=>V0(t,i)))},J_=function(t,e){const i={id:`note${Hn.length}`,class:e,text:t};Hn.push(i)},t7=function(t){return t.startsWith(":")&&(t=t.substring(1)),Lr(t.trim())},bl=function(t,e){t.split(",").forEach(function(i){let r=i;i[0].match(/\d/)&&(r=pa+r),Jt[r]!==void 0&&Jt[r].cssClasses.push(e)})},e7=function(t,e){t.split(",").forEach(function(i){e!==void 0&&(Jt[i].tooltip=Lr(e))})},i7=function(t,e){return e?pr[e].classes[t].tooltip:Jt[t].tooltip},r7=function(t,e,i){const r=Y();t.split(",").forEach(function(s){let n=s;s[0].match(/\d/)&&(n=pa+n),Jt[n]!==void 0&&(Jt[n].link=Rt.formatUrl(e,r),r.securityLevel==="sandbox"?Jt[n].linkTarget="_top":typeof i=="string"?Jt[n].linkTarget=Lr(i):Jt[n].linkTarget="_blank")}),bl(t,"clickable")},s7=function(t,e,i){t.split(",").forEach(function(r){n7(r,e,i),Jt[r].haveCallback=!0}),bl(t,"clickable")},n7=function(t,e,i){const r=mt.sanitizeText(t,Y());if(Y().securityLevel!=="loose"||e===void 0)return;const n=r;if(Jt[n]!==void 0){const a=M0(n);let o=[];if(typeof i=="string"){o=i.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let l=0;l<o.length;l++){let h=o[l].trim();h.charAt(0)==='"'&&h.charAt(h.length-1)==='"'&&(h=h.substr(1,h.length-2)),o[l]=h}}o.length===0&&o.push(a),Vs.push(function(){const l=document.querySelector(`[id="${a}"]`);l!==null&&l.addEventListener("click",function(){Rt.runFunc(e,...o)},!1)})}},a7=function(t){Vs.forEach(function(e){e(t)})},o7={LINE:0,DOTTED_LINE:1},l7={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3,LOLLIPOP:4},z0=function(t){let e=yt(".mermaidTooltip");(e._groups||e)[0][0]===null&&(e=yt("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),yt(t).select("svg").selectAll("g.node").on("mouseover",function(){const s=yt(this);if(s.attr("title")===null)return;const a=this.getBoundingClientRect();e.transition().duration(200).style("opacity",".9"),e.text(s.attr("title")).style("left",window.scrollX+a.left+(a.right-a.left)/2+"px").style("top",window.scrollY+a.top-14+document.body.scrollTop+"px"),e.html(e.html().replace(/&lt;br\/&gt;/g,"<br/>")),s.classed("hover",!0)}).on("mouseout",function(){e.transition().duration(500).style("opacity",0),yt(this).classed("hover",!1)})};Vs.push(z0);let q0="TB";const c7=()=>q0,h7=t=>{q0=t},u7=function(t){pr[t]===void 0&&(pr[t]={id:t,classes:{},children:{},domId:pa+t+"-"+uo},uo++)},d7=function(t){return pr[t]},f7=function(){return pr},p7=function(t,e){if(pr[t]!==void 0)for(const i of e){const{className:r}=Br(i);Jt[r].parent=t,pr[t].classes[r]=Jt[r]}},g7=function(t,e){const i=Jt[t];if(!(!e||!i))for(const r of e)r.includes(",")?i.styles.push(...r.split(",")):i.styles.push(r)},jn={setAccTitle:Pe,getAccTitle:Ye,getAccDescription:He,setAccDescription:Ue,getConfig:()=>Y().class,addClass:Gn,bindFunctions:a7,clear:H_,getClass:G_,getClasses:j_,getNotes:$_,addAnnotation:Q_,addNote:J_,getRelations:X_,addRelation:K_,getDirection:c7,setDirection:h7,addMember:V0,addMembers:Z_,cleanupLabel:t7,lineType:o7,relationType:l7,setClickEvent:s7,setCssClass:bl,setLink:r7,getTooltip:i7,setTooltip:e7,lookUpDomId:M0,setDiagramTitle:ri,getDiagramTitle:Ge,setClassLabel:U_,addNamespace:u7,addClassesToNamespace:p7,getNamespace:d7,getNamespaces:f7,setCssStyle:g7},y7=t=>`g.classGroup text {
  fill: ${t.nodeBorder||t.classText};
  stroke: none;
  font-family: ${t.fontFamily};
  font-size: 10px;

  .title {
    font-weight: bolder;
  }

}

.nodeLabel, .edgeLabel {
  color: ${t.classText};
}
.edgeLabel .label rect {
  fill: ${t.mainBkg};
}
.label text {
  fill: ${t.classText};
}
.edgeLabel .label span {
  background: ${t.mainBkg};
}

.classTitle {
  font-weight: bolder;
}
.node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }


.divider {
  stroke: ${t.nodeBorder};
  stroke-width: 1;
}

g.clickable {
  cursor: pointer;
}

g.classGroup rect {
  fill: ${t.mainBkg};
  stroke: ${t.nodeBorder};
}

g.classGroup line {
  stroke: ${t.nodeBorder};
  stroke-width: 1;
}

.classLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${t.mainBkg};
  opacity: 0.5;
}

.classLabel .label {
  fill: ${t.nodeBorder};
  font-size: 10px;
}

.relation {
  stroke: ${t.lineColor};
  stroke-width: 1;
  fill: none;
}

.dashed-line{
  stroke-dasharray: 3;
}

.dotted-line{
  stroke-dasharray: 1 2;
}

#compositionStart, .composition {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#compositionEnd, .composition {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#extensionStart, .extension {
  fill: transparent !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#extensionEnd, .extension {
  fill: transparent !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#aggregationStart, .aggregation {
  fill: transparent !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#aggregationEnd, .aggregation {
  fill: transparent !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#lollipopStart, .lollipop {
  fill: ${t.mainBkg} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#lollipopEnd, .lollipop {
  fill: ${t.mainBkg} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

.edgeTerminals {
  font-size: 11px;
  line-height: initial;
}

.classTitleText {
  text-anchor: middle;
  font-size: 18px;
  fill: ${t.textColor};
}
`,W0=y7;let Nc=0;const m7=function(t,e,i,r,s){const n=function(E){switch(E){case s.db.relationType.AGGREGATION:return"aggregation";case s.db.relationType.EXTENSION:return"extension";case s.db.relationType.COMPOSITION:return"composition";case s.db.relationType.DEPENDENCY:return"dependency";case s.db.relationType.LOLLIPOP:return"lollipop"}};e.points=e.points.filter(E=>!Number.isNaN(E.y));const a=e.points,o=dr().x(function(E){return E.x}).y(function(E){return E.y}).curve(Gs),l=t.append("path").attr("d",o(a)).attr("id","edge"+Nc).attr("class","relation");let h="";r.arrowMarkerAbsolute&&(h=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,h=h.replace(/\(/g,"\\("),h=h.replace(/\)/g,"\\)")),i.relation.lineType==1&&l.attr("class","relation dashed-line"),i.relation.lineType==10&&l.attr("class","relation dotted-line"),i.relation.type1!=="none"&&l.attr("marker-start","url("+h+"#"+n(i.relation.type1)+"Start)"),i.relation.type2!=="none"&&l.attr("marker-end","url("+h+"#"+n(i.relation.type2)+"End)");let u,p;const d=e.points.length;let g=Rt.calcLabelPosition(e.points);u=g.x,p=g.y;let y,x,_,v;if(d%2!==0&&d>1){let E=Rt.calcCardinalityPosition(i.relation.type1!=="none",e.points,e.points[0]),F=Rt.calcCardinalityPosition(i.relation.type2!=="none",e.points,e.points[d-1]);I.debug("cardinality_1_point "+JSON.stringify(E)),I.debug("cardinality_2_point "+JSON.stringify(F)),y=E.x,x=E.y,_=F.x,v=F.y}if(i.title!==void 0){const E=t.append("g").attr("class","classLabel"),F=E.append("text").attr("class","label").attr("x",u).attr("y",p).attr("fill","red").attr("text-anchor","middle").text(i.title);window.label=F;const L=F.node().getBBox();E.insert("rect",":first-child").attr("class","box").attr("x",L.x-r.padding/2).attr("y",L.y-r.padding/2).attr("width",L.width+r.padding).attr("height",L.height+r.padding)}I.info("Rendering relation "+JSON.stringify(i)),i.relationTitle1!==void 0&&i.relationTitle1!=="none"&&t.append("g").attr("class","cardinality").append("text").attr("class","type1").attr("x",y).attr("y",x).attr("fill","black").attr("font-size","6").text(i.relationTitle1),i.relationTitle2!==void 0&&i.relationTitle2!=="none"&&t.append("g").attr("class","cardinality").append("text").attr("class","type2").attr("x",_).attr("y",v).attr("fill","black").attr("font-size","6").text(i.relationTitle2),Nc++},x7=function(t,e,i,r){I.debug("Rendering class ",e,i);const s=e.id,n={id:s,label:e.id,width:0,height:0},a=t.append("g").attr("id",r.db.lookUpDomId(s)).attr("class","classGroup");let o;e.link?o=a.append("svg:a").attr("xlink:href",e.link).attr("target",e.linkTarget).append("text").attr("y",i.textHeight+i.padding).attr("x",0):o=a.append("text").attr("y",i.textHeight+i.padding).attr("x",0);let l=!0;e.annotations.forEach(function(F){const L=o.append("tspan").text("«"+F+"»");l||L.attr("dy",i.textHeight),l=!1});let h=Y0(e);const u=o.append("tspan").text(h).attr("class","title");l||u.attr("dy",i.textHeight);const p=o.node().getBBox().height;let d,g,y;if(e.members.length>0){d=a.append("line").attr("x1",0).attr("y1",i.padding+p+i.dividerMargin/2).attr("y2",i.padding+p+i.dividerMargin/2);const F=a.append("text").attr("x",i.padding).attr("y",p+i.dividerMargin+i.textHeight).attr("fill","white").attr("class","classText");l=!0,e.members.forEach(function(L){Oc(F,L,l,i),l=!1}),g=F.node().getBBox()}if(e.methods.length>0){y=a.append("line").attr("x1",0).attr("y1",i.padding+p+i.dividerMargin+g.height).attr("y2",i.padding+p+i.dividerMargin+g.height);const F=a.append("text").attr("x",i.padding).attr("y",p+2*i.dividerMargin+g.height+i.textHeight).attr("fill","white").attr("class","classText");l=!0,e.methods.forEach(function(L){Oc(F,L,l,i),l=!1})}const x=a.node().getBBox();var _=" ";e.cssClasses.length>0&&(_=_+e.cssClasses.join(" "));const E=a.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",x.width+2*i.padding).attr("height",x.height+i.padding+.5*i.dividerMargin).attr("class",_).node().getBBox().width;return o.node().childNodes.forEach(function(F){F.setAttribute("x",(E-F.getBBox().width)/2)}),e.tooltip&&o.insert("title").text(e.tooltip),d&&d.attr("x2",E),y&&y.attr("x2",E),n.width=E,n.height=x.height+i.padding+.5*i.dividerMargin,n},Y0=function(t){let e=t.id;return t.type&&(e+="<"+xs(t.type)+">"),e},b7=function(t,e,i,r){I.debug("Rendering note ",e,i);const s=e.id,n={id:s,text:e.text,width:0,height:0},a=t.append("g").attr("id",s).attr("class","classGroup");let o=a.append("text").attr("y",i.textHeight+i.padding).attr("x",0);const l=JSON.parse(`"${e.text}"`).split(`
`);l.forEach(function(d){I.debug(`Adding line: ${d}`),o.append("tspan").text(d).attr("class","title").attr("dy",i.textHeight)});const h=a.node().getBBox(),p=a.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",h.width+2*i.padding).attr("height",h.height+l.length*i.textHeight+i.padding+.5*i.dividerMargin).node().getBBox().width;return o.node().childNodes.forEach(function(d){d.setAttribute("x",(p-d.getBBox().width)/2)}),n.width=p,n.height=h.height+l.length*i.textHeight+i.padding+.5*i.dividerMargin,n},Oc=function(t,e,i,r){const{displayText:s,cssStyle:n}=e.getDisplayDetails(),a=t.append("tspan").attr("x",r.padding).text(s);n!==""&&a.attr("style",e.cssStyle),i||a.attr("dy",r.textHeight)},Ba={getClassTitleString:Y0,drawClass:x7,drawEdge:m7,drawNote:b7};let xn={};const hn=20,ds=function(t){const e=Object.entries(xn).find(i=>i[1].label===t);if(e)return e[0]},k7=function(t){t.append("defs").append("marker").attr("id","extensionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id","extensionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z"),t.append("defs").append("marker").attr("id","compositionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","compositionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","aggregationStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","aggregationEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","dependencyStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},_7=function(t,e,i,r){const s=Y().class;xn={},I.info("Rendering diagram "+t);const n=Y().securityLevel;let a;n==="sandbox"&&(a=yt("#i"+e));const o=n==="sandbox"?yt(a.nodes()[0].contentDocument.body):yt("body"),l=o.select(`[id='${e}']`);k7(l);const h=new Bi({multigraph:!0});h.setGraph({isMultiGraph:!0}),h.setDefaultEdgeLabel(function(){return{}});const u=r.db.getClasses(),p=Object.keys(u);for(const E of p){const F=u[E],L=Ba.drawClass(l,F,s,r);xn[L.id]=L,h.setNode(L.id,L),I.info("Org height: "+L.height)}r.db.getRelations().forEach(function(E){I.info("tjoho"+ds(E.id1)+ds(E.id2)+JSON.stringify(E)),h.setEdge(ds(E.id1),ds(E.id2),{relation:E},E.title||"DEFAULT")}),r.db.getNotes().forEach(function(E){I.debug(`Adding note: ${JSON.stringify(E)}`);const F=Ba.drawNote(l,E,s,r);xn[F.id]=F,h.setNode(F.id,F),E.class&&E.class in u&&h.setEdge(E.id,ds(E.class),{relation:{id1:E.id,id2:E.class,relation:{type1:"none",type2:"none",lineType:10}}},"DEFAULT")}),Hs(h),h.nodes().forEach(function(E){E!==void 0&&h.node(E)!==void 0&&(I.debug("Node "+E+": "+JSON.stringify(h.node(E))),o.select("#"+(r.db.lookUpDomId(E)||E)).attr("transform","translate("+(h.node(E).x-h.node(E).width/2)+","+(h.node(E).y-h.node(E).height/2)+" )"))}),h.edges().forEach(function(E){E!==void 0&&h.edge(E)!==void 0&&(I.debug("Edge "+E.v+" -> "+E.w+": "+JSON.stringify(h.edge(E))),Ba.drawEdge(l,h.edge(E),h.edge(E).relation,s,r))});const y=l.node().getBBox(),x=y.width+hn*2,_=y.height+hn*2;Ne(l,_,x,s.useMaxWidth);const v=`${y.x-hn} ${y.y-hn} ${x} ${_}`;I.debug(`viewBox ${v}`),l.attr("viewBox",v)},T7={draw:_7},C7={parser:P0,db:jn,renderer:T7,styles:W0,init:t=>{t.class||(t.class={}),t.class.arrowMarkerAbsolute=t.arrowMarkerAbsolute,jn.clear()}},E7=Object.freeze(Object.defineProperty({__proto__:null,diagram:C7},Symbol.toStringTag,{value:"Module"})),kl=t=>mt.sanitizeText(t,Y());let fo={dividerMargin:10,padding:5,textHeight:10,curve:void 0};const S7=function(t,e,i,r){const s=Object.keys(t);I.info("keys:",s),I.info(t),s.forEach(function(n){var a,o;const l=t[n],u={shape:"rect",id:l.id,domId:l.domId,labelText:kl(l.id),labelStyle:"",style:"fill: none; stroke: black",padding:((a=Y().flowchart)==null?void 0:a.padding)??((o=Y().class)==null?void 0:o.padding)};e.setNode(l.id,u),U0(l.classes,e,i,r,l.id),I.info("setNode",u)})},U0=function(t,e,i,r,s){const n=Object.keys(t);I.info("keys:",n),I.info(t),n.filter(a=>t[a].parent==s).forEach(function(a){var o,l;const h=t[a],u=h.cssClasses.join(" "),p=ii(h.styles),d=h.label??h.id,g=0,y="class_box",x={labelStyle:p.labelStyle,shape:y,labelText:kl(d),classData:h,rx:g,ry:g,class:u,style:p.style,id:h.id,domId:h.domId,tooltip:r.db.getTooltip(h.id,s)||"",haveCallback:h.haveCallback,link:h.link,width:h.type==="group"?500:void 0,type:h.type,padding:((o=Y().flowchart)==null?void 0:o.padding)??((l=Y().class)==null?void 0:l.padding)};e.setNode(h.id,x),s&&e.setParent(h.id,s),I.info("setNode",x)})},v7=function(t,e,i,r){I.info(t),t.forEach(function(s,n){var a,o;const l=s,h="",u={labelStyle:"",style:""},p=l.text,d=0,g="note",y={labelStyle:u.labelStyle,shape:g,labelText:kl(p),noteData:l,rx:d,ry:d,class:h,style:u.style,id:l.id,domId:l.id,tooltip:"",type:"note",padding:((a=Y().flowchart)==null?void 0:a.padding)??((o=Y().class)==null?void 0:o.padding)};if(e.setNode(l.id,y),I.info("setNode",y),!l.class||!(l.class in r))return;const x=i+n,_={id:`edgeNote${x}`,classes:"relation",pattern:"dotted",arrowhead:"none",startLabelRight:"",endLabelLeft:"",arrowTypeStart:"none",arrowTypeEnd:"none",style:"fill:none",labelStyle:"",curve:di(fo.curve,ei)};e.setEdge(l.id,l.class,_,x)})},w7=function(t,e){const i=Y().flowchart;let r=0;t.forEach(function(s){var n;r++;const a={classes:"relation",pattern:s.relation.lineType==1?"dashed":"solid",id:`id_${s.id1}_${s.id2}_${r}`,arrowhead:s.type==="arrow_open"?"none":"normal",startLabelRight:s.relationTitle1==="none"?"":s.relationTitle1,endLabelLeft:s.relationTitle2==="none"?"":s.relationTitle2,arrowTypeStart:Pc(s.relation.type1),arrowTypeEnd:Pc(s.relation.type2),style:"fill:none",labelStyle:"",curve:di(i==null?void 0:i.curve,ei)};if(I.info(a,s),s.style!==void 0){const o=ii(s.style);a.style=o.style,a.labelStyle=o.labelStyle}s.text=s.title,s.text===void 0?s.style!==void 0&&(a.arrowheadStyle="fill: #333"):(a.arrowheadStyle="fill: #333",a.labelpos="c",((n=Y().flowchart)==null?void 0:n.htmlLabels)??Y().htmlLabels?(a.labelType="html",a.label='<span class="edgeLabel">'+s.text+"</span>"):(a.labelType="text",a.label=s.text.replace(mt.lineBreakRegex,`
`),s.style===void 0&&(a.style=a.style||"stroke: #333; stroke-width: 1.5px;fill:none"),a.labelStyle=a.labelStyle.replace("color:","fill:"))),e.setEdge(s.id1,s.id2,a,r)})},A7=function(t){fo={...fo,...t}},L7=async function(t,e,i,r){I.info("Drawing class - ",e);const s=Y().flowchart??Y().class,n=Y().securityLevel;I.info("config:",s);const a=(s==null?void 0:s.nodeSpacing)??50,o=(s==null?void 0:s.rankSpacing)??50,l=new Bi({multigraph:!0,compound:!0}).setGraph({rankdir:r.db.getDirection(),nodesep:a,ranksep:o,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}}),h=r.db.getNamespaces(),u=r.db.getClasses(),p=r.db.getRelations(),d=r.db.getNotes();I.info(p),S7(h,l,e,r),U0(u,l,e,r),w7(p,l),v7(d,l,p.length+1,u);let g;n==="sandbox"&&(g=yt("#i"+e));const y=n==="sandbox"?yt(g.nodes()[0].contentDocument.body):yt("body"),x=y.select(`[id="${e}"]`),_=y.select("#"+e+" g");if(await Zo(_,l,["aggregation","extension","composition","dependency","lollipop"],"classDiagram",e),Rt.insertTitle(x,"classTitleText",(s==null?void 0:s.titleTopMargin)??5,r.db.getDiagramTitle()),gr(l,x,s==null?void 0:s.diagramPadding,s==null?void 0:s.useMaxWidth),!(s!=null&&s.htmlLabels)){const v=n==="sandbox"?g.nodes()[0].contentDocument:document,E=v.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(const F of E){const L=F.getBBox(),T=v.createElementNS("http://www.w3.org/2000/svg","rect");T.setAttribute("rx",0),T.setAttribute("ry",0),T.setAttribute("width",L.width),T.setAttribute("height",L.height),F.insertBefore(T,F.firstChild)}}};function Pc(t){let e;switch(t){case 0:e="aggregation";break;case 1:e="extension";break;case 2:e="composition";break;case 3:e="dependency";break;case 4:e="lollipop";break;default:e="none"}return e}const B7={setConf:A7,draw:L7},I7={parser:P0,db:jn,renderer:B7,styles:W0,init:t=>{t.class||(t.class={}),t.class.arrowMarkerAbsolute=t.arrowMarkerAbsolute,jn.clear()}},D7=Object.freeze(Object.defineProperty({__proto__:null,diagram:I7},Symbol.toStringTag,{value:"Module"}));var po=function(){var t=function(w,R,D,V){for(D=D||{},V=w.length;V--;D[w[V]]=R);return D},e=[1,2],i=[1,3],r=[1,4],s=[2,4],n=[1,9],a=[1,11],o=[1,15],l=[1,16],h=[1,17],u=[1,18],p=[1,30],d=[1,19],g=[1,20],y=[1,21],x=[1,22],_=[1,23],v=[1,25],E=[1,26],F=[1,27],L=[1,28],T=[1,29],k=[1,32],A=[1,33],S=[1,34],m=[1,35],C=[1,31],f=[1,4,5,15,16,18,20,21,23,24,25,26,27,28,32,34,36,37,41,44,45,46,47,50],B=[1,4,5,13,14,15,16,18,20,21,23,24,25,26,27,28,32,34,36,37,41,44,45,46,47,50],b=[4,5,15,16,18,20,21,23,24,25,26,27,28,32,34,36,37,41,44,45,46,47,50],P={trace:function(){},yy:{},symbols_:{error:2,start:3,SPACE:4,NL:5,SD:6,document:7,line:8,statement:9,classDefStatement:10,cssClassStatement:11,idStatement:12,DESCR:13,"-->":14,HIDE_EMPTY:15,scale:16,WIDTH:17,COMPOSIT_STATE:18,STRUCT_START:19,STRUCT_STOP:20,STATE_DESCR:21,AS:22,ID:23,FORK:24,JOIN:25,CHOICE:26,CONCURRENT:27,note:28,notePosition:29,NOTE_TEXT:30,direction:31,acc_title:32,acc_title_value:33,acc_descr:34,acc_descr_value:35,acc_descr_multiline_value:36,classDef:37,CLASSDEF_ID:38,CLASSDEF_STYLEOPTS:39,DEFAULT:40,class:41,CLASSENTITY_IDS:42,STYLECLASS:43,direction_tb:44,direction_bt:45,direction_rl:46,direction_lr:47,eol:48,";":49,EDGE_STATE:50,STYLE_SEPARATOR:51,left_of:52,right_of:53,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NL",6:"SD",13:"DESCR",14:"-->",15:"HIDE_EMPTY",16:"scale",17:"WIDTH",18:"COMPOSIT_STATE",19:"STRUCT_START",20:"STRUCT_STOP",21:"STATE_DESCR",22:"AS",23:"ID",24:"FORK",25:"JOIN",26:"CHOICE",27:"CONCURRENT",28:"note",30:"NOTE_TEXT",32:"acc_title",33:"acc_title_value",34:"acc_descr",35:"acc_descr_value",36:"acc_descr_multiline_value",37:"classDef",38:"CLASSDEF_ID",39:"CLASSDEF_STYLEOPTS",40:"DEFAULT",41:"class",42:"CLASSENTITY_IDS",43:"STYLECLASS",44:"direction_tb",45:"direction_bt",46:"direction_rl",47:"direction_lr",49:";",50:"EDGE_STATE",51:"STYLE_SEPARATOR",52:"left_of",53:"right_of"},productions_:[0,[3,2],[3,2],[3,2],[7,0],[7,2],[8,2],[8,1],[8,1],[9,1],[9,1],[9,1],[9,2],[9,3],[9,4],[9,1],[9,2],[9,1],[9,4],[9,3],[9,6],[9,1],[9,1],[9,1],[9,1],[9,4],[9,4],[9,1],[9,2],[9,2],[9,1],[10,3],[10,3],[11,3],[31,1],[31,1],[31,1],[31,1],[48,1],[48,1],[12,1],[12,1],[12,3],[12,3],[29,1],[29,1]],performAction:function(R,D,V,z,st,j,dt){var K=j.length-1;switch(st){case 3:return z.setRootDoc(j[K]),j[K];case 4:this.$=[];break;case 5:j[K]!="nl"&&(j[K-1].push(j[K]),this.$=j[K-1]);break;case 6:case 7:this.$=j[K];break;case 8:this.$="nl";break;case 11:this.$=j[K];break;case 12:const Q=j[K-1];Q.description=z.trimColon(j[K]),this.$=Q;break;case 13:this.$={stmt:"relation",state1:j[K-2],state2:j[K]};break;case 14:const J=z.trimColon(j[K]);this.$={stmt:"relation",state1:j[K-3],state2:j[K-1],description:J};break;case 18:this.$={stmt:"state",id:j[K-3],type:"default",description:"",doc:j[K-1]};break;case 19:var G=j[K],tt=j[K-2].trim();if(j[K].match(":")){var nt=j[K].split(":");G=nt[0],tt=[tt,nt[1]]}this.$={stmt:"state",id:G,type:"default",description:tt};break;case 20:this.$={stmt:"state",id:j[K-3],type:"default",description:j[K-5],doc:j[K-1]};break;case 21:this.$={stmt:"state",id:j[K],type:"fork"};break;case 22:this.$={stmt:"state",id:j[K],type:"join"};break;case 23:this.$={stmt:"state",id:j[K],type:"choice"};break;case 24:this.$={stmt:"state",id:z.getDividerId(),type:"divider"};break;case 25:this.$={stmt:"state",id:j[K-1].trim(),note:{position:j[K-2].trim(),text:j[K].trim()}};break;case 28:this.$=j[K].trim(),z.setAccTitle(this.$);break;case 29:case 30:this.$=j[K].trim(),z.setAccDescription(this.$);break;case 31:case 32:this.$={stmt:"classDef",id:j[K-1].trim(),classes:j[K].trim()};break;case 33:this.$={stmt:"applyClass",id:j[K-1].trim(),styleClass:j[K].trim()};break;case 34:z.setDirection("TB"),this.$={stmt:"dir",value:"TB"};break;case 35:z.setDirection("BT"),this.$={stmt:"dir",value:"BT"};break;case 36:z.setDirection("RL"),this.$={stmt:"dir",value:"RL"};break;case 37:z.setDirection("LR"),this.$={stmt:"dir",value:"LR"};break;case 40:case 41:this.$={stmt:"state",id:j[K].trim(),type:"default",description:""};break;case 42:this.$={stmt:"state",id:j[K-2].trim(),classes:[j[K].trim()],type:"default",description:""};break;case 43:this.$={stmt:"state",id:j[K-2].trim(),classes:[j[K].trim()],type:"default",description:""};break}},table:[{3:1,4:e,5:i,6:r},{1:[3]},{3:5,4:e,5:i,6:r},{3:6,4:e,5:i,6:r},t([1,4,5,15,16,18,21,23,24,25,26,27,28,32,34,36,37,41,44,45,46,47,50],s,{7:7}),{1:[2,1]},{1:[2,2]},{1:[2,3],4:n,5:a,8:8,9:10,10:12,11:13,12:14,15:o,16:l,18:h,21:u,23:p,24:d,25:g,26:y,27:x,28:_,31:24,32:v,34:E,36:F,37:L,41:T,44:k,45:A,46:S,47:m,50:C},t(f,[2,5]),{9:36,10:12,11:13,12:14,15:o,16:l,18:h,21:u,23:p,24:d,25:g,26:y,27:x,28:_,31:24,32:v,34:E,36:F,37:L,41:T,44:k,45:A,46:S,47:m,50:C},t(f,[2,7]),t(f,[2,8]),t(f,[2,9]),t(f,[2,10]),t(f,[2,11],{13:[1,37],14:[1,38]}),t(f,[2,15]),{17:[1,39]},t(f,[2,17],{19:[1,40]}),{22:[1,41]},t(f,[2,21]),t(f,[2,22]),t(f,[2,23]),t(f,[2,24]),{29:42,30:[1,43],52:[1,44],53:[1,45]},t(f,[2,27]),{33:[1,46]},{35:[1,47]},t(f,[2,30]),{38:[1,48],40:[1,49]},{42:[1,50]},t(B,[2,40],{51:[1,51]}),t(B,[2,41],{51:[1,52]}),t(f,[2,34]),t(f,[2,35]),t(f,[2,36]),t(f,[2,37]),t(f,[2,6]),t(f,[2,12]),{12:53,23:p,50:C},t(f,[2,16]),t(b,s,{7:54}),{23:[1,55]},{23:[1,56]},{22:[1,57]},{23:[2,44]},{23:[2,45]},t(f,[2,28]),t(f,[2,29]),{39:[1,58]},{39:[1,59]},{43:[1,60]},{23:[1,61]},{23:[1,62]},t(f,[2,13],{13:[1,63]}),{4:n,5:a,8:8,9:10,10:12,11:13,12:14,15:o,16:l,18:h,20:[1,64],21:u,23:p,24:d,25:g,26:y,27:x,28:_,31:24,32:v,34:E,36:F,37:L,41:T,44:k,45:A,46:S,47:m,50:C},t(f,[2,19],{19:[1,65]}),{30:[1,66]},{23:[1,67]},t(f,[2,31]),t(f,[2,32]),t(f,[2,33]),t(B,[2,42]),t(B,[2,43]),t(f,[2,14]),t(f,[2,18]),t(b,s,{7:68}),t(f,[2,25]),t(f,[2,26]),{4:n,5:a,8:8,9:10,10:12,11:13,12:14,15:o,16:l,18:h,20:[1,69],21:u,23:p,24:d,25:g,26:y,27:x,28:_,31:24,32:v,34:E,36:F,37:L,41:T,44:k,45:A,46:S,47:m,50:C},t(f,[2,20])],defaultActions:{5:[2,1],6:[2,2],44:[2,44],45:[2,45]},parseError:function(R,D){if(D.recoverable)this.trace(R);else{var V=new Error(R);throw V.hash=D,V}},parse:function(R){var D=this,V=[0],z=[],st=[null],j=[],dt=this.table,K="",G=0,tt=0,nt=2,Q=1,J=j.slice.call(arguments,1),O=Object.create(this.lexer),at={yy:{}};for(var W in this.yy)Object.prototype.hasOwnProperty.call(this.yy,W)&&(at.yy[W]=this.yy[W]);O.setInput(R,at.yy),at.yy.lexer=O,at.yy.parser=this,typeof O.yylloc>"u"&&(O.yylloc={});var ft=O.yylloc;j.push(ft);var M=O.options&&O.options.ranges;typeof at.yy.parseError=="function"?this.parseError=at.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function wt(){var ht;return ht=z.pop()||O.lex()||Q,typeof ht!="number"&&(ht instanceof Array&&(z=ht,ht=z.pop()),ht=D.symbols_[ht]||ht),ht}for(var X,St,bt,Vt,Bt={},Wt,pt,ut,ot;;){if(St=V[V.length-1],this.defaultActions[St]?bt=this.defaultActions[St]:((X===null||typeof X>"u")&&(X=wt()),bt=dt[St]&&dt[St][X]),typeof bt>"u"||!bt.length||!bt[0]){var lt="";ot=[];for(Wt in dt[St])this.terminals_[Wt]&&Wt>nt&&ot.push("'"+this.terminals_[Wt]+"'");O.showPosition?lt="Parse error on line "+(G+1)+`:
`+O.showPosition()+`
Expecting `+ot.join(", ")+", got '"+(this.terminals_[X]||X)+"'":lt="Parse error on line "+(G+1)+": Unexpected "+(X==Q?"end of input":"'"+(this.terminals_[X]||X)+"'"),this.parseError(lt,{text:O.match,token:this.terminals_[X]||X,line:O.yylineno,loc:ft,expected:ot})}if(bt[0]instanceof Array&&bt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+St+", token: "+X);switch(bt[0]){case 1:V.push(X),st.push(O.yytext),j.push(O.yylloc),V.push(bt[1]),X=null,tt=O.yyleng,K=O.yytext,G=O.yylineno,ft=O.yylloc;break;case 2:if(pt=this.productions_[bt[1]][1],Bt.$=st[st.length-pt],Bt._$={first_line:j[j.length-(pt||1)].first_line,last_line:j[j.length-1].last_line,first_column:j[j.length-(pt||1)].first_column,last_column:j[j.length-1].last_column},M&&(Bt._$.range=[j[j.length-(pt||1)].range[0],j[j.length-1].range[1]]),Vt=this.performAction.apply(Bt,[K,tt,G,at.yy,bt[1],st,j].concat(J)),typeof Vt<"u")return Vt;pt&&(V=V.slice(0,-1*pt*2),st=st.slice(0,-1*pt),j=j.slice(0,-1*pt)),V.push(this.productions_[bt[1]][0]),st.push(Bt.$),j.push(Bt._$),ut=dt[V[V.length-2]][V[V.length-1]],V.push(ut);break;case 3:return!0}}return!0}},U=function(){var w={EOF:1,parseError:function(D,V){if(this.yy.parser)this.yy.parser.parseError(D,V);else throw new Error(D)},setInput:function(R,D){return this.yy=D||this.yy||{},this._input=R,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var R=this._input[0];this.yytext+=R,this.yyleng++,this.offset++,this.match+=R,this.matched+=R;var D=R.match(/(?:\r\n?|\n).*/g);return D?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),R},unput:function(R){var D=R.length,V=R.split(/(?:\r\n?|\n)/g);this._input=R+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-D),this.offset-=D;var z=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),V.length-1&&(this.yylineno-=V.length-1);var st=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:V?(V.length===z.length?this.yylloc.first_column:0)+z[z.length-V.length].length-V[0].length:this.yylloc.first_column-D},this.options.ranges&&(this.yylloc.range=[st[0],st[0]+this.yyleng-D]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(R){this.unput(this.match.slice(R))},pastInput:function(){var R=this.matched.substr(0,this.matched.length-this.match.length);return(R.length>20?"...":"")+R.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var R=this.match;return R.length<20&&(R+=this._input.substr(0,20-R.length)),(R.substr(0,20)+(R.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var R=this.pastInput(),D=new Array(R.length+1).join("-");return R+this.upcomingInput()+`
`+D+"^"},test_match:function(R,D){var V,z,st;if(this.options.backtrack_lexer&&(st={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(st.yylloc.range=this.yylloc.range.slice(0))),z=R[0].match(/(?:\r\n?|\n).*/g),z&&(this.yylineno+=z.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:z?z[z.length-1].length-z[z.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+R[0].length},this.yytext+=R[0],this.match+=R[0],this.matches=R,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(R[0].length),this.matched+=R[0],V=this.performAction.call(this,this.yy,this,D,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),V)return V;if(this._backtrack){for(var j in st)this[j]=st[j];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var R,D,V,z;this._more||(this.yytext="",this.match="");for(var st=this._currentRules(),j=0;j<st.length;j++)if(V=this._input.match(this.rules[st[j]]),V&&(!D||V[0].length>D[0].length)){if(D=V,z=j,this.options.backtrack_lexer){if(R=this.test_match(V,st[j]),R!==!1)return R;if(this._backtrack){D=!1;continue}else return!1}else if(!this.options.flex)break}return D?(R=this.test_match(D,st[z]),R!==!1?R:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var D=this.next();return D||this.lex()},begin:function(D){this.conditionStack.push(D)},popState:function(){var D=this.conditionStack.length-1;return D>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(D){return D=this.conditionStack.length-1-Math.abs(D||0),D>=0?this.conditionStack[D]:"INITIAL"},pushState:function(D){this.begin(D)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(D,V,z,st){switch(z){case 0:return 40;case 1:return 44;case 2:return 45;case 3:return 46;case 4:return 47;case 5:break;case 6:break;case 7:return 5;case 8:break;case 9:break;case 10:break;case 11:break;case 12:return this.pushState("SCALE"),16;case 13:return 17;case 14:this.popState();break;case 15:return this.begin("acc_title"),32;case 16:return this.popState(),"acc_title_value";case 17:return this.begin("acc_descr"),34;case 18:return this.popState(),"acc_descr_value";case 19:this.begin("acc_descr_multiline");break;case 20:this.popState();break;case 21:return"acc_descr_multiline_value";case 22:return this.pushState("CLASSDEF"),37;case 23:return this.popState(),this.pushState("CLASSDEFID"),"DEFAULT_CLASSDEF_ID";case 24:return this.popState(),this.pushState("CLASSDEFID"),38;case 25:return this.popState(),39;case 26:return this.pushState("CLASS"),41;case 27:return this.popState(),this.pushState("CLASS_STYLE"),42;case 28:return this.popState(),43;case 29:return this.pushState("SCALE"),16;case 30:return 17;case 31:this.popState();break;case 32:this.pushState("STATE");break;case 33:return this.popState(),V.yytext=V.yytext.slice(0,-8).trim(),24;case 34:return this.popState(),V.yytext=V.yytext.slice(0,-8).trim(),25;case 35:return this.popState(),V.yytext=V.yytext.slice(0,-10).trim(),26;case 36:return this.popState(),V.yytext=V.yytext.slice(0,-8).trim(),24;case 37:return this.popState(),V.yytext=V.yytext.slice(0,-8).trim(),25;case 38:return this.popState(),V.yytext=V.yytext.slice(0,-10).trim(),26;case 39:return 44;case 40:return 45;case 41:return 46;case 42:return 47;case 43:this.pushState("STATE_STRING");break;case 44:return this.pushState("STATE_ID"),"AS";case 45:return this.popState(),"ID";case 46:this.popState();break;case 47:return"STATE_DESCR";case 48:return 18;case 49:this.popState();break;case 50:return this.popState(),this.pushState("struct"),19;case 51:break;case 52:return this.popState(),20;case 53:break;case 54:return this.begin("NOTE"),28;case 55:return this.popState(),this.pushState("NOTE_ID"),52;case 56:return this.popState(),this.pushState("NOTE_ID"),53;case 57:this.popState(),this.pushState("FLOATING_NOTE");break;case 58:return this.popState(),this.pushState("FLOATING_NOTE_ID"),"AS";case 59:break;case 60:return"NOTE_TEXT";case 61:return this.popState(),"ID";case 62:return this.popState(),this.pushState("NOTE_TEXT"),23;case 63:return this.popState(),V.yytext=V.yytext.substr(2).trim(),30;case 64:return this.popState(),V.yytext=V.yytext.slice(0,-8).trim(),30;case 65:return 6;case 66:return 6;case 67:return 15;case 68:return 50;case 69:return 23;case 70:return V.yytext=V.yytext.trim(),13;case 71:return 14;case 72:return 27;case 73:return 51;case 74:return 5;case 75:return"INVALID"}},rules:[/^(?:default\b)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:[\s]+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:classDef\s+)/i,/^(?:DEFAULT\s+)/i,/^(?:\w+\s+)/i,/^(?:[^\n]*)/i,/^(?:class\s+)/i,/^(?:(\w+)+((,\s*\w+)*))/i,/^(?:[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:state\s+)/i,/^(?:.*<<fork>>)/i,/^(?:.*<<join>>)/i,/^(?:.*<<choice>>)/i,/^(?:.*\[\[fork\]\])/i,/^(?:.*\[\[join\]\])/i,/^(?:.*\[\[choice\]\])/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:["])/i,/^(?:\s*as\s+)/i,/^(?:[^\n\{]*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n\s\{]+)/i,/^(?:\n)/i,/^(?:\{)/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:\})/i,/^(?:[\n])/i,/^(?:note\s+)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:")/i,/^(?:\s*as\s*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n]*)/i,/^(?:\s*[^:\n\s\-]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:[\s\S]*?end note\b)/i,/^(?:stateDiagram\s+)/i,/^(?:stateDiagram-v2\s+)/i,/^(?:hide empty description\b)/i,/^(?:\[\*\])/i,/^(?:[^:\n\s\-\{]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:-->)/i,/^(?:--)/i,/^(?::::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{LINE:{rules:[9,10],inclusive:!1},struct:{rules:[9,10,22,26,32,39,40,41,42,51,52,53,54,68,69,70,71,72],inclusive:!1},FLOATING_NOTE_ID:{rules:[61],inclusive:!1},FLOATING_NOTE:{rules:[58,59,60],inclusive:!1},NOTE_TEXT:{rules:[63,64],inclusive:!1},NOTE_ID:{rules:[62],inclusive:!1},NOTE:{rules:[55,56,57],inclusive:!1},CLASS_STYLE:{rules:[28],inclusive:!1},CLASS:{rules:[27],inclusive:!1},CLASSDEFID:{rules:[25],inclusive:!1},CLASSDEF:{rules:[23,24],inclusive:!1},acc_descr_multiline:{rules:[20,21],inclusive:!1},acc_descr:{rules:[18],inclusive:!1},acc_title:{rules:[16],inclusive:!1},SCALE:{rules:[13,14,30,31],inclusive:!1},ALIAS:{rules:[],inclusive:!1},STATE_ID:{rules:[45],inclusive:!1},STATE_STRING:{rules:[46,47],inclusive:!1},FORK_STATE:{rules:[],inclusive:!1},STATE:{rules:[9,10,33,34,35,36,37,38,43,44,48,49,50],inclusive:!1},ID:{rules:[9,10],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,8,10,11,12,15,17,19,22,26,29,32,50,54,65,66,67,68,69,70,71,73,74,75],inclusive:!0}}};return w}();P.lexer=U;function N(){this.yy={}}return N.prototype=P,P.Parser=N,new N}();po.parser=po;const H0=po,F7="LR",R7="TB",Xn="state",_l="relation",N7="classDef",O7="applyClass",rn="default",G0="divider",Tl="[*]",j0="start",X0=Tl,$0="end",Mc="color",Vc="fill",P7="bgFill",M7=",";function K0(){return{}}let Q0=F7,$n=[],Es=K0();const Z0=()=>({relations:[],states:{},documents:{}});let Kn={root:Z0()},Ie=Kn.root,zs=0,zc=0;const V7={LINE:0,DOTTED_LINE:1},z7={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3},un=t=>JSON.parse(JSON.stringify(t)),q7=t=>{I.info("Setting root doc",t),$n=t},W7=()=>$n,bn=(t,e,i)=>{if(e.stmt===_l)bn(t,e.state1,!0),bn(t,e.state2,!1);else if(e.stmt===Xn&&(e.id==="[*]"?(e.id=i?t.id+"_start":t.id+"_end",e.start=i):e.id=e.id.trim()),e.doc){const r=[];let s=[],n;for(n=0;n<e.doc.length;n++)if(e.doc[n].type===G0){const a=un(e.doc[n]);a.doc=un(s),r.push(a),s=[]}else s.push(e.doc[n]);if(r.length>0&&s.length>0){const a={stmt:Xn,id:vh(),type:"divider",doc:un(s)};r.push(un(a)),e.doc=r}e.doc.forEach(a=>bn(e,a,!0))}},Y7=()=>(bn({id:"root"},{id:"root",doc:$n},!0),{id:"root",doc:$n}),U7=t=>{let e;t.doc?e=t.doc:e=t,I.info(e),J0(!0),I.info("Extract",e),e.forEach(i=>{switch(i.stmt){case Xn:Ir(i.id.trim(),i.type,i.doc,i.description,i.note,i.classes,i.styles,i.textStyles);break;case _l:td(i.state1,i.state2,i.description);break;case N7:ed(i.id.trim(),i.classes);break;case O7:Cl(i.id.trim(),i.styleClass);break}})},Ir=function(t,e=rn,i=null,r=null,s=null,n=null,a=null,o=null){const l=t==null?void 0:t.trim();Ie.states[l]===void 0?(I.info("Adding state ",l,r),Ie.states[l]={id:l,descriptions:[],type:e,doc:i,note:s,classes:[],styles:[],textStyles:[]}):(Ie.states[l].doc||(Ie.states[l].doc=i),Ie.states[l].type||(Ie.states[l].type=e)),r&&(I.info("Setting state description",l,r),typeof r=="string"&&mo(l,r.trim()),typeof r=="object"&&r.forEach(h=>mo(l,h.trim()))),s&&(Ie.states[l].note=s,Ie.states[l].note.text=mt.sanitizeText(Ie.states[l].note.text,Y())),n&&(I.info("Setting state classes",l,n),(typeof n=="string"?[n]:n).forEach(u=>Cl(l,u.trim()))),a&&(I.info("Setting state styles",l,a),(typeof a=="string"?[a]:a).forEach(u=>tT(l,u.trim()))),o&&(I.info("Setting state styles",l,a),(typeof o=="string"?[o]:o).forEach(u=>eT(l,u.trim())))},J0=function(t){Kn={root:Z0()},Ie=Kn.root,zs=0,Es=K0(),t||Oe()},qs=function(t){return Ie.states[t]},H7=function(){return Ie.states},G7=function(){I.info("Documents = ",Kn)},j7=function(){return Ie.relations};function go(t=""){let e=t;return t===Tl&&(zs++,e=`${j0}${zs}`),e}function yo(t="",e=rn){return t===Tl?j0:e}function X7(t=""){let e=t;return t===X0&&(zs++,e=`${$0}${zs}`),e}function $7(t="",e=rn){return t===X0?$0:e}function K7(t,e,i){let r=go(t.id.trim()),s=yo(t.id.trim(),t.type),n=go(e.id.trim()),a=yo(e.id.trim(),e.type);Ir(r,s,t.doc,t.description,t.note,t.classes,t.styles,t.textStyles),Ir(n,a,e.doc,e.description,e.note,e.classes,e.styles,e.textStyles),Ie.relations.push({id1:r,id2:n,relationTitle:mt.sanitizeText(i,Y())})}const td=function(t,e,i){if(typeof t=="object")K7(t,e,i);else{const r=go(t.trim()),s=yo(t),n=X7(e.trim()),a=$7(e);Ir(r,s),Ir(n,a),Ie.relations.push({id1:r,id2:n,title:mt.sanitizeText(i,Y())})}},mo=function(t,e){const i=Ie.states[t],r=e.startsWith(":")?e.replace(":","").trim():e;i.descriptions.push(mt.sanitizeText(r,Y()))},Q7=function(t){return t.substring(0,1)===":"?t.substr(2).trim():t.trim()},Z7=()=>(zc++,"divider-id-"+zc),ed=function(t,e=""){Es[t]===void 0&&(Es[t]={id:t,styles:[],textStyles:[]});const i=Es[t];e!=null&&e.split(M7).forEach(r=>{const s=r.replace(/([^;]*);/,"$1").trim();if(r.match(Mc)){const a=s.replace(Vc,P7).replace(Mc,Vc);i.textStyles.push(a)}i.styles.push(s)})},J7=function(){return Es},Cl=function(t,e){t.split(",").forEach(function(i){let r=qs(i);if(r===void 0){const s=i.trim();Ir(s),r=qs(s)}r.classes.push(e)})},tT=function(t,e){const i=qs(t);i!==void 0&&i.textStyles.push(e)},eT=function(t,e){const i=qs(t);i!==void 0&&i.textStyles.push(e)},iT=()=>Q0,rT=t=>{Q0=t},sT=t=>t&&t[0]===":"?t.substr(1).trim():t.trim(),Gi={getConfig:()=>Y().state,addState:Ir,clear:J0,getState:qs,getStates:H7,getRelations:j7,getClasses:J7,getDirection:iT,addRelation:td,getDividerId:Z7,setDirection:rT,cleanupLabel:Q7,lineType:V7,relationType:z7,logDocuments:G7,getRootDoc:W7,setRootDoc:q7,getRootDocV2:Y7,extract:U7,trimColon:sT,getAccTitle:Ye,setAccTitle:Pe,getAccDescription:He,setAccDescription:Ue,addStyleClass:ed,setCssClass:Cl,addDescription:mo,setDiagramTitle:ri,getDiagramTitle:Ge},nT=t=>`
defs #statediagram-barbEnd {
    fill: ${t.transitionColor};
    stroke: ${t.transitionColor};
  }
g.stateGroup text {
  fill: ${t.nodeBorder};
  stroke: none;
  font-size: 10px;
}
g.stateGroup text {
  fill: ${t.textColor};
  stroke: none;
  font-size: 10px;

}
g.stateGroup .state-title {
  font-weight: bolder;
  fill: ${t.stateLabelColor};
}

g.stateGroup rect {
  fill: ${t.mainBkg};
  stroke: ${t.nodeBorder};
}

g.stateGroup line {
  stroke: ${t.lineColor};
  stroke-width: 1;
}

.transition {
  stroke: ${t.transitionColor};
  stroke-width: 1;
  fill: none;
}

.stateGroup .composit {
  fill: ${t.background};
  border-bottom: 1px
}

.stateGroup .alt-composit {
  fill: #e0e0e0;
  border-bottom: 1px
}

.state-note {
  stroke: ${t.noteBorderColor};
  fill: ${t.noteBkgColor};

  text {
    fill: ${t.noteTextColor};
    stroke: none;
    font-size: 10px;
  }
}

.stateLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${t.mainBkg};
  opacity: 0.5;
}

.edgeLabel .label rect {
  fill: ${t.labelBackgroundColor};
  opacity: 0.5;
}
.edgeLabel .label text {
  fill: ${t.transitionLabelColor||t.tertiaryTextColor};
}
.label div .edgeLabel {
  color: ${t.transitionLabelColor||t.tertiaryTextColor};
}

.stateLabel text {
  fill: ${t.stateLabelColor};
  font-size: 10px;
  font-weight: bold;
}

.node circle.state-start {
  fill: ${t.specialStateColor};
  stroke: ${t.specialStateColor};
}

.node .fork-join {
  fill: ${t.specialStateColor};
  stroke: ${t.specialStateColor};
}

.node circle.state-end {
  fill: ${t.innerEndBackground};
  stroke: ${t.background};
  stroke-width: 1.5
}
.end-state-inner {
  fill: ${t.compositeBackground||t.background};
  // stroke: ${t.background};
  stroke-width: 1.5
}

.node rect {
  fill: ${t.stateBkg||t.mainBkg};
  stroke: ${t.stateBorder||t.nodeBorder};
  stroke-width: 1px;
}
.node polygon {
  fill: ${t.mainBkg};
  stroke: ${t.stateBorder||t.nodeBorder};;
  stroke-width: 1px;
}
#statediagram-barbEnd {
  fill: ${t.lineColor};
}

.statediagram-cluster rect {
  fill: ${t.compositeTitleBackground};
  stroke: ${t.stateBorder||t.nodeBorder};
  stroke-width: 1px;
}

.cluster-label, .nodeLabel {
  color: ${t.stateLabelColor};
}

.statediagram-cluster rect.outer {
  rx: 5px;
  ry: 5px;
}
.statediagram-state .divider {
  stroke: ${t.stateBorder||t.nodeBorder};
}

.statediagram-state .title-state {
  rx: 5px;
  ry: 5px;
}
.statediagram-cluster.statediagram-cluster .inner {
  fill: ${t.compositeBackground||t.background};
}
.statediagram-cluster.statediagram-cluster-alt .inner {
  fill: ${t.altBackground?t.altBackground:"#efefef"};
}

.statediagram-cluster .inner {
  rx:0;
  ry:0;
}

.statediagram-state rect.basic {
  rx: 5px;
  ry: 5px;
}
.statediagram-state rect.divider {
  stroke-dasharray: 10,10;
  fill: ${t.altBackground?t.altBackground:"#efefef"};
}

.note-edge {
  stroke-dasharray: 5;
}

.statediagram-note rect {
  fill: ${t.noteBkgColor};
  stroke: ${t.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}
.statediagram-note rect {
  fill: ${t.noteBkgColor};
  stroke: ${t.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}

.statediagram-note text {
  fill: ${t.noteTextColor};
}

.statediagram-note .nodeLabel {
  color: ${t.noteTextColor};
}
.statediagram .edgeLabel {
  color: red; // ${t.noteTextColor};
}

#dependencyStart, #dependencyEnd {
  fill: ${t.lineColor};
  stroke: ${t.lineColor};
  stroke-width: 1;
}

.statediagramTitleText {
  text-anchor: middle;
  font-size: 18px;
  fill: ${t.textColor};
}
`,id=nT,aT=t=>t.append("circle").attr("class","start-state").attr("r",Y().state.sizeUnit).attr("cx",Y().state.padding+Y().state.sizeUnit).attr("cy",Y().state.padding+Y().state.sizeUnit),oT=t=>t.append("line").style("stroke","grey").style("stroke-dasharray","3").attr("x1",Y().state.textHeight).attr("class","divider").attr("x2",Y().state.textHeight*2).attr("y1",0).attr("y2",0),lT=(t,e)=>{const i=t.append("text").attr("x",2*Y().state.padding).attr("y",Y().state.textHeight+2*Y().state.padding).attr("font-size",Y().state.fontSize).attr("class","state-title").text(e.id),r=i.node().getBBox();return t.insert("rect",":first-child").attr("x",Y().state.padding).attr("y",Y().state.padding).attr("width",r.width+2*Y().state.padding).attr("height",r.height+2*Y().state.padding).attr("rx",Y().state.radius),i},cT=(t,e)=>{const i=function(d,g,y){const x=d.append("tspan").attr("x",2*Y().state.padding).text(g);y||x.attr("dy",Y().state.textHeight)},s=t.append("text").attr("x",2*Y().state.padding).attr("y",Y().state.textHeight+1.3*Y().state.padding).attr("font-size",Y().state.fontSize).attr("class","state-title").text(e.descriptions[0]).node().getBBox(),n=s.height,a=t.append("text").attr("x",Y().state.padding).attr("y",n+Y().state.padding*.4+Y().state.dividerMargin+Y().state.textHeight).attr("class","state-description");let o=!0,l=!0;e.descriptions.forEach(function(d){o||(i(a,d,l),l=!1),o=!1});const h=t.append("line").attr("x1",Y().state.padding).attr("y1",Y().state.padding+n+Y().state.dividerMargin/2).attr("y2",Y().state.padding+n+Y().state.dividerMargin/2).attr("class","descr-divider"),u=a.node().getBBox(),p=Math.max(u.width,s.width);return h.attr("x2",p+3*Y().state.padding),t.insert("rect",":first-child").attr("x",Y().state.padding).attr("y",Y().state.padding).attr("width",p+2*Y().state.padding).attr("height",u.height+n+2*Y().state.padding).attr("rx",Y().state.radius),t},hT=(t,e,i)=>{const r=Y().state.padding,s=2*Y().state.padding,n=t.node().getBBox(),a=n.width,o=n.x,l=t.append("text").attr("x",0).attr("y",Y().state.titleShift).attr("font-size",Y().state.fontSize).attr("class","state-title").text(e.id),u=l.node().getBBox().width+s;let p=Math.max(u,a);p===a&&(p=p+s);let d;const g=t.node().getBBox();e.doc,d=o-r,u>a&&(d=(a-p)/2+r),Math.abs(o-g.x)<r&&u>a&&(d=o-(u-a)/2);const y=1-Y().state.textHeight;return t.insert("rect",":first-child").attr("x",d).attr("y",y).attr("class",i?"alt-composit":"composit").attr("width",p).attr("height",g.height+Y().state.textHeight+Y().state.titleShift+1).attr("rx","0"),l.attr("x",d+r),u<=a&&l.attr("x",o+(p-s)/2-u/2+r),t.insert("rect",":first-child").attr("x",d).attr("y",Y().state.titleShift-Y().state.textHeight-Y().state.padding).attr("width",p).attr("height",Y().state.textHeight*3).attr("rx",Y().state.radius),t.insert("rect",":first-child").attr("x",d).attr("y",Y().state.titleShift-Y().state.textHeight-Y().state.padding).attr("width",p).attr("height",g.height+3+2*Y().state.textHeight).attr("rx",Y().state.radius),t},uT=t=>(t.append("circle").attr("class","end-state-outer").attr("r",Y().state.sizeUnit+Y().state.miniPadding).attr("cx",Y().state.padding+Y().state.sizeUnit+Y().state.miniPadding).attr("cy",Y().state.padding+Y().state.sizeUnit+Y().state.miniPadding),t.append("circle").attr("class","end-state-inner").attr("r",Y().state.sizeUnit).attr("cx",Y().state.padding+Y().state.sizeUnit+2).attr("cy",Y().state.padding+Y().state.sizeUnit+2)),dT=(t,e)=>{let i=Y().state.forkWidth,r=Y().state.forkHeight;if(e.parentId){let s=i;i=r,r=s}return t.append("rect").style("stroke","black").style("fill","black").attr("width",i).attr("height",r).attr("x",Y().state.padding).attr("y",Y().state.padding)},fT=(t,e,i,r)=>{let s=0;const n=r.append("text");n.style("text-anchor","start"),n.attr("class","noteText");let a=t.replace(/\r\n/g,"<br/>");a=a.replace(/\n/g,"<br/>");const o=a.split(mt.lineBreakRegex);let l=1.25*Y().state.noteMargin;for(const h of o){const u=h.trim();if(u.length>0){const p=n.append("tspan");if(p.text(u),l===0){const d=p.node().getBBox();l+=d.height}s+=l,p.attr("x",e+Y().state.noteMargin),p.attr("y",i+s+1.25*Y().state.noteMargin)}}return{textWidth:n.node().getBBox().width,textHeight:s}},pT=(t,e)=>{e.attr("class","state-note");const i=e.append("rect").attr("x",0).attr("y",Y().state.padding),r=e.append("g"),{textWidth:s,textHeight:n}=fT(t,0,0,r);return i.attr("height",n+2*Y().state.noteMargin),i.attr("width",s+Y().state.noteMargin*2),i},qc=function(t,e){const i=e.id,r={id:i,label:e.id,width:0,height:0},s=t.append("g").attr("id",i).attr("class","stateGroup");e.type==="start"&&aT(s),e.type==="end"&&uT(s),(e.type==="fork"||e.type==="join")&&dT(s,e),e.type==="note"&&pT(e.note.text,s),e.type==="divider"&&oT(s),e.type==="default"&&e.descriptions.length===0&&lT(s,e),e.type==="default"&&e.descriptions.length>0&&cT(s,e);const n=s.node().getBBox();return r.width=n.width+2*Y().state.padding,r.height=n.height+2*Y().state.padding,r};let Wc=0;const gT=function(t,e,i){const r=function(l){switch(l){case Gi.relationType.AGGREGATION:return"aggregation";case Gi.relationType.EXTENSION:return"extension";case Gi.relationType.COMPOSITION:return"composition";case Gi.relationType.DEPENDENCY:return"dependency"}};e.points=e.points.filter(l=>!Number.isNaN(l.y));const s=e.points,n=dr().x(function(l){return l.x}).y(function(l){return l.y}).curve(Gs),a=t.append("path").attr("d",n(s)).attr("id","edge"+Wc).attr("class","transition");let o="";if(Y().state.arrowMarkerAbsolute&&(o=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,o=o.replace(/\(/g,"\\("),o=o.replace(/\)/g,"\\)")),a.attr("marker-end","url("+o+"#"+r(Gi.relationType.DEPENDENCY)+"End)"),i.title!==void 0){const l=t.append("g").attr("class","stateLabel"),{x:h,y:u}=Rt.calcLabelPosition(e.points),p=mt.getRows(i.title);let d=0;const g=[];let y=0,x=0;for(let E=0;E<=p.length;E++){const F=l.append("text").attr("text-anchor","middle").text(p[E]).attr("x",h).attr("y",u+d),L=F.node().getBBox();y=Math.max(y,L.width),x=Math.min(x,L.x),I.info(L.x,h,u+d),d===0&&(d=F.node().getBBox().height,I.info("Title height",d,u)),g.push(F)}let _=d*p.length;if(p.length>1){const E=(p.length-1)*d*.5;g.forEach((F,L)=>F.attr("y",u+L*d-E)),_=d*p.length}const v=l.node().getBBox();l.insert("rect",":first-child").attr("class","box").attr("x",h-y/2-Y().state.padding/2).attr("y",u-_/2-Y().state.padding/2-3.5).attr("width",y+Y().state.padding).attr("height",_+Y().state.padding),I.info(v)}Wc++};let ti;const Ia={},yT=function(){},mT=function(t){t.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},xT=function(t,e,i,r){ti=Y().state;const s=Y().securityLevel;let n;s==="sandbox"&&(n=yt("#i"+e));const a=s==="sandbox"?yt(n.nodes()[0].contentDocument.body):yt("body"),o=s==="sandbox"?n.nodes()[0].contentDocument:document;I.debug("Rendering diagram "+t);const l=a.select(`[id='${e}']`);mT(l);const h=r.db.getRootDoc();rd(h,l,void 0,!1,a,o,r);const u=ti.padding,p=l.node().getBBox(),d=p.width+u*2,g=p.height+u*2,y=d*1.75;Ne(l,g,y,ti.useMaxWidth),l.attr("viewBox",`${p.x-ti.padding}  ${p.y-ti.padding} `+d+" "+g)},bT=t=>t?t.length*ti.fontSizeFactor:1,rd=(t,e,i,r,s,n,a)=>{const o=new Bi({compound:!0,multigraph:!0});let l,h=!0;for(l=0;l<t.length;l++)if(t[l].stmt==="relation"){h=!1;break}i?o.setGraph({rankdir:"LR",multigraph:!0,compound:!0,ranker:"tight-tree",ranksep:h?1:ti.edgeLengthFactor,nodeSep:h?1:50,isMultiGraph:!0}):o.setGraph({rankdir:"TB",multigraph:!0,compound:!0,ranksep:h?1:ti.edgeLengthFactor,nodeSep:h?1:50,ranker:"tight-tree",isMultiGraph:!0}),o.setDefaultEdgeLabel(function(){return{}}),a.db.extract(t);const u=a.db.getStates(),p=a.db.getRelations(),d=Object.keys(u);for(const v of d){const E=u[v];i&&(E.parentId=i);let F;if(E.doc){let L=e.append("g").attr("id",E.id).attr("class","stateGroup");F=rd(E.doc,L,E.id,!r,s,n,a);{L=hT(L,E,r);let T=L.node().getBBox();F.width=T.width,F.height=T.height+ti.padding/2,Ia[E.id]={y:ti.compositTitleSize}}}else F=qc(e,E);if(E.note){const L={descriptions:[],id:E.id+"-note",note:E.note,type:"note"},T=qc(e,L);E.note.position==="left of"?(o.setNode(F.id+"-note",T),o.setNode(F.id,F)):(o.setNode(F.id,F),o.setNode(F.id+"-note",T)),o.setParent(F.id,F.id+"-group"),o.setParent(F.id+"-note",F.id+"-group")}else o.setNode(F.id,F)}I.debug("Count=",o.nodeCount(),o);let g=0;p.forEach(function(v){g++,I.debug("Setting edge",v),o.setEdge(v.id1,v.id2,{relation:v,width:bT(v.title),height:ti.labelHeight*mt.getRows(v.title).length,labelpos:"c"},"id"+g)}),Hs(o),I.debug("Graph after layout",o.nodes());const y=e.node();o.nodes().forEach(function(v){v!==void 0&&o.node(v)!==void 0?(I.warn("Node "+v+": "+JSON.stringify(o.node(v))),s.select("#"+y.id+" #"+v).attr("transform","translate("+(o.node(v).x-o.node(v).width/2)+","+(o.node(v).y+(Ia[v]?Ia[v].y:0)-o.node(v).height/2)+" )"),s.select("#"+y.id+" #"+v).attr("data-x-shift",o.node(v).x-o.node(v).width/2),n.querySelectorAll("#"+y.id+" #"+v+" .divider").forEach(F=>{const L=F.parentElement;let T=0,k=0;L&&(L.parentElement&&(T=L.parentElement.getBBox().width),k=parseInt(L.getAttribute("data-x-shift"),10),Number.isNaN(k)&&(k=0)),F.setAttribute("x1",0-k+8),F.setAttribute("x2",T-k-8)})):I.debug("No Node "+v+": "+JSON.stringify(o.node(v)))});let x=y.getBBox();o.edges().forEach(function(v){v!==void 0&&o.edge(v)!==void 0&&(I.debug("Edge "+v.v+" -> "+v.w+": "+JSON.stringify(o.edge(v))),gT(e,o.edge(v),o.edge(v).relation))}),x=y.getBBox();const _={id:i||"root",label:i||"root",width:0,height:0};return _.width=x.width+2*ti.padding,_.height=x.height+2*ti.padding,I.debug("Doc rendered",_,o),_},kT={setConf:yT,draw:xT},_T={parser:H0,db:Gi,renderer:kT,styles:id,init:t=>{t.state||(t.state={}),t.state.arrowMarkerAbsolute=t.arrowMarkerAbsolute,Gi.clear()}},TT=Object.freeze(Object.defineProperty({__proto__:null,diagram:_T},Symbol.toStringTag,{value:"Module"})),kn="rect",Da="rectWithTitle",CT="start",ET="end",ST="divider",vT="roundedWithTitle",wT="note",AT="noteGroup",ns="statediagram",LT="state",BT=`${ns}-${LT}`,sd="transition",IT="note",DT="note-edge",FT=`${sd} ${DT}`,RT=`${ns}-${IT}`,NT="cluster",OT=`${ns}-${NT}`,PT="cluster-alt",MT=`${ns}-${PT}`,nd="parent",ad="note",VT="state",El="----",zT=`${El}${ad}`,Yc=`${El}${nd}`,od="fill:none",ld="fill: #333",cd="c",hd="text",ud="normal";let _n={},lr=0;const qT=function(t){const e=Object.keys(t);for(const i of e)t[i]},WT=function(t,e){return e.db.extract(e.db.getRootDocV2()),e.db.getClasses()};function YT(t){return t==null?"":t.classes?t.classes.join(" "):""}function Fa(t="",e=0,i="",r=El){const s=i!==null&&i.length>0?`${r}${i}`:"";return`${VT}-${t}${s}-${e}`}const ys=(t,e,i,r,s,n)=>{const a=i.id,o=YT(r[a]);if(a!=="root"){let l=kn;i.start===!0&&(l=CT),i.start===!1&&(l=ET),i.type!==rn&&(l=i.type),_n[a]||(_n[a]={id:a,shape:l,description:mt.sanitizeText(a,Y()),classes:`${o} ${BT}`});const h=_n[a];i.description&&(Array.isArray(h.description)?(h.shape=Da,h.description.push(i.description)):h.description.length>0?(h.shape=Da,h.description===a?h.description=[i.description]:h.description=[h.description,i.description]):(h.shape=kn,h.description=i.description),h.description=mt.sanitizeTextOrArray(h.description,Y())),h.description.length===1&&h.shape===Da&&(h.shape=kn),!h.type&&i.doc&&(I.info("Setting cluster for ",a,xo(i)),h.type="group",h.dir=xo(i),h.shape=i.type===G0?ST:vT,h.classes=h.classes+" "+OT+" "+(n?MT:""));const u={labelStyle:"",shape:h.shape,labelText:h.description,classes:h.classes,style:"",id:a,dir:h.dir,domId:Fa(a,lr),type:h.type,padding:15};if(u.centerLabel=!0,i.note){const p={labelStyle:"",shape:wT,labelText:i.note.text,classes:RT,style:"",id:a+zT+"-"+lr,domId:Fa(a,lr,ad),type:h.type,padding:15},d={labelStyle:"",shape:AT,labelText:i.note.text,classes:h.classes,style:"",id:a+Yc,domId:Fa(a,lr,nd),type:"group",padding:0};lr++;const g=a+Yc;t.setNode(g,d),t.setNode(p.id,p),t.setNode(a,u),t.setParent(a,g),t.setParent(p.id,g);let y=a,x=p.id;i.note.position==="left of"&&(y=p.id,x=a),t.setEdge(y,x,{arrowhead:"none",arrowType:"",style:od,labelStyle:"",classes:FT,arrowheadStyle:ld,labelpos:cd,labelType:hd,thickness:ud})}else t.setNode(a,u)}e&&e.id!=="root"&&(I.trace("Setting node ",a," to be child of its parent ",e.id),t.setParent(a,e.id)),i.doc&&(I.trace("Adding nodes children "),UT(t,i,i.doc,r,s,!n))},UT=(t,e,i,r,s,n)=>{I.trace("items",i),i.forEach(a=>{switch(a.stmt){case Xn:ys(t,e,a,r,s,n);break;case rn:ys(t,e,a,r,s,n);break;case _l:{ys(t,e,a.state1,r,s,n),ys(t,e,a.state2,r,s,n);const o={id:"edge"+lr,arrowhead:"normal",arrowTypeEnd:"arrow_barb",style:od,labelStyle:"",label:mt.sanitizeText(a.description,Y()),arrowheadStyle:ld,labelpos:cd,labelType:hd,thickness:ud,classes:sd};t.setEdge(a.state1.id,a.state2.id,o,lr),lr++}break}})},xo=(t,e=R7)=>{let i=e;if(t.doc)for(let r=0;r<t.doc.length;r++){const s=t.doc[r];s.stmt==="dir"&&(i=s.value)}return i},HT=async function(t,e,i,r){I.info("Drawing state diagram (v2)",e),_n={},r.db.getDirection();const{securityLevel:s,state:n}=Y(),a=n.nodeSpacing||50,o=n.rankSpacing||50;I.info(r.db.getRootDocV2()),r.db.extract(r.db.getRootDocV2()),I.info(r.db.getRootDocV2());const l=r.db.getStates(),h=new Bi({multigraph:!0,compound:!0}).setGraph({rankdir:xo(r.db.getRootDocV2()),nodesep:a,ranksep:o,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});ys(h,void 0,r.db.getRootDocV2(),l,r.db,!0);let u;s==="sandbox"&&(u=yt("#i"+e));const p=s==="sandbox"?yt(u.nodes()[0].contentDocument.body):yt("body"),d=p.select(`[id="${e}"]`),g=p.select("#"+e+" g");await Zo(g,h,["barb"],ns,e);const y=8;Rt.insertTitle(d,"statediagramTitleText",n.titleTopMargin,r.db.getDiagramTitle());const x=d.node().getBBox(),_=x.width+y*2,v=x.height+y*2;d.attr("class",ns);const E=d.node().getBBox();Ne(d,v,_,n.useMaxWidth);const F=`${E.x-y} ${E.y-y} ${_} ${v}`;I.debug(`viewBox ${F}`),d.attr("viewBox",F);const L=document.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(const T of L){const k=T.getBBox(),A=document.createElementNS("http://www.w3.org/2000/svg",kn);A.setAttribute("rx",0),A.setAttribute("ry",0),A.setAttribute("width",k.width),A.setAttribute("height",k.height),T.insertBefore(A,T.firstChild)}},GT={setConf:qT,getClasses:WT,draw:HT},jT={parser:H0,db:Gi,renderer:GT,styles:id,init:t=>{t.state||(t.state={}),t.state.arrowMarkerAbsolute=t.arrowMarkerAbsolute,Gi.clear()}},XT=Object.freeze(Object.defineProperty({__proto__:null,diagram:jT},Symbol.toStringTag,{value:"Module"}));var bo=function(){var t=function(p,d,g,y){for(g=g||{},y=p.length;y--;g[p[y]]=d);return g},e=[6,8,10,11,12,14,16,17,18],i=[1,9],r=[1,10],s=[1,11],n=[1,12],a=[1,13],o=[1,14],l={trace:function(){},yy:{},symbols_:{error:2,start:3,journey:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,title:11,acc_title:12,acc_title_value:13,acc_descr:14,acc_descr_value:15,acc_descr_multiline_value:16,section:17,taskName:18,taskData:19,$accept:0,$end:1},terminals_:{2:"error",4:"journey",6:"EOF",8:"SPACE",10:"NEWLINE",11:"title",12:"acc_title",13:"acc_title_value",14:"acc_descr",15:"acc_descr_value",16:"acc_descr_multiline_value",17:"section",18:"taskName",19:"taskData"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,2]],performAction:function(d,g,y,x,_,v,E){var F=v.length-1;switch(_){case 1:return v[F-1];case 2:this.$=[];break;case 3:v[F-1].push(v[F]),this.$=v[F-1];break;case 4:case 5:this.$=v[F];break;case 6:case 7:this.$=[];break;case 8:x.setDiagramTitle(v[F].substr(6)),this.$=v[F].substr(6);break;case 9:this.$=v[F].trim(),x.setAccTitle(this.$);break;case 10:case 11:this.$=v[F].trim(),x.setAccDescription(this.$);break;case 12:x.addSection(v[F].substr(8)),this.$=v[F].substr(8);break;case 13:x.addTask(v[F-1],v[F]),this.$="task";break}},table:[{3:1,4:[1,2]},{1:[3]},t(e,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:i,12:r,14:s,16:n,17:a,18:o},t(e,[2,7],{1:[2,1]}),t(e,[2,3]),{9:15,11:i,12:r,14:s,16:n,17:a,18:o},t(e,[2,5]),t(e,[2,6]),t(e,[2,8]),{13:[1,16]},{15:[1,17]},t(e,[2,11]),t(e,[2,12]),{19:[1,18]},t(e,[2,4]),t(e,[2,9]),t(e,[2,10]),t(e,[2,13])],defaultActions:{},parseError:function(d,g){if(g.recoverable)this.trace(d);else{var y=new Error(d);throw y.hash=g,y}},parse:function(d){var g=this,y=[0],x=[],_=[null],v=[],E=this.table,F="",L=0,T=0,k=2,A=1,S=v.slice.call(arguments,1),m=Object.create(this.lexer),C={yy:{}};for(var f in this.yy)Object.prototype.hasOwnProperty.call(this.yy,f)&&(C.yy[f]=this.yy[f]);m.setInput(d,C.yy),C.yy.lexer=m,C.yy.parser=this,typeof m.yylloc>"u"&&(m.yylloc={});var B=m.yylloc;v.push(B);var b=m.options&&m.options.ranges;typeof C.yy.parseError=="function"?this.parseError=C.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function P(){var K;return K=x.pop()||m.lex()||A,typeof K!="number"&&(K instanceof Array&&(x=K,K=x.pop()),K=g.symbols_[K]||K),K}for(var U,N,w,R,D={},V,z,st,j;;){if(N=y[y.length-1],this.defaultActions[N]?w=this.defaultActions[N]:((U===null||typeof U>"u")&&(U=P()),w=E[N]&&E[N][U]),typeof w>"u"||!w.length||!w[0]){var dt="";j=[];for(V in E[N])this.terminals_[V]&&V>k&&j.push("'"+this.terminals_[V]+"'");m.showPosition?dt="Parse error on line "+(L+1)+`:
`+m.showPosition()+`
Expecting `+j.join(", ")+", got '"+(this.terminals_[U]||U)+"'":dt="Parse error on line "+(L+1)+": Unexpected "+(U==A?"end of input":"'"+(this.terminals_[U]||U)+"'"),this.parseError(dt,{text:m.match,token:this.terminals_[U]||U,line:m.yylineno,loc:B,expected:j})}if(w[0]instanceof Array&&w.length>1)throw new Error("Parse Error: multiple actions possible at state: "+N+", token: "+U);switch(w[0]){case 1:y.push(U),_.push(m.yytext),v.push(m.yylloc),y.push(w[1]),U=null,T=m.yyleng,F=m.yytext,L=m.yylineno,B=m.yylloc;break;case 2:if(z=this.productions_[w[1]][1],D.$=_[_.length-z],D._$={first_line:v[v.length-(z||1)].first_line,last_line:v[v.length-1].last_line,first_column:v[v.length-(z||1)].first_column,last_column:v[v.length-1].last_column},b&&(D._$.range=[v[v.length-(z||1)].range[0],v[v.length-1].range[1]]),R=this.performAction.apply(D,[F,T,L,C.yy,w[1],_,v].concat(S)),typeof R<"u")return R;z&&(y=y.slice(0,-1*z*2),_=_.slice(0,-1*z),v=v.slice(0,-1*z)),y.push(this.productions_[w[1]][0]),_.push(D.$),v.push(D._$),st=E[y[y.length-2]][y[y.length-1]],y.push(st);break;case 3:return!0}}return!0}},h=function(){var p={EOF:1,parseError:function(g,y){if(this.yy.parser)this.yy.parser.parseError(g,y);else throw new Error(g)},setInput:function(d,g){return this.yy=g||this.yy||{},this._input=d,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var d=this._input[0];this.yytext+=d,this.yyleng++,this.offset++,this.match+=d,this.matched+=d;var g=d.match(/(?:\r\n?|\n).*/g);return g?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),d},unput:function(d){var g=d.length,y=d.split(/(?:\r\n?|\n)/g);this._input=d+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-g),this.offset-=g;var x=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),y.length-1&&(this.yylineno-=y.length-1);var _=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:y?(y.length===x.length?this.yylloc.first_column:0)+x[x.length-y.length].length-y[0].length:this.yylloc.first_column-g},this.options.ranges&&(this.yylloc.range=[_[0],_[0]+this.yyleng-g]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(d){this.unput(this.match.slice(d))},pastInput:function(){var d=this.matched.substr(0,this.matched.length-this.match.length);return(d.length>20?"...":"")+d.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var d=this.match;return d.length<20&&(d+=this._input.substr(0,20-d.length)),(d.substr(0,20)+(d.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var d=this.pastInput(),g=new Array(d.length+1).join("-");return d+this.upcomingInput()+`
`+g+"^"},test_match:function(d,g){var y,x,_;if(this.options.backtrack_lexer&&(_={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(_.yylloc.range=this.yylloc.range.slice(0))),x=d[0].match(/(?:\r\n?|\n).*/g),x&&(this.yylineno+=x.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:x?x[x.length-1].length-x[x.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+d[0].length},this.yytext+=d[0],this.match+=d[0],this.matches=d,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(d[0].length),this.matched+=d[0],y=this.performAction.call(this,this.yy,this,g,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),y)return y;if(this._backtrack){for(var v in _)this[v]=_[v];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var d,g,y,x;this._more||(this.yytext="",this.match="");for(var _=this._currentRules(),v=0;v<_.length;v++)if(y=this._input.match(this.rules[_[v]]),y&&(!g||y[0].length>g[0].length)){if(g=y,x=v,this.options.backtrack_lexer){if(d=this.test_match(y,_[v]),d!==!1)return d;if(this._backtrack){g=!1;continue}else return!1}else if(!this.options.flex)break}return g?(d=this.test_match(g,_[x]),d!==!1?d:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var g=this.next();return g||this.lex()},begin:function(g){this.conditionStack.push(g)},popState:function(){var g=this.conditionStack.length-1;return g>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(g){return g=this.conditionStack.length-1-Math.abs(g||0),g>=0?this.conditionStack[g]:"INITIAL"},pushState:function(g){this.begin(g)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(g,y,x,_){switch(x){case 0:break;case 1:break;case 2:return 10;case 3:break;case 4:break;case 5:return 4;case 6:return 11;case 7:return this.begin("acc_title"),12;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),14;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:return 17;case 15:return 18;case 16:return 19;case 17:return":";case 18:return 6;case 19:return"INVALID"}},rules:[/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:journey\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,9,11,14,15,16,17,18,19],inclusive:!0}}};return p}();l.lexer=h;function u(){this.yy={}}return u.prototype=l,l.Parser=u,new u}();bo.parser=bo;const $T=bo;let as="";const Sl=[],Ws=[],Ys=[],KT=function(){Sl.length=0,Ws.length=0,as="",Ys.length=0,Oe()},QT=function(t){as=t,Sl.push(t)},ZT=function(){return Sl},JT=function(){let t=Uc();const e=100;let i=0;for(;!t&&i<e;)t=Uc(),i++;return Ws.push(...Ys),Ws},t8=function(){const t=[];return Ws.forEach(i=>{i.people&&t.push(...i.people)}),[...new Set(t)].sort()},e8=function(t,e){const i=e.substr(1).split(":");let r=0,s=[];i.length===1?(r=Number(i[0]),s=[]):(r=Number(i[0]),s=i[1].split(","));const n=s.map(o=>o.trim()),a={section:as,type:as,people:n,task:t,score:r};Ys.push(a)},i8=function(t){const e={section:as,type:as,description:t,task:t,classes:[]};Ws.push(e)},Uc=function(){const t=function(i){return Ys[i].processed};let e=!0;for(const[i,r]of Ys.entries())t(i),e=e&&r.processed;return e},r8=function(){return t8()},Hc={getConfig:()=>Y().journey,clear:KT,setDiagramTitle:ri,getDiagramTitle:Ge,setAccTitle:Pe,getAccTitle:Ye,setAccDescription:Ue,getAccDescription:He,addSection:QT,getSections:ZT,getTasks:JT,addTask:e8,addTaskOrg:i8,getActors:r8},s8=t=>`.label {
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
    color: ${t.textColor};
  }
  .mouth {
    stroke: #666;
  }

  line {
    stroke: ${t.textColor}
  }

  .legend {
    fill: ${t.textColor};
  }

  .label text {
    fill: #333;
  }
  .label {
    color: ${t.textColor}
  }

  .face {
    ${t.faceColor?`fill: ${t.faceColor}`:"fill: #FFF8DC"};
    stroke: #999;
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${t.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${t.lineColor};
    stroke-width: 1.5px;
  }

  .flowchart-link {
    stroke: ${t.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${t.edgeLabelBackground};
    rect {
      opacity: 0.5;
    }
    text-align: center;
  }

  .cluster rect {
  }

  .cluster text {
    fill: ${t.titleColor};
  }

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
    font-size: 12px;
    background: ${t.tertiaryColor};
    border: 1px solid ${t.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .task-type-0, .section-type-0  {
    ${t.fillType0?`fill: ${t.fillType0}`:""};
  }
  .task-type-1, .section-type-1  {
    ${t.fillType0?`fill: ${t.fillType1}`:""};
  }
  .task-type-2, .section-type-2  {
    ${t.fillType0?`fill: ${t.fillType2}`:""};
  }
  .task-type-3, .section-type-3  {
    ${t.fillType0?`fill: ${t.fillType3}`:""};
  }
  .task-type-4, .section-type-4  {
    ${t.fillType0?`fill: ${t.fillType4}`:""};
  }
  .task-type-5, .section-type-5  {
    ${t.fillType0?`fill: ${t.fillType5}`:""};
  }
  .task-type-6, .section-type-6  {
    ${t.fillType0?`fill: ${t.fillType6}`:""};
  }
  .task-type-7, .section-type-7  {
    ${t.fillType0?`fill: ${t.fillType7}`:""};
  }

  .actor-0 {
    ${t.actor0?`fill: ${t.actor0}`:""};
  }
  .actor-1 {
    ${t.actor1?`fill: ${t.actor1}`:""};
  }
  .actor-2 {
    ${t.actor2?`fill: ${t.actor2}`:""};
  }
  .actor-3 {
    ${t.actor3?`fill: ${t.actor3}`:""};
  }
  .actor-4 {
    ${t.actor4?`fill: ${t.actor4}`:""};
  }
  .actor-5 {
    ${t.actor5?`fill: ${t.actor5}`:""};
  }
`,n8=s8,vl=function(t,e){return sa(t,e)},a8=function(t,e){const r=t.append("circle").attr("cx",e.cx).attr("cy",e.cy).attr("class","face").attr("r",15).attr("stroke-width",2).attr("overflow","visible"),s=t.append("g");s.append("circle").attr("cx",e.cx-15/3).attr("cy",e.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),s.append("circle").attr("cx",e.cx+15/3).attr("cy",e.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666");function n(l){const h=Kr().startAngle(Math.PI/2).endAngle(3*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);l.append("path").attr("class","mouth").attr("d",h).attr("transform","translate("+e.cx+","+(e.cy+2)+")")}function a(l){const h=Kr().startAngle(3*Math.PI/2).endAngle(5*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);l.append("path").attr("class","mouth").attr("d",h).attr("transform","translate("+e.cx+","+(e.cy+7)+")")}function o(l){l.append("line").attr("class","mouth").attr("stroke",2).attr("x1",e.cx-5).attr("y1",e.cy+7).attr("x2",e.cx+5).attr("y2",e.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666")}return e.score>3?n(s):e.score<3?a(s):o(s),r},dd=function(t,e){const i=t.append("circle");return i.attr("cx",e.cx),i.attr("cy",e.cy),i.attr("class","actor-"+e.pos),i.attr("fill",e.fill),i.attr("stroke",e.stroke),i.attr("r",e.r),i.class!==void 0&&i.attr("class",i.class),e.title!==void 0&&i.append("title").text(e.title),i},fd=function(t,e){return am(t,e)},o8=function(t,e){function i(s,n,a,o,l){return s+","+n+" "+(s+a)+","+n+" "+(s+a)+","+(n+o-l)+" "+(s+a-l*1.2)+","+(n+o)+" "+s+","+(n+o)}const r=t.append("polygon");r.attr("points",i(e.x,e.y,50,20,7)),r.attr("class","labelBox"),e.y=e.y+e.labelMargin,e.x=e.x+.5*e.labelMargin,fd(t,e)},l8=function(t,e,i){const r=t.append("g"),s=Nr();s.x=e.x,s.y=e.y,s.fill=e.fill,s.width=i.width*e.taskCount+i.diagramMarginX*(e.taskCount-1),s.height=i.height,s.class="journey-section section-type-"+e.num,s.rx=3,s.ry=3,vl(r,s),pd(i)(e.text,r,s.x,s.y,s.width,s.height,{class:"journey-section section-type-"+e.num},i,e.colour)};let Gc=-1;const c8=function(t,e,i){const r=e.x+i.width/2,s=t.append("g");Gc++;const n=300+5*30;s.append("line").attr("id","task"+Gc).attr("x1",r).attr("y1",e.y).attr("x2",r).attr("y2",n).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),a8(s,{cx:r,cy:300+(5-e.score)*30,score:e.score});const a=Nr();a.x=e.x,a.y=e.y,a.fill=e.fill,a.width=i.width,a.height=i.height,a.class="task task-type-"+e.num,a.rx=3,a.ry=3,vl(s,a);let o=e.x+14;e.people.forEach(l=>{const h=e.actors[l].color,u={cx:o,cy:e.y,r:7,fill:h,stroke:"#000",title:l,pos:e.actors[l].position};dd(s,u),o+=10}),pd(i)(e.task,s,a.x,a.y,a.width,a.height,{class:"task"},i,e.colour)},h8=function(t,e){A1(t,e)},pd=function(){function t(s,n,a,o,l,h,u,p){const d=n.append("text").attr("x",a+l/2).attr("y",o+h/2+5).style("font-color",p).style("text-anchor","middle").text(s);r(d,u)}function e(s,n,a,o,l,h,u,p,d){const{taskFontSize:g,taskFontFamily:y}=p,x=s.split(/<br\s*\/?>/gi);for(let _=0;_<x.length;_++){const v=_*g-g*(x.length-1)/2,E=n.append("text").attr("x",a+l/2).attr("y",o).attr("fill",d).style("text-anchor","middle").style("font-size",g).style("font-family",y);E.append("tspan").attr("x",a+l/2).attr("dy",v).text(x[_]),E.attr("y",o+h/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),r(E,u)}}function i(s,n,a,o,l,h,u,p){const d=n.append("switch"),y=d.append("foreignObject").attr("x",a).attr("y",o).attr("width",l).attr("height",h).attr("position","fixed").append("xhtml:div").style("display","table").style("height","100%").style("width","100%");y.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(s),e(s,d,a,o,l,h,u,p),r(y,u)}function r(s,n){for(const a in n)a in n&&s.attr(a,n[a])}return function(s){return s.textPlacement==="fo"?i:s.textPlacement==="old"?t:e}}(),u8=function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")},Us={drawRect:vl,drawCircle:dd,drawSection:l8,drawText:fd,drawLabel:o8,drawTask:c8,drawBackgroundRect:h8,initGraphics:u8},d8=function(t){Object.keys(t).forEach(function(i){ga[i]=t[i]})},Ki={};function f8(t){const e=Y().journey;let i=60;Object.keys(Ki).forEach(r=>{const s=Ki[r].color,n={cx:20,cy:i,r:7,fill:s,stroke:"#000",pos:Ki[r].position};Us.drawCircle(t,n);const a={x:40,y:i+7,fill:"#666",text:r,textMargin:e.boxTextMargin|5};Us.drawText(t,a),i+=20})}const ga=Y().journey,kr=ga.leftMargin,p8=function(t,e,i,r){const s=Y().journey,n=Y().securityLevel;let a;n==="sandbox"&&(a=yt("#i"+e));const o=n==="sandbox"?yt(a.nodes()[0].contentDocument.body):yt("body");ui.init();const l=o.select("#"+e);Us.initGraphics(l);const h=r.db.getTasks(),u=r.db.getDiagramTitle(),p=r.db.getActors();for(const v in Ki)delete Ki[v];let d=0;p.forEach(v=>{Ki[v]={color:s.actorColours[d%s.actorColours.length],position:d},d++}),f8(l),ui.insert(0,0,kr,Object.keys(Ki).length*50),g8(l,h,0);const g=ui.getBounds();u&&l.append("text").text(u).attr("x",kr).attr("font-size","4ex").attr("font-weight","bold").attr("y",25);const y=g.stopy-g.starty+2*s.diagramMarginY,x=kr+g.stopx+2*s.diagramMarginX;Ne(l,y,x,s.useMaxWidth),l.append("line").attr("x1",kr).attr("y1",s.height*4).attr("x2",x-kr-4).attr("y2",s.height*4).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)");const _=u?70:0;l.attr("viewBox",`${g.startx} -25 ${x} ${y+_}`),l.attr("preserveAspectRatio","xMinYMin meet"),l.attr("height",y+_+25)},ui={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],init:function(){this.sequenceItems=[],this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0},updateVal:function(t,e,i,r){t[e]===void 0?t[e]=i:t[e]=r(i,t[e])},updateBounds:function(t,e,i,r){const s=Y().journey,n=this;let a=0;function o(l){return function(u){a++;const p=n.sequenceItems.length-a+1;n.updateVal(u,"starty",e-p*s.boxMargin,Math.min),n.updateVal(u,"stopy",r+p*s.boxMargin,Math.max),n.updateVal(ui.data,"startx",t-p*s.boxMargin,Math.min),n.updateVal(ui.data,"stopx",i+p*s.boxMargin,Math.max),l!=="activation"&&(n.updateVal(u,"startx",t-p*s.boxMargin,Math.min),n.updateVal(u,"stopx",i+p*s.boxMargin,Math.max),n.updateVal(ui.data,"starty",e-p*s.boxMargin,Math.min),n.updateVal(ui.data,"stopy",r+p*s.boxMargin,Math.max))}}this.sequenceItems.forEach(o())},insert:function(t,e,i,r){const s=Math.min(t,i),n=Math.max(t,i),a=Math.min(e,r),o=Math.max(e,r);this.updateVal(ui.data,"startx",s,Math.min),this.updateVal(ui.data,"starty",a,Math.min),this.updateVal(ui.data,"stopx",n,Math.max),this.updateVal(ui.data,"stopy",o,Math.max),this.updateBounds(s,a,n,o)},bumpVerticalPos:function(t){this.verticalPos=this.verticalPos+t,this.data.stopy=this.verticalPos},getVerticalPos:function(){return this.verticalPos},getBounds:function(){return this.data}},Ra=ga.sectionFills,jc=ga.sectionColours,g8=function(t,e,i){const r=Y().journey;let s="";const n=r.height*2+r.diagramMarginY,a=i+n;let o=0,l="#CCC",h="black",u=0;for(const[p,d]of e.entries()){if(s!==d.section){l=Ra[o%Ra.length],u=o%Ra.length,h=jc[o%jc.length];let y=0;const x=d.section;for(let v=p;v<e.length&&e[v].section==x;v++)y=y+1;const _={x:p*r.taskMargin+p*r.width+kr,y:50,text:d.section,fill:l,num:u,colour:h,taskCount:y};Us.drawSection(t,_,r),s=d.section,o++}const g=d.people.reduce((y,x)=>(Ki[x]&&(y[x]=Ki[x]),y),{});d.x=p*r.taskMargin+p*r.width+kr,d.y=a,d.width=r.diagramMarginX,d.height=r.diagramMarginY,d.colour=h,d.fill=l,d.num=u,d.actors=g,Us.drawTask(t,d,r),ui.insert(d.x,d.y,d.x+d.width+r.taskMargin,300+5*30)}},Xc={setConf:d8,draw:p8},y8={parser:$T,db:Hc,renderer:Xc,styles:n8,init:t=>{Xc.setConf(t.journey),Hc.clear()}},m8=Object.freeze(Object.defineProperty({__proto__:null,diagram:y8},Symbol.toStringTag,{value:"Module"})),x8=(t,e,i)=>{const{parentById:r}=i,s=new Set;let n=t;for(;n;){if(s.add(n),n===e)return n;n=r[n]}for(n=e;n;){if(s.has(n))return n;n=r[n]}return"root"},$c=new Af;let hi={};const b8={};let Zi={};const k8=async function(t,e,i,r,s,n,a){const l=i.select(`[id="${e}"]`).insert("g").attr("class","nodes"),h=Object.keys(t);return await Promise.all(h.map(async function(u){const p=t[u];let d="default";p.classes.length>0&&(d=p.classes.join(" ")),d=d+" flowchart-label";const g=ii(p.styles);let y=p.text!==void 0?p.text:p.id;const x={width:0,height:0},_=[{id:p.id+"-west",layoutOptions:{"port.side":"WEST"}},{id:p.id+"-east",layoutOptions:{"port.side":"EAST"}},{id:p.id+"-south",layoutOptions:{"port.side":"SOUTH"}},{id:p.id+"-north",layoutOptions:{"port.side":"NORTH"}}];let v=0,E="",F={};switch(p.type){case"round":v=5,E="rect";break;case"square":E="rect";break;case"diamond":E="question",F={portConstraints:"FIXED_SIDE"};break;case"hexagon":E="hexagon";break;case"odd":E="rect_left_inv_arrow";break;case"lean_right":E="lean_right";break;case"lean_left":E="lean_left";break;case"trapezoid":E="trapezoid";break;case"inv_trapezoid":E="inv_trapezoid";break;case"odd_right":E="rect_left_inv_arrow";break;case"circle":E="circle";break;case"ellipse":E="ellipse";break;case"stadium":E="stadium";break;case"subroutine":E="subroutine";break;case"cylinder":E="cylinder";break;case"group":E="rect";break;case"doublecircle":E="doublecircle";break;default:E="rect"}const L={labelStyle:g.labelStyle,shape:E,labelText:y,labelType:p.labelType,rx:v,ry:v,class:d,style:g.style,id:p.id,link:p.link,linkTarget:p.linkTarget,tooltip:s.db.getTooltip(p.id)||"",domId:s.db.lookUpDomId(p.id),haveCallback:p.haveCallback,width:p.type==="group"?500:void 0,dir:p.dir,type:p.type,props:p.props,padding:me().flowchart.padding};let T,k;if(L.type!=="group")k=await ha(l,L,p.dir),T=k.node().getBBox();else{r.createElementNS("http://www.w3.org/2000/svg","text");const{shapeSvg:S,bbox:m}=await Ee(l,L,void 0,!0);x.width=m.width,x.wrappingWidth=me().flowchart.wrappingWidth,x.height=m.height,x.labelNode=S.node(),L.labelData=x}const A={id:p.id,ports:p.type==="diamond"?_:[],layoutOptions:F,labelText:y,labelData:x,domId:s.db.lookUpDomId(p.id),width:T==null?void 0:T.width,height:T==null?void 0:T.height,type:p.type,el:k,parent:n.parentById[p.id]};Zi[L.id]=A})),a},Kc=(t,e,i)=>{const r={TB:{in:{north:"north"},out:{south:"west",west:"east",east:"south"}},LR:{in:{west:"west"},out:{east:"south",south:"north",north:"east"}},RL:{in:{east:"east"},out:{west:"north",north:"south",south:"west"}},BT:{in:{south:"south"},out:{north:"east",east:"west",west:"north"}}};return r.TD=r.TB,r[i][e][t]},Qc=(t,e,i)=>{if(I.info("getNextPort",{node:t,edgeDirection:e,graphDirection:i}),!hi[t])switch(i){case"TB":case"TD":hi[t]={inPosition:"north",outPosition:"south"};break;case"BT":hi[t]={inPosition:"south",outPosition:"north"};break;case"RL":hi[t]={inPosition:"east",outPosition:"west"};break;case"LR":hi[t]={inPosition:"west",outPosition:"east"};break}const r=e==="in"?hi[t].inPosition:hi[t].outPosition;return e==="in"?hi[t].inPosition=Kc(hi[t].inPosition,e,i):hi[t].outPosition=Kc(hi[t].outPosition,e,i),r},_8=(t,e)=>{let i=t.start,r=t.end;const s=i,n=r,a=Zi[i],o=Zi[r];return!a||!o?{source:i,target:r}:(a.type==="diamond"&&(i=`${i}-${Qc(i,"out",e)}`),o.type==="diamond"&&(r=`${r}-${Qc(r,"in",e)}`),{source:i,target:r,sourceId:s,targetId:n})},T8=function(t,e,i,r){I.info("abc78 edges = ",t);const s=r.insert("g").attr("class","edgeLabels");let n={},a=e.db.getDirection(),o,l;if(t.defaultStyle!==void 0){const h=ii(t.defaultStyle);o=h.style,l=h.labelStyle}return t.forEach(function(h){const u="L-"+h.start+"-"+h.end;n[u]===void 0?(n[u]=0,I.info("abc78 new entry",u,n[u])):(n[u]++,I.info("abc78 new entry",u,n[u]));let p=u+"-"+n[u];I.info("abc78 new link id to be used is",u,p,n[u]);const d="LS-"+h.start,g="LE-"+h.end,y={style:"",labelStyle:""};switch(y.minlen=h.length||1,h.type==="arrow_open"?y.arrowhead="none":y.arrowhead="normal",y.arrowTypeStart="arrow_open",y.arrowTypeEnd="arrow_open",h.type){case"double_arrow_cross":y.arrowTypeStart="arrow_cross";case"arrow_cross":y.arrowTypeEnd="arrow_cross";break;case"double_arrow_point":y.arrowTypeStart="arrow_point";case"arrow_point":y.arrowTypeEnd="arrow_point";break;case"double_arrow_circle":y.arrowTypeStart="arrow_circle";case"arrow_circle":y.arrowTypeEnd="arrow_circle";break}let x="",_="";switch(h.stroke){case"normal":x="fill:none;",o!==void 0&&(x=o),l!==void 0&&(_=l),y.thickness="normal",y.pattern="solid";break;case"dotted":y.thickness="normal",y.pattern="dotted",y.style="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":y.thickness="thick",y.pattern="solid",y.style="stroke-width: 3.5px;fill:none;";break}if(h.style!==void 0){const k=ii(h.style);x=k.style,_=k.labelStyle}y.style=y.style+=x,y.labelStyle=y.labelStyle+=_,h.interpolate!==void 0?y.curve=di(h.interpolate,ei):t.defaultInterpolate!==void 0?y.curve=di(t.defaultInterpolate,ei):y.curve=di(b8.curve,ei),h.text===void 0?h.style!==void 0&&(y.arrowheadStyle="fill: #333"):(y.arrowheadStyle="fill: #333",y.labelpos="c"),y.labelType=h.labelType,y.label=h.text.replace(mt.lineBreakRegex,`
`),h.style===void 0&&(y.style=y.style||"stroke: #333; stroke-width: 1.5px;fill:none;"),y.labelStyle=y.labelStyle.replace("color:","fill:"),y.id=p,y.classes="flowchart-link "+d+" "+g;const v=Qo(s,y),{source:E,target:F,sourceId:L,targetId:T}=_8(h,a);I.debug("abc78 source and target",E,F),i.edges.push({id:"e"+h.start+h.end,sources:[E],targets:[F],sourceId:L,targetId:T,labelEl:v,labels:[{width:y.width,height:y.height,orgWidth:y.width,orgHeight:y.height,text:y.label,layoutOptions:{"edgeLabels.inline":"true","edgeLabels.placement":"CENTER"}}],edgeData:y})}),i},C8=function(t,e,i,r,s){let n="";r&&(n=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,n=n.replace(/\(/g,"\\("),n=n.replace(/\)/g,"\\)")),yu(t,e,n,s,i)},E8=function(t,e){return I.info("Extracting classes"),e.db.getClasses()},S8=function(t){const e={parentById:{},childrenById:{}},i=t.getSubGraphs();return I.info("Subgraphs - ",i),i.forEach(function(r){r.nodes.forEach(function(s){e.parentById[s]=r.id,e.childrenById[r.id]===void 0&&(e.childrenById[r.id]=[]),e.childrenById[r.id].push(s)})}),i.forEach(function(r){r.id,e.parentById[r.id]!==void 0&&e.parentById[r.id]}),e},v8=function(t,e,i){const r=x8(t,e,i);if(r===void 0||r==="root")return{x:0,y:0};const s=Zi[r].offset;return{x:s.posX,y:s.posY}},w8=function(t,e,i,r,s,n){const a=v8(e.sourceId,e.targetId,s),o=e.sections[0].startPoint,l=e.sections[0].endPoint,u=(e.sections[0].bendPoints?e.sections[0].bendPoints:[]).map(F=>[F.x+a.x,F.y+a.y]),p=[[o.x+a.x,o.y+a.y],...u,[l.x+a.x,l.y+a.y]],{x:d,y:g}=gu(e.edgeData),y=dr().x(d).y(g).curve(ei),x=t.insert("path").attr("d",y(p)).attr("class","path "+i.classes).attr("fill","none"),_=t.insert("g").attr("class","edgeLabel"),v=yt(_.node().appendChild(e.labelEl)),E=v.node().firstChild.getBoundingClientRect();v.attr("width",E.width),v.attr("height",E.height),_.attr("transform",`translate(${e.labels[0].x+a.x}, ${e.labels[0].y+a.y})`),C8(x,i,r.type,r.arrowMarkerAbsolute,n)},gd=(t,e)=>{t.forEach(i=>{i.children||(i.children=[]);const r=e.childrenById[i.id];r&&r.forEach(s=>{i.children.push(Zi[s])}),gd(i.children,e)})},A8=async function(t,e,i,r){var s;r.db.clear(),Zi={},hi={},r.db.setGen("gen-2"),r.parser.parse(t);const n=yt("body").append("div").attr("style","height:400px").attr("id","cy");let a={id:"root",layoutOptions:{"elk.hierarchyHandling":"INCLUDE_CHILDREN","org.eclipse.elk.padding":"[top=100, left=100, bottom=110, right=110]","elk.layered.spacing.edgeNodeBetweenLayers":"30","elk.direction":"DOWN"},children:[],edges:[]};switch(I.info("Drawing flowchart using v3 renderer",$c),r.db.getDirection()){case"BT":a.layoutOptions["elk.direction"]="UP";break;case"TB":a.layoutOptions["elk.direction"]="DOWN";break;case"LR":a.layoutOptions["elk.direction"]="RIGHT";break;case"RL":a.layoutOptions["elk.direction"]="LEFT";break}const{securityLevel:l,flowchart:h}=me();let u;l==="sandbox"&&(u=yt("#i"+e));const p=l==="sandbox"?yt(u.nodes()[0].contentDocument.body):yt("body"),d=l==="sandbox"?u.nodes()[0].contentDocument:document,g=p.select(`[id="${e}"]`);$o(g,["point","circle","cross"],r.type,e);const x=r.db.getVertices();let _;const v=r.db.getSubGraphs();I.info("Subgraphs - ",v);for(let S=v.length-1;S>=0;S--)_=v[S],r.db.addVertex(_.id,{text:_.title,type:_.labelType},"group",void 0,_.classes,_.dir);const E=g.insert("g").attr("class","subgraphs"),F=S8(r.db);a=await k8(x,e,p,d,r,F,a);const L=g.insert("g").attr("class","edges edgePath"),T=r.db.getEdges();a=T8(T,r,a,g),Object.keys(Zi).forEach(S=>{const m=Zi[S];m.parent||a.children.push(m),F.childrenById[S]!==void 0&&(m.labels=[{text:m.labelText,layoutOptions:{"nodeLabels.placement":"[H_CENTER, V_TOP, INSIDE]"},width:m.labelData.width,height:m.labelData.height}],delete m.x,delete m.y,delete m.width,delete m.height)}),gd(a.children,F),I.info("after layout",JSON.stringify(a,null,2));const A=await $c.layout(a);yd(0,0,A.children,g,E,r,0),I.info("after layout",A),(s=A.edges)==null||s.map(S=>{w8(L,S,S.edgeData,r,F,e)}),gr({},g,h.diagramPadding,h.useMaxWidth),n.remove()},yd=(t,e,i,r,s,n,a)=>{i.forEach(function(o){if(o)if(Zi[o.id].offset={posX:o.x+t,posY:o.y+e,x:t,y:e,depth:a,width:o.width,height:o.height},o.type==="group"){const l=s.insert("g").attr("class","subgraph");l.insert("rect").attr("class","subgraph subgraph-lvl-"+a%5+" node").attr("x",o.x+t).attr("y",o.y+e).attr("width",o.width).attr("height",o.height);const h=l.insert("g").attr("class","label"),u=me().flowchart.htmlLabels?o.labelData.width/2:0;h.attr("transform",`translate(${o.labels[0].x+t+o.x+u}, ${o.labels[0].y+e+o.y+3})`),h.node().appendChild(o.labelData.labelNode),I.info("Id (UGH)= ",o.type,o.labels)}else I.info("Id (UGH)= ",o.id),o.el.attr("transform",`translate(${o.x+t+o.width/2}, ${o.y+e+o.height/2})`)}),i.forEach(function(o){o&&o.type==="group"&&yd(t+o.x,e+o.y,o.children,r,s,n,a+1)})},L8={getClasses:E8,draw:A8},B8=t=>{let e="";for(let i=0;i<5;i++)e+=`
      .subgraph-lvl-${i} {
        fill: ${t[`surface${i}`]};
        stroke: ${t[`surfacePeer${i}`]};
      }
    `;return e},I8=t=>`.label {
    font-family: ${t.fontFamily};
    color: ${t.nodeTextColor||t.textColor};
  }
  .cluster-label text {
    fill: ${t.titleColor};
  }
  .cluster-label span {
    color: ${t.titleColor};
  }

  .label text,span {
    fill: ${t.nodeTextColor||t.textColor};
    color: ${t.nodeTextColor||t.textColor};
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${t.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${t.lineColor};
    stroke-width: 2.0px;
  }

  .flowchart-link {
    stroke: ${t.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${t.edgeLabelBackground};
    rect {
      opacity: 0.85;
      background-color: ${t.edgeLabelBackground};
      fill: ${t.edgeLabelBackground};
    }
    text-align: center;
  }

  .cluster rect {
    fill: ${t.clusterBkg};
    stroke: ${t.clusterBorder};
    stroke-width: 1px;
  }

  .cluster text {
    fill: ${t.titleColor};
  }

  .cluster span {
    color: ${t.titleColor};
  }
  /* .cluster div {
    color: ${t.titleColor};
  } */

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${t.fontFamily};
    font-size: 12px;
    background: ${t.tertiaryColor};
    border: 1px solid ${t.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .flowchartTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.textColor};
  }
  .subgraph {
    stroke-width:2;
    rx:3;
  }
  // .subgraph-lvl-1 {
  //   fill:#ccc;
  //   // stroke:black;
  // }

  .flowchart-label text {
    text-anchor: middle;
  }

  ${B8(t)}
`,D8=I8,F8={db:ux,renderer:L8,parser:Go,styles:D8},R8=Object.freeze(Object.defineProperty({__proto__:null,diagram:F8},Symbol.toStringTag,{value:"Module"}));var ko=function(){var t=function(d,g,y,x){for(y=y||{},x=d.length;x--;y[d[x]]=g);return y},e=[6,8,10,11,12,14,16,17,20,21],i=[1,9],r=[1,10],s=[1,11],n=[1,12],a=[1,13],o=[1,16],l=[1,17],h={trace:function(){},yy:{},symbols_:{error:2,start:3,timeline:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,title:11,acc_title:12,acc_title_value:13,acc_descr:14,acc_descr_value:15,acc_descr_multiline_value:16,section:17,period_statement:18,event_statement:19,period:20,event:21,$accept:0,$end:1},terminals_:{2:"error",4:"timeline",6:"EOF",8:"SPACE",10:"NEWLINE",11:"title",12:"acc_title",13:"acc_title_value",14:"acc_descr",15:"acc_descr_value",16:"acc_descr_multiline_value",17:"section",20:"period",21:"event"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,1],[9,1],[18,1],[19,1]],performAction:function(g,y,x,_,v,E,F){var L=E.length-1;switch(v){case 1:return E[L-1];case 2:this.$=[];break;case 3:E[L-1].push(E[L]),this.$=E[L-1];break;case 4:case 5:this.$=E[L];break;case 6:case 7:this.$=[];break;case 8:_.getCommonDb().setDiagramTitle(E[L].substr(6)),this.$=E[L].substr(6);break;case 9:this.$=E[L].trim(),_.getCommonDb().setAccTitle(this.$);break;case 10:case 11:this.$=E[L].trim(),_.getCommonDb().setAccDescription(this.$);break;case 12:_.addSection(E[L].substr(8)),this.$=E[L].substr(8);break;case 15:_.addTask(E[L],0,""),this.$=E[L];break;case 16:_.addEvent(E[L].substr(2)),this.$=E[L];break}},table:[{3:1,4:[1,2]},{1:[3]},t(e,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:i,12:r,14:s,16:n,17:a,18:14,19:15,20:o,21:l},t(e,[2,7],{1:[2,1]}),t(e,[2,3]),{9:18,11:i,12:r,14:s,16:n,17:a,18:14,19:15,20:o,21:l},t(e,[2,5]),t(e,[2,6]),t(e,[2,8]),{13:[1,19]},{15:[1,20]},t(e,[2,11]),t(e,[2,12]),t(e,[2,13]),t(e,[2,14]),t(e,[2,15]),t(e,[2,16]),t(e,[2,4]),t(e,[2,9]),t(e,[2,10])],defaultActions:{},parseError:function(g,y){if(y.recoverable)this.trace(g);else{var x=new Error(g);throw x.hash=y,x}},parse:function(g){var y=this,x=[0],_=[],v=[null],E=[],F=this.table,L="",T=0,k=0,A=2,S=1,m=E.slice.call(arguments,1),C=Object.create(this.lexer),f={yy:{}};for(var B in this.yy)Object.prototype.hasOwnProperty.call(this.yy,B)&&(f.yy[B]=this.yy[B]);C.setInput(g,f.yy),f.yy.lexer=C,f.yy.parser=this,typeof C.yylloc>"u"&&(C.yylloc={});var b=C.yylloc;E.push(b);var P=C.options&&C.options.ranges;typeof f.yy.parseError=="function"?this.parseError=f.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function U(){var G;return G=_.pop()||C.lex()||S,typeof G!="number"&&(G instanceof Array&&(_=G,G=_.pop()),G=y.symbols_[G]||G),G}for(var N,w,R,D,V={},z,st,j,dt;;){if(w=x[x.length-1],this.defaultActions[w]?R=this.defaultActions[w]:((N===null||typeof N>"u")&&(N=U()),R=F[w]&&F[w][N]),typeof R>"u"||!R.length||!R[0]){var K="";dt=[];for(z in F[w])this.terminals_[z]&&z>A&&dt.push("'"+this.terminals_[z]+"'");C.showPosition?K="Parse error on line "+(T+1)+`:
`+C.showPosition()+`
Expecting `+dt.join(", ")+", got '"+(this.terminals_[N]||N)+"'":K="Parse error on line "+(T+1)+": Unexpected "+(N==S?"end of input":"'"+(this.terminals_[N]||N)+"'"),this.parseError(K,{text:C.match,token:this.terminals_[N]||N,line:C.yylineno,loc:b,expected:dt})}if(R[0]instanceof Array&&R.length>1)throw new Error("Parse Error: multiple actions possible at state: "+w+", token: "+N);switch(R[0]){case 1:x.push(N),v.push(C.yytext),E.push(C.yylloc),x.push(R[1]),N=null,k=C.yyleng,L=C.yytext,T=C.yylineno,b=C.yylloc;break;case 2:if(st=this.productions_[R[1]][1],V.$=v[v.length-st],V._$={first_line:E[E.length-(st||1)].first_line,last_line:E[E.length-1].last_line,first_column:E[E.length-(st||1)].first_column,last_column:E[E.length-1].last_column},P&&(V._$.range=[E[E.length-(st||1)].range[0],E[E.length-1].range[1]]),D=this.performAction.apply(V,[L,k,T,f.yy,R[1],v,E].concat(m)),typeof D<"u")return D;st&&(x=x.slice(0,-1*st*2),v=v.slice(0,-1*st),E=E.slice(0,-1*st)),x.push(this.productions_[R[1]][0]),v.push(V.$),E.push(V._$),j=F[x[x.length-2]][x[x.length-1]],x.push(j);break;case 3:return!0}}return!0}},u=function(){var d={EOF:1,parseError:function(y,x){if(this.yy.parser)this.yy.parser.parseError(y,x);else throw new Error(y)},setInput:function(g,y){return this.yy=y||this.yy||{},this._input=g,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var g=this._input[0];this.yytext+=g,this.yyleng++,this.offset++,this.match+=g,this.matched+=g;var y=g.match(/(?:\r\n?|\n).*/g);return y?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),g},unput:function(g){var y=g.length,x=g.split(/(?:\r\n?|\n)/g);this._input=g+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-y),this.offset-=y;var _=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),x.length-1&&(this.yylineno-=x.length-1);var v=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:x?(x.length===_.length?this.yylloc.first_column:0)+_[_.length-x.length].length-x[0].length:this.yylloc.first_column-y},this.options.ranges&&(this.yylloc.range=[v[0],v[0]+this.yyleng-y]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(g){this.unput(this.match.slice(g))},pastInput:function(){var g=this.matched.substr(0,this.matched.length-this.match.length);return(g.length>20?"...":"")+g.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var g=this.match;return g.length<20&&(g+=this._input.substr(0,20-g.length)),(g.substr(0,20)+(g.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var g=this.pastInput(),y=new Array(g.length+1).join("-");return g+this.upcomingInput()+`
`+y+"^"},test_match:function(g,y){var x,_,v;if(this.options.backtrack_lexer&&(v={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(v.yylloc.range=this.yylloc.range.slice(0))),_=g[0].match(/(?:\r\n?|\n).*/g),_&&(this.yylineno+=_.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:_?_[_.length-1].length-_[_.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+g[0].length},this.yytext+=g[0],this.match+=g[0],this.matches=g,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(g[0].length),this.matched+=g[0],x=this.performAction.call(this,this.yy,this,y,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),x)return x;if(this._backtrack){for(var E in v)this[E]=v[E];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var g,y,x,_;this._more||(this.yytext="",this.match="");for(var v=this._currentRules(),E=0;E<v.length;E++)if(x=this._input.match(this.rules[v[E]]),x&&(!y||x[0].length>y[0].length)){if(y=x,_=E,this.options.backtrack_lexer){if(g=this.test_match(x,v[E]),g!==!1)return g;if(this._backtrack){y=!1;continue}else return!1}else if(!this.options.flex)break}return y?(g=this.test_match(y,v[_]),g!==!1?g:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var y=this.next();return y||this.lex()},begin:function(y){this.conditionStack.push(y)},popState:function(){var y=this.conditionStack.length-1;return y>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(y){return y=this.conditionStack.length-1-Math.abs(y||0),y>=0?this.conditionStack[y]:"INITIAL"},pushState:function(y){this.begin(y)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(y,x,_,v){switch(_){case 0:break;case 1:break;case 2:return 10;case 3:break;case 4:break;case 5:return 4;case 6:return 11;case 7:return this.begin("acc_title"),12;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),14;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:return 17;case 15:return 21;case 16:return 20;case 17:return 6;case 18:return"INVALID"}},rules:[/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:timeline\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:section\s[^#:\n;]+)/i,/^(?::\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,9,11,14,15,16,17,18],inclusive:!0}}};return d}();h.lexer=u;function p(){this.yy={}}return p.prototype=h,h.Parser=p,new p}();ko.parser=ko;const N8=ko;let os="",md=0;const wl=[],Qn=[],ls=[],xd=()=>Zh,bd=function(){wl.length=0,Qn.length=0,os="",ls.length=0,Oe()},kd=function(t){os=t,wl.push(t)},_d=function(){return wl},Td=function(){let t=Zc();const e=100;let i=0;for(;!t&&i<e;)t=Zc(),i++;return Qn.push(...ls),Qn},Cd=function(t,e,i){const r={id:md++,section:os,type:os,task:t,score:e||0,events:i?[i]:[]};ls.push(r)},Ed=function(t){ls.find(i=>i.id===md-1).events.push(t)},Sd=function(t){const e={section:os,type:os,description:t,task:t,classes:[]};Qn.push(e)},Zc=function(){const t=function(i){return ls[i].processed};let e=!0;for(const[i,r]of ls.entries())t(i),e=e&&r.processed;return e},O8={clear:bd,getCommonDb:xd,addSection:kd,getSections:_d,getTasks:Td,addTask:Cd,addTaskOrg:Sd,addEvent:Ed},P8=Object.freeze(Object.defineProperty({__proto__:null,addEvent:Ed,addSection:kd,addTask:Cd,addTaskOrg:Sd,clear:bd,default:O8,getCommonDb:xd,getSections:_d,getTasks:Td},Symbol.toStringTag,{value:"Module"})),M8=12,ya=function(t,e){const i=t.append("rect");return i.attr("x",e.x),i.attr("y",e.y),i.attr("fill",e.fill),i.attr("stroke",e.stroke),i.attr("width",e.width),i.attr("height",e.height),i.attr("rx",e.rx),i.attr("ry",e.ry),e.class!==void 0&&i.attr("class",e.class),i},V8=function(t,e){const r=t.append("circle").attr("cx",e.cx).attr("cy",e.cy).attr("class","face").attr("r",15).attr("stroke-width",2).attr("overflow","visible"),s=t.append("g");s.append("circle").attr("cx",e.cx-15/3).attr("cy",e.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),s.append("circle").attr("cx",e.cx+15/3).attr("cy",e.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666");function n(l){const h=Kr().startAngle(Math.PI/2).endAngle(3*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);l.append("path").attr("class","mouth").attr("d",h).attr("transform","translate("+e.cx+","+(e.cy+2)+")")}function a(l){const h=Kr().startAngle(3*Math.PI/2).endAngle(5*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);l.append("path").attr("class","mouth").attr("d",h).attr("transform","translate("+e.cx+","+(e.cy+7)+")")}function o(l){l.append("line").attr("class","mouth").attr("stroke",2).attr("x1",e.cx-5).attr("y1",e.cy+7).attr("x2",e.cx+5).attr("y2",e.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666")}return e.score>3?n(s):e.score<3?a(s):o(s),r},z8=function(t,e){const i=t.append("circle");return i.attr("cx",e.cx),i.attr("cy",e.cy),i.attr("class","actor-"+e.pos),i.attr("fill",e.fill),i.attr("stroke",e.stroke),i.attr("r",e.r),i.class!==void 0&&i.attr("class",i.class),e.title!==void 0&&i.append("title").text(e.title),i},vd=function(t,e){const i=e.text.replace(/<br\s*\/?>/gi," "),r=t.append("text");r.attr("x",e.x),r.attr("y",e.y),r.attr("class","legend"),r.style("text-anchor",e.anchor),e.class!==void 0&&r.attr("class",e.class);const s=r.append("tspan");return s.attr("x",e.x+e.textMargin*2),s.text(i),r},q8=function(t,e){function i(s,n,a,o,l){return s+","+n+" "+(s+a)+","+n+" "+(s+a)+","+(n+o-l)+" "+(s+a-l*1.2)+","+(n+o)+" "+s+","+(n+o)}const r=t.append("polygon");r.attr("points",i(e.x,e.y,50,20,7)),r.attr("class","labelBox"),e.y=e.y+e.labelMargin,e.x=e.x+.5*e.labelMargin,vd(t,e)},W8=function(t,e,i){const r=t.append("g"),s=Al();s.x=e.x,s.y=e.y,s.fill=e.fill,s.width=i.width,s.height=i.height,s.class="journey-section section-type-"+e.num,s.rx=3,s.ry=3,ya(r,s),wd(i)(e.text,r,s.x,s.y,s.width,s.height,{class:"journey-section section-type-"+e.num},i,e.colour)};let Jc=-1;const Y8=function(t,e,i){const r=e.x+i.width/2,s=t.append("g");Jc++;const n=300+5*30;s.append("line").attr("id","task"+Jc).attr("x1",r).attr("y1",e.y).attr("x2",r).attr("y2",n).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),V8(s,{cx:r,cy:300+(5-e.score)*30,score:e.score});const a=Al();a.x=e.x,a.y=e.y,a.fill=e.fill,a.width=i.width,a.height=i.height,a.class="task task-type-"+e.num,a.rx=3,a.ry=3,ya(s,a),e.x+14,wd(i)(e.task,s,a.x,a.y,a.width,a.height,{class:"task"},i,e.colour)},U8=function(t,e){ya(t,{x:e.startx,y:e.starty,width:e.stopx-e.startx,height:e.stopy-e.starty,fill:e.fill,class:"rect"}).lower()},H8=function(){return{x:0,y:0,fill:void 0,"text-anchor":"start",width:100,height:100,textMargin:0,rx:0,ry:0}},Al=function(){return{x:0,y:0,width:100,anchor:"start",height:100,rx:0,ry:0}},wd=function(){function t(s,n,a,o,l,h,u,p){const d=n.append("text").attr("x",a+l/2).attr("y",o+h/2+5).style("font-color",p).style("text-anchor","middle").text(s);r(d,u)}function e(s,n,a,o,l,h,u,p,d){const{taskFontSize:g,taskFontFamily:y}=p,x=s.split(/<br\s*\/?>/gi);for(let _=0;_<x.length;_++){const v=_*g-g*(x.length-1)/2,E=n.append("text").attr("x",a+l/2).attr("y",o).attr("fill",d).style("text-anchor","middle").style("font-size",g).style("font-family",y);E.append("tspan").attr("x",a+l/2).attr("dy",v).text(x[_]),E.attr("y",o+h/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),r(E,u)}}function i(s,n,a,o,l,h,u,p){const d=n.append("switch"),y=d.append("foreignObject").attr("x",a).attr("y",o).attr("width",l).attr("height",h).attr("position","fixed").append("xhtml:div").style("display","table").style("height","100%").style("width","100%");y.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(s),e(s,d,a,o,l,h,u,p),r(y,u)}function r(s,n){for(const a in n)a in n&&s.attr(a,n[a])}return function(s){return s.textPlacement==="fo"?i:s.textPlacement==="old"?t:e}}(),G8=function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")};function Ad(t,e){t.each(function(){var i=yt(this),r=i.text().split(/(\s+|<br>)/).reverse(),s,n=[],a=1.1,o=i.attr("y"),l=parseFloat(i.attr("dy")),h=i.text(null).append("tspan").attr("x",0).attr("y",o).attr("dy",l+"em");for(let u=0;u<r.length;u++)s=r[r.length-1-u],n.push(s),h.text(n.join(" ").trim()),(h.node().getComputedTextLength()>e||s==="<br>")&&(n.pop(),h.text(n.join(" ").trim()),s==="<br>"?n=[""]:n=[s],h=i.append("tspan").attr("x",0).attr("y",o).attr("dy",a+"em").text(s))})}const j8=function(t,e,i,r){const s=i%M8-1,n=t.append("g");e.section=s,n.attr("class",(e.class?e.class+" ":"")+"timeline-node "+("section-"+s));const a=n.append("g"),o=n.append("g"),h=o.append("text").text(e.descr).attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle").call(Ad,e.width).node().getBBox(),u=r.fontSize&&r.fontSize.replace?r.fontSize.replace("px",""):r.fontSize;return e.height=h.height+u*1.1*.5+e.padding,e.height=Math.max(e.height,e.maxHeight),e.width=e.width+2*e.padding,o.attr("transform","translate("+e.width/2+", "+e.padding/2+")"),$8(a,e,s),e},X8=function(t,e,i){const r=t.append("g"),n=r.append("text").text(e.descr).attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle").call(Ad,e.width).node().getBBox(),a=i.fontSize&&i.fontSize.replace?i.fontSize.replace("px",""):i.fontSize;return r.remove(),n.height+a*1.1*.5+e.padding},$8=function(t,e,i){t.append("path").attr("id","node-"+e.id).attr("class","node-bkg node-"+e.type).attr("d",`M0 ${e.height-5} v${-e.height+2*5} q0,-5 5,-5 h${e.width-2*5} q5,0 5,5 v${e.height-5} H0 Z`),t.append("line").attr("class","node-line-"+i).attr("x1",0).attr("y1",e.height).attr("x2",e.width).attr("y2",e.height)},_r={drawRect:ya,drawCircle:z8,drawSection:W8,drawText:vd,drawLabel:q8,drawTask:Y8,drawBackgroundRect:U8,getTextObj:H8,getNoteRect:Al,initGraphics:G8,drawNode:j8,getVirtualNodeHeight:X8},K8=function(t,e,i,r){var s,n;const a=Y(),o=a.leftMargin??50;I.debug("timeline",r.db);const l=a.securityLevel;let h;l==="sandbox"&&(h=yt("#i"+e));const p=(l==="sandbox"?yt(h.nodes()[0].contentDocument.body):yt("body")).select("#"+e);p.append("g");const d=r.db.getTasks(),g=r.db.getCommonDb().getDiagramTitle();I.debug("task",d),_r.initGraphics(p);const y=r.db.getSections();I.debug("sections",y);let x=0,_=0,v=0,E=0,F=50+o,L=50;E=50;let T=0,k=!0;y.forEach(function(f){const B={number:T,descr:f,section:T,width:150,padding:20,maxHeight:x},b=_r.getVirtualNodeHeight(p,B,a);I.debug("sectionHeight before draw",b),x=Math.max(x,b+20)});let A=0,S=0;I.debug("tasks.length",d.length);for(const[f,B]of d.entries()){const b={number:f,descr:B,section:B.section,width:150,padding:20,maxHeight:_},P=_r.getVirtualNodeHeight(p,b,a);I.debug("taskHeight before draw",P),_=Math.max(_,P+20),A=Math.max(A,B.events.length);let U=0;for(let N=0;N<B.events.length;N++){const R={descr:B.events[N],section:B.section,number:B.section,width:150,padding:20,maxHeight:50};U+=_r.getVirtualNodeHeight(p,R,a)}S=Math.max(S,U)}I.debug("maxSectionHeight before draw",x),I.debug("maxTaskHeight before draw",_),y&&y.length>0?y.forEach(f=>{const B=d.filter(N=>N.section===f),b={number:T,descr:f,section:T,width:200*Math.max(B.length,1)-50,padding:20,maxHeight:x};I.debug("sectionNode",b);const P=p.append("g"),U=_r.drawNode(P,b,T,a);I.debug("sectionNode output",U),P.attr("transform",`translate(${F}, ${E})`),L+=x+50,B.length>0&&th(p,B,T,F,L,_,a,A,S,x,!1),F+=200*Math.max(B.length,1),L=E,T++}):(k=!1,th(p,d,T,F,L,_,a,A,S,x,!0));const m=p.node().getBBox();I.debug("bounds",m),g&&p.append("text").text(g).attr("x",m.width/2-o).attr("font-size","4ex").attr("font-weight","bold").attr("y",20),v=k?x+_+150:_+100,p.append("g").attr("class","lineWrapper").append("line").attr("x1",o).attr("y1",v).attr("x2",m.width+3*o).attr("y2",v).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)"),gr(void 0,p,((s=a.timeline)==null?void 0:s.padding)??50,((n=a.timeline)==null?void 0:n.useMaxWidth)??!1)},th=function(t,e,i,r,s,n,a,o,l,h,u){var p;for(const d of e){const g={descr:d.task,section:i,number:i,width:150,padding:20,maxHeight:n};I.debug("taskNode",g);const y=t.append("g").attr("class","taskWrapper"),_=_r.drawNode(y,g,i,a).height;if(I.debug("taskHeight after draw",_),y.attr("transform",`translate(${r}, ${s})`),n=Math.max(n,_),d.events){const v=t.append("g").attr("class","lineWrapper");let E=n;s+=100,E=E+Q8(t,d.events,i,r,s,a),s-=100,v.append("line").attr("x1",r+190/2).attr("y1",s+n).attr("x2",r+190/2).attr("y2",s+n+(u?n:h)+l+120).attr("stroke-width",2).attr("stroke","black").attr("marker-end","url(#arrowhead)").attr("stroke-dasharray","5,5")}r=r+200,u&&!((p=a.timeline)!=null&&p.disableMulticolor)&&i++}s=s-10},Q8=function(t,e,i,r,s,n){let a=0;const o=s;s=s+100;for(const l of e){const h={descr:l,section:i,number:i,width:150,padding:20,maxHeight:50};I.debug("eventNode",h);const u=t.append("g").attr("class","eventWrapper"),d=_r.drawNode(u,h,i,n).height;a=a+d,u.attr("transform",`translate(${r}, ${s})`),s=s+10+d}return s=o,a},Z8={setConf:()=>{},draw:K8},J8=t=>{let e="";for(let i=0;i<t.THEME_COLOR_LIMIT;i++)t["lineColor"+i]=t["lineColor"+i]||t["cScaleInv"+i],Fr(t["lineColor"+i])?t["lineColor"+i]=Ct(t["lineColor"+i],20):t["lineColor"+i]=At(t["lineColor"+i],20);for(let i=0;i<t.THEME_COLOR_LIMIT;i++){const r=""+(17-3*i);e+=`
    .section-${i-1} rect, .section-${i-1} path, .section-${i-1} circle, .section-${i-1} path  {
      fill: ${t["cScale"+i]};
    }
    .section-${i-1} text {
     fill: ${t["cScaleLabel"+i]};
    }
    .node-icon-${i-1} {
      font-size: 40px;
      color: ${t["cScaleLabel"+i]};
    }
    .section-edge-${i-1}{
      stroke: ${t["cScale"+i]};
    }
    .edge-depth-${i-1}{
      stroke-width: ${r};
    }
    .section-${i-1} line {
      stroke: ${t["cScaleInv"+i]} ;
      stroke-width: 3;
    }

    .lineWrapper line{
      stroke: ${t["cScaleLabel"+i]} ;
    }

    .disabled, .disabled circle, .disabled text {
      fill: lightgray;
    }
    .disabled text {
      fill: #efefef;
    }
    `}return e},tC=t=>`
  .edge {
    stroke-width: 3;
  }
  ${J8(t)}
  .section-root rect, .section-root path, .section-root circle  {
    fill: ${t.git0};
  }
  .section-root text {
    fill: ${t.gitBranchLabel0};
  }
  .icon-container {
    height:100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .edge {
    fill: none;
  }
  .eventWrapper  {
   filter: brightness(120%);
  }
`,eC=tC,iC={db:P8,renderer:Z8,parser:N8,styles:eC},rC=Object.freeze(Object.defineProperty({__proto__:null,diagram:iC},Symbol.toStringTag,{value:"Module"}));var _o=function(){var t=function(L,T,k,A){for(k=k||{},A=L.length;A--;k[L[A]]=T);return k},e=[1,4],i=[1,13],r=[1,12],s=[1,15],n=[1,16],a=[1,20],o=[1,19],l=[6,7,8],h=[1,26],u=[1,24],p=[1,25],d=[6,7,11],g=[1,6,13,15,16,19,22],y=[1,33],x=[1,34],_=[1,6,7,11,13,15,16,19,22],v={trace:function(){},yy:{},symbols_:{error:2,start:3,mindMap:4,spaceLines:5,SPACELINE:6,NL:7,MINDMAP:8,document:9,stop:10,EOF:11,statement:12,SPACELIST:13,node:14,ICON:15,CLASS:16,nodeWithId:17,nodeWithoutId:18,NODE_DSTART:19,NODE_DESCR:20,NODE_DEND:21,NODE_ID:22,$accept:0,$end:1},terminals_:{2:"error",6:"SPACELINE",7:"NL",8:"MINDMAP",11:"EOF",13:"SPACELIST",15:"ICON",16:"CLASS",19:"NODE_DSTART",20:"NODE_DESCR",21:"NODE_DEND",22:"NODE_ID"},productions_:[0,[3,1],[3,2],[5,1],[5,2],[5,2],[4,2],[4,3],[10,1],[10,1],[10,1],[10,2],[10,2],[9,3],[9,2],[12,2],[12,2],[12,2],[12,1],[12,1],[12,1],[12,1],[12,1],[14,1],[14,1],[18,3],[17,1],[17,4]],performAction:function(T,k,A,S,m,C,f){var B=C.length-1;switch(m){case 6:case 7:return S;case 8:S.getLogger().trace("Stop NL ");break;case 9:S.getLogger().trace("Stop EOF ");break;case 11:S.getLogger().trace("Stop NL2 ");break;case 12:S.getLogger().trace("Stop EOF2 ");break;case 15:S.getLogger().info("Node: ",C[B].id),S.addNode(C[B-1].length,C[B].id,C[B].descr,C[B].type);break;case 16:S.getLogger().trace("Icon: ",C[B]),S.decorateNode({icon:C[B]});break;case 17:case 21:S.decorateNode({class:C[B]});break;case 18:S.getLogger().trace("SPACELIST");break;case 19:S.getLogger().trace("Node: ",C[B].id),S.addNode(0,C[B].id,C[B].descr,C[B].type);break;case 20:S.decorateNode({icon:C[B]});break;case 25:S.getLogger().trace("node found ..",C[B-2]),this.$={id:C[B-1],descr:C[B-1],type:S.getType(C[B-2],C[B])};break;case 26:this.$={id:C[B],descr:C[B],type:S.nodeType.DEFAULT};break;case 27:S.getLogger().trace("node found ..",C[B-3]),this.$={id:C[B-3],descr:C[B-1],type:S.getType(C[B-2],C[B])};break}},table:[{3:1,4:2,5:3,6:[1,5],8:e},{1:[3]},{1:[2,1]},{4:6,6:[1,7],7:[1,8],8:e},{6:i,7:[1,10],9:9,12:11,13:r,14:14,15:s,16:n,17:17,18:18,19:a,22:o},t(l,[2,3]),{1:[2,2]},t(l,[2,4]),t(l,[2,5]),{1:[2,6],6:i,12:21,13:r,14:14,15:s,16:n,17:17,18:18,19:a,22:o},{6:i,9:22,12:11,13:r,14:14,15:s,16:n,17:17,18:18,19:a,22:o},{6:h,7:u,10:23,11:p},t(d,[2,22],{17:17,18:18,14:27,15:[1,28],16:[1,29],19:a,22:o}),t(d,[2,18]),t(d,[2,19]),t(d,[2,20]),t(d,[2,21]),t(d,[2,23]),t(d,[2,24]),t(d,[2,26],{19:[1,30]}),{20:[1,31]},{6:h,7:u,10:32,11:p},{1:[2,7],6:i,12:21,13:r,14:14,15:s,16:n,17:17,18:18,19:a,22:o},t(g,[2,14],{7:y,11:x}),t(_,[2,8]),t(_,[2,9]),t(_,[2,10]),t(d,[2,15]),t(d,[2,16]),t(d,[2,17]),{20:[1,35]},{21:[1,36]},t(g,[2,13],{7:y,11:x}),t(_,[2,11]),t(_,[2,12]),{21:[1,37]},t(d,[2,25]),t(d,[2,27])],defaultActions:{2:[2,1],6:[2,2]},parseError:function(T,k){if(k.recoverable)this.trace(T);else{var A=new Error(T);throw A.hash=k,A}},parse:function(T){var k=this,A=[0],S=[],m=[null],C=[],f=this.table,B="",b=0,P=0,U=2,N=1,w=C.slice.call(arguments,1),R=Object.create(this.lexer),D={yy:{}};for(var V in this.yy)Object.prototype.hasOwnProperty.call(this.yy,V)&&(D.yy[V]=this.yy[V]);R.setInput(T,D.yy),D.yy.lexer=R,D.yy.parser=this,typeof R.yylloc>"u"&&(R.yylloc={});var z=R.yylloc;C.push(z);var st=R.options&&R.options.ranges;typeof D.yy.parseError=="function"?this.parseError=D.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function j(){var ft;return ft=S.pop()||R.lex()||N,typeof ft!="number"&&(ft instanceof Array&&(S=ft,ft=S.pop()),ft=k.symbols_[ft]||ft),ft}for(var dt,K,G,tt,nt={},Q,J,O,at;;){if(K=A[A.length-1],this.defaultActions[K]?G=this.defaultActions[K]:((dt===null||typeof dt>"u")&&(dt=j()),G=f[K]&&f[K][dt]),typeof G>"u"||!G.length||!G[0]){var W="";at=[];for(Q in f[K])this.terminals_[Q]&&Q>U&&at.push("'"+this.terminals_[Q]+"'");R.showPosition?W="Parse error on line "+(b+1)+`:
`+R.showPosition()+`
Expecting `+at.join(", ")+", got '"+(this.terminals_[dt]||dt)+"'":W="Parse error on line "+(b+1)+": Unexpected "+(dt==N?"end of input":"'"+(this.terminals_[dt]||dt)+"'"),this.parseError(W,{text:R.match,token:this.terminals_[dt]||dt,line:R.yylineno,loc:z,expected:at})}if(G[0]instanceof Array&&G.length>1)throw new Error("Parse Error: multiple actions possible at state: "+K+", token: "+dt);switch(G[0]){case 1:A.push(dt),m.push(R.yytext),C.push(R.yylloc),A.push(G[1]),dt=null,P=R.yyleng,B=R.yytext,b=R.yylineno,z=R.yylloc;break;case 2:if(J=this.productions_[G[1]][1],nt.$=m[m.length-J],nt._$={first_line:C[C.length-(J||1)].first_line,last_line:C[C.length-1].last_line,first_column:C[C.length-(J||1)].first_column,last_column:C[C.length-1].last_column},st&&(nt._$.range=[C[C.length-(J||1)].range[0],C[C.length-1].range[1]]),tt=this.performAction.apply(nt,[B,P,b,D.yy,G[1],m,C].concat(w)),typeof tt<"u")return tt;J&&(A=A.slice(0,-1*J*2),m=m.slice(0,-1*J),C=C.slice(0,-1*J)),A.push(this.productions_[G[1]][0]),m.push(nt.$),C.push(nt._$),O=f[A[A.length-2]][A[A.length-1]],A.push(O);break;case 3:return!0}}return!0}},E=function(){var L={EOF:1,parseError:function(k,A){if(this.yy.parser)this.yy.parser.parseError(k,A);else throw new Error(k)},setInput:function(T,k){return this.yy=k||this.yy||{},this._input=T,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var T=this._input[0];this.yytext+=T,this.yyleng++,this.offset++,this.match+=T,this.matched+=T;var k=T.match(/(?:\r\n?|\n).*/g);return k?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),T},unput:function(T){var k=T.length,A=T.split(/(?:\r\n?|\n)/g);this._input=T+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-k),this.offset-=k;var S=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),A.length-1&&(this.yylineno-=A.length-1);var m=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:A?(A.length===S.length?this.yylloc.first_column:0)+S[S.length-A.length].length-A[0].length:this.yylloc.first_column-k},this.options.ranges&&(this.yylloc.range=[m[0],m[0]+this.yyleng-k]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(T){this.unput(this.match.slice(T))},pastInput:function(){var T=this.matched.substr(0,this.matched.length-this.match.length);return(T.length>20?"...":"")+T.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var T=this.match;return T.length<20&&(T+=this._input.substr(0,20-T.length)),(T.substr(0,20)+(T.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var T=this.pastInput(),k=new Array(T.length+1).join("-");return T+this.upcomingInput()+`
`+k+"^"},test_match:function(T,k){var A,S,m;if(this.options.backtrack_lexer&&(m={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(m.yylloc.range=this.yylloc.range.slice(0))),S=T[0].match(/(?:\r\n?|\n).*/g),S&&(this.yylineno+=S.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:S?S[S.length-1].length-S[S.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+T[0].length},this.yytext+=T[0],this.match+=T[0],this.matches=T,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(T[0].length),this.matched+=T[0],A=this.performAction.call(this,this.yy,this,k,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),A)return A;if(this._backtrack){for(var C in m)this[C]=m[C];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var T,k,A,S;this._more||(this.yytext="",this.match="");for(var m=this._currentRules(),C=0;C<m.length;C++)if(A=this._input.match(this.rules[m[C]]),A&&(!k||A[0].length>k[0].length)){if(k=A,S=C,this.options.backtrack_lexer){if(T=this.test_match(A,m[C]),T!==!1)return T;if(this._backtrack){k=!1;continue}else return!1}else if(!this.options.flex)break}return k?(T=this.test_match(k,m[S]),T!==!1?T:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var k=this.next();return k||this.lex()},begin:function(k){this.conditionStack.push(k)},popState:function(){var k=this.conditionStack.length-1;return k>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(k){return k=this.conditionStack.length-1-Math.abs(k||0),k>=0?this.conditionStack[k]:"INITIAL"},pushState:function(k){this.begin(k)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(k,A,S,m){switch(S){case 0:return k.getLogger().trace("Found comment",A.yytext),6;case 1:return 8;case 2:this.begin("CLASS");break;case 3:return this.popState(),16;case 4:this.popState();break;case 5:k.getLogger().trace("Begin icon"),this.begin("ICON");break;case 6:return k.getLogger().trace("SPACELINE"),6;case 7:return 7;case 8:return 15;case 9:k.getLogger().trace("end icon"),this.popState();break;case 10:return k.getLogger().trace("Exploding node"),this.begin("NODE"),19;case 11:return k.getLogger().trace("Cloud"),this.begin("NODE"),19;case 12:return k.getLogger().trace("Explosion Bang"),this.begin("NODE"),19;case 13:return k.getLogger().trace("Cloud Bang"),this.begin("NODE"),19;case 14:return this.begin("NODE"),19;case 15:return this.begin("NODE"),19;case 16:return this.begin("NODE"),19;case 17:return this.begin("NODE"),19;case 18:return 13;case 19:return 22;case 20:return 11;case 21:this.begin("NSTR2");break;case 22:return"NODE_DESCR";case 23:this.popState();break;case 24:k.getLogger().trace("Starting NSTR"),this.begin("NSTR");break;case 25:return k.getLogger().trace("description:",A.yytext),"NODE_DESCR";case 26:this.popState();break;case 27:return this.popState(),k.getLogger().trace("node end ))"),"NODE_DEND";case 28:return this.popState(),k.getLogger().trace("node end )"),"NODE_DEND";case 29:return this.popState(),k.getLogger().trace("node end ...",A.yytext),"NODE_DEND";case 30:return this.popState(),k.getLogger().trace("node end (("),"NODE_DEND";case 31:return this.popState(),k.getLogger().trace("node end (-"),"NODE_DEND";case 32:return this.popState(),k.getLogger().trace("node end (-"),"NODE_DEND";case 33:return this.popState(),k.getLogger().trace("node end (("),"NODE_DEND";case 34:return this.popState(),k.getLogger().trace("node end (("),"NODE_DEND";case 35:return k.getLogger().trace("Long description:",A.yytext),20;case 36:return k.getLogger().trace("Long description:",A.yytext),20}},rules:[/^(?:\s*%%.*)/i,/^(?:mindmap\b)/i,/^(?::::)/i,/^(?:.+)/i,/^(?:\n)/i,/^(?:::icon\()/i,/^(?:[\s]+[\n])/i,/^(?:[\n]+)/i,/^(?:[^\)]+)/i,/^(?:\))/i,/^(?:-\))/i,/^(?:\(-)/i,/^(?:\)\))/i,/^(?:\))/i,/^(?:\(\()/i,/^(?:\{\{)/i,/^(?:\()/i,/^(?:\[)/i,/^(?:[\s]+)/i,/^(?:[^\(\[\n\)\{\}]+)/i,/^(?:$)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:[^"]+)/i,/^(?:["])/i,/^(?:[\)]\))/i,/^(?:[\)])/i,/^(?:[\]])/i,/^(?:\}\})/i,/^(?:\(-)/i,/^(?:-\))/i,/^(?:\(\()/i,/^(?:\()/i,/^(?:[^\)\]\(\}]+)/i,/^(?:.+(?!\(\())/i],conditions:{CLASS:{rules:[3,4],inclusive:!1},ICON:{rules:[8,9],inclusive:!1},NSTR2:{rules:[22,23],inclusive:!1},NSTR:{rules:[25,26],inclusive:!1},NODE:{rules:[21,24,27,28,29,30,31,32,33,34,35,36],inclusive:!1},INITIAL:{rules:[0,1,2,5,6,7,10,11,12,13,14,15,16,17,18,19,20],inclusive:!0}}};return L}();v.lexer=E;function F(){this.yy={}}return F.prototype=v,v.Parser=F,new F}();_o.parser=_o;const sC=_o;let bi=[],Ld=0,Ll={};const nC=()=>{bi=[],Ld=0,Ll={}},aC=function(t){for(let e=bi.length-1;e>=0;e--)if(bi[e].level<t)return bi[e];return null},oC=()=>bi.length>0?bi[0]:null,lC=(t,e,i,r)=>{var s,n;I.info("addNode",t,e,i,r);const a=Y();let o=((s=a.mindmap)==null?void 0:s.padding)??$t.mindmap.padding;switch(r){case _e.ROUNDED_RECT:case _e.RECT:case _e.HEXAGON:o*=2}const l={id:Ld++,nodeId:ue(e,a),level:t,descr:ue(i,a),type:r,children:[],width:((n=a.mindmap)==null?void 0:n.maxNodeWidth)??$t.mindmap.maxNodeWidth,padding:o},h=aC(t);if(h)h.children.push(l),bi.push(l);else if(bi.length===0)bi.push(l);else throw new Error('There can be only one root. No parent could be found for ("'+l.descr+'")')},_e={DEFAULT:0,NO_BORDER:0,ROUNDED_RECT:1,RECT:2,CIRCLE:3,CLOUD:4,BANG:5,HEXAGON:6},cC=(t,e)=>{switch(I.debug("In get type",t,e),t){case"[":return _e.RECT;case"(":return e===")"?_e.ROUNDED_RECT:_e.CLOUD;case"((":return _e.CIRCLE;case")":return _e.CLOUD;case"))":return _e.BANG;case"{{":return _e.HEXAGON;default:return _e.DEFAULT}},hC=(t,e)=>{Ll[t]=e},uC=t=>{if(!t)return;const e=Y(),i=bi[bi.length-1];t.icon&&(i.icon=ue(t.icon,e)),t.class&&(i.class=ue(t.class,e))},dC=t=>{switch(t){case _e.DEFAULT:return"no-border";case _e.RECT:return"rect";case _e.ROUNDED_RECT:return"rounded-rect";case _e.CIRCLE:return"circle";case _e.CLOUD:return"cloud";case _e.BANG:return"bang";case _e.HEXAGON:return"hexgon";default:return"no-border"}},fC=()=>I,pC=t=>Ll[t],gC={clear:nC,addNode:lC,getMindmap:oC,nodeType:_e,getType:cC,setElementForId:hC,decorateNode:uC,type2Str:dC,getLogger:fC,getElementById:pC},yC=gC,mC=12,xC=function(t,e,i,r){e.append("path").attr("id","node-"+i.id).attr("class","node-bkg node-"+t.type2Str(i.type)).attr("d",`M0 ${i.height-5} v${-i.height+2*5} q0,-5 5,-5 h${i.width-2*5} q5,0 5,5 v${i.height-5} H0 Z`),e.append("line").attr("class","node-line-"+r).attr("x1",0).attr("y1",i.height).attr("x2",i.width).attr("y2",i.height)},bC=function(t,e,i){e.append("rect").attr("id","node-"+i.id).attr("class","node-bkg node-"+t.type2Str(i.type)).attr("height",i.height).attr("width",i.width)},kC=function(t,e,i){const r=i.width,s=i.height,n=.15*r,a=.25*r,o=.35*r,l=.2*r;e.append("path").attr("id","node-"+i.id).attr("class","node-bkg node-"+t.type2Str(i.type)).attr("d",`M0 0 a${n},${n} 0 0,1 ${r*.25},${-1*r*.1}
      a${o},${o} 1 0,1 ${r*.4},${-1*r*.1}
      a${a},${a} 1 0,1 ${r*.35},${1*r*.2}

      a${n},${n} 1 0,1 ${r*.15},${1*s*.35}
      a${l},${l} 1 0,1 ${-1*r*.15},${1*s*.65}

      a${a},${n} 1 0,1 ${-1*r*.25},${r*.15}
      a${o},${o} 1 0,1 ${-1*r*.5},0
      a${n},${n} 1 0,1 ${-1*r*.25},${-1*r*.15}

      a${n},${n} 1 0,1 ${-1*r*.1},${-1*s*.35}
      a${l},${l} 1 0,1 ${r*.1},${-1*s*.65}

    H0 V0 Z`)},_C=function(t,e,i){const r=i.width,s=i.height,n=.15*r;e.append("path").attr("id","node-"+i.id).attr("class","node-bkg node-"+t.type2Str(i.type)).attr("d",`M0 0 a${n},${n} 1 0,0 ${r*.25},${-1*s*.1}
      a${n},${n} 1 0,0 ${r*.25},0
      a${n},${n} 1 0,0 ${r*.25},0
      a${n},${n} 1 0,0 ${r*.25},${1*s*.1}

      a${n},${n} 1 0,0 ${r*.15},${1*s*.33}
      a${n*.8},${n*.8} 1 0,0 0,${1*s*.34}
      a${n},${n} 1 0,0 ${-1*r*.15},${1*s*.33}

      a${n},${n} 1 0,0 ${-1*r*.25},${s*.15}
      a${n},${n} 1 0,0 ${-1*r*.25},0
      a${n},${n} 1 0,0 ${-1*r*.25},0
      a${n},${n} 1 0,0 ${-1*r*.25},${-1*s*.15}

      a${n},${n} 1 0,0 ${-1*r*.1},${-1*s*.33}
      a${n*.8},${n*.8} 1 0,0 0,${-1*s*.34}
      a${n},${n} 1 0,0 ${r*.1},${-1*s*.33}

    H0 V0 Z`)},TC=function(t,e,i){e.append("circle").attr("id","node-"+i.id).attr("class","node-bkg node-"+t.type2Str(i.type)).attr("r",i.width/2)};function CC(t,e,i,r,s){return t.insert("polygon",":first-child").attr("points",r.map(function(n){return n.x+","+n.y}).join(" ")).attr("transform","translate("+(s.width-e)/2+", "+i+")")}const EC=function(t,e,i){const r=i.height,n=r/4,a=i.width-i.padding+2*n,o=[{x:n,y:0},{x:a-n,y:0},{x:a,y:-r/2},{x:a-n,y:-r},{x:n,y:-r},{x:0,y:-r/2}];CC(e,a,r,o,i)},SC=function(t,e,i){e.append("rect").attr("id","node-"+i.id).attr("class","node-bkg node-"+t.type2Str(i.type)).attr("height",i.height).attr("rx",i.padding).attr("ry",i.padding).attr("width",i.width)},vC=function(t,e,i,r,s){const n=s.htmlLabels,a=r%(mC-1),o=e.append("g");i.section=a;let l="section-"+a;a<0&&(l+=" section-root"),o.attr("class",(i.class?i.class+" ":"")+"mindmap-node "+l);const h=o.append("g"),u=o.append("g"),p=i.descr.replace(/(<br\/*>)/g,`
`);ca(u,p,{useHtmlLabels:n,width:i.width,classes:"mindmap-node-label"}),n||u.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle");const d=u.node().getBBox(),[g]=Rr(s.fontSize);if(i.height=d.height+g*1.1*.5+i.padding,i.width=d.width+2*i.padding,i.icon)if(i.type===t.nodeType.CIRCLE)i.height+=50,i.width+=50,o.append("foreignObject").attr("height","50px").attr("width",i.width).attr("style","text-align: center;").append("div").attr("class","icon-container").append("i").attr("class","node-icon-"+a+" "+i.icon),u.attr("transform","translate("+i.width/2+", "+(i.height/2-1.5*i.padding)+")");else{i.width+=50;const y=i.height;i.height=Math.max(y,60);const x=Math.abs(i.height-y);o.append("foreignObject").attr("width","60px").attr("height",i.height).attr("style","text-align: center;margin-top:"+x/2+"px;").append("div").attr("class","icon-container").append("i").attr("class","node-icon-"+a+" "+i.icon),u.attr("transform","translate("+(25+i.width/2)+", "+(x/2+i.padding/2)+")")}else if(n){const y=(i.width-d.width)/2,x=(i.height-d.height)/2;u.attr("transform","translate("+y+", "+x+")")}else{const y=i.width/2,x=i.padding/2;u.attr("transform","translate("+y+", "+x+")")}switch(i.type){case t.nodeType.DEFAULT:xC(t,h,i,a);break;case t.nodeType.ROUNDED_RECT:SC(t,h,i);break;case t.nodeType.RECT:bC(t,h,i);break;case t.nodeType.CIRCLE:h.attr("transform","translate("+i.width/2+", "+ +i.height/2+")"),TC(t,h,i);break;case t.nodeType.CLOUD:kC(t,h,i);break;case t.nodeType.BANG:_C(t,h,i);break;case t.nodeType.HEXAGON:EC(t,h,i);break}return t.setElementForId(i.id,o),i.height},wC=function(t,e){const i=t.getElementById(e.id),r=e.x||0,s=e.y||0;i.attr("transform","translate("+r+","+s+")")};uh.use(Lf);function Bd(t,e,i,r,s){vC(t,e,i,r,s),i.children&&i.children.forEach((n,a)=>{Bd(t,e,n,r<0?a:r,s)})}function AC(t,e){e.edges().map((i,r)=>{const s=i.data();if(i[0]._private.bodyBounds){const n=i[0]._private.rscratch;I.trace("Edge: ",r,s),t.insert("path").attr("d",`M ${n.startX},${n.startY} L ${n.midX},${n.midY} L${n.endX},${n.endY} `).attr("class","edge section-edge-"+s.section+" edge-depth-"+s.depth)}})}function Id(t,e,i,r){e.add({group:"nodes",data:{id:t.id.toString(),labelText:t.descr,height:t.height,width:t.width,level:r,nodeId:t.id,padding:t.padding,type:t.type},position:{x:t.x,y:t.y}}),t.children&&t.children.forEach(s=>{Id(s,e,i,r+1),e.add({group:"edges",data:{id:`${t.id}_${s.id}`,source:t.id,target:s.id,depth:r,section:s.section}})})}function LC(t,e){return new Promise(i=>{const r=yt("body").append("div").attr("id","cy").attr("style","display:none"),s=uh({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"bezier"}}]});r.remove(),Id(t,s,e,0),s.nodes().forEach(function(n){n.layoutDimensions=()=>{const a=n.data();return{w:a.width,h:a.height}}}),s.layout({name:"cose-bilkent",quality:"proof",styleEnabled:!1,animate:!1}).run(),s.ready(n=>{I.info("Ready",n),i(s)})})}function BC(t,e){e.nodes().map((i,r)=>{const s=i.data();s.x=i.position().x,s.y=i.position().y,wC(t,s);const n=t.getElementById(s.nodeId);I.info("Id:",r,"Position: (",i.position().x,", ",i.position().y,")",s),n.attr("transform",`translate(${i.position().x-s.width/2}, ${i.position().y-s.height/2})`),n.attr("attr",`apa-${r})`)})}const IC=async(t,e,i,r)=>{var s,n;I.debug(`Rendering mindmap diagram
`+t);const a=r.db,o=a.getMindmap();if(!o)return;const l=Y();l.htmlLabels=!1;const h=$s(e),u=h.append("g");u.attr("class","mindmap-edges");const p=h.append("g");p.attr("class","mindmap-nodes"),Bd(a,p,o,-1,l);const d=await LC(o,l);AC(u,d),BC(a,d),gr(void 0,h,((s=l.mindmap)==null?void 0:s.padding)??$t.mindmap.padding,((n=l.mindmap)==null?void 0:n.useMaxWidth)??$t.mindmap.useMaxWidth)},DC={draw:IC},FC=t=>{let e="";for(let i=0;i<t.THEME_COLOR_LIMIT;i++)t["lineColor"+i]=t["lineColor"+i]||t["cScaleInv"+i],Fr(t["lineColor"+i])?t["lineColor"+i]=Ct(t["lineColor"+i],20):t["lineColor"+i]=At(t["lineColor"+i],20);for(let i=0;i<t.THEME_COLOR_LIMIT;i++){const r=""+(17-3*i);e+=`
    .section-${i-1} rect, .section-${i-1} path, .section-${i-1} circle, .section-${i-1} polygon, .section-${i-1} path  {
      fill: ${t["cScale"+i]};
    }
    .section-${i-1} text {
     fill: ${t["cScaleLabel"+i]};
    }
    .node-icon-${i-1} {
      font-size: 40px;
      color: ${t["cScaleLabel"+i]};
    }
    .section-edge-${i-1}{
      stroke: ${t["cScale"+i]};
    }
    .edge-depth-${i-1}{
      stroke-width: ${r};
    }
    .section-${i-1} line {
      stroke: ${t["cScaleInv"+i]} ;
      stroke-width: 3;
    }

    .disabled, .disabled circle, .disabled text {
      fill: lightgray;
    }
    .disabled text {
      fill: #efefef;
    }
    `}return e},RC=t=>`
  .edge {
    stroke-width: 3;
  }
  ${FC(t)}
  .section-root rect, .section-root path, .section-root circle, .section-root polygon  {
    fill: ${t.git0};
  }
  .section-root text {
    fill: ${t.gitBranchLabel0};
  }
  .icon-container {
    height:100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .edge {
    fill: none;
  }
  .mindmap-node-label {
    dy: 1em;
    alignment-baseline: middle;
    text-anchor: middle;
    dominant-baseline: middle;
    text-align: center;
  }
`,NC=RC,OC={db:yC,renderer:DC,parser:sC,styles:NC},PC=Object.freeze(Object.defineProperty({__proto__:null,diagram:OC},Symbol.toStringTag,{value:"Module"}));var To=function(){var t=function(o,l,h,u){for(h=h||{},u=o.length;u--;h[o[u]]=l);return h},e=[1,9],i=[1,10],r=[1,5,10,12],s={trace:function(){},yy:{},symbols_:{error:2,start:3,SANKEY:4,NEWLINE:5,csv:6,opt_eof:7,record:8,csv_tail:9,EOF:10,"field[source]":11,COMMA:12,"field[target]":13,"field[value]":14,field:15,escaped:16,non_escaped:17,DQUOTE:18,ESCAPED_TEXT:19,NON_ESCAPED_TEXT:20,$accept:0,$end:1},terminals_:{2:"error",4:"SANKEY",5:"NEWLINE",10:"EOF",11:"field[source]",12:"COMMA",13:"field[target]",14:"field[value]",18:"DQUOTE",19:"ESCAPED_TEXT",20:"NON_ESCAPED_TEXT"},productions_:[0,[3,4],[6,2],[9,2],[9,0],[7,1],[7,0],[8,5],[15,1],[15,1],[16,3],[17,1]],performAction:function(l,h,u,p,d,g,y){var x=g.length-1;switch(d){case 7:const _=p.findOrCreateNode(g[x-4].trim().replaceAll('""','"')),v=p.findOrCreateNode(g[x-2].trim().replaceAll('""','"')),E=parseFloat(g[x].trim());p.addLink(_,v,E);break;case 8:case 9:case 11:this.$=g[x];break;case 10:this.$=g[x-1];break}},table:[{3:1,4:[1,2]},{1:[3]},{5:[1,3]},{6:4,8:5,15:6,16:7,17:8,18:e,20:i},{1:[2,6],7:11,10:[1,12]},t(i,[2,4],{9:13,5:[1,14]}),{12:[1,15]},t(r,[2,8]),t(r,[2,9]),{19:[1,16]},t(r,[2,11]),{1:[2,1]},{1:[2,5]},t(i,[2,2]),{6:17,8:5,15:6,16:7,17:8,18:e,20:i},{15:18,16:7,17:8,18:e,20:i},{18:[1,19]},t(i,[2,3]),{12:[1,20]},t(r,[2,10]),{15:21,16:7,17:8,18:e,20:i},t([1,5,10],[2,7])],defaultActions:{11:[2,1],12:[2,5]},parseError:function(l,h){if(h.recoverable)this.trace(l);else{var u=new Error(l);throw u.hash=h,u}},parse:function(l){var h=this,u=[0],p=[],d=[null],g=[],y=this.table,x="",_=0,v=0,E=2,F=1,L=g.slice.call(arguments,1),T=Object.create(this.lexer),k={yy:{}};for(var A in this.yy)Object.prototype.hasOwnProperty.call(this.yy,A)&&(k.yy[A]=this.yy[A]);T.setInput(l,k.yy),k.yy.lexer=T,k.yy.parser=this,typeof T.yylloc>"u"&&(T.yylloc={});var S=T.yylloc;g.push(S);var m=T.options&&T.options.ranges;typeof k.yy.parseError=="function"?this.parseError=k.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function C(){var z;return z=p.pop()||T.lex()||F,typeof z!="number"&&(z instanceof Array&&(p=z,z=p.pop()),z=h.symbols_[z]||z),z}for(var f,B,b,P,U={},N,w,R,D;;){if(B=u[u.length-1],this.defaultActions[B]?b=this.defaultActions[B]:((f===null||typeof f>"u")&&(f=C()),b=y[B]&&y[B][f]),typeof b>"u"||!b.length||!b[0]){var V="";D=[];for(N in y[B])this.terminals_[N]&&N>E&&D.push("'"+this.terminals_[N]+"'");T.showPosition?V="Parse error on line "+(_+1)+`:
`+T.showPosition()+`
Expecting `+D.join(", ")+", got '"+(this.terminals_[f]||f)+"'":V="Parse error on line "+(_+1)+": Unexpected "+(f==F?"end of input":"'"+(this.terminals_[f]||f)+"'"),this.parseError(V,{text:T.match,token:this.terminals_[f]||f,line:T.yylineno,loc:S,expected:D})}if(b[0]instanceof Array&&b.length>1)throw new Error("Parse Error: multiple actions possible at state: "+B+", token: "+f);switch(b[0]){case 1:u.push(f),d.push(T.yytext),g.push(T.yylloc),u.push(b[1]),f=null,v=T.yyleng,x=T.yytext,_=T.yylineno,S=T.yylloc;break;case 2:if(w=this.productions_[b[1]][1],U.$=d[d.length-w],U._$={first_line:g[g.length-(w||1)].first_line,last_line:g[g.length-1].last_line,first_column:g[g.length-(w||1)].first_column,last_column:g[g.length-1].last_column},m&&(U._$.range=[g[g.length-(w||1)].range[0],g[g.length-1].range[1]]),P=this.performAction.apply(U,[x,v,_,k.yy,b[1],d,g].concat(L)),typeof P<"u")return P;w&&(u=u.slice(0,-1*w*2),d=d.slice(0,-1*w),g=g.slice(0,-1*w)),u.push(this.productions_[b[1]][0]),d.push(U.$),g.push(U._$),R=y[u[u.length-2]][u[u.length-1]],u.push(R);break;case 3:return!0}}return!0}},n=function(){var o={EOF:1,parseError:function(h,u){if(this.yy.parser)this.yy.parser.parseError(h,u);else throw new Error(h)},setInput:function(l,h){return this.yy=h||this.yy||{},this._input=l,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var l=this._input[0];this.yytext+=l,this.yyleng++,this.offset++,this.match+=l,this.matched+=l;var h=l.match(/(?:\r\n?|\n).*/g);return h?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),l},unput:function(l){var h=l.length,u=l.split(/(?:\r\n?|\n)/g);this._input=l+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-h),this.offset-=h;var p=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),u.length-1&&(this.yylineno-=u.length-1);var d=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:u?(u.length===p.length?this.yylloc.first_column:0)+p[p.length-u.length].length-u[0].length:this.yylloc.first_column-h},this.options.ranges&&(this.yylloc.range=[d[0],d[0]+this.yyleng-h]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(l){this.unput(this.match.slice(l))},pastInput:function(){var l=this.matched.substr(0,this.matched.length-this.match.length);return(l.length>20?"...":"")+l.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var l=this.match;return l.length<20&&(l+=this._input.substr(0,20-l.length)),(l.substr(0,20)+(l.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var l=this.pastInput(),h=new Array(l.length+1).join("-");return l+this.upcomingInput()+`
`+h+"^"},test_match:function(l,h){var u,p,d;if(this.options.backtrack_lexer&&(d={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(d.yylloc.range=this.yylloc.range.slice(0))),p=l[0].match(/(?:\r\n?|\n).*/g),p&&(this.yylineno+=p.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:p?p[p.length-1].length-p[p.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+l[0].length},this.yytext+=l[0],this.match+=l[0],this.matches=l,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(l[0].length),this.matched+=l[0],u=this.performAction.call(this,this.yy,this,h,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),u)return u;if(this._backtrack){for(var g in d)this[g]=d[g];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var l,h,u,p;this._more||(this.yytext="",this.match="");for(var d=this._currentRules(),g=0;g<d.length;g++)if(u=this._input.match(this.rules[d[g]]),u&&(!h||u[0].length>h[0].length)){if(h=u,p=g,this.options.backtrack_lexer){if(l=this.test_match(u,d[g]),l!==!1)return l;if(this._backtrack){h=!1;continue}else return!1}else if(!this.options.flex)break}return h?(l=this.test_match(h,d[p]),l!==!1?l:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var h=this.next();return h||this.lex()},begin:function(h){this.conditionStack.push(h)},popState:function(){var h=this.conditionStack.length-1;return h>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(h){return h=this.conditionStack.length-1-Math.abs(h||0),h>=0?this.conditionStack[h]:"INITIAL"},pushState:function(h){this.begin(h)},stateStackSize:function(){return this.conditionStack.length},options:{easy_keword_rules:!0},performAction:function(h,u,p,d){switch(p){case 0:return this.pushState("csv"),4;case 1:return 10;case 2:return 5;case 3:return 12;case 4:return this.pushState("escaped_text"),18;case 5:return 20;case 6:return this.popState("escaped_text"),18;case 7:return 19}},rules:[/^(?:sankey-beta\b)/,/^(?:$)/,/^(?:((\u000D\u000A)|(\u000A)))/,/^(?:(\u002C))/,/^(?:(\u0022))/,/^(?:([\u0020-\u0021\u0023-\u002B\u002D-\u007E])*)/,/^(?:(\u0022)(?!(\u0022)))/,/^(?:(([\u0020-\u0021\u0023-\u002B\u002D-\u007E])|(\u002C)|(\u000D)|(\u000A)|(\u0022)(\u0022))*)/],conditions:{csv:{rules:[1,2,3,4,5,6,7],inclusive:!1},escaped_text:{rules:[6,7],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7],inclusive:!0}}};return o}();s.lexer=n;function a(){this.yy={}}return a.prototype=s,s.Parser=a,new a}();To.parser=To;const Zn=To;let ma=[],xa=[],Ur={};const MC=()=>{ma=[],xa=[],Ur={},Oe()};class VC{constructor(e,i,r=0){this.source=e,this.target=i,this.value=r}}const zC=(t,e,i)=>{ma.push(new VC(t,e,i))};class qC{constructor(e){this.ID=e}}const WC=t=>(t=mt.sanitizeText(t,Y()),Ur[t]||(Ur[t]=new qC(t),xa.push(Ur[t])),Ur[t]),YC=()=>xa,UC=()=>ma,HC=()=>({nodes:xa.map(t=>({id:t.ID})),links:ma.map(t=>({source:t.source.ID,target:t.target.ID,value:t.value}))}),GC={nodesMap:Ur,getConfig:()=>Y().sankey,getNodes:YC,getLinks:UC,getGraph:HC,addLink:zC,findOrCreateNode:WC,getAccTitle:Ye,setAccTitle:Pe,getAccDescription:He,setAccDescription:Ue,getDiagramTitle:Ge,setDiagramTitle:ri,clear:MC},Dd=class Co{static next(e){return new Co(e+ ++Co.count)}constructor(e){this.id=e,this.href=`#${e}`}toString(){return"url("+this.href+")"}};Dd.count=0;let eh=Dd;const jC={left:Df,right:Ff,center:Rf,justify:Nf},XC=function(t,e,i,r){const{securityLevel:s,sankey:n}=Y(),a=Jh.sankey;let o;s==="sandbox"&&(o=yt("#i"+e));const l=s==="sandbox"?yt(o.nodes()[0].contentDocument.body):yt("body"),h=s==="sandbox"?l.select(`[id="${e}"]`):yt(`[id="${e}"]`),u=(n==null?void 0:n.width)??a.width,p=(n==null?void 0:n.height)??a.width,d=(n==null?void 0:n.useMaxWidth)??a.useMaxWidth,g=(n==null?void 0:n.nodeAlignment)??a.nodeAlignment,y=(n==null?void 0:n.prefix)??a.prefix,x=(n==null?void 0:n.suffix)??a.suffix,_=(n==null?void 0:n.showValues)??a.showValues,v=r.db.getGraph(),E=jC[g],F=10;Bf().nodeId(C=>C.id).nodeWidth(F).nodePadding(10+(_?15:0)).nodeAlign(E).extent([[0,0],[u,p]])(v);const T=vo(dh);h.append("g").attr("class","nodes").selectAll(".node").data(v.nodes).join("g").attr("class","node").attr("id",C=>(C.uid=eh.next("node-")).id).attr("transform",function(C){return"translate("+C.x0+","+C.y0+")"}).attr("x",C=>C.x0).attr("y",C=>C.y0).append("rect").attr("height",C=>C.y1-C.y0).attr("width",C=>C.x1-C.x0).attr("fill",C=>T(C.id));const k=({id:C,value:f})=>_?`${C}
${y}${Math.round(f*100)/100}${x}`:C;h.append("g").attr("class","node-labels").attr("font-family","sans-serif").attr("font-size",14).selectAll("text").data(v.nodes).join("text").attr("x",C=>C.x0<u/2?C.x1+6:C.x0-6).attr("y",C=>(C.y1+C.y0)/2).attr("dy",`${_?"0":"0.35"}em`).attr("text-anchor",C=>C.x0<u/2?"start":"end").text(k);const A=h.append("g").attr("class","links").attr("fill","none").attr("stroke-opacity",.5).selectAll(".link").data(v.links).join("g").attr("class","link").style("mix-blend-mode","multiply"),S=(n==null?void 0:n.linkColor)||"gradient";if(S==="gradient"){const C=A.append("linearGradient").attr("id",f=>(f.uid=eh.next("linearGradient-")).id).attr("gradientUnits","userSpaceOnUse").attr("x1",f=>f.source.x1).attr("x2",f=>f.target.x0);C.append("stop").attr("offset","0%").attr("stop-color",f=>T(f.source.id)),C.append("stop").attr("offset","100%").attr("stop-color",f=>T(f.target.id))}let m;switch(S){case"gradient":m=C=>C.uid;break;case"source":m=C=>T(C.source.id);break;case"target":m=C=>T(C.target.id);break;default:m=S}A.append("path").attr("d",If()).attr("stroke",m).attr("stroke-width",C=>Math.max(1,C.width)),gr(void 0,h,0,d)},$C={draw:XC},KC=t=>t.replaceAll(/^[^\S\n\r]+|[^\S\n\r]+$/g,"").replaceAll(/([\n\r])+/g,`
`).trim(),QC=Zn.parse.bind(Zn);Zn.parse=t=>QC(KC(t));const ZC={parser:Zn,db:GC,renderer:$C},JC=Object.freeze(Object.defineProperty({__proto__:null,diagram:ZC},Symbol.toStringTag,{value:"Module"}));var ih,rh,Eo=function(){var t=function(F,L,T,k){for(T=T||{},k=F.length;k--;T[F[k]]=L);return T},e=[1,7],i=[1,13],r=[1,14],s=[1,15],n=[1,19],a=[1,16],o=[1,17],l=[1,18],h=[8,30],u=[8,21,28,29,30,31,32,40,44,47],p=[1,23],d=[1,24],g=[8,15,16,21,28,29,30,31,32,40,44,47],y=[8,15,16,21,27,28,29,30,31,32,40,44,47],x=[1,49],_={trace:function(){},yy:{},symbols_:{error:2,spaceLines:3,SPACELINE:4,NL:5,seperator:6,SPACE:7,EOF:8,start:9,BLOCK_DIAGRAM_KEY:10,document:11,stop:12,statement:13,link:14,LINK:15,START_LINK:16,LINK_LABEL:17,STR:18,nodeStatement:19,columnsStatement:20,SPACE_BLOCK:21,blockStatement:22,classDefStatement:23,cssClassStatement:24,styleStatement:25,node:26,SIZE:27,COLUMNS:28,"id-block":29,end:30,block:31,NODE_ID:32,nodeShapeNLabel:33,dirList:34,DIR:35,NODE_DSTART:36,NODE_DEND:37,BLOCK_ARROW_START:38,BLOCK_ARROW_END:39,classDef:40,CLASSDEF_ID:41,CLASSDEF_STYLEOPTS:42,DEFAULT:43,class:44,CLASSENTITY_IDS:45,STYLECLASS:46,style:47,STYLE_ENTITY_IDS:48,STYLE_DEFINITION_DATA:49,$accept:0,$end:1},terminals_:{2:"error",4:"SPACELINE",5:"NL",7:"SPACE",8:"EOF",10:"BLOCK_DIAGRAM_KEY",15:"LINK",16:"START_LINK",17:"LINK_LABEL",18:"STR",21:"SPACE_BLOCK",27:"SIZE",28:"COLUMNS",29:"id-block",30:"end",31:"block",32:"NODE_ID",35:"DIR",36:"NODE_DSTART",37:"NODE_DEND",38:"BLOCK_ARROW_START",39:"BLOCK_ARROW_END",40:"classDef",41:"CLASSDEF_ID",42:"CLASSDEF_STYLEOPTS",43:"DEFAULT",44:"class",45:"CLASSENTITY_IDS",46:"STYLECLASS",47:"style",48:"STYLE_ENTITY_IDS",49:"STYLE_DEFINITION_DATA"},productions_:[0,[3,1],[3,2],[3,2],[6,1],[6,1],[6,1],[9,3],[12,1],[12,1],[12,2],[12,2],[11,1],[11,2],[14,1],[14,4],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[19,3],[19,2],[19,1],[20,1],[22,4],[22,3],[26,1],[26,2],[34,1],[34,2],[33,3],[33,4],[23,3],[23,3],[24,3],[25,3]],performAction:function(L,T,k,A,S,m,C){var f=m.length-1;switch(S){case 4:A.getLogger().debug("Rule: seperator (NL) ");break;case 5:A.getLogger().debug("Rule: seperator (Space) ");break;case 6:A.getLogger().debug("Rule: seperator (EOF) ");break;case 7:A.getLogger().debug("Rule: hierarchy: ",m[f-1]),A.setHierarchy(m[f-1]);break;case 8:A.getLogger().debug("Stop NL ");break;case 9:A.getLogger().debug("Stop EOF ");break;case 10:A.getLogger().debug("Stop NL2 ");break;case 11:A.getLogger().debug("Stop EOF2 ");break;case 12:A.getLogger().debug("Rule: statement: ",m[f]),typeof m[f].length=="number"?this.$=m[f]:this.$=[m[f]];break;case 13:A.getLogger().debug("Rule: statement #2: ",m[f-1]),this.$=[m[f-1]].concat(m[f]);break;case 14:A.getLogger().debug("Rule: link: ",m[f],L),this.$={edgeTypeStr:m[f],label:""};break;case 15:A.getLogger().debug("Rule: LABEL link: ",m[f-3],m[f-1],m[f]),this.$={edgeTypeStr:m[f],label:m[f-1]};break;case 18:const B=parseInt(m[f]),b=A.generateId();this.$={id:b,type:"space",label:"",width:B,children:[]};break;case 23:A.getLogger().debug("Rule: (nodeStatement link node) ",m[f-2],m[f-1],m[f]," typestr: ",m[f-1].edgeTypeStr);const P=A.edgeStrToEdgeData(m[f-1].edgeTypeStr);this.$=[{id:m[f-2].id,label:m[f-2].label,type:m[f-2].type,directions:m[f-2].directions},{id:m[f-2].id+"-"+m[f].id,start:m[f-2].id,end:m[f].id,label:m[f-1].label,type:"edge",directions:m[f].directions,arrowTypeEnd:P,arrowTypeStart:"arrow_open"},{id:m[f].id,label:m[f].label,type:A.typeStr2Type(m[f].typeStr),directions:m[f].directions}];break;case 24:A.getLogger().debug("Rule: nodeStatement (abc88 node size) ",m[f-1],m[f]),this.$={id:m[f-1].id,label:m[f-1].label,type:A.typeStr2Type(m[f-1].typeStr),directions:m[f-1].directions,widthInColumns:parseInt(m[f],10)};break;case 25:A.getLogger().debug("Rule: nodeStatement (node) ",m[f]),this.$={id:m[f].id,label:m[f].label,type:A.typeStr2Type(m[f].typeStr),directions:m[f].directions,widthInColumns:1};break;case 26:A.getLogger().debug("APA123",this?this:"na"),A.getLogger().debug("COLUMNS: ",m[f]),this.$={type:"column-setting",columns:m[f]==="auto"?-1:parseInt(m[f])};break;case 27:A.getLogger().debug("Rule: id-block statement : ",m[f-2],m[f-1]),A.generateId(),this.$={...m[f-2],type:"composite",children:m[f-1]};break;case 28:A.getLogger().debug("Rule: blockStatement : ",m[f-2],m[f-1],m[f]);const U=A.generateId();this.$={id:U,type:"composite",label:"",children:m[f-1]};break;case 29:A.getLogger().debug("Rule: node (NODE_ID seperator): ",m[f]),this.$={id:m[f]};break;case 30:A.getLogger().debug("Rule: node (NODE_ID nodeShapeNLabel seperator): ",m[f-1],m[f]),this.$={id:m[f-1],label:m[f].label,typeStr:m[f].typeStr,directions:m[f].directions};break;case 31:A.getLogger().debug("Rule: dirList: ",m[f]),this.$=[m[f]];break;case 32:A.getLogger().debug("Rule: dirList: ",m[f-1],m[f]),this.$=[m[f-1]].concat(m[f]);break;case 33:A.getLogger().debug("Rule: nodeShapeNLabel: ",m[f-2],m[f-1],m[f]),this.$={typeStr:m[f-2]+m[f],label:m[f-1]};break;case 34:A.getLogger().debug("Rule: BLOCK_ARROW nodeShapeNLabel: ",m[f-3],m[f-2]," #3:",m[f-1],m[f]),this.$={typeStr:m[f-3]+m[f],label:m[f-2],directions:m[f-1]};break;case 35:case 36:this.$={type:"classDef",id:m[f-1].trim(),css:m[f].trim()};break;case 37:this.$={type:"applyClass",id:m[f-1].trim(),styleClass:m[f].trim()};break;case 38:this.$={type:"applyStyles",id:m[f-1].trim(),stylesStr:m[f].trim()};break}},table:[{9:1,10:[1,2]},{1:[3]},{11:3,13:4,19:5,20:6,21:e,22:8,23:9,24:10,25:11,26:12,28:i,29:r,31:s,32:n,40:a,44:o,47:l},{8:[1,20]},t(h,[2,12],{13:4,19:5,20:6,22:8,23:9,24:10,25:11,26:12,11:21,21:e,28:i,29:r,31:s,32:n,40:a,44:o,47:l}),t(u,[2,16],{14:22,15:p,16:d}),t(u,[2,17]),t(u,[2,18]),t(u,[2,19]),t(u,[2,20]),t(u,[2,21]),t(u,[2,22]),t(g,[2,25],{27:[1,25]}),t(u,[2,26]),{19:26,26:12,32:n},{11:27,13:4,19:5,20:6,21:e,22:8,23:9,24:10,25:11,26:12,28:i,29:r,31:s,32:n,40:a,44:o,47:l},{41:[1,28],43:[1,29]},{45:[1,30]},{48:[1,31]},t(y,[2,29],{33:32,36:[1,33],38:[1,34]}),{1:[2,7]},t(h,[2,13]),{26:35,32:n},{32:[2,14]},{17:[1,36]},t(g,[2,24]),{11:37,13:4,14:22,15:p,16:d,19:5,20:6,21:e,22:8,23:9,24:10,25:11,26:12,28:i,29:r,31:s,32:n,40:a,44:o,47:l},{30:[1,38]},{42:[1,39]},{42:[1,40]},{46:[1,41]},{49:[1,42]},t(y,[2,30]),{18:[1,43]},{18:[1,44]},t(g,[2,23]),{18:[1,45]},{30:[1,46]},t(u,[2,28]),t(u,[2,35]),t(u,[2,36]),t(u,[2,37]),t(u,[2,38]),{37:[1,47]},{34:48,35:x},{15:[1,50]},t(u,[2,27]),t(y,[2,33]),{39:[1,51]},{34:52,35:x,39:[2,31]},{32:[2,15]},t(y,[2,34]),{39:[2,32]}],defaultActions:{20:[2,7],23:[2,14],50:[2,15],52:[2,32]},parseError:function(L,T){if(T.recoverable)this.trace(L);else{var k=new Error(L);throw k.hash=T,k}},parse:function(L){var T=this,k=[0],A=[],S=[null],m=[],C=this.table,f="",B=0,b=0,P=2,U=1,N=m.slice.call(arguments,1),w=Object.create(this.lexer),R={yy:{}};for(var D in this.yy)Object.prototype.hasOwnProperty.call(this.yy,D)&&(R.yy[D]=this.yy[D]);w.setInput(L,R.yy),R.yy.lexer=w,R.yy.parser=this,typeof w.yylloc>"u"&&(w.yylloc={});var V=w.yylloc;m.push(V);var z=w.options&&w.options.ranges;typeof R.yy.parseError=="function"?this.parseError=R.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function st(){var W;return W=A.pop()||w.lex()||U,typeof W!="number"&&(W instanceof Array&&(A=W,W=A.pop()),W=T.symbols_[W]||W),W}for(var j,dt,K,G,tt={},nt,Q,J,O;;){if(dt=k[k.length-1],this.defaultActions[dt]?K=this.defaultActions[dt]:((j===null||typeof j>"u")&&(j=st()),K=C[dt]&&C[dt][j]),typeof K>"u"||!K.length||!K[0]){var at="";O=[];for(nt in C[dt])this.terminals_[nt]&&nt>P&&O.push("'"+this.terminals_[nt]+"'");w.showPosition?at="Parse error on line "+(B+1)+`:
`+w.showPosition()+`
Expecting `+O.join(", ")+", got '"+(this.terminals_[j]||j)+"'":at="Parse error on line "+(B+1)+": Unexpected "+(j==U?"end of input":"'"+(this.terminals_[j]||j)+"'"),this.parseError(at,{text:w.match,token:this.terminals_[j]||j,line:w.yylineno,loc:V,expected:O})}if(K[0]instanceof Array&&K.length>1)throw new Error("Parse Error: multiple actions possible at state: "+dt+", token: "+j);switch(K[0]){case 1:k.push(j),S.push(w.yytext),m.push(w.yylloc),k.push(K[1]),j=null,b=w.yyleng,f=w.yytext,B=w.yylineno,V=w.yylloc;break;case 2:if(Q=this.productions_[K[1]][1],tt.$=S[S.length-Q],tt._$={first_line:m[m.length-(Q||1)].first_line,last_line:m[m.length-1].last_line,first_column:m[m.length-(Q||1)].first_column,last_column:m[m.length-1].last_column},z&&(tt._$.range=[m[m.length-(Q||1)].range[0],m[m.length-1].range[1]]),G=this.performAction.apply(tt,[f,b,B,R.yy,K[1],S,m].concat(N)),typeof G<"u")return G;Q&&(k=k.slice(0,-1*Q*2),S=S.slice(0,-1*Q),m=m.slice(0,-1*Q)),k.push(this.productions_[K[1]][0]),S.push(tt.$),m.push(tt._$),J=C[k[k.length-2]][k[k.length-1]],k.push(J);break;case 3:return!0}}return!0}},v=function(){var F={EOF:1,parseError:function(T,k){if(this.yy.parser)this.yy.parser.parseError(T,k);else throw new Error(T)},setInput:function(L,T){return this.yy=T||this.yy||{},this._input=L,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var L=this._input[0];this.yytext+=L,this.yyleng++,this.offset++,this.match+=L,this.matched+=L;var T=L.match(/(?:\r\n?|\n).*/g);return T?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),L},unput:function(L){var T=L.length,k=L.split(/(?:\r\n?|\n)/g);this._input=L+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-T),this.offset-=T;var A=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),k.length-1&&(this.yylineno-=k.length-1);var S=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:k?(k.length===A.length?this.yylloc.first_column:0)+A[A.length-k.length].length-k[0].length:this.yylloc.first_column-T},this.options.ranges&&(this.yylloc.range=[S[0],S[0]+this.yyleng-T]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(L){this.unput(this.match.slice(L))},pastInput:function(){var L=this.matched.substr(0,this.matched.length-this.match.length);return(L.length>20?"...":"")+L.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var L=this.match;return L.length<20&&(L+=this._input.substr(0,20-L.length)),(L.substr(0,20)+(L.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var L=this.pastInput(),T=new Array(L.length+1).join("-");return L+this.upcomingInput()+`
`+T+"^"},test_match:function(L,T){var k,A,S;if(this.options.backtrack_lexer&&(S={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(S.yylloc.range=this.yylloc.range.slice(0))),A=L[0].match(/(?:\r\n?|\n).*/g),A&&(this.yylineno+=A.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:A?A[A.length-1].length-A[A.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+L[0].length},this.yytext+=L[0],this.match+=L[0],this.matches=L,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(L[0].length),this.matched+=L[0],k=this.performAction.call(this,this.yy,this,T,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),k)return k;if(this._backtrack){for(var m in S)this[m]=S[m];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var L,T,k,A;this._more||(this.yytext="",this.match="");for(var S=this._currentRules(),m=0;m<S.length;m++)if(k=this._input.match(this.rules[S[m]]),k&&(!T||k[0].length>T[0].length)){if(T=k,A=m,this.options.backtrack_lexer){if(L=this.test_match(k,S[m]),L!==!1)return L;if(this._backtrack){T=!1;continue}else return!1}else if(!this.options.flex)break}return T?(L=this.test_match(T,S[A]),L!==!1?L:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var T=this.next();return T||this.lex()},begin:function(T){this.conditionStack.push(T)},popState:function(){var T=this.conditionStack.length-1;return T>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(T){return T=this.conditionStack.length-1-Math.abs(T||0),T>=0?this.conditionStack[T]:"INITIAL"},pushState:function(T){this.begin(T)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(T,k,A,S){switch(A){case 0:return 10;case 1:return T.getLogger().debug("Found space-block"),31;case 2:return T.getLogger().debug("Found nl-block"),31;case 3:return T.getLogger().debug("Found space-block"),29;case 4:T.getLogger().debug(".",k.yytext);break;case 5:T.getLogger().debug("_",k.yytext);break;case 6:return 5;case 7:return k.yytext=-1,28;case 8:return k.yytext=k.yytext.replace(/columns\s+/,""),T.getLogger().debug("COLUMNS (LEX)",k.yytext),28;case 9:this.pushState("md_string");break;case 10:return"MD_STR";case 11:this.popState();break;case 12:this.pushState("string");break;case 13:T.getLogger().debug("LEX: POPPING STR:",k.yytext),this.popState();break;case 14:return T.getLogger().debug("LEX: STR end:",k.yytext),"STR";case 15:return k.yytext=k.yytext.replace(/space\:/,""),T.getLogger().debug("SPACE NUM (LEX)",k.yytext),21;case 16:return k.yytext="1",T.getLogger().debug("COLUMNS (LEX)",k.yytext),21;case 17:return 43;case 18:return"LINKSTYLE";case 19:return"INTERPOLATE";case 20:return this.pushState("CLASSDEF"),40;case 21:return this.popState(),this.pushState("CLASSDEFID"),"DEFAULT_CLASSDEF_ID";case 22:return this.popState(),this.pushState("CLASSDEFID"),41;case 23:return this.popState(),42;case 24:return this.pushState("CLASS"),44;case 25:return this.popState(),this.pushState("CLASS_STYLE"),45;case 26:return this.popState(),46;case 27:return this.pushState("STYLE_STMNT"),47;case 28:return this.popState(),this.pushState("STYLE_DEFINITION"),48;case 29:return this.popState(),49;case 30:return this.pushState("acc_title"),"acc_title";case 31:return this.popState(),"acc_title_value";case 32:return this.pushState("acc_descr"),"acc_descr";case 33:return this.popState(),"acc_descr_value";case 34:this.pushState("acc_descr_multiline");break;case 35:this.popState();break;case 36:return"acc_descr_multiline_value";case 37:return 30;case 38:return this.popState(),T.getLogger().debug("Lex: (("),"NODE_DEND";case 39:return this.popState(),T.getLogger().debug("Lex: (("),"NODE_DEND";case 40:return this.popState(),T.getLogger().debug("Lex: ))"),"NODE_DEND";case 41:return this.popState(),T.getLogger().debug("Lex: (("),"NODE_DEND";case 42:return this.popState(),T.getLogger().debug("Lex: (("),"NODE_DEND";case 43:return this.popState(),T.getLogger().debug("Lex: (-"),"NODE_DEND";case 44:return this.popState(),T.getLogger().debug("Lex: -)"),"NODE_DEND";case 45:return this.popState(),T.getLogger().debug("Lex: (("),"NODE_DEND";case 46:return this.popState(),T.getLogger().debug("Lex: ]]"),"NODE_DEND";case 47:return this.popState(),T.getLogger().debug("Lex: ("),"NODE_DEND";case 48:return this.popState(),T.getLogger().debug("Lex: ])"),"NODE_DEND";case 49:return this.popState(),T.getLogger().debug("Lex: /]"),"NODE_DEND";case 50:return this.popState(),T.getLogger().debug("Lex: /]"),"NODE_DEND";case 51:return this.popState(),T.getLogger().debug("Lex: )]"),"NODE_DEND";case 52:return this.popState(),T.getLogger().debug("Lex: )"),"NODE_DEND";case 53:return this.popState(),T.getLogger().debug("Lex: ]>"),"NODE_DEND";case 54:return this.popState(),T.getLogger().debug("Lex: ]"),"NODE_DEND";case 55:return T.getLogger().debug("Lexa: -)"),this.pushState("NODE"),36;case 56:return T.getLogger().debug("Lexa: (-"),this.pushState("NODE"),36;case 57:return T.getLogger().debug("Lexa: ))"),this.pushState("NODE"),36;case 58:return T.getLogger().debug("Lexa: )"),this.pushState("NODE"),36;case 59:return T.getLogger().debug("Lex: ((("),this.pushState("NODE"),36;case 60:return T.getLogger().debug("Lexa: )"),this.pushState("NODE"),36;case 61:return T.getLogger().debug("Lexa: )"),this.pushState("NODE"),36;case 62:return T.getLogger().debug("Lexa: )"),this.pushState("NODE"),36;case 63:return T.getLogger().debug("Lexc: >"),this.pushState("NODE"),36;case 64:return T.getLogger().debug("Lexa: (["),this.pushState("NODE"),36;case 65:return T.getLogger().debug("Lexa: )"),this.pushState("NODE"),36;case 66:return this.pushState("NODE"),36;case 67:return this.pushState("NODE"),36;case 68:return this.pushState("NODE"),36;case 69:return this.pushState("NODE"),36;case 70:return this.pushState("NODE"),36;case 71:return this.pushState("NODE"),36;case 72:return this.pushState("NODE"),36;case 73:return T.getLogger().debug("Lexa: ["),this.pushState("NODE"),36;case 74:return this.pushState("BLOCK_ARROW"),T.getLogger().debug("LEX ARR START"),38;case 75:return T.getLogger().debug("Lex: NODE_ID",k.yytext),32;case 76:return T.getLogger().debug("Lex: EOF",k.yytext),8;case 77:this.pushState("md_string");break;case 78:this.pushState("md_string");break;case 79:return"NODE_DESCR";case 80:this.popState();break;case 81:T.getLogger().debug("Lex: Starting string"),this.pushState("string");break;case 82:T.getLogger().debug("LEX ARR: Starting string"),this.pushState("string");break;case 83:return T.getLogger().debug("LEX: NODE_DESCR:",k.yytext),"NODE_DESCR";case 84:T.getLogger().debug("LEX POPPING"),this.popState();break;case 85:T.getLogger().debug("Lex: =>BAE"),this.pushState("ARROW_DIR");break;case 86:return k.yytext=k.yytext.replace(/^,\s*/,""),T.getLogger().debug("Lex (right): dir:",k.yytext),"DIR";case 87:return k.yytext=k.yytext.replace(/^,\s*/,""),T.getLogger().debug("Lex (left):",k.yytext),"DIR";case 88:return k.yytext=k.yytext.replace(/^,\s*/,""),T.getLogger().debug("Lex (x):",k.yytext),"DIR";case 89:return k.yytext=k.yytext.replace(/^,\s*/,""),T.getLogger().debug("Lex (y):",k.yytext),"DIR";case 90:return k.yytext=k.yytext.replace(/^,\s*/,""),T.getLogger().debug("Lex (up):",k.yytext),"DIR";case 91:return k.yytext=k.yytext.replace(/^,\s*/,""),T.getLogger().debug("Lex (down):",k.yytext),"DIR";case 92:return k.yytext="]>",T.getLogger().debug("Lex (ARROW_DIR end):",k.yytext),this.popState(),this.popState(),"BLOCK_ARROW_END";case 93:return T.getLogger().debug("Lex: LINK","#"+k.yytext+"#"),15;case 94:return T.getLogger().debug("Lex: LINK",k.yytext),15;case 95:return T.getLogger().debug("Lex: LINK",k.yytext),15;case 96:return T.getLogger().debug("Lex: LINK",k.yytext),15;case 97:return T.getLogger().debug("Lex: START_LINK",k.yytext),this.pushState("LLABEL"),16;case 98:return T.getLogger().debug("Lex: START_LINK",k.yytext),this.pushState("LLABEL"),16;case 99:return T.getLogger().debug("Lex: START_LINK",k.yytext),this.pushState("LLABEL"),16;case 100:this.pushState("md_string");break;case 101:return T.getLogger().debug("Lex: Starting string"),this.pushState("string"),"LINK_LABEL";case 102:return this.popState(),T.getLogger().debug("Lex: LINK","#"+k.yytext+"#"),15;case 103:return this.popState(),T.getLogger().debug("Lex: LINK",k.yytext),15;case 104:return this.popState(),T.getLogger().debug("Lex: LINK",k.yytext),15;case 105:return T.getLogger().debug("Lex: COLON",k.yytext),k.yytext=k.yytext.slice(1),27}},rules:[/^(?:block-beta\b)/,/^(?:block\s+)/,/^(?:block\n+)/,/^(?:block:)/,/^(?:[\s]+)/,/^(?:[\n]+)/,/^(?:((\u000D\u000A)|(\u000A)))/,/^(?:columns\s+auto\b)/,/^(?:columns\s+[\d]+)/,/^(?:["][`])/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:space[:]\d+)/,/^(?:space\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\s+)/,/^(?:DEFAULT\s+)/,/^(?:\w+\s+)/,/^(?:[^\n]*)/,/^(?:class\s+)/,/^(?:(\w+)+((,\s*\w+)*))/,/^(?:[^\n]*)/,/^(?:style\s+)/,/^(?:(\w+)+((,\s*\w+)*))/,/^(?:[^\n]*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:end\b\s*)/,/^(?:\(\(\()/,/^(?:\)\)\))/,/^(?:[\)]\))/,/^(?:\}\})/,/^(?:\})/,/^(?:\(-)/,/^(?:-\))/,/^(?:\(\()/,/^(?:\]\])/,/^(?:\()/,/^(?:\]\))/,/^(?:\\\])/,/^(?:\/\])/,/^(?:\)\])/,/^(?:[\)])/,/^(?:\]>)/,/^(?:[\]])/,/^(?:-\))/,/^(?:\(-)/,/^(?:\)\))/,/^(?:\))/,/^(?:\(\(\()/,/^(?:\(\()/,/^(?:\{\{)/,/^(?:\{)/,/^(?:>)/,/^(?:\(\[)/,/^(?:\()/,/^(?:\[\[)/,/^(?:\[\|)/,/^(?:\[\()/,/^(?:\)\)\))/,/^(?:\[\\)/,/^(?:\[\/)/,/^(?:\[\\)/,/^(?:\[)/,/^(?:<\[)/,/^(?:[^\(\[\n\-\)\{\}\s\<\>:]+)/,/^(?:$)/,/^(?:["][`])/,/^(?:["][`])/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["])/,/^(?:["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:\]>\s*\()/,/^(?:,?\s*right\s*)/,/^(?:,?\s*left\s*)/,/^(?:,?\s*x\s*)/,/^(?:,?\s*y\s*)/,/^(?:,?\s*up\s*)/,/^(?:,?\s*down\s*)/,/^(?:\)\s*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*~~[\~]+\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:["][`])/,/^(?:["])/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?::\d+)/],conditions:{STYLE_DEFINITION:{rules:[29],inclusive:!1},STYLE_STMNT:{rules:[28],inclusive:!1},CLASSDEFID:{rules:[23],inclusive:!1},CLASSDEF:{rules:[21,22],inclusive:!1},CLASS_STYLE:{rules:[26],inclusive:!1},CLASS:{rules:[25],inclusive:!1},LLABEL:{rules:[100,101,102,103,104],inclusive:!1},ARROW_DIR:{rules:[86,87,88,89,90,91,92],inclusive:!1},BLOCK_ARROW:{rules:[77,82,85],inclusive:!1},NODE:{rules:[38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,78,81],inclusive:!1},md_string:{rules:[10,11,79,80],inclusive:!1},space:{rules:[],inclusive:!1},string:{rules:[13,14,83,84],inclusive:!1},acc_descr_multiline:{rules:[35,36],inclusive:!1},acc_descr:{rules:[33],inclusive:!1},acc_title:{rules:[31],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,12,15,16,17,18,19,20,24,27,30,32,34,37,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,93,94,95,96,97,98,99,105],inclusive:!0}}};return F}();_.lexer=v;function E(){this.yy={}}return E.prototype=_,_.Parser=E,new E}();Eo.parser=Eo;const tE=Eo;let Qe={},Bl=[],ms={};const sh="color",nh="fill",eE="bgFill",Fd=",";let Ss={};const iE=function(t,e=""){Ss[t]===void 0&&(Ss[t]={id:t,styles:[],textStyles:[]});const i=Ss[t];e!=null&&e.split(Fd).forEach(r=>{const s=r.replace(/([^;]*);/,"$1").trim();if(r.match(sh)){const a=s.replace(nh,eE).replace(sh,nh);i.textStyles.push(a)}i.styles.push(s)})},rE=function(t,e=""){const i=Qe[t];e!=null&&(i.styles=e.split(Fd))},sE=function(t,e){t.split(",").forEach(function(i){let r=Qe[i];if(r===void 0){const s=i.trim();Qe[s]={id:s,type:"na",children:[]},r=Qe[s]}r.classes||(r.classes=[]),r.classes.push(e)})},Rd=(t,e)=>{const i=t.flat(),r=[];for(const s of i){if(s.type==="classDef"){iE(s.id,s.css);continue}if(s.type==="applyClass"){sE(s.id,(s==null?void 0:s.styleClass)||"");continue}if(s.type==="applyStyles"){s!=null&&s.stylesStr&&rE(s.id,s==null?void 0:s.stylesStr);continue}if(s.type==="column-setting")e.columns=s.columns||-1;else if(s.type==="edge")ms[s.id]?ms[s.id]++:ms[s.id]=1,s.id=ms[s.id]+"-"+s.id,Bl.push(s);else{s.label||(s.type==="composite"?s.label="":s.label=s.id);const n=!Qe[s.id];if(n?Qe[s.id]=s:(s.type!=="na"&&(Qe[s.id].type=s.type),s.label!==s.id&&(Qe[s.id].label=s.label)),s.children&&Rd(s.children,s),s.type==="space"){const a=s.width||1;for(let o=0;o<a;o++){const l=Pf(s);l.id=l.id+"-"+o,Qe[l.id]=l,r.push(l)}}else n&&r.push(s)}}e.children=r};let Il=[],vs={id:"root",type:"composite",children:[],columns:-1};const nE=()=>{I.debug("Clear called"),Oe(),vs={id:"root",type:"composite",children:[],columns:-1},Qe={root:vs},Il=[],Ss={},Bl=[],ms={}};function aE(t){switch(I.debug("typeStr2Type",t),t){case"[]":return"square";case"()":return I.debug("we have a round"),"round";case"(())":return"circle";case">]":return"rect_left_inv_arrow";case"{}":return"diamond";case"{{}}":return"hexagon";case"([])":return"stadium";case"[[]]":return"subroutine";case"[()]":return"cylinder";case"((()))":return"doublecircle";case"[//]":return"lean_right";case"[\\\\]":return"lean_left";case"[/\\]":return"trapezoid";case"[\\/]":return"inv_trapezoid";case"<[]>":return"block_arrow";default:return"na"}}function oE(t){switch(I.debug("typeStr2Type",t),t){case"==":return"thick";default:return"normal"}}function lE(t){switch(t.trim()){case"--x":return"arrow_cross";case"--o":return"arrow_circle";default:return"arrow_point"}}let ah=0;const cE=()=>(ah++,"id-"+Math.random().toString(36).substr(2,12)+"-"+ah),hE=t=>{vs.children=t,Rd(t,vs),Il=vs.children},uE=t=>{const e=Qe[t];return e?e.columns?e.columns:e.children?e.children.length:-1:-1},dE=()=>[...Object.values(Qe)],fE=()=>Il||[],pE=()=>Bl,gE=t=>Qe[t],yE=t=>{Qe[t.id]=t},mE=()=>console,xE=function(){return Ss},bE={getConfig:()=>me().block,typeStr2Type:aE,edgeTypeStr2Type:oE,edgeStrToEdgeData:lE,getLogger:mE,getBlocksFlat:dE,getBlocks:fE,getEdges:pE,setHierarchy:hE,getBlock:gE,setBlock:yE,getColumns:uE,getClasses:xE,clear:nE,generateId:cE},kE=bE,dn=(t,e)=>{const i=hh,r=i(t,"r"),s=i(t,"g"),n=i(t,"b");return Hr(r,s,n,e)},_E=t=>`.label {
    font-family: ${t.fontFamily};
    color: ${t.nodeTextColor||t.textColor};
  }
  .cluster-label text {
    fill: ${t.titleColor};
  }
  .cluster-label span,p {
    color: ${t.titleColor};
  }



  .label text,span,p {
    fill: ${t.nodeTextColor||t.textColor};
    color: ${t.nodeTextColor||t.textColor};
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }
  .flowchart-label text {
    text-anchor: middle;
  }
  // .flowchart-label .text-outer-tspan {
  //   text-anchor: middle;
  // }
  // .flowchart-label .text-inner-tspan {
  //   text-anchor: start;
  // }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${t.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${t.lineColor};
    stroke-width: 2.0px;
  }

  .flowchart-link {
    stroke: ${t.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${t.edgeLabelBackground};
    rect {
      opacity: 0.5;
      background-color: ${t.edgeLabelBackground};
      fill: ${t.edgeLabelBackground};
    }
    text-align: center;
  }

  /* For html labels only */
  .labelBkg {
    background-color: ${dn(t.edgeLabelBackground,.5)};
    // background-color:
  }

  .node .cluster {
    // fill: ${dn(t.mainBkg,.5)};
    fill: ${dn(t.clusterBkg,.5)};
    stroke: ${dn(t.clusterBorder,.2)};
    box-shadow: rgba(50, 50, 93, 0.25) 0px 13px 27px -5px, rgba(0, 0, 0, 0.3) 0px 8px 16px -8px;
    stroke-width: 1px;
  }

  .cluster text {
    fill: ${t.titleColor};
  }

  .cluster span,p {
    color: ${t.titleColor};
  }
  /* .cluster div {
    color: ${t.titleColor};
  } */

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${t.fontFamily};
    font-size: 12px;
    background: ${t.tertiaryColor};
    border: 1px solid ${t.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .flowchartTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.textColor};
  }
`,TE=_E;function Nd(t,e,i=!1){var r,s,n;const a=t;let o="default";(((r=a==null?void 0:a.classes)==null?void 0:r.length)||0)>0&&(o=((a==null?void 0:a.classes)||[]).join(" ")),o=o+" flowchart-label";let l=0,h="",u;switch(a.type){case"round":l=5,h="rect";break;case"composite":l=0,h="composite",u=0;break;case"square":h="rect";break;case"diamond":h="question";break;case"hexagon":h="hexagon";break;case"block_arrow":h="block_arrow";break;case"odd":h="rect_left_inv_arrow";break;case"lean_right":h="lean_right";break;case"lean_left":h="lean_left";break;case"trapezoid":h="trapezoid";break;case"inv_trapezoid":h="inv_trapezoid";break;case"rect_left_inv_arrow":h="rect_left_inv_arrow";break;case"circle":h="circle";break;case"ellipse":h="ellipse";break;case"stadium":h="stadium";break;case"subroutine":h="subroutine";break;case"cylinder":h="cylinder";break;case"group":h="rect";break;case"doublecircle":h="doublecircle";break;default:h="rect"}const p=ii((a==null?void 0:a.styles)||[]),d=a.label,g=a.size||{width:0,height:0,x:0,y:0};return{labelStyle:p.labelStyle,shape:h,labelText:d,rx:l,ry:l,class:o,style:p.style,id:a.id,directions:a.directions,width:g.width,height:g.height,x:g.x,y:g.y,positioned:i,intersect:void 0,type:a.type,padding:u??(((n=(s=me())==null?void 0:s.block)==null?void 0:n.padding)||0)}}async function CE(t,e,i){const r=Nd(e,i,!1);if(r.type==="group")return;const s=await ha(t,r),n=s.node().getBBox(),a=i.getBlock(r.id);a.size={width:n.width,height:n.height,x:0,y:0,node:s},i.setBlock(a),s.remove()}async function EE(t,e,i){const r=Nd(e,i,!0);i.getBlock(r.id).type!=="space"&&(await ha(t,r),e.intersect=r==null?void 0:r.intersect,Ha(r))}async function Dl(t,e,i,r){for(const s of e)await r(t,s,i),s.children&&await Dl(t,s.children,i,r)}async function SE(t,e,i){await Dl(t,e,i,CE)}async function vE(t,e,i){await Dl(t,e,i,EE)}async function wE(t,e,i,r,s){const n=new Bi({multigraph:!0,compound:!0});n.setGraph({rankdir:"TB",nodesep:10,ranksep:10,marginx:8,marginy:8});for(const a of i)a.size&&n.setNode(a.id,{width:a.size.width,height:a.size.height,intersect:a.intersect});for(const a of e)if(a.start&&a.end){const o=r.getBlock(a.start),l=r.getBlock(a.end);if(o!=null&&o.size&&(l!=null&&l.size)){const h=o.size,u=l.size,p=[{x:h.x,y:h.y},{x:h.x+(u.x-h.x)/2,y:h.y+(u.y-h.y)/2},{x:u.x,y:u.y}];await xu(t,{v:a.start,w:a.end,name:a.id},{...a,arrowTypeEnd:a.arrowTypeEnd,arrowTypeStart:a.arrowTypeStart,points:p,classes:"edge-thickness-normal edge-pattern-solid flowchart-link LS-a1 LE-b1"},void 0,"block",n,s),a.label&&(await Qo(t,{...a,label:a.label,labelStyle:"stroke: #333; stroke-width: 1.5px;fill:none;",arrowTypeEnd:a.arrowTypeEnd,arrowTypeStart:a.arrowTypeStart,points:p,classes:"edge-thickness-normal edge-pattern-solid flowchart-link LS-a1 LE-b1"}),await mu({...a,x:p[1].x,y:p[1].y},{originalPath:p}))}}}const ce=((rh=(ih=Y())==null?void 0:ih.block)==null?void 0:rh.padding)||8;function AE(t,e){if(t===0||!Number.isInteger(t))throw new Error("Columns must be an integer !== 0.");if(e<0||!Number.isInteger(e))throw new Error("Position must be a non-negative integer."+e);if(t<0)return{px:e,py:0};if(t===1)return{px:0,py:e};const i=e%t,r=Math.floor(e/t);return{px:i,py:r}}const LE=t=>{let e=0,i=0;for(const r of t.children){const{width:s,height:n,x:a,y:o}=r.size||{width:0,height:0,x:0,y:0};I.debug("getMaxChildSize abc95 child:",r.id,"width:",s,"height:",n,"x:",a,"y:",o,r.type),r.type!=="space"&&(s>e&&(e=s/(t.widthInColumns||1)),n>i&&(i=n))}return{width:e,height:i}};function So(t,e,i=0,r=0){var s,n,a,o,l,h,u,p,d,g,y;I.debug("setBlockSizes abc95 (start)",t.id,(s=t==null?void 0:t.size)==null?void 0:s.x,"block width =",t==null?void 0:t.size,"sieblingWidth",i),(n=t==null?void 0:t.size)!=null&&n.width||(t.size={width:i,height:r,x:0,y:0});let x=0,_=0;if(((a=t.children)==null?void 0:a.length)>0){for(const S of t.children)So(S,e);const v=LE(t);x=v.width,_=v.height,I.debug("setBlockSizes abc95 maxWidth of",t.id,":s children is ",x,_);for(const S of t.children)S.size&&(I.debug(`abc95 Setting size of children of ${t.id} id=${S.id} ${x} ${_} ${S.size}`),S.size.width=x*(S.widthInColumns||1)+ce*((S.widthInColumns||1)-1),S.size.height=_,S.size.x=0,S.size.y=0,I.debug(`abc95 updating size of ${t.id} children child:${S.id} maxWidth:${x} maxHeight:${_}`));for(const S of t.children)So(S,e,x,_);const E=t.columns||-1;let F=0;for(const S of t.children)F+=S.widthInColumns||1;let L=t.children.length;E>0&&E<F&&(L=E),t.widthInColumns;const T=Math.ceil(F/L);let k=L*(x+ce)+ce,A=T*(_+ce)+ce;if(k<i){I.debug(`Detected to small siebling: abc95 ${t.id} sieblingWidth ${i} sieblingHeight ${r} width ${k}`),k=i,A=r;const S=(i-L*ce-ce)/L,m=(r-T*ce-ce)/T;I.debug("Size indata abc88",t.id,"childWidth",S,"maxWidth",x),I.debug("Size indata abc88",t.id,"childHeight",m,"maxHeight",_),I.debug("Size indata abc88 xSize",L,"paddiong",ce);for(const C of t.children)C.size&&(C.size.width=S,C.size.height=m,C.size.x=0,C.size.y=0)}if(I.debug(`abc95 (finale calc) ${t.id} xSize ${L} ySize ${T} columns ${E}${t.children.length} width=${Math.max(k,((o=t.size)==null?void 0:o.width)||0)}`),k<(((l=t==null?void 0:t.size)==null?void 0:l.width)||0)){k=((h=t==null?void 0:t.size)==null?void 0:h.width)||0;const S=E>0?Math.min(t.children.length,E):t.children.length;if(S>0){const m=(k-S*ce-ce)/S;I.debug("abc95 (growing to fit) width",t.id,k,(u=t.size)==null?void 0:u.width,m);for(const C of t.children)C.size&&(C.size.width=m)}}t.size={width:k,height:A,x:0,y:0}}I.debug("setBlockSizes abc94 (done)",t.id,(p=t==null?void 0:t.size)==null?void 0:p.x,(d=t==null?void 0:t.size)==null?void 0:d.width,(g=t==null?void 0:t.size)==null?void 0:g.y,(y=t==null?void 0:t.size)==null?void 0:y.height)}function Od(t,e){var i,r,s,n,a,o,l,h,u,p,d,g,y,x,_,v,E;I.debug(`abc85 layout blocks (=>layoutBlocks) ${t.id} x: ${(i=t==null?void 0:t.size)==null?void 0:i.x} y: ${(r=t==null?void 0:t.size)==null?void 0:r.y} width: ${(s=t==null?void 0:t.size)==null?void 0:s.width}`);const F=t.columns||-1;if(I.debug("layoutBlocks columns abc95",t.id,"=>",F,t),t.children&&t.children.length>0){const L=((a=(n=t==null?void 0:t.children[0])==null?void 0:n.size)==null?void 0:a.width)||0,T=t.children.length*L+(t.children.length-1)*ce;I.debug("widthOfChildren 88",T,"posX");let k=0;I.debug("abc91 block?.size?.x",t.id,(o=t==null?void 0:t.size)==null?void 0:o.x);let A=(l=t==null?void 0:t.size)!=null&&l.x?((h=t==null?void 0:t.size)==null?void 0:h.x)+(-((u=t==null?void 0:t.size)==null?void 0:u.width)/2||0):-ce,S=0;for(const m of t.children){const C=t;if(!m.size)continue;const{width:f,height:B}=m.size,{px:b,py:P}=AE(F,k);if(P!=S&&(S=P,A=(p=t==null?void 0:t.size)!=null&&p.x?((d=t==null?void 0:t.size)==null?void 0:d.x)+(-((g=t==null?void 0:t.size)==null?void 0:g.width)/2||0):-ce,I.debug("New row in layout for block",t.id," and child ",m.id,S)),I.debug(`abc89 layout blocks (child) id: ${m.id} Pos: ${k} (px, py) ${b},${P} (${(y=C==null?void 0:C.size)==null?void 0:y.x},${(x=C==null?void 0:C.size)==null?void 0:x.y}) parent: ${C.id} width: ${f}${ce}`),C.size){const U=f/2;m.size.x=A+ce+U,I.debug(`abc91 layout blocks (calc) px, pyid:${m.id} startingPos=X${A} new startingPosX${m.size.x} ${U} padding=${ce} width=${f} halfWidth=${U} => x:${m.size.x} y:${m.size.y} ${m.widthInColumns} (width * (child?.w || 1)) / 2 ${f*((m==null?void 0:m.widthInColumns)||1)/2}`),A=m.size.x+U,m.size.y=C.size.y-C.size.height/2+P*(B+ce)+B/2+ce,I.debug(`abc88 layout blocks (calc) px, pyid:${m.id}startingPosX${A}${ce}${U}=>x:${m.size.x}y:${m.size.y}${m.widthInColumns}(width * (child?.w || 1)) / 2${f*((m==null?void 0:m.widthInColumns)||1)/2}`)}m.children&&Od(m),k+=(m==null?void 0:m.widthInColumns)||1,I.debug("abc88 columnsPos",m,k)}}I.debug(`layout blocks (<==layoutBlocks) ${t.id} x: ${(_=t==null?void 0:t.size)==null?void 0:_.x} y: ${(v=t==null?void 0:t.size)==null?void 0:v.y} width: ${(E=t==null?void 0:t.size)==null?void 0:E.width}`)}function Pd(t,{minX:e,minY:i,maxX:r,maxY:s}={minX:0,minY:0,maxX:0,maxY:0}){if(t.size&&t.id!=="root"){const{x:n,y:a,width:o,height:l}=t.size;n-o/2<e&&(e=n-o/2),a-l/2<i&&(i=a-l/2),n+o/2>r&&(r=n+o/2),a+l/2>s&&(s=a+l/2)}if(t.children)for(const n of t.children)({minX:e,minY:i,maxX:r,maxY:s}=Pd(n,{minX:e,minY:i,maxX:r,maxY:s}));return{minX:e,minY:i,maxX:r,maxY:s}}function BE(t){const e=t.getBlock("root");if(!e)return;So(e,t,0,0),Od(e),I.debug("getBlocks",JSON.stringify(e,null,2));const{minX:i,minY:r,maxX:s,maxY:n}=Pd(e),a=n-r,o=s-i;return{x:i,y:r,width:o,height:a}}const IE=function(t,e){return e.db.getClasses()},DE=async function(t,e,i,r){const{securityLevel:s,block:n}=me(),a=r.db;let o;s==="sandbox"&&(o=yt("#i"+e));const l=s==="sandbox"?yt(o.nodes()[0].contentDocument.body):yt("body"),h=s==="sandbox"?l.select(`[id="${e}"]`):yt(`[id="${e}"]`);$o(h,["point","circle","cross"],r.type,e);const p=a.getBlocks(),d=a.getBlocksFlat(),g=a.getEdges(),y=h.insert("g").attr("class","block");await SE(y,p,a);const x=BE(a);if(await vE(y,p,a),await wE(y,g,d,a,e),x){const _=x,v=Math.max(1,Math.round(.125*(_.width/_.height))),E=_.height+v+10,F=_.width+10,{useMaxWidth:L}=n;Ne(h,E,F,!!L),I.debug("Here Bounds",x,_),h.attr("viewBox",`${_.x-5} ${_.y-5} ${_.width+10} ${_.height+10}`)}vo(dh)},FE={draw:DE,getClasses:IE},RE={parser:tE,db:kE,renderer:FE,styles:TE},NE=Object.freeze(Object.defineProperty({__proto__:null,diagram:RE},Symbol.toStringTag,{value:"Module"}));export{Ai as m};
