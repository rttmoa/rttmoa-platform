{"version":3,"file":"ColumnConfig-1ddc4cd6.js","sources":["../../../src/views/list/useProTable/component/ColumnConfig.tsx"],"sourcesContent":["import { ProColumns } from '@ant-design/pro-components';\r\nimport { UserList } from '@/api/interface';\r\nimport { Button, Dropdown, Input } from 'antd';\r\nimport { DeleteOutlined, EditOutlined, EyeOutlined, SearchOutlined } from '@ant-design/icons';\r\nimport { message } from '@/hooks/useMessage';\r\nimport { IconFont } from '@/components/Icon';\r\n\r\nconst valueEnum: { [key: number]: string } = {\r\n\t0: 'close',\r\n\t1: 'running',\r\n\t2: 'online',\r\n\t3: 'error',\r\n};\r\nconst ProcessMap = {\r\n\tclose: 'normal',\r\n\trunning: 'active',\r\n\tonline: 'success',\r\n\terror: 'exception',\r\n} as const;\r\n\r\nexport interface TableColumnsParams {\r\n\tsetCurrentRow: (arg: any) => void;\r\n\tsetShowDetail: (arg: any) => void;\r\n\thandleOperator: (type: string, record: any) => void;\r\n}\r\n\r\nconst TableColumnsConfig = (Params: TableColumnsParams): ProColumns<UserList>[] => {\r\n\tlet { setCurrentRow, setShowDetail, handleOperator } = Params;\r\n\t// Params.setCurrentRow()\r\n\r\n\treturn [\r\n\t\t// {\r\n\t\t// \ttitle: <span className='text-[14px]'>key</span>,\r\n\t\t// \tdataIndex: 'key',\r\n\t\t// \trowScope: 'row',\r\n\t\t// \tfixed: 'left',\r\n\t\t// \twidth: 70,\r\n\t\t// \thideInSearch: true,\r\n\t\t// \t// hideInForm: true,\r\n\t\t// },\r\n\t\t{\r\n\t\t\ttitle: '用户名',\r\n\t\t\tdataIndex: 'username',\r\n\t\t\tcopyable: true,\r\n\t\t\twidth: 120,\r\n\t\t\tfixed: 'left',\r\n\t\t\ttooltip: '用户的名字',\r\n\t\t\t// initialValue: 'zhangsan',\r\n\t\t\tonFilter: false,\r\n\t\t\t// hideInSearch: true,\r\n\t\t\t// hideInTable: true,\r\n\t\t\t// hideInForm: true,\r\n\t\t\t// hideInDescriptions: true,\r\n\t\t\tsorter: true,\r\n\t\t\trender: (dom, entity) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref='javascript:void(0)'\r\n\t\t\t\t\t\t// className=\"divide-x-2\"\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tsetCurrentRow(entity);\r\n\t\t\t\t\t\t\tsetShowDetail(true);\r\n\t\t\t\t\t\t\tmessage.info(`点击了 ${entity.username}`);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{dom}\r\n\t\t\t\t\t</a>\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\t// 自定义筛选项功能具体实现请参考 https://ant.design/components/table-cn/#components-table-demo-custom-filter-panel\r\n\t\t\tfilterDropdown: () => (\r\n\t\t\t\t<div style={{ padding: 2 }}>\r\n\t\t\t\t\t<Input style={{ width: 150, marginBlockEnd: 8, display: 'block', fontSize: '14px' }} placeholder='请输入' />\r\n\t\t\t\t</div>\r\n\t\t\t),\r\n\t\t\tfilterIcon: filtered => <SearchOutlined style={{ color: filtered ? '#1890ff' : undefined }} />,\r\n\t\t\tfieldProps: (form, config) => {}, // 查询表单的 props，会透传给表单项，\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '性别',\r\n\t\t\tdataIndex: 'sex',\r\n\t\t\twidth: 150,\r\n\t\t\tinitialValue: '全部', // * initialValue 查询表单项初始值\r\n\t\t\tfilters: true,\r\n\t\t\tonFilter: true,\r\n\t\t\tvalueEnum: {\r\n\t\t\t\t2: { text: '全部' },\r\n\t\t\t\t1: { text: '男' },\r\n\t\t\t\t0: { text: '女' },\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '年龄',\r\n\t\t\tdataIndex: 'age',\r\n\t\t\twidth: 150,\r\n\t\t\tsorter: true,\r\n\t\t\ttooltip: '指代用户的年纪大小', // * tooltip 提示一些信息\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '状态',\r\n\t\t\tdataIndex: 'status',\r\n\t\t\thideInForm: true, // * hideInForm 在Form中不展示此列, 不可搜索\r\n\t\t\tfilters: true,\r\n\t\t\tonFilter: true,\r\n\t\t\thideInSearch: true,\r\n\t\t\tvalueEnum: {\r\n\t\t\t\t0: {\r\n\t\t\t\t\ttext: '正常',\r\n\t\t\t\t\tstatus: 'Default',\r\n\t\t\t\t},\r\n\t\t\t\t1: {\r\n\t\t\t\t\ttext: '在线',\r\n\t\t\t\t\tstatus: 'Processing',\r\n\t\t\t\t},\r\n\t\t\t\t2: {\r\n\t\t\t\t\ttext: '离线',\r\n\t\t\t\t\tstatus: 'Success',\r\n\t\t\t\t},\r\n\t\t\t\t3: {\r\n\t\t\t\t\ttext: '异常',\r\n\t\t\t\t\tstatus: 'Error',\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '执行进度',\r\n\t\t\tdataIndex: 'progress',\r\n\t\t\twidth: 300,\r\n\t\t\thideInSearch: true,\r\n\t\t\tvalueType: item => ({\r\n\t\t\t\ttype: 'progress',\r\n\t\t\t\tstatus: ProcessMap[valueEnum[item.progress_status] as 'close'] as any,\r\n\t\t\t}),\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '邮箱',\r\n\t\t\tdataIndex: 'email',\r\n\t\t\thideInSearch: true,\r\n\t\t\tellipsis: true, // * ellipsis 是否自动缩略\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '手机号',\r\n\t\t\tdataIndex: 'phone',\r\n\t\t\tellipsis: true,\r\n\t\t\tcopyable: true,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '地址',\r\n\t\t\tdataIndex: 'city',\r\n\t\t\t// hideInSearch: true,\r\n\t\t\tellipsis: true,\r\n\t\t\tcopyable: true,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '时间',\r\n\t\t\tkey: 'time',\r\n\t\t\tdataIndex: 'time',\r\n\t\t\tvalueType: 'time',\r\n\t\t\tsorter: true,\r\n\t\t\t// hideInSearch: true,\r\n\t\t\tellipsis: true,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '日期',\r\n\t\t\tkey: 'date',\r\n\t\t\tdataIndex: 'date',\r\n\t\t\tvalueType: 'date',\r\n\t\t\tsorter: true,\r\n\t\t\t// hideInSearch: true,\r\n\t\t\tellipsis: true,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '日期时间',\r\n\t\t\tkey: 'dateTime',\r\n\t\t\tdataIndex: 'dateTime',\r\n\t\t\tvalueType: 'dateTime',\r\n\t\t\tsorter: true,\r\n\t\t\t// hideInSearch: true,\r\n\t\t\tellipsis: true,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '日期时间',\r\n\t\t\tkey: 'dateTime',\r\n\t\t\tdataIndex: 'dateTime',\r\n\t\t\tvalueType: 'dateTime',\r\n\t\t\tsorter: true,\r\n\t\t\t// hideInSearch: true,\r\n\t\t\tellipsis: true,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '日期时间',\r\n\t\t\tkey: 'dateTime',\r\n\t\t\tdataIndex: 'dateTime',\r\n\t\t\tvalueType: 'dateTime',\r\n\t\t\tsorter: true,\r\n\t\t\t// hideInSearch: true,\r\n\t\t\tellipsis: true,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '日期时间',\r\n\t\t\tkey: 'dateTime',\r\n\t\t\tdataIndex: 'dateTime',\r\n\t\t\tvalueType: 'dateTime',\r\n\t\t\tsorter: true,\r\n\t\t\t// hideInSearch: true,\r\n\t\t\tellipsis: true,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '日期时间',\r\n\t\t\tkey: 'dateTime',\r\n\t\t\tdataIndex: 'dateTime',\r\n\t\t\tvalueType: 'dateTime',\r\n\t\t\tsorter: true,\r\n\t\t\t// hideInSearch: true,\r\n\t\t\tellipsis: true,\r\n\t\t},\r\n\r\n\t\t{\r\n\t\t\ttitle: '日期时间',\r\n\t\t\tkey: 'dateTime',\r\n\t\t\tdataIndex: 'dateTime',\r\n\t\t\tvalueType: 'dateTime',\r\n\t\t\tsorter: true,\r\n\t\t\t// hideInSearch: true,\r\n\t\t\tellipsis: true,\r\n\t\t},\r\n\r\n\t\t{\r\n\t\t\ttitle: '创建时间',\r\n\t\t\tdataIndex: 'createTime',\r\n\t\t\tvalueType: 'dateRange',\r\n\t\t\thideInTable: false, // 隐藏在表格\r\n\t\t\tsearch: { transform: value => ({ startTime: value[0], endTime: value[1] }) },\r\n\t\t\tellipsis: true,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '操作',\r\n\t\t\tkey: 'option',\r\n\t\t\tfixed: 'right',\r\n\t\t\twidth: 50,\r\n\t\t\thideInSearch: true,\r\n\t\t\trender: (data, entity) => action(entity, Params),\r\n\t\t},\r\n\t];\r\n};\r\n\r\n// 操作按钮：查看、新增、删除\r\nconst action = (entity: UserList, Params: TableColumnsParams) => [\r\n\t<div className='more-button'>\r\n\t\t<Dropdown\r\n\t\t\tmenu={{\r\n\t\t\t\titems: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tkey: '1',\r\n\t\t\t\t\t\tlabel: (\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tkey='view'\r\n\t\t\t\t\t\t\t\ttype='link'\r\n\t\t\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t\t\t\ticon={<EyeOutlined />}\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tParams.setCurrentRow(entity);\r\n\t\t\t\t\t\t\t\t\tParams.setShowDetail(true);\r\n\t\t\t\t\t\t\t\t\tmessage.info(`点击了 ${entity.username}`);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t查看\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tkey: '2',\r\n\t\t\t\t\t\tlabel: (\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tkey='edit'\r\n\t\t\t\t\t\t\t\ttype='link'\r\n\t\t\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t\t\t\ticon={<EditOutlined />}\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tParams.handleOperator('edit', entity);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t编辑\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tkey: '3',\r\n\t\t\t\t\t\tlabel: (\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tkey='delete'\r\n\t\t\t\t\t\t\t\ttype='link'\r\n\t\t\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t\t\t\tdanger\r\n\t\t\t\t\t\t\t\ticon={<DeleteOutlined />}\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t// message.success(`删除了iD为: ${entity.username}`, 2);\r\n\t\t\t\t\t\t\t\t\tParams.handleOperator('delete', entity);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t删除\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t}}\r\n\t\t\tplacement='bottomLeft'\r\n\t\t\tarrow={{ pointAtCenter: true }}\r\n\t\t\ttrigger={['click']}\r\n\t\t>\r\n\t\t\t<div className='more-button-item'>\r\n\t\t\t\t<IconFont style={{ fontSize: 22 }} type='icon-xiala' />\r\n\t\t\t</div>\r\n\t\t</Dropdown>\r\n\t</div>,\r\n];\r\nexport default TableColumnsConfig;\r\n"],"names":["valueEnum","ProcessMap","TableColumnsConfig","Params","setCurrentRow","setShowDetail","handleOperator","dom","entity","jsx","message","Input","filtered","SearchOutlined","form","config","item","value","data","action","Dropdown","Button","EyeOutlined","EditOutlined","DeleteOutlined","IconFont"],"mappings":"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"}