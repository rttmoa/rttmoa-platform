import{r as u,j as e,aa as L,B as g,ax as a,R as V,C as n,ak as o,ay as F}from"./index-3957a516.js";import{R as b}from"./index-99aa7995.js";import{T as M}from"./index-878f565f.js";import"./index-a77b8328.js";import"./useBubbleLock-e13a7356.js";import"./TreeSelect-4c1a4ec1.js";import"./Select-82bff7d6.js";import"./List-0e1ae3e6.js";import"./conductUtil-f43807c6.js";import"./createForOfIteratorHelper-578e4d34.js";import"./Tree-db5072ad.js";import"./useShowArrow-fa21a597.js";import"./useIcons-5870fba2.js";import"./iconUtil-68c18442.js";import"./index-a50f25cb.js";const U=I=>{const{form:p,menuList:v,modalTitle:_,modalType:s,modalIsVisible:q,modalMenuInfo:l,setModalIsVisible:w,handleModalSubmit:m}=I,[t,d]=u.useState("是"),[c,h]=u.useState("");u.useEffect(()=>{p.setFieldsValue({isTop:s==="create"||(l==null?void 0:l.parent_id)==0?"是":"否",parent_id:s==="create"?null:l==null?void 0:l.parent_id,email:s==="create"?null:l==null?void 0:l.email,leader:s==="create"?null:l==null?void 0:l.leader,name:s==="create"?null:l==null?void 0:l.name,phone:s==="create"?null:l==null?void 0:l.phone,sort:s==="create"?null:l==null?void 0:l.sort,status:s==="create"?"启用":l==null?void 0:l.status}),d(s==="create"||(l==null?void 0:l.parent_id)==0?"是":"否"),h(s==="create"?"":l==null?void 0:l.parent_id)},[l,s]);const x=(r,S)=>r==null?void 0:r.map(i=>{const f={value:i.name||null,label:i.name||null};return i.children&&i.children.length&&(f.children=x(i.children)),f}),T=x(v),j=()=>{w(!1)},y=()=>{p.submit()},C=()=>{const r=p.getFieldsValue();r.isTop=t,t=="是"&&(r.parent_id=0),t=="否"&&(r.parent_id=c),s=="edit"&&(r._id=l.unique),r.parent_id,m&&m(s,r)};return e.jsx(L,{title:_,width:800,open:q,onCancel:j,footer:[e.jsx(g,{loading:!1,onClick:j,children:"取消"}),e.jsx(g,{type:"primary",loading:!1,onClick:y,children:"提交"},"link")],children:e.jsx(a,{className:"mt-[40px] mb-[100px] px-[20px] max-h-[500px] overflow-auto",form:p,onFinish:C,layout:"horizontal",size:"middle",labelCol:{span:6},wrapperCol:{span:16},children:e.jsxs(V,{gutter:16,children:[e.jsx(n,{span:12,children:e.jsx(a.Item,{label:"部门名称",name:"name",rules:[{required:!0,message:"必填：部门名称"}],children:e.jsx(o,{variant:"outlined",placeholder:"请输入部门名称",maxLength:30})})}),e.jsx(n,{span:12,children:e.jsx(a.Item,{label:"部门排序",name:"sort",rules:[{required:!0,message:"必填：部门排序"}],children:e.jsx(F,{variant:"outlined",placeholder:"请输入",maxLength:30})})}),e.jsx(n,{span:12,children:e.jsx(a.Item,{label:"负责人",name:"leader",rules:[{required:!1,message:""}],children:e.jsx(o,{variant:"outlined",placeholder:"请输入负责人",maxLength:30})})}),e.jsx(n,{span:12,children:e.jsx(a.Item,{label:"联系电话",name:"phone",rules:[{required:!1,message:""}],children:e.jsx(o,{variant:"outlined",placeholder:"请输入联系电话",maxLength:30})})}),e.jsx(n,{span:12,children:e.jsx(a.Item,{label:"邮箱",name:"email",rules:[{required:!1,message:""}],children:e.jsx(o,{variant:"outlined",placeholder:"请输入邮箱",maxLength:30})})}),e.jsx(n,{span:12,children:e.jsx(a.Item,{label:"部门状态",name:"status",rules:[{required:!1,message:""}],children:e.jsx(b.Group,{name:"radiogroup",defaultValue:"启用",options:[{value:"启用",label:"启用"},{value:"停用",label:"停用"}]})})}),e.jsx(n,{span:24,pull:3,children:e.jsx(a.Item,{label:"部门描述",name:"desc",rules:[{required:!1,message:""}],children:e.jsx(o.TextArea,{rows:3,placeholder:"请输入部门描述",maxLength:6})})}),e.jsx(n,{span:24,pull:3,children:e.jsx(a.Item,{label:"是否顶级部门",name:"isTop",rules:[{required:!0,message:""}],children:e.jsx(b.Group,{options:["是","否"],defaultValue:"是",onChange:r=>{d(r.target.value)},value:t})})}),t=="是"&&e.jsx(n,{span:24,pull:3,children:e.jsx(a.Item,{})}),t=="否"&&e.jsx(n,{span:24,pull:3,children:e.jsx(a.Item,{label:"上级部门",name:"parent_id",rules:[{required:!0,message:"必须：上级部门"}],children:e.jsx(M,{style:{width:"100%"},value:c,placeholder:"请选择上级部门",allowClear:!0,onChange:r=>{h(r)},treeData:T,dropdownStyle:{maxHeight:500,overflow:"auto"},className:"custom-tree-dropdown"})})})]})})})};export{U as default};
//# sourceMappingURL=Modal-e5a2d46b.js.map
