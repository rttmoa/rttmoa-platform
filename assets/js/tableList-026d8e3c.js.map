{"version":3,"file":"tableList-026d8e3c.js","sources":["../../../src/views/system/userManage2/components/tableList.tsx"],"sourcesContent":["import { Pagination, Table } from 'antd';\r\nimport React, { useEffect, useRef } from 'react';\r\n\r\n// 如果要使用不回行的table，那么就要设置table的className为nowrap，并且不能对td设置特定的宽度，且scroll={{ y: true, x: true }}的X值必须为true\r\nexport default function TableList(props: any) {\r\n\tconst timer = useRef<any>(null);\r\n\r\n\tconst tableWidthAdaptive = () => {\r\n\t\tif (props.className && props.className.indexOf('nowrap') > -1) {\r\n\t\t\ttimer.current = setInterval(() => {\r\n\t\t\t\t// 通过定时器循环的方式，看看真实节点是否加载到dom中了\r\n\t\t\t\tconst tds = document.querySelector('.ant-table-row') && document.querySelector('.ant-table-row')!.querySelectorAll('td');\r\n\t\t\t\tconst ths: any = document.querySelectorAll('.ant-table-header th');\r\n\t\t\t\tif (tds && tds.length) {\r\n\t\t\t\t\tclearInterval(timer.current);\r\n\t\t\t\t\tfor (let i = 0; i < tds.length; i += 1) {\r\n\t\t\t\t\t\tconst tdw = tds[i].offsetWidth;\r\n\t\t\t\t\t\tconst thw = ths[i].offsetWidth;\r\n\t\t\t\t\t\tconst w = tdw > thw ? tdw : thw;\r\n\t\t\t\t\t\ttds[i].style.minWidth = `${w}px`;\r\n\t\t\t\t\t\tths[i].style.minWidth = `${w}px`;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, 100);\r\n\t\t}\r\n\t};\r\n\tuseEffect(() => {\r\n\t\ttableWidthAdaptive();\r\n\t\treturn () => {\r\n\t\t\tclearInterval(timer.current);\r\n\t\t};\r\n\t});\r\n\r\n\tconst { currentPage, pageSize, totalCount, onShowSizeChange, onChange, columns } = props;\r\n\t// console.log(props);\r\n\tconst hasMultiHead = columns.filter((one: any) => !!one.children).length > 0;\r\n\treturn (\r\n\t\t<div className={`table-content ${hasMultiHead ? 'clear-overlap-border' : ''}`}>\r\n\t\t\t<Table rowClassName={props.rowClassName} pagination={false} bordered={true} rowKey='id' {...props} />\r\n\t\t\t{currentPage ? (\r\n\t\t\t\t<Pagination\r\n\t\t\t\t\ttotal={totalCount || 0}\r\n\t\t\t\t\tshowSizeChanger // 是否可以改变pageSize\r\n\t\t\t\t\tshowQuickJumper={false} // 是否可以快速跳转某一页\r\n\t\t\t\t\tonShowSizeChange={onShowSizeChange}\r\n\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\tshowTotal={_totalCount => `共 ${_totalCount} 条`}\r\n\t\t\t\t\tcurrent={currentPage || 1}\r\n\t\t\t\t\tpageSize={pageSize || 10}\r\n\t\t\t\t\t{...props}\r\n\t\t\t\t/>\r\n\t\t\t) : null}\r\n\t\t</div>\r\n\t);\r\n}\r\n"],"names":["TableList","props","timer","useRef","tableWidthAdaptive","tds","ths","i","tdw","thw","w","useEffect","currentPage","pageSize","totalCount","onShowSizeChange","onChange","columns","hasMultiHead","one","jsx","Table","Pagination","_totalCount"],"mappings":"mvBAIA,SAAwBA,EAAUC,EAAY,CACvC,MAAAC,EAAQC,SAAY,IAAI,EAExBC,EAAqB,IAAM,CAC5BH,EAAM,WAAaA,EAAM,UAAU,QAAQ,QAAQ,EAAI,KACpDC,EAAA,QAAU,YAAY,IAAM,CAE3B,MAAAG,EAAM,SAAS,cAAc,gBAAgB,GAAK,SAAS,cAAc,gBAAgB,EAAG,iBAAiB,IAAI,EACjHC,EAAW,SAAS,iBAAiB,sBAAsB,EAC7D,GAAAD,GAAOA,EAAI,OAAQ,CACtB,cAAcH,EAAM,OAAO,EAC3B,QAASK,EAAI,EAAGA,EAAIF,EAAI,OAAQE,GAAK,EAAG,CACjC,MAAAC,EAAMH,EAAIE,CAAC,EAAE,YACbE,EAAMH,EAAIC,CAAC,EAAE,YACbG,EAAIF,EAAMC,EAAMD,EAAMC,EAC5BJ,EAAIE,CAAC,EAAE,MAAM,SAAW,GAAGG,CAAC,KAC5BJ,EAAIC,CAAC,EAAE,MAAM,SAAW,GAAGG,CAAC,IAC7B,CACD,GACE,GAAG,EACP,EAEDC,EAAAA,UAAU,KACUP,IACZ,IAAM,CACZ,cAAcF,EAAM,OAAO,CAAA,EAE5B,EAED,KAAM,CAAE,YAAAU,EAAa,SAAAC,EAAU,WAAAC,EAAY,iBAAAC,EAAkB,SAAAC,EAAU,QAAAC,CAAY,EAAAhB,EAE7EiB,EAAeD,EAAQ,OAAQE,GAAa,CAAC,CAACA,EAAI,QAAQ,EAAE,OAAS,EAC3E,cACE,MAAI,CAAA,UAAW,iBAAiBD,EAAe,uBAAyB,EAAE,GAC1E,SAAA,CAACE,EAAAA,IAAAC,EAAA,CAAM,aAAcpB,EAAM,aAAc,WAAY,GAAO,SAAU,GAAM,OAAO,KAAM,GAAGA,CAAO,CAAA,EAClGW,EACAQ,EAAA,IAACE,EAAA,CACA,MAAOR,GAAc,EACrB,gBAAe,GACf,gBAAiB,GACjB,iBAAAC,EACA,SAAAC,EACA,UAA0BO,GAAA,KAAKA,CAAW,KAC1C,QAASX,GAAe,EACxB,SAAUC,GAAY,GACrB,GAAGZ,CAAA,CAAA,EAEF,IACL,CAAA,CAAA,CAEF"}