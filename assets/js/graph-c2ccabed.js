import{c as R,k as o,d as Y,t as A,e as x,f as q,h as B,j as J,a as W}from"./_baseFlatten-98b793e0.js";import{m as Z,k as Q,F as X,G as k,a as b,d as z,H as G,I as V,i as j,J as L,K as ee,L as te,N as C,j as w}from"./memoize-fc43d13d.js";import{b as y,s as S,S as ne,c as re}from"./_baseIsEqual-adc6fefa.js";import{i as P}from"./isEmpty-13e34a86.js";function se(){}function ie(n,e,t,r){for(var s=n.length,i=t+(r?1:-1);r?i--:++i<s;)if(e(n[i],i,n))return i;return-1}function ue(n){return n!==n}function he(n,e,t){for(var r=t-1,s=n.length;++r<s;)if(n[r]===e)return r;return-1}function ae(n,e,t){return e===e?he(n,e,t):ie(n,ue,t)}function de(n,e){var t=n==null?0:n.length;return!!t&&ae(n,e,0)>-1}function fe(n,e,t){var r=n==null?void 0:R(n,e);return r===void 0?t:r}function oe(n,e,t,r){var s=-1,i=n==null?0:n.length;for(r&&i&&(t=n[++s]);++s<i;)t=e(t,n[s],s,n);return t}var le=1,_e=2;function ge(n,e,t,r){var s=t.length,i=s,u=!r;if(n==null)return!i;for(n=Object(n);s--;){var h=t[s];if(u&&h[2]?h[1]!==n[h[0]]:!(h[0]in n))return!1}for(;++s<i;){h=t[s];var a=h[0],c=n[a],d=h[1];if(u&&h[2]){if(c===void 0&&!(a in n))return!1}else{var f=new Z;if(r)var E=r(c,d,a,n,e,f);if(!(E===void 0?y(d,c,le|_e,r,f):E))return!1}}return!0}function T(n){return n===n&&!Q(n)}function ce(n){for(var e=o(n),t=e.length;t--;){var r=e[t],s=n[r];e[t]=[r,s,T(s)]}return e}function H(n,e){return function(t){return t==null?!1:t[n]===e&&(e!==void 0||n in Object(t))}}function pe(n){var e=ce(n);return e.length==1&&e[0][2]?H(e[0][0],e[0][1]):function(t){return t===n||ge(t,n,e)}}function Ee(n,e){return n!=null&&e in Object(n)}function U(n,e,t){e=Y(e,n);for(var r=-1,s=e.length,i=!1;++r<s;){var u=A(e[r]);if(!(i=n!=null&&t(n,u)))break;n=n[u]}return i||++r!=s?i:(s=n==null?0:n.length,!!s&&X(s)&&k(u,s)&&(b(n)||z(n)))}function me(n,e){return n!=null&&U(n,e,Ee)}var be=1,Ce=2;function ve(n,e){return x(n)&&T(e)?H(A(n),e):function(t){var r=fe(t,n);return r===void 0&&r===e?me(t,n):y(e,r,be|Ce)}}function Le(n){return function(e){return e==null?void 0:e[n]}}function Oe(n){return function(e){return R(e,n)}}function Ne(n){return x(n)?Le(A(n)):Oe(n)}function $(n){return typeof n=="function"?n:n==null?G:typeof n=="object"?b(n)?ve(n[0],n[1]):pe(n):Ne(n)}function Ae(n,e){return n&&V(n,e,o)}function Fe(n,e){return function(t,r){if(t==null)return t;if(!j(t))return n(t,r);for(var s=t.length,i=e?s:-1,u=Object(t);(e?i--:++i<s)&&r(u[i],i,u)!==!1;);return t}}var we=Fe(Ae);const F=we;function Pe(n,e,t){for(var r=-1,s=n==null?0:n.length;++r<s;)if(t(e,n[r]))return!0;return!1}function Ie(n){return typeof n=="function"?n:G}function _(n,e){var t=b(n)?q:F;return t(n,Ie(e))}function De(n,e){var t=[];return F(n,function(r,s,i){e(r,s,i)&&t.push(r)}),t}function v(n,e){var t=b(n)?B:De;return t(n,$(e))}var Me=Object.prototype,Re=Me.hasOwnProperty;function xe(n,e){return n!=null&&Re.call(n,e)}function l(n,e){return n!=null&&U(n,e,xe)}function Ge(n,e){return J(e,function(t){return n[t]})}function O(n){return n==null?[]:Ge(n,o(n))}function p(n){return n===void 0}function ye(n,e,t,r,s){return s(n,function(i,u,h){t=r?(r=!1,i):e(t,i,u,h)}),t}function Se(n,e,t){var r=b(n)?oe:ye,s=arguments.length<3;return r(n,$(e),t,s,F)}var Te=1/0,He=L&&1/S(new L([,-0]))[1]==Te?function(n){return new L(n)}:se;const Ue=He;var $e=200;function Ke(n,e,t){var r=-1,s=de,i=n.length,u=!0,h=[],a=h;if(t)u=!1,s=Pe;else if(i>=$e){var c=e?null:Ue(n);if(c)return S(c);u=!1,s=re,a=new ne}else a=e?[]:h;e:for(;++r<i;){var d=n[r],f=e?e(d):d;if(d=t||d!==0?d:0,u&&f===f){for(var E=a.length;E--;)if(a[E]===f)continue e;e&&a.push(f),h.push(d)}else s(a,f,t)||(a!==h&&a.push(f),h.push(d))}return h}var Ye=ee(function(n){return Ke(W(n,1,te,!0))});const qe=Ye;var Be="\0",g="\0",I="";class K{constructor(e={}){this._isDirected=l(e,"directed")?e.directed:!0,this._isMultigraph=l(e,"multigraph")?e.multigraph:!1,this._isCompound=l(e,"compound")?e.compound:!1,this._label=void 0,this._defaultNodeLabelFn=C(void 0),this._defaultEdgeLabelFn=C(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[g]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(e){return this._label=e,this}graph(){return this._label}setDefaultNodeLabel(e){return w(e)||(e=C(e)),this._defaultNodeLabelFn=e,this}nodeCount(){return this._nodeCount}nodes(){return o(this._nodes)}sources(){var e=this;return v(this.nodes(),function(t){return P(e._in[t])})}sinks(){var e=this;return v(this.nodes(),function(t){return P(e._out[t])})}setNodes(e,t){var r=arguments,s=this;return _(e,function(i){r.length>1?s.setNode(i,t):s.setNode(i)}),this}setNode(e,t){return l(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]=g,this._children[e]={},this._children[g][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)}node(e){return this._nodes[e]}hasNode(e){return l(this._nodes,e)}removeNode(e){var t=this;if(l(this._nodes,e)){var r=function(s){t.removeEdge(t._edgeObjs[s])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],_(this.children(e),function(s){t.setParent(s)}),delete this._children[e]),_(o(this._in[e]),r),delete this._in[e],delete this._preds[e],_(o(this._out[e]),r),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this}setParent(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(p(t))t=g;else{t+="";for(var r=t;!p(r);r=this.parent(r))if(r===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this}_removeFromParentsChildList(e){delete this._children[this._parent[e]][e]}parent(e){if(this._isCompound){var t=this._parent[e];if(t!==g)return t}}children(e){if(p(e)&&(e=g),this._isCompound){var t=this._children[e];if(t)return o(t)}else{if(e===g)return this.nodes();if(this.hasNode(e))return[]}}predecessors(e){var t=this._preds[e];if(t)return o(t)}successors(e){var t=this._sucs[e];if(t)return o(t)}neighbors(e){var t=this.predecessors(e);if(t)return qe(t,this.successors(e))}isLeaf(e){var t;return this.isDirected()?t=this.successors(e):t=this.neighbors(e),t.length===0}filterNodes(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var r=this;_(this._nodes,function(u,h){e(h)&&t.setNode(h,u)}),_(this._edgeObjs,function(u){t.hasNode(u.v)&&t.hasNode(u.w)&&t.setEdge(u,r.edge(u))});var s={};function i(u){var h=r.parent(u);return h===void 0||t.hasNode(h)?(s[u]=h,h):h in s?s[h]:i(h)}return this._isCompound&&_(t.nodes(),function(u){t.setParent(u,i(u))}),t}setDefaultEdgeLabel(e){return w(e)||(e=C(e)),this._defaultEdgeLabelFn=e,this}edgeCount(){return this._edgeCount}edges(){return O(this._edgeObjs)}setPath(e,t){var r=this,s=arguments;return Se(e,function(i,u){return s.length>1?r.setEdge(i,u,t):r.setEdge(i,u),u}),this}setEdge(){var e,t,r,s,i=!1,u=arguments[0];typeof u=="object"&&u!==null&&"v"in u?(e=u.v,t=u.w,r=u.name,arguments.length===2&&(s=arguments[1],i=!0)):(e=u,t=arguments[1],r=arguments[3],arguments.length>2&&(s=arguments[2],i=!0)),e=""+e,t=""+t,p(r)||(r=""+r);var h=m(this._isDirected,e,t,r);if(l(this._edgeLabels,h))return i&&(this._edgeLabels[h]=s),this;if(!p(r)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[h]=i?s:this._defaultEdgeLabelFn(e,t,r);var a=Je(this._isDirected,e,t,r);return e=a.v,t=a.w,Object.freeze(a),this._edgeObjs[h]=a,D(this._preds[t],e),D(this._sucs[e],t),this._in[t][h]=a,this._out[e][h]=a,this._edgeCount++,this}edge(e,t,r){var s=arguments.length===1?N(this._isDirected,arguments[0]):m(this._isDirected,e,t,r);return this._edgeLabels[s]}hasEdge(e,t,r){var s=arguments.length===1?N(this._isDirected,arguments[0]):m(this._isDirected,e,t,r);return l(this._edgeLabels,s)}removeEdge(e,t,r){var s=arguments.length===1?N(this._isDirected,arguments[0]):m(this._isDirected,e,t,r),i=this._edgeObjs[s];return i&&(e=i.v,t=i.w,delete this._edgeLabels[s],delete this._edgeObjs[s],M(this._preds[t],e),M(this._sucs[e],t),delete this._in[t][s],delete this._out[e][s],this._edgeCount--),this}inEdges(e,t){var r=this._in[e];if(r){var s=O(r);return t?v(s,function(i){return i.v===t}):s}}outEdges(e,t){var r=this._out[e];if(r){var s=O(r);return t?v(s,function(i){return i.w===t}):s}}nodeEdges(e,t){var r=this.inEdges(e,t);if(r)return r.concat(this.outEdges(e,t))}}K.prototype._nodeCount=0;K.prototype._edgeCount=0;function D(n,e){n[e]?n[e]++:n[e]=1}function M(n,e){--n[e]||delete n[e]}function m(n,e,t,r){var s=""+e,i=""+t;if(!n&&s>i){var u=s;s=i,i=u}return s+I+i+I+(p(r)?Be:r)}function Je(n,e,t,r){var s=""+e,i=""+t;if(!n&&s>i){var u=s;s=i,i=u}var h={v:s,w:i};return r&&(h.name=r),h}function N(n,e){return m(n,e.v,e.w,e.name)}export{K as G,ie as a,$ as b,F as c,Ie as d,Ae as e,_ as f,me as g,l as h,p as i,v as j,Se as r,O as v};
