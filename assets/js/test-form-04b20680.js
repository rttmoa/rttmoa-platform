import{r as n,j as l,d as k,ax as z,ae as B,B as S,aS as O,al as T,b5 as V}from"./index-113fc74b.js";import{C as Y}from"./index-7df010ed.js";const _=k.createContext({gap:0,cols:4,breakPoint:"xl",shouldHiddenIndex:-1});function D(e){const{cols:b=()=>({xs:1,sm:2,md:2,lg:3,xl:4}),collapsed:w=!1,collapsedRows:d=1,gap:f=0,children:C=null}=e;let t=n.useRef("xl");const o=n.useRef(-1),i=y=>{let a=y.target.innerWidth;switch(!!a){case a<768:t.current="xs";break;case(a>=768&&a<992):t.current="sm";break;case(a>=992&&a<1200):t.current="md";break;case(a>=1200&&a<1920):t.current="lg";break;case a>=1920:t.current="xl";break}};n.useEffect(()=>{i({target:{innerWidth:window.innerWidth}})}),n.useEffect(()=>(window.addEventListener("resize",i),()=>{window.removeEventListener("resize",i)}),[]);const s=()=>{var I,P,F,N;let y=[],a=null;k.Children.toArray(e.children).forEach(u=>{var p;k.isValidElement(u)&&(typeof u.type=="object"&&u.type.name==="GridItem"&&(a=u),((p=u.props)==null?void 0:p.suffix)!==void 0&&(a=u),u.props&&Array.isArray(u.props.children)&&y.push(...k.Children.toArray(u.props.children)))});let $=0;a&&($=(((I=a.props[t.current])==null?void 0:I.span)??((P=a.props)==null?void 0:P.span)??1)+(((F=a.props[t.current])==null?void 0:F.offset)??((N=a.props)==null?void 0:N.offset)??0));try{let u=!1;y.reduce((p=0,j,G)=>{var R,v,A,H;if(p+=(((R=j.props[t.current])==null?void 0:R.span)??((v=j.props)==null?void 0:v.span)??1)+(((A=j.props[t.current])==null?void 0:A.offset)??((H=j.props)==null?void 0:H.offset)??0),Number(p)>d*r-$)throw o.current=G,u=!0,"find it";return p},0),u||(o.current=-1)}catch{}};n.useEffect(()=>{e.collapsed&&s()},[t.current]),n.useEffect(()=>{e.collapsed?s():o.current=-1},[e.collapsed]);const r=n.useMemo(()=>typeof e.cols=="object"?e.cols[t.current]??e.cols:e.cols,[e.cols]),c=n.useMemo(()=>typeof e.gap=="number"?`${e.gap}px`:Array.isArray(e.gap)?`${e.gap[1]}px ${e.gap[0]}px`:"unset",[e.gap]),h=n.useMemo(()=>({display:"grid",gridGap:c,gridTemplateColumns:`repeat(${r}, minmax(0, 1fr))`}),[c,r]),x=Array.isArray(e.gap)?e.gap[0]:e.gap,m=t.current,g=o.current,L={gap:x,breakPoint:m,shouldHiddenIndex:g,cols:r};return l.jsx(_.Provider,{value:L,children:l.jsx("div",{style:h,children:e==null?void 0:e.children})})}function M(e){const[b,w]=n.useState(!0),d=n.useContext(_);n.useEffect(()=>{e.index&&w(!(d.shouldHiddenIndex!==-1&&parseInt(e.index)>=d.shouldHiddenIndex))},[d.shouldHiddenIndex,d.breakPoint,e.index]);const f=e,C=d.gap,t=d.cols;let o=n.useMemo(()=>{var r,c;let i=((r=f[d.breakPoint])==null?void 0:r.span)??e.span,s=((c=f[d.breakPoint])==null?void 0:c.offset)??e.offset;return i=1,s=0,e.suffix?{gridColumnStart:t-i-s+1,gridColumnEnd:`span ${i+s}`,marginLeft:s!==0?`calc(((100% + ${C}px) / ${i+s}) * ${s})`:"unset"}:{gridColumn:`span ${i+s>t?t:i+s}/span ${i+s>t?t:i+s}`,marginLeft:s!==0?`calc(((100% + ${C}px) / ${i+s}) * ${s})`:"unset"}},[e.span,e.offset]);return b&&l.jsx("div",{className:e==null?void 0:e.className,style:o,children:e.children})}function W(e){const[b,w]=n.useState(!1),d=n.useRef("xl"),[f,C]=n.useState("xl");n.useEffect(()=>{var r;const s=(r=d.current)==null?void 0:r.breakPoint;s!==f&&C(s||"xl")});const t=s=>{var r,c,h,x,m,g,E;return{span:(r=s.search)==null?void 0:r.span,offset:((c=s.search)==null?void 0:c.offset)??0,xs:(h=s.search)==null?void 0:h.xs,sm:(x=s.search)==null?void 0:x.sm,md:(m=s.search)==null?void 0:m.md,lg:(g=s.search)==null?void 0:g.lg,xl:(E=s.search)==null?void 0:E.xl}},o=e.columns.slice(0,15),i=n.useMemo(()=>{let s=!1;return o==null||o.reduce((r,c)=>{var h,x,m,g;return r+=(((h=c.search[f])==null?void 0:h.span)??((x=c.search)==null?void 0:x.span)??1)+(((m=c.search[f])==null?void 0:m.offset)??((g=c.search)==null?void 0:g.offset)??0),typeof e.searchCol!="number"?r>=e.searchCol[f]&&(s=!0):r>=e.searchCol&&(s=!0),r},0),s},[e.columns]);return o.length>0&&l.jsx("div",{children:l.jsx(z,{children:l.jsxs(D,{collapsed:!0,gap:[20,10],cols:e.searchCol,children:[o==null?void 0:o.map((s,r)=>{const c=t(s);return l.jsx(M,{...c,className:"bg-slate-300",index:`${r}`,children:"123"})}),l.jsx(M,{suffix:!0,index:"",children:l.jsxs(B,{size:"small",children:[l.jsx(S,{icon:l.jsx(O,{}),type:"primary",onClick:()=>e.search({}),children:"搜索"}),l.jsx(S,{icon:l.jsx(T,{}),type:"default",onClick:()=>e.reset({}),children:"重置"}),i&&l.jsxs(S,{className:"inline-flex items-center",type:"link",onClick:()=>{w(!b)},children:[b?"展开":"合并",l.jsx(V,{className:"",name:b?"DownOutlined":"UpOutlined"})]})]})})]})})})}function J(){let e={searchCol:{xs:1,sm:2,md:2,lg:3,xl:4},columns:[{prop:"username",label:"用户姓名",search:{el:"input",order:2},isShow:!0,isFilterEnum:!0},{prop:"gender",label:"性别",search:{el:"select",props:{filterable:!0},order:3},fieldNames:{label:"genderLabel",value:"genderValue"},isShow:!0,isFilterEnum:!0},{prop:"user.detail.age",label:"年龄",search:{order:4},isShow:!0,isFilterEnum:!0},{prop:"idCard",label:"身份证号",search:{el:"input",order:5},isShow:!0,isFilterEnum:!0},{prop:"status",label:"用户状态",search:{el:"tree-select",props:{filterable:!0},order:6},fieldNames:{label:"userLabel",value:"userStatus"},isShow:!0,isFilterEnum:!0},{prop:"createTime",label:"创建时间",width:180,search:{el:"date-picker",span:2,props:{type:"datetimerange",valueFormat:"YYYY-MM-DD HH:mm:ss"},defaultValue:["2022-11-12 11:35:00","2022-12-12 11:35:00"],order:7},isShow:!0,isFilterEnum:!0}],searchParam:{createTime:["2022-11-12 11:35:00","2022-12-12 11:35:00"]},search:()=>{},reset:()=>{}};return l.jsx(Y,{className:"mb-9",children:l.jsx(W,{...e})})}export{J as default};
//# sourceMappingURL=test-form-04b20680.js.map
