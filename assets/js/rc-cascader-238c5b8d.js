import{K as oe,h as Ie,v as be}from"./rc-util-8976b5fa.js";import{g as Z,d as ae,b as H,f as $e,e as Y,h as Ae,c as fn}from"./@babel-c46ce09a.js";import{u as hn,b as pn,B as gn}from"./rc-select-8e380119.js";import{r as o}from"./react-12b51ca5.js";import{c as mn,a as Le}from"./rc-tree-898f7873.js";import{c as ke}from"./classnames-3ded05b8.js";import"./rc-overflow-7fc9dc70.js";import"./react-dom-e71a48dd.js";import"./rc-resize-observer-5c9960e4.js";import"./rc-motion-25d44171.js";var ge=o.createContext(null),fe="__rc_cascader_search_mark__",Cn=function(a,n,t){var r=t.label;return n.some(function(i){return String(i[r]).toLowerCase().includes(a.toLowerCase())})},Sn=function(a,n,t,r){return n.map(function(i){return i[r.label]}).join(" / ")};const bn=function(e,a,n,t,r,i){var u=r.filter,l=u===void 0?Cn:u,s=r.render,d=s===void 0?Sn:s,C=r.limit,v=C===void 0?50:C,h=r.sort;return o.useMemo(function(){var S=[];if(!e)return[];function f(m,k){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;m.forEach(function(g){if(!(!h&&v!==!1&&v>0&&S.length>=v)){var D=[].concat(Z(k),[g]),R=g[n.children],K=E||g.disabled;if((!R||R.length===0||i)&&l(e,D,{label:n.label})){var y;S.push(ae(ae({},g),{},(y={disabled:K},H(y,n.label,d(e,D,t,n)),H(y,fe,D),H(y,n.children,void 0),y)))}R&&f(g[n.children],D,K)}})}return f(a,[]),h&&S.sort(function(m,k){return h(m[fe],k[fe],e,n)}),v!==!1&&v>0?S.slice(0,v):S},[e,a,n,t,d,i,l,h,v])};var De="__RC_CASCADER_SPLIT__",We="SHOW_PARENT",He="SHOW_CHILD";function ee(e){return e.join(De)}function he(e){return e.map(ee)}function yn(e){return e.split(De)}function Fe(e){var a=e||{},n=a.label,t=a.value,r=a.children,i=t||"value";return{label:n||"label",value:i,key:i,children:r||"children"}}function Se(e,a){var n,t;return(n=e.isLeaf)!==null&&n!==void 0?n:!((t=e[a.children])!==null&&t!==void 0&&t.length)}function kn(e){var a=e.parentElement;if(a){var n=e.offsetTop-a.offsetTop;n-a.scrollTop<0?a.scrollTo({top:n}):n+e.offsetHeight-a.scrollTop>a.offsetHeight&&a.scrollTo({top:n+e.offsetHeight-a.offsetHeight})}}function Be(e,a){return e.map(function(n){var t;return(t=n[fe])===null||t===void 0?void 0:t.map(function(r){return r[a.value]})})}function Vn(e){return Array.isArray(e)&&Array.isArray(e[0])}function ye(e){return e?Vn(e)?e:(e.length===0?[]:[e]).map(function(a){return Array.isArray(a)?a:[a]}):[]}function Ue(e,a,n){var t=new Set(e),r=a();return e.filter(function(i){var u=r[i],l=u?u.parent:null,s=u?u.children:null;return u&&u.node.disabled?!0:n===He?!(s&&s.some(function(d){return d.key&&t.has(d.key)})):!(l&&!l.node.disabled&&t.has(l.key))})}function pe(e,a,n){for(var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,r=a,i=[],u=function(){var d,C,v,h=e[l],S=(d=r)===null||d===void 0?void 0:d.findIndex(function(m){var k=m[n.value];return t?String(k)===String(h):k===h}),f=S!==-1?(C=r)===null||C===void 0?void 0:C[S]:null;i.push({value:(v=f==null?void 0:f[n.value])!==null&&v!==void 0?v:h,index:S,option:f}),r=f==null?void 0:f[n.children]},l=0;l<e.length;l+=1)u();return i}const xn=function(e,a,n,t,r){return o.useMemo(function(){var i=r||function(u){var l=t?u.slice(-1):u,s=" / ";return l.every(function(d){return["string","number"].includes($e(d))})?l.join(s):l.reduce(function(d,C,v){var h=o.isValidElement(C)?o.cloneElement(C,{key:v}):C;return v===0?[h]:[].concat(Z(d),[s,h])},[])};return e.map(function(u){var l,s=pe(u,a,n),d=i(s.map(function(v){var h,S=v.option,f=v.value;return(h=S==null?void 0:S[n.label])!==null&&h!==void 0?h:f}),s.map(function(v){var h=v.option;return h})),C=ee(u);return{label:d,value:C,key:C,valueCells:u,disabled:(l=s[s.length-1])===null||l===void 0||(l=l.option)===null||l===void 0?void 0:l.disabled}})},[e,a,n,r,t])};function je(e,a){return o.useCallback(function(n){var t=[],r=[];return n.forEach(function(i){var u=pe(i,e,a);u.every(function(l){return l.option})?r.push(i):t.push(i)}),[r,t]},[e,a])}const On=function(e,a){var n=o.useRef({options:null,info:null}),t=o.useCallback(function(){return n.current.options!==e&&(n.current.options=e,n.current.info=mn(e,{fieldNames:a,initWrapper:function(i){return ae(ae({},i),{},{pathKeyEntities:{}})},processEntity:function(i,u){var l=i.nodes.map(function(s){return s[a.value]}).join(De);u.pathKeyEntities[l]=i,i.key=l}})),n.current.info.pathKeyEntities},[a,e]);return t};function Je(e,a){var n=o.useMemo(function(){return a||[]},[a]),t=On(n,e),r=o.useCallback(function(i){var u=t();return i.map(function(l){var s=u[l].nodes;return s.map(function(d){return d[e.value]})})},[t,e]);return[n,t,r]}function _n(e){return o.useMemo(function(){if(!e)return[!1,{}];var a={matchInputWidth:!0,limit:50};return e&&$e(e)==="object"&&(a=ae(ae({},a),e)),a.limit<=0&&delete a.limit,[!0,a]},[e])}function Xe(e,a,n,t,r,i,u,l){return function(s){if(!e)a(s);else{var d=ee(s),C=he(n),v=he(t),h=C.includes(d),S=r.some(function(y){return ee(y)===d}),f=n,m=r;if(S&&!h)m=r.filter(function(y){return ee(y)!==d});else{var k=h?C.filter(function(y){return y!==d}):[].concat(Z(C),[d]),E=i(),g;if(h){var D=Le(k,{checked:!1,halfCheckedKeys:v},E);g=D.checkedKeys}else{var R=Le(k,!0,E);g=R.checkedKeys}var K=Ue(g,i,l);f=u(K)}a([].concat(Z(m),Z(f)))}}}function qe(e,a,n,t,r){return o.useMemo(function(){var i=r(a),u=Y(i,2),l=u[0],s=u[1];if(!e||!a.length)return[l,[],s];var d=he(l),C=n(),v=Le(d,!0,C),h=v.checkedKeys,S=v.halfCheckedKeys;return[t(h),t(S),s]},[e,a,n,t,r])}var Pn=o.memo(function(e){var a=e.children;return a},function(e,a){return!a.open});function wn(e){var a,n=e.prefixCls,t=e.checked,r=e.halfChecked,i=e.disabled,u=e.onClick,l=e.disableCheckbox,s=o.useContext(ge),d=s.checkable,C=typeof d!="boolean"?d:null;return o.createElement("span",{className:ke("".concat(n),(a={},H(a,"".concat(n,"-checked"),t),H(a,"".concat(n,"-indeterminate"),!t&&r),H(a,"".concat(n,"-disabled"),i||l),a)),onClick:u},C)}var Ge="__cascader_fix_label__";function En(e){var a=e.prefixCls,n=e.multiple,t=e.options,r=e.activeValue,i=e.prevValuePath,u=e.onToggleOpen,l=e.onSelect,s=e.onActive,d=e.checkedSet,C=e.halfCheckedSet,v=e.loadingKeys,h=e.isSelectable,S=e.searchValue,f="".concat(a,"-menu"),m="".concat(a,"-menu-item"),k=o.useContext(ge),E=k.fieldNames,g=k.changeOnSelect,D=k.expandTrigger,R=k.expandIcon,K=k.loadingIcon,y=k.dropdownMenuColumnStyle,b=D==="hover",M=o.useMemo(function(){return t.map(function(c){var V,x=c.disabled,_=c.disableCheckbox,$=c[fe],I=(V=c[Ge])!==null&&V!==void 0?V:c[E.label],L=c[E.value],q=Se(c,E),U=$?$.map(function(j){return j[E.value]}):[].concat(Z(i),[L]),N=ee(U),A=v.includes(N),F=d.has(N),B=C.has(N);return{disabled:x,label:I,value:L,isLeaf:q,isLoading:A,checked:F,halfChecked:B,option:c,disableCheckbox:_,fullPath:U,fullPathKey:N}})},[t,d,E,C,v,i]);return o.createElement("ul",{className:f,role:"menu"},M.map(function(c){var V,x=c.disabled,_=c.label,$=c.value,I=c.isLeaf,L=c.isLoading,q=c.checked,U=c.halfChecked,N=c.option,A=c.fullPath,F=c.fullPathKey,B=c.disableCheckbox,j=function(){if(!(x||S)){var G=Z(A);b&&I&&G.pop(),s(G)}},te=function(){h(N)&&l(A,I)},z;return typeof N.title=="string"?z=N.title:typeof _=="string"&&(z=_),o.createElement("li",{key:F,className:ke(m,(V={},H(V,"".concat(m,"-expand"),!I),H(V,"".concat(m,"-active"),r===$||r===F),H(V,"".concat(m,"-disabled"),x),H(V,"".concat(m,"-loading"),L),V)),style:y,role:"menuitemcheckbox",title:z,"aria-checked":q,"data-path-key":F,onClick:function(){j(),!B&&(!n||I)&&te()},onDoubleClick:function(){g&&u(!1)},onMouseEnter:function(){b&&j()},onMouseDown:function(G){G.preventDefault()}},n&&o.createElement(wn,{prefixCls:"".concat(a,"-checkbox"),checked:q,halfChecked:U,disabled:x||B,disableCheckbox:B,onClick:function(G){B||(G.stopPropagation(),te())}}),o.createElement("div",{className:"".concat(m,"-content")},_),!L&&R&&!I&&o.createElement("div",{className:"".concat(m,"-expand-icon")},R),L&&K&&o.createElement("div",{className:"".concat(m,"-loading-icon")},K))}))}const Mn=function(e,a){var n=o.useContext(ge),t=n.values,r=t[0],i=o.useState([]),u=Y(i,2),l=u[0],s=u[1];return o.useEffect(function(){a&&!e&&s(r||[])},[a,r]),[l,s]},In=function(e,a,n,t,r,i,u){var l=u.direction,s=u.searchValue,d=u.toggleOpen,C=u.open,v=l==="rtl",h=o.useMemo(function(){for(var y=-1,b=a,M=[],c=[],V=t.length,x=Be(a,n),_=function(U){var N=b.findIndex(function(A,F){return(x[F]?ee(x[F]):A[n.value])===t[U]});if(N===-1)return 1;y=N,M.push(y),c.push(t[U]),b=b[y][n.children]},$=0;$<V&&b&&!_($);$+=1);for(var I=a,L=0;L<M.length-1;L+=1)I=I[M[L]][n.children];return[c,y,I,x]},[t,n,a]),S=Y(h,4),f=S[0],m=S[1],k=S[2],E=S[3],g=function(b){r(b)},D=function(b){var M=k.length,c=m;c===-1&&b<0&&(c=M);for(var V=0;V<M;V+=1){c=(c+b+M)%M;var x=k[c];if(x&&!x.disabled){var _=f.slice(0,-1).concat(E[c]?ee(E[c]):x[n.value]);g(_);return}}},R=function(){if(f.length>1){var b=f.slice(0,-1);g(b)}else d(!1)},K=function(){var b,M=((b=k[m])===null||b===void 0?void 0:b[n.children])||[],c=M.find(function(x){return!x.disabled});if(c){var V=[].concat(Z(f),[c[n.value]]);g(V)}};o.useImperativeHandle(e,function(){return{onKeyDown:function(b){var M=b.which;switch(M){case oe.UP:case oe.DOWN:{var c=0;M===oe.UP?c=-1:M===oe.DOWN&&(c=1),c!==0&&D(c);break}case oe.LEFT:{if(s)break;v?K():R();break}case oe.RIGHT:{if(s)break;v?R():K();break}case oe.BACKSPACE:{s||R();break}case oe.ENTER:{if(f.length){var V=k[m],x=(V==null?void 0:V[fe])||[];x.length?i(x.map(function(_){return _[n.value]}),x[x.length-1]):i(f,k[m])}break}case oe.ESC:d(!1),C&&b.stopPropagation()}},onKeyUp:function(){}}})};var Ye=o.forwardRef(function(e,a){var n,t,r,i=e.prefixCls,u=e.multiple,l=e.searchValue,s=e.toggleOpen,d=e.notFoundContent,C=e.direction,v=e.open,h=o.useRef(),S=C==="rtl",f=o.useContext(ge),m=f.options,k=f.values,E=f.halfValues,g=f.fieldNames,D=f.changeOnSelect,R=f.onSelect,K=f.searchOptions,y=f.dropdownPrefixCls,b=f.loadData,M=f.expandTrigger,c=y||i,V=o.useState([]),x=Y(V,2),_=x[0],$=x[1],I=function(p){if(!(!b||l)){var O=pe(p,m,g),P=O.map(function(ne){var ie=ne.option;return ie}),W=P[P.length-1];if(W&&!Se(W,g)){var re=ee(p);$(function(ne){return[].concat(Z(ne),[re])}),b(P)}}};o.useEffect(function(){_.length&&_.forEach(function(w){var p=yn(w),O=pe(p,m,g,!0).map(function(W){var re=W.option;return re}),P=O[O.length-1];(!P||P[g.children]||Se(P,g))&&$(function(W){return W.filter(function(re){return re!==w})})})},[m,_,g]);var L=o.useMemo(function(){return new Set(he(k))},[k]),q=o.useMemo(function(){return new Set(he(E))},[E]),U=Mn(u,v),N=Y(U,2),A=N[0],F=N[1],B=function(p){F(p),I(p)},j=function(p){var O=p.disabled,P=Se(p,g);return!O&&(P||D||u)},te=function(p,O){var P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;R(p),!u&&(O||D&&(M==="hover"||P))&&s(!1)},z=o.useMemo(function(){return l?K:m},[l,K,m]),T=o.useMemo(function(){for(var w=[{options:z}],p=z,O=Be(p,g),P=function(){var ne=A[W],ie=p.find(function(Ve,me){return(O[me]?ee(O[me]):Ve[g.value])===ne}),se=ie==null?void 0:ie[g.children];if(!(se!=null&&se.length))return 1;p=se,w.push({options:se})},W=0;W<A.length&&!P();W+=1);return w},[z,A,g]),G=function(p,O){j(O)&&te(p,Se(O,g),!0)};In(a,z,g,A,B,G,{direction:C,searchValue:l,toggleOpen:s,open:v}),o.useEffect(function(){for(var w=0;w<A.length;w+=1){var p,O=A.slice(0,w+1),P=ee(O),W=(p=h.current)===null||p===void 0?void 0:p.querySelector('li[data-path-key="'.concat(P.replace(/\\{0,2}"/g,'\\"'),'"]'));W&&kn(W)}},[A]);var le=!((n=T[0])!==null&&n!==void 0&&(n=n.options)!==null&&n!==void 0&&n.length),ue=[(t={},H(t,g.value,"__EMPTY__"),H(t,Ge,d),H(t,"disabled",!0),t)],ve=ae(ae({},e),{},{multiple:!le&&u,onSelect:te,onActive:B,onToggleOpen:s,checkedSet:L,halfCheckedSet:q,loadingKeys:_,isSelectable:j}),J=le?[{options:ue}]:T,ce=J.map(function(w,p){var O=A.slice(0,p),P=A[p];return o.createElement(En,Ae({key:p},ve,{searchValue:l,prefixCls:c,options:w.options,prevValuePath:O,activeValue:P}))});return o.createElement(Pn,{open:v},o.createElement("div",{className:ke("".concat(c,"-menus"),(r={},H(r,"".concat(c,"-menu-empty"),le),H(r,"".concat(c,"-rtl"),S),r)),ref:h},ce))}),Ln=o.forwardRef(function(e,a){var n=hn();return o.createElement(Ye,Ae({},e,n,{ref:a}))});function An(){}function Dn(e){var a,n=e,t=n.prefixCls,r=t===void 0?"rc-cascader":t,i=n.style,u=n.className,l=n.options,s=n.checkable,d=n.defaultValue,C=n.value,v=n.fieldNames,h=n.changeOnSelect,S=n.onChange,f=n.showCheckedStrategy,m=n.loadData,k=n.expandTrigger,E=n.expandIcon,g=E===void 0?">":E,D=n.loadingIcon,R=n.direction,K=n.notFoundContent,y=K===void 0?"Not Found":K,b=!!s,M=Ie(d,{value:C,postState:ye}),c=Y(M,2),V=c[0],x=c[1],_=o.useMemo(function(){return Fe(v)},[JSON.stringify(v)]),$=Je(_,l),I=Y($,3),L=I[0],q=I[1],U=I[2],N=je(L,_),A=qe(b,V,q,U,N),F=Y(A,3),B=F[0],j=F[1],te=F[2],z=be(function(J){if(x(J),S){var ce=ye(J),w=ce.map(function(P){return pe(P,L,_).map(function(W){return W.option})}),p=b?ce:ce[0],O=b?w:w[0];S(p,O)}}),T=Xe(b,z,B,j,te,q,U,f),G=be(function(J){T(J)}),le=o.useMemo(function(){return{options:L,fieldNames:_,values:B,halfValues:j,changeOnSelect:h,onSelect:G,checkable:s,searchOptions:[],dropdownPrefixCls:null,loadData:m,expandTrigger:k,expandIcon:g,loadingIcon:D,dropdownMenuColumnStyle:null}},[L,_,B,j,h,G,s,m,k,g,D]),ue="".concat(r,"-panel"),ve=!L.length;return o.createElement(ge.Provider,{value:le},o.createElement("div",{className:ke(ue,(a={},H(a,"".concat(ue,"-rtl"),R==="rtl"),H(a,"".concat(ue,"-empty"),ve),a),u),style:i},ve?y:o.createElement(Ye,{prefixCls:r,searchValue:null,multiple:b,toggleOpen:An,open:!0,direction:R})))}var Rn=["id","prefixCls","fieldNames","defaultValue","value","changeOnSelect","onChange","displayRender","checkable","autoClearSearchValue","searchValue","onSearch","showSearch","expandTrigger","options","dropdownPrefixCls","loadData","popupVisible","open","popupClassName","dropdownClassName","dropdownMenuColumnStyle","dropdownStyle","popupPlacement","placement","onDropdownVisibleChange","onPopupVisibleChange","expandIcon","loadingIcon","children","dropdownMatchSelectWidth","showCheckedStrategy"],Re=o.forwardRef(function(e,a){var n=e.id,t=e.prefixCls,r=t===void 0?"rc-cascader":t,i=e.fieldNames,u=e.defaultValue,l=e.value,s=e.changeOnSelect,d=e.onChange,C=e.displayRender,v=e.checkable,h=e.autoClearSearchValue,S=h===void 0?!0:h,f=e.searchValue,m=e.onSearch,k=e.showSearch,E=e.expandTrigger,g=e.options,D=e.dropdownPrefixCls,R=e.loadData,K=e.popupVisible,y=e.open,b=e.popupClassName,M=e.dropdownClassName,c=e.dropdownMenuColumnStyle,V=e.dropdownStyle,x=e.popupPlacement,_=e.placement,$=e.onDropdownVisibleChange,I=e.onPopupVisibleChange,L=e.expandIcon,q=L===void 0?">":L,U=e.loadingIcon,N=e.children,A=e.dropdownMatchSelectWidth,F=A===void 0?!1:A,B=e.showCheckedStrategy,j=B===void 0?We:B,te=fn(e,Rn),z=pn(n),T=!!v,G=Ie(u,{value:l,postState:ye}),le=Y(G,2),ue=le[0],ve=le[1],J=o.useMemo(function(){return Fe(i)},[JSON.stringify(i)]),ce=Je(J,g),w=Y(ce,3),p=w[0],O=w[1],P=w[2],W=Ie("",{value:f,postState:function(X){return X||""}}),re=Y(W,2),ne=re[0],ie=re[1],se=function(X,de){ie(X),de.source!=="blur"&&m&&m(X)},Ve=_n(k),me=Y(Ve,2),ze=me[0],Te=me[1],xe=bn(ne,p,J,D||r,Te,s),Qe=je(p,J),Ze=qe(T,ue,O,P,Qe),Oe=Y(Ze,3),Ce=Oe[0],_e=Oe[1],Pe=Oe[2],en=o.useMemo(function(){var Q=he(Ce),X=Ue(Q,O,j);return[].concat(Z(Pe),Z(P(X)))},[Ce,O,P,Pe,j]),nn=xn(en,p,J,T,C),Ke=be(function(Q){if(ve(Q),d){var X=ye(Q),de=X.map(function(dn){return pe(dn,p,J).map(function(vn){return vn.option})}),Ee=T?X:X[0],Me=T?de:de[0];d(Ee,Me)}}),an=Xe(T,Ke,Ce,_e,Pe,O,P,j),we=be(function(Q){(!T||S)&&ie(""),an(Q)}),tn=function(X,de){if(de.type==="clear"){Ke([]);return}var Ee=de.values[0],Me=Ee.valueCells;we(Me)},rn=y!==void 0?y:K,on=M||b,ln=_||x,un=function(X){$==null||$(X),I==null||I(X)},cn=o.useMemo(function(){return{options:p,fieldNames:J,values:Ce,halfValues:_e,changeOnSelect:s,onSelect:we,checkable:v,searchOptions:xe,dropdownPrefixCls:D,loadData:R,expandTrigger:E,expandIcon:q,loadingIcon:U,dropdownMenuColumnStyle:c}},[p,J,Ce,_e,s,we,v,xe,D,R,E,q,U,c]),Ne=!(ne?xe:p).length,sn=ne&&Te.matchInputWidth||Ne?{}:{minWidth:"auto"};return o.createElement(ge.Provider,{value:cn},o.createElement(gn,Ae({},te,{ref:a,id:z,prefixCls:r,autoClearSearchValue:S,dropdownMatchSelectWidth:F,dropdownStyle:ae(ae({},sn),V),displayValues:nn,onDisplayValuesChange:tn,mode:T?"multiple":void 0,searchValue:ne,onSearch:se,showSearch:ze,OptionList:Ln,emptyOptions:Ne,open:rn,dropdownClassName:on,placement:ln,onDropdownVisibleChange:un,getRawInputElement:function(){return N}})))});Re.SHOW_PARENT=We;Re.SHOW_CHILD=He;Re.Panel=Dn;export{Re as C,Dn as P};
