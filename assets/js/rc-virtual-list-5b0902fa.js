import{d as Y,b as D,h as Qe,e as H,_ as pt,a as bt,f as Pe,c as Mt}from"./@babel-c46ce09a.js";import{r as t}from"./react-12b51ca5.js";import{r as Ae}from"./react-dom-e71a48dd.js";import{c as be}from"./classnames-3ded05b8.js";import{R as et}from"./rc-resize-observer-5c9960e4.js";import{z as B,a1 as yt,b as Re,v as Ge}from"./rc-util-8976b5fa.js";var tt=t.forwardRef(function(e,l){var r=e.height,u=e.offsetY,d=e.offsetX,a=e.children,c=e.prefixCls,S=e.onInnerResize,g=e.innerProps,b=e.rtl,R=e.extra,n={},s={display:"flex",flexDirection:"column"};return u!==void 0&&(n={height:r,position:"relative",overflow:"hidden"},s=Y(Y({},s),{},D(D(D(D(D({transform:"translateY(".concat(u,"px)")},b?"marginRight":"marginLeft",-d),"position","absolute"),"left",0),"right",0),"top",0))),t.createElement("div",{style:n},t.createElement(et,{onResize:function(m){var h=m.offsetHeight;h&&S&&S()}},t.createElement("div",Qe({style:s,className:be(D({},"".concat(c,"-holder-inner"),c)),ref:l},g),a,R)))});tt.displayName="Filler";function Ue(e,l){var r="touches"in e?e.touches[0]:e;return r[l?"pageX":"pageY"]}var Ze=t.forwardRef(function(e,l){var r=e.prefixCls,u=e.rtl,d=e.scrollOffset,a=e.scrollRange,c=e.onStartMove,S=e.onStopMove,g=e.onScroll,b=e.horizontal,R=e.spinSize,n=e.containerSize,s=e.style,v=e.thumbStyle,m=t.useState(!1),h=H(m,2),f=h[0],M=h[1],y=t.useState(null),T=H(y,2),_=T[0],W=T[1],X=t.useState(null),x=H(X,2),j=x[0],P=x[1],I=!u,k=t.useRef(),Q=t.useRef(),E=t.useState(!1),$=H(E,2),ee=$[0],te=$[1],G=t.useRef(),C=function(){clearTimeout(G.current),te(!0),G.current=setTimeout(function(){te(!1)},3e3)},U=a-n||0,oe=n-R||0,Z=t.useMemo(function(){if(d===0||U===0)return 0;var w=d/U;return w*oe},[d,U,oe]),re=function(L){L.stopPropagation(),L.preventDefault()},q=t.useRef({top:Z,dragging:f,pageY:_,startTop:j});q.current={top:Z,dragging:f,pageY:_,startTop:j};var le=function(L){M(!0),W(Ue(L,b)),P(q.current.top),c(),L.stopPropagation(),L.preventDefault()};t.useEffect(function(){var w=function(se){se.preventDefault()},L=k.current,N=Q.current;return L.addEventListener("touchstart",w),N.addEventListener("touchstart",le),function(){L.removeEventListener("touchstart",w),N.removeEventListener("touchstart",le)}},[]);var ue=t.useRef();ue.current=U;var pe=t.useRef();pe.current=oe,t.useEffect(function(){if(f){var w,L=function(se){var fe=q.current,Me=fe.dragging,ye=fe.pageY,xe=fe.startTop;if(B.cancel(w),Me){var ne=Ue(se,b)-ye,ve=xe;!I&&b?ve-=ne:ve+=ne;var de=ue.current,ae=pe.current,Ee=ae?ve/ae:0,V=Math.ceil(Ee*de);V=Math.max(V,0),V=Math.min(V,de),w=B(function(){g(V,b)})}},N=function(){M(!1),S()};return window.addEventListener("mousemove",L),window.addEventListener("touchmove",L),window.addEventListener("mouseup",N),window.addEventListener("touchend",N),function(){window.removeEventListener("mousemove",L),window.removeEventListener("touchmove",L),window.removeEventListener("mouseup",N),window.removeEventListener("touchend",N),B.cancel(w)}}},[f]),t.useEffect(function(){C()},[d]),t.useImperativeHandle(l,function(){return{delayHidden:C}});var K="".concat(r,"-scrollbar"),O={position:"absolute",visibility:ee?null:"hidden"},F={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return b?(O.height=8,O.left=0,O.right=0,O.bottom=0,F.height="100%",F.width=R,I?F.left=Z:F.right=Z):(O.width=8,O.top=0,O.bottom=0,I?O.right=0:O.left=0,F.width="100%",F.height=R,F.top=Z),t.createElement("div",{ref:k,className:be(K,D(D(D({},"".concat(K,"-horizontal"),b),"".concat(K,"-vertical"),!b),"".concat(K,"-visible"),ee)),style:Y(Y({},O),s),onMouseDown:re,onMouseMove:C},t.createElement("div",{ref:Q,className:be("".concat(K,"-thumb"),D({},"".concat(K,"-thumb-moving"),f)),style:Y(Y({},F),v),onMouseDown:le}))});function xt(e){var l=e.children,r=e.setRef,u=t.useCallback(function(d){r(d)},[]);return t.cloneElement(l,{ref:u})}function Et(e,l,r,u,d,a,c){var S=c.getKey;return e.slice(l,r+1).map(function(g,b){var R=l+b,n=a(g,R,{style:{width:u}}),s=S(g);return t.createElement(xt,{key:s,setRef:function(m){return d(g,m)}},n)})}var wt=function(){function e(){bt(this,e),D(this,"maps",void 0),D(this,"id",0),this.maps=Object.create(null)}return pt(e,[{key:"set",value:function(r,u){this.maps[r]=u,this.id+=1}},{key:"get",value:function(r){return this.maps[r]}}]),e}();function zt(e,l,r){var u=t.useState(0),d=H(u,2),a=d[0],c=d[1],S=t.useRef(new Map),g=t.useRef(new wt),b=t.useRef();function R(){B.cancel(b.current)}function n(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;R();var m=function(){S.current.forEach(function(f,M){if(f&&f.offsetParent){var y=yt(f),T=y.offsetHeight;g.current.get(M)!==T&&g.current.set(M,y.offsetHeight)}}),c(function(f){return f+1})};v?m():b.current=B(m)}function s(v,m){var h=e(v),f=S.current.get(h);m?(S.current.set(h,m),n()):S.current.delete(h),!f!=!m&&(m?l==null||l(v):r==null||r(v))}return t.useEffect(function(){return R},[]),[s,n,g.current,a]}var _t=10;function Lt(e,l,r,u,d,a,c,S){var g=t.useRef(),b=t.useState(null),R=H(b,2),n=R[0],s=R[1];return Re(function(){if(n&&n.times<_t){if(!e.current){s(function(U){return Y({},U)});return}a();var v=n.targetAlign,m=n.originAlign,h=n.index,f=n.offset,M=e.current.clientHeight,y=!1,T=v,_=null;if(M){for(var W=v||m,X=0,x=0,j=0,P=Math.min(l.length-1,h),I=0;I<=P;I+=1){var k=d(l[I]);x=X;var Q=r.get(k);j=x+(Q===void 0?u:Q),X=j}for(var E=W==="top"?f:M-f,$=P;$>=0;$-=1){var ee=d(l[$]),te=r.get(ee);if(te===void 0){y=!0;break}if(E-=te,E<=0)break}switch(W){case"top":_=x-f;break;case"bottom":_=j-M+f;break;default:{var G=e.current.scrollTop,C=G+M;x<G?T="top":j>C&&(T="bottom")}}_!==null&&c(_),_!==n.lastTop&&(y=!0)}y&&s(Y(Y({},n),{},{times:n.times+1,targetAlign:T,lastTop:_}))}},[n,e.current]),function(v){if(v==null){S();return}if(B.cancel(g.current),typeof v=="number")c(v);else if(v&&Pe(v)==="object"){var m,h=v.align;"index"in v?m=v.index:m=l.findIndex(function(y){return d(y)===v.key});var f=v.offset,M=f===void 0?0:f;s({times:0,index:m,offset:M,originAlign:h})}}}function Ht(e,l,r){var u=e.length,d=l.length,a,c;if(u===0&&d===0)return null;u<d?(a=e,c=l):(a=l,c=e);var S={__EMPTY_ITEM__:!0};function g(m){return m!==void 0?r(m):S}for(var b=null,R=Math.abs(u-d)!==1,n=0;n<c.length;n+=1){var s=g(a[n]),v=g(c[n]);if(s!==v){b=n,R=R||s!==g(c[n+1]);break}}return b===null?null:{index:b,multiple:R}}function Tt(e,l,r){var u=t.useState(e),d=H(u,2),a=d[0],c=d[1],S=t.useState(null),g=H(S,2),b=g[0],R=g[1];return t.useEffect(function(){var n=Ht(a||[],e||[],l);(n==null?void 0:n.index)!==void 0&&(r==null||r(n.index),R(e[n.index])),c(e)},[e]),[b]}var qe=(typeof navigator>"u"?"undefined":Pe(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const rt=function(e,l){var r=t.useRef(!1),u=t.useRef(null);function d(){clearTimeout(u.current),r.current=!0,u.current=setTimeout(function(){r.current=!1},50)}var a=t.useRef({top:e,bottom:l});return a.current.top=e,a.current.bottom=l,function(c){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,g=c<0&&a.current.top||c>0&&a.current.bottom;return S&&g?(clearTimeout(u.current),r.current=!1):(!g||r.current)&&d(),!r.current&&g}};function Ct(e,l,r,u,d){var a=t.useRef(0),c=t.useRef(null),S=t.useRef(null),g=t.useRef(!1),b=rt(l,r);function R(f,M){B.cancel(c.current),a.current+=M,S.current=M,!b(M)&&(qe||f.preventDefault(),c.current=B(function(){var y=g.current?10:1;d(a.current*y),a.current=0}))}function n(f,M){d(M,!0),qe||f.preventDefault()}var s=t.useRef(null),v=t.useRef(null);function m(f){if(e){B.cancel(v.current),v.current=B(function(){s.current=null},2);var M=f.deltaX,y=f.deltaY,T=f.shiftKey,_=M,W=y;(s.current==="sx"||!s.current&&T&&y&&!M)&&(_=y,W=0,s.current="sx");var X=Math.abs(_),x=Math.abs(W);s.current===null&&(s.current=u&&X>x?"x":"y"),s.current==="y"?R(f,W):n(f,_)}}function h(f){e&&(g.current=f.detail===S.current)}return[m,h]}var Dt=14/15;function Pt(e,l,r){var u=t.useRef(!1),d=t.useRef(0),a=t.useRef(null),c=t.useRef(null),S,g=function(s){if(u.current){var v=Math.ceil(s.touches[0].pageY),m=d.current-v;d.current=v,r(m)&&s.preventDefault(),clearInterval(c.current),c.current=setInterval(function(){m*=Dt,(!r(m,!0)||Math.abs(m)<=.1)&&clearInterval(c.current)},16)}},b=function(){u.current=!1,S()},R=function(s){S(),s.touches.length===1&&!u.current&&(u.current=!0,d.current=Math.ceil(s.touches[0].pageY),a.current=s.target,a.current.addEventListener("touchmove",g),a.current.addEventListener("touchend",b))};S=function(){a.current&&(a.current.removeEventListener("touchmove",g),a.current.removeEventListener("touchend",b))},Re(function(){return e&&l.current.addEventListener("touchstart",R),function(){var n;(n=l.current)===null||n===void 0||n.removeEventListener("touchstart",R),S(),clearInterval(c.current)}},[e])}var It=20;function Je(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=e/l*e;return isNaN(r)&&(r=0),r=Math.max(r,It),Math.floor(r)}function kt(e,l,r,u){var d=t.useMemo(function(){return[new Map,[]]},[e,r.id,u]),a=H(d,2),c=a[0],S=a[1],g=function(R){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:R,s=c.get(R),v=c.get(n);if(s===void 0||v===void 0)for(var m=e.length,h=S.length;h<m;h+=1){var f,M=e[h],y=l(M);c.set(y,h);var T=(f=r.get(y))!==null&&f!==void 0?f:u;if(S[h]=(S[h-1]||0)+T,y===R&&(s=h),y===n&&(v=h),s!==void 0&&v!==void 0)break}return{top:S[s-1]||0,bottom:S[v]}};return g}var Ot=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles"],$t=[],Nt={overflowY:"auto",overflowAnchor:"none"};function Yt(e,l){var r=e.prefixCls,u=r===void 0?"rc-virtual-list":r,d=e.className,a=e.height,c=e.itemHeight,S=e.fullHeight,g=S===void 0?!0:S,b=e.style,R=e.data,n=e.children,s=e.itemKey,v=e.virtual,m=e.direction,h=e.scrollWidth,f=e.component,M=f===void 0?"div":f,y=e.onScroll,T=e.onVirtualScroll,_=e.onVisibleChange,W=e.innerProps,X=e.extraRender,x=e.styles,j=Mt(e,Ot),P=!!(v!==!1&&a&&c),I=P&&R&&(c*R.length>a||!!h),k=m==="rtl",Q=be(u,D({},"".concat(u,"-rtl"),k),d),E=R||$t,$=t.useRef(),ee=t.useRef(),te=t.useState(0),G=H(te,2),C=G[0],U=G[1],oe=t.useState(0),Z=H(oe,2),re=Z[0],q=Z[1],le=t.useState(!1),ue=H(le,2),pe=ue[0],K=ue[1],O=function(){K(!0)},F=function(){K(!1)},w=t.useCallback(function(i){return typeof s=="function"?s(i):i==null?void 0:i[s]},[s]),L={getKey:w};function N(i){U(function(o){var p;typeof i=="function"?p=i(o):p=i;var z=ut(p);return $.current.scrollTop=z,z})}var ce=t.useRef({start:0,end:E.length}),se=t.useRef(),fe=Tt(E,w),Me=H(fe,1),ye=Me[0];se.current=ye;var xe=zt(w,null,null),ne=H(xe,4),ve=ne[0],de=ne[1],ae=ne[2],Ee=ne[3],V=t.useMemo(function(){if(!P)return{scrollHeight:void 0,start:0,end:E.length-1,offset:void 0};if(!I){var i;return{scrollHeight:((i=ee.current)===null||i===void 0?void 0:i.offsetHeight)||0,start:0,end:E.length-1,offset:void 0}}for(var o=0,p,z,J,gt=E.length,me=0;me<gt;me+=1){var mt=E[me],Rt=w(mt),Ke=ae.get(Rt),De=o+(Ke===void 0?c:Ke);De>=C&&p===void 0&&(p=me,z=o),De>C+a&&J===void 0&&(J=me),o=De}return p===void 0&&(p=0,z=0,J=Math.ceil(a/c)),J===void 0&&(J=E.length-1),J=Math.min(J+1,E.length-1),{scrollHeight:o,start:p,end:J,offset:z}},[I,P,C,E,Ee,a]),ie=V.scrollHeight,he=V.start,Se=V.end,Ie=V.offset;ce.current.start=he,ce.current.end=Se;var nt=t.useState({width:0,height:a}),ke=H(nt,2),A=ke[0],at=ke[1],it=function(o){at({width:o.width||o.offsetWidth,height:o.height||o.offsetHeight})},Oe=t.useRef(),$e=t.useRef(),ot=t.useMemo(function(){return Je(A.width,h)},[A.width,h]),lt=t.useMemo(function(){return Je(A.height,ie)},[A.height,ie]),we=ie-a,ze=t.useRef(we);ze.current=we;function ut(i){var o=i;return Number.isNaN(ze.current)||(o=Math.min(o,ze.current)),o=Math.max(o,0),o}var Ne=C<=0,Ye=C>=we,ct=rt(Ne,Ye),_e=function(){return{x:k?-re:re,y:C}},Le=t.useRef(_e()),He=Ge(function(){if(T){var i=_e();(Le.current.x!==i.x||Le.current.y!==i.y)&&(T(i),Le.current=i)}});function Fe(i,o){var p=i;o?(Ae.flushSync(function(){q(p)}),He()):N(p)}function st(i){var o=i.currentTarget.scrollTop;o!==C&&N(o),y==null||y(i),He()}var Te=function(o){var p=o,z=h-A.width;return p=Math.max(p,0),p=Math.min(p,z),p},ft=Ge(function(i,o){o?(Ae.flushSync(function(){q(function(p){var z=p+(k?-i:i);return Te(z)})}),He()):N(function(p){var z=p+i;return z})}),vt=Ct(P,Ne,Ye,!!h,ft),We=H(vt,2),Ce=We[0],Xe=We[1];Pt(P,$,function(i,o){return ct(i,o)?!1:(Ce({preventDefault:function(){},deltaY:i}),!0)}),Re(function(){function i(p){P&&p.preventDefault()}var o=$.current;return o.addEventListener("wheel",Ce),o.addEventListener("DOMMouseScroll",Xe),o.addEventListener("MozMousePixelScroll",i),function(){o.removeEventListener("wheel",Ce),o.removeEventListener("DOMMouseScroll",Xe),o.removeEventListener("MozMousePixelScroll",i)}},[P]),Re(function(){h&&q(function(i){return Te(i)})},[A.width,h]);var Ve=function(){var o,p;(o=Oe.current)===null||o===void 0||o.delayHidden(),(p=$e.current)===null||p===void 0||p.delayHidden()},Be=Lt($,E,ae,c,w,function(){return de(!0)},N,Ve);t.useImperativeHandle(l,function(){return{getScrollInfo:_e,scrollTo:function(o){function p(z){return z&&Pe(z)==="object"&&("left"in z||"top"in z)}p(o)?(o.left!==void 0&&q(Te(o.left)),Be(o.top)):Be(o)}}}),Re(function(){if(_){var i=E.slice(he,Se+1);_(i,E)}},[he,Se,E]);var dt=kt(E,w,ae,c),ht=X==null?void 0:X({start:he,end:Se,virtual:I,offsetX:re,offsetY:Ie,rtl:k,getSize:dt}),St=Et(E,he,Se,h,ve,n,L),ge=null;a&&(ge=Y(D({},g?"height":"maxHeight",a),Nt),P&&(ge.overflowY="hidden",h&&(ge.overflowX="hidden"),pe&&(ge.pointerEvents="none")));var je={};return k&&(je.dir="rtl"),t.createElement("div",Qe({style:Y(Y({},b),{},{position:"relative"}),className:Q},je,j),t.createElement(et,{onResize:it},t.createElement(M,{className:"".concat(u,"-holder"),style:ge,ref:$,onScroll:st,onMouseEnter:Ve},t.createElement(tt,{prefixCls:u,height:ie,offsetX:re,offsetY:Ie,scrollWidth:h,onInnerResize:de,ref:ee,innerProps:W,rtl:k,extra:ht},St))),I&&ie>a&&t.createElement(Ze,{ref:Oe,prefixCls:u,scrollOffset:C,scrollRange:ie,rtl:k,onScroll:Fe,onStartMove:O,onStopMove:F,spinSize:lt,containerSize:A.height,style:x==null?void 0:x.verticalScrollBar,thumbStyle:x==null?void 0:x.verticalScrollBarThumb}),I&&h>A.width&&t.createElement(Ze,{ref:$e,prefixCls:u,scrollOffset:re,scrollRange:h,rtl:k,onScroll:Fe,onStartMove:O,onStopMove:F,spinSize:ot,containerSize:A.width,horizontal:!0,style:x==null?void 0:x.horizontalScrollBar,thumbStyle:x==null?void 0:x.horizontalScrollBarThumb}))}var Ft=t.forwardRef(Yt);Ft.displayName="List";export{Ft as L};
