import{r as t,v as Y,q as D,cJ as Qe,t as et,p as Me,o as H,cK as B,cy as bt,cw as Mt,cL as pt,be as Re,bb as Pe,_ as yt,cM as Ae,c5 as Ge}from"./index-7bcec0ef.js";var tt=t.forwardRef(function(e,o){var r=e.height,u=e.offsetY,d=e.offsetX,a=e.children,c=e.prefixCls,S=e.onInnerResize,g=e.innerProps,M=e.rtl,R=e.extra,n={},s={display:"flex",flexDirection:"column"};return u!==void 0&&(n={height:r,position:"relative",overflow:"hidden"},s=Y(Y({},s),{},D(D(D(D(D({transform:"translateY(".concat(u,"px)")},M?"marginRight":"marginLeft",-d),"position","absolute"),"left",0),"right",0),"top",0))),t.createElement("div",{style:n},t.createElement(Qe,{onResize:function(m){var h=m.offsetHeight;h&&S&&S()}},t.createElement("div",et({style:s,className:Me(D({},"".concat(c,"-holder-inner"),c)),ref:o},g),a,R)))});tt.displayName="Filler";function Ue(e,o){var r="touches"in e?e.touches[0]:e;return r[o?"pageX":"pageY"]}var qe=t.forwardRef(function(e,o){var r=e.prefixCls,u=e.rtl,d=e.scrollOffset,a=e.scrollRange,c=e.onStartMove,S=e.onStopMove,g=e.onScroll,M=e.horizontal,R=e.spinSize,n=e.containerSize,s=e.style,v=e.thumbStyle,m=t.useState(!1),h=H(m,2),f=h[0],p=h[1],y=t.useState(null),T=H(y,2),_=T[0],W=T[1],X=t.useState(null),x=H(X,2),K=x[0],P=x[1],I=!u,k=t.useRef(),Q=t.useRef(),E=t.useState(!1),$=H(E,2),ee=$[0],te=$[1],G=t.useRef(),C=function(){clearTimeout(G.current),te(!0),G.current=setTimeout(function(){te(!1)},3e3)},U=a-n||0,le=n-R||0,q=t.useMemo(function(){if(d===0||U===0)return 0;var w=d/U;return w*le},[d,U,le]),re=function(L){L.stopPropagation(),L.preventDefault()},J=t.useRef({top:q,dragging:f,pageY:_,startTop:K});J.current={top:q,dragging:f,pageY:_,startTop:K};var oe=function(L){p(!0),W(Ue(L,M)),P(J.current.top),c(),L.stopPropagation(),L.preventDefault()};t.useEffect(function(){var w=function(se){se.preventDefault()},L=k.current,N=Q.current;return L.addEventListener("touchstart",w),N.addEventListener("touchstart",oe),function(){L.removeEventListener("touchstart",w),N.removeEventListener("touchstart",oe)}},[]);var ue=t.useRef();ue.current=U;var be=t.useRef();be.current=le,t.useEffect(function(){if(f){var w,L=function(se){var fe=J.current,pe=fe.dragging,ye=fe.pageY,xe=fe.startTop;if(B.cancel(w),pe){var ne=Ue(se,M)-ye,ve=xe;!I&&M?ve-=ne:ve+=ne;var de=ue.current,ae=be.current,Ee=ae?ve/ae:0,V=Math.ceil(Ee*de);V=Math.max(V,0),V=Math.min(V,de),w=B(function(){g(V,M)})}},N=function(){p(!1),S()};return window.addEventListener("mousemove",L),window.addEventListener("touchmove",L),window.addEventListener("mouseup",N),window.addEventListener("touchend",N),function(){window.removeEventListener("mousemove",L),window.removeEventListener("touchmove",L),window.removeEventListener("mouseup",N),window.removeEventListener("touchend",N),B.cancel(w)}}},[f]),t.useEffect(function(){C()},[d]),t.useImperativeHandle(o,function(){return{delayHidden:C}});var j="".concat(r,"-scrollbar"),O={position:"absolute",visibility:ee?null:"hidden"},F={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return M?(O.height=8,O.left=0,O.right=0,O.bottom=0,F.height="100%",F.width=R,I?F.left=q:F.right=q):(O.width=8,O.top=0,O.bottom=0,I?O.right=0:O.left=0,F.width="100%",F.height=R,F.top=q),t.createElement("div",{ref:k,className:Me(j,D(D(D({},"".concat(j,"-horizontal"),M),"".concat(j,"-vertical"),!M),"".concat(j,"-visible"),ee)),style:Y(Y({},O),s),onMouseDown:re,onMouseMove:C},t.createElement("div",{ref:Q,className:Me("".concat(j,"-thumb"),D({},"".concat(j,"-thumb-moving"),f)),style:Y(Y({},F),v),onMouseDown:oe}))});function xt(e){var o=e.children,r=e.setRef,u=t.useCallback(function(d){r(d)},[]);return t.cloneElement(o,{ref:u})}function Et(e,o,r,u,d,a,c){var S=c.getKey;return e.slice(o,r+1).map(function(g,M){var R=o+M,n=a(g,R,{style:{width:u}}),s=S(g);return t.createElement(xt,{key:s,setRef:function(m){return d(g,m)}},n)})}var wt=function(){function e(){Mt(this,e),D(this,"maps",void 0),D(this,"id",0),this.maps=Object.create(null)}return bt(e,[{key:"set",value:function(r,u){this.maps[r]=u,this.id+=1}},{key:"get",value:function(r){return this.maps[r]}}]),e}();function zt(e,o,r){var u=t.useState(0),d=H(u,2),a=d[0],c=d[1],S=t.useRef(new Map),g=t.useRef(new wt),M=t.useRef();function R(){B.cancel(M.current)}function n(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;R();var m=function(){S.current.forEach(function(f,p){if(f&&f.offsetParent){var y=pt(f),T=y.offsetHeight;g.current.get(p)!==T&&g.current.set(p,y.offsetHeight)}}),c(function(f){return f+1})};v?m():M.current=B(m)}function s(v,m){var h=e(v),f=S.current.get(h);m?(S.current.set(h,m),n()):S.current.delete(h),!f!=!m&&(m?o==null||o(v):r==null||r(v))}return t.useEffect(function(){return R},[]),[s,n,g.current,a]}var _t=10;function Lt(e,o,r,u,d,a,c,S){var g=t.useRef(),M=t.useState(null),R=H(M,2),n=R[0],s=R[1];return Re(function(){if(n&&n.times<_t){if(!e.current){s(function(U){return Y({},U)});return}a();var v=n.targetAlign,m=n.originAlign,h=n.index,f=n.offset,p=e.current.clientHeight,y=!1,T=v,_=null;if(p){for(var W=v||m,X=0,x=0,K=0,P=Math.min(o.length-1,h),I=0;I<=P;I+=1){var k=d(o[I]);x=X;var Q=r.get(k);K=x+(Q===void 0?u:Q),X=K}for(var E=W==="top"?f:p-f,$=P;$>=0;$-=1){var ee=d(o[$]),te=r.get(ee);if(te===void 0){y=!0;break}if(E-=te,E<=0)break}switch(W){case"top":_=x-f;break;case"bottom":_=K-p+f;break;default:{var G=e.current.scrollTop,C=G+p;x<G?T="top":K>C&&(T="bottom")}}_!==null&&c(_),_!==n.lastTop&&(y=!0)}y&&s(Y(Y({},n),{},{times:n.times+1,targetAlign:T,lastTop:_}))}},[n,e.current]),function(v){if(v==null){S();return}if(B.cancel(g.current),typeof v=="number")c(v);else if(v&&Pe(v)==="object"){var m,h=v.align;"index"in v?m=v.index:m=o.findIndex(function(y){return d(y)===v.key});var f=v.offset,p=f===void 0?0:f;s({times:0,index:m,offset:p,originAlign:h})}}}function Ht(e,o,r){var u=e.length,d=o.length,a,c;if(u===0&&d===0)return null;u<d?(a=e,c=o):(a=o,c=e);var S={__EMPTY_ITEM__:!0};function g(m){return m!==void 0?r(m):S}for(var M=null,R=Math.abs(u-d)!==1,n=0;n<c.length;n+=1){var s=g(a[n]),v=g(c[n]);if(s!==v){M=n,R=R||s!==g(c[n+1]);break}}return M===null?null:{index:M,multiple:R}}function Tt(e,o,r){var u=t.useState(e),d=H(u,2),a=d[0],c=d[1],S=t.useState(null),g=H(S,2),M=g[0],R=g[1];return t.useEffect(function(){var n=Ht(a||[],e||[],o);(n==null?void 0:n.index)!==void 0&&(r==null||r(n.index),R(e[n.index])),c(e)},[e]),[M]}var Je=(typeof navigator>"u"?"undefined":Pe(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const rt=function(e,o){var r=t.useRef(!1),u=t.useRef(null);function d(){clearTimeout(u.current),r.current=!0,u.current=setTimeout(function(){r.current=!1},50)}var a=t.useRef({top:e,bottom:o});return a.current.top=e,a.current.bottom=o,function(c){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,g=c<0&&a.current.top||c>0&&a.current.bottom;return S&&g?(clearTimeout(u.current),r.current=!1):(!g||r.current)&&d(),!r.current&&g}};function Ct(e,o,r,u,d){var a=t.useRef(0),c=t.useRef(null),S=t.useRef(null),g=t.useRef(!1),M=rt(o,r);function R(f,p){B.cancel(c.current),a.current+=p,S.current=p,!M(p)&&(Je||f.preventDefault(),c.current=B(function(){var y=g.current?10:1;d(a.current*y),a.current=0}))}function n(f,p){d(p,!0),Je||f.preventDefault()}var s=t.useRef(null),v=t.useRef(null);function m(f){if(e){B.cancel(v.current),v.current=B(function(){s.current=null},2);var p=f.deltaX,y=f.deltaY,T=f.shiftKey,_=p,W=y;(s.current==="sx"||!s.current&&T&&y&&!p)&&(_=y,W=0,s.current="sx");var X=Math.abs(_),x=Math.abs(W);s.current===null&&(s.current=u&&X>x?"x":"y"),s.current==="y"?R(f,W):n(f,_)}}function h(f){e&&(g.current=f.detail===S.current)}return[m,h]}var Dt=14/15;function Pt(e,o,r){var u=t.useRef(!1),d=t.useRef(0),a=t.useRef(null),c=t.useRef(null),S,g=function(s){if(u.current){var v=Math.ceil(s.touches[0].pageY),m=d.current-v;d.current=v,r(m)&&s.preventDefault(),clearInterval(c.current),c.current=setInterval(function(){m*=Dt,(!r(m,!0)||Math.abs(m)<=.1)&&clearInterval(c.current)},16)}},M=function(){u.current=!1,S()},R=function(s){S(),s.touches.length===1&&!u.current&&(u.current=!0,d.current=Math.ceil(s.touches[0].pageY),a.current=s.target,a.current.addEventListener("touchmove",g),a.current.addEventListener("touchend",M))};S=function(){a.current&&(a.current.removeEventListener("touchmove",g),a.current.removeEventListener("touchend",M))},Re(function(){return e&&o.current.addEventListener("touchstart",R),function(){var n;(n=o.current)===null||n===void 0||n.removeEventListener("touchstart",R),S(),clearInterval(c.current)}},[e])}var It=20;function Ze(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=e/o*e;return isNaN(r)&&(r=0),r=Math.max(r,It),Math.floor(r)}function kt(e,o,r,u){var d=t.useMemo(function(){return[new Map,[]]},[e,r.id,u]),a=H(d,2),c=a[0],S=a[1],g=function(R){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:R,s=c.get(R),v=c.get(n);if(s===void 0||v===void 0)for(var m=e.length,h=S.length;h<m;h+=1){var f,p=e[h],y=o(p);c.set(y,h);var T=(f=r.get(y))!==null&&f!==void 0?f:u;if(S[h]=(S[h-1]||0)+T,y===R&&(s=h),y===n&&(v=h),s!==void 0&&v!==void 0)break}return{top:S[s-1]||0,bottom:S[v]}};return g}var Ot=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles"],$t=[],Nt={overflowY:"auto",overflowAnchor:"none"};function Yt(e,o){var r=e.prefixCls,u=r===void 0?"rc-virtual-list":r,d=e.className,a=e.height,c=e.itemHeight,S=e.fullHeight,g=S===void 0?!0:S,M=e.style,R=e.data,n=e.children,s=e.itemKey,v=e.virtual,m=e.direction,h=e.scrollWidth,f=e.component,p=f===void 0?"div":f,y=e.onScroll,T=e.onVirtualScroll,_=e.onVisibleChange,W=e.innerProps,X=e.extraRender,x=e.styles,K=yt(e,Ot),P=!!(v!==!1&&a&&c),I=P&&R&&(c*R.length>a||!!h),k=m==="rtl",Q=Me(u,D({},"".concat(u,"-rtl"),k),d),E=R||$t,$=t.useRef(),ee=t.useRef(),te=t.useState(0),G=H(te,2),C=G[0],U=G[1],le=t.useState(0),q=H(le,2),re=q[0],J=q[1],oe=t.useState(!1),ue=H(oe,2),be=ue[0],j=ue[1],O=function(){j(!0)},F=function(){j(!1)},w=t.useCallback(function(i){return typeof s=="function"?s(i):i==null?void 0:i[s]},[s]),L={getKey:w};function N(i){U(function(l){var b;typeof i=="function"?b=i(l):b=i;var z=ut(b);return $.current.scrollTop=z,z})}var ce=t.useRef({start:0,end:E.length}),se=t.useRef(),fe=Tt(E,w),pe=H(fe,1),ye=pe[0];se.current=ye;var xe=zt(w,null,null),ne=H(xe,4),ve=ne[0],de=ne[1],ae=ne[2],Ee=ne[3],V=t.useMemo(function(){if(!P)return{scrollHeight:void 0,start:0,end:E.length-1,offset:void 0};if(!I){var i;return{scrollHeight:((i=ee.current)===null||i===void 0?void 0:i.offsetHeight)||0,start:0,end:E.length-1,offset:void 0}}for(var l=0,b,z,Z,gt=E.length,me=0;me<gt;me+=1){var mt=E[me],Rt=w(mt),je=ae.get(Rt),De=l+(je===void 0?c:je);De>=C&&b===void 0&&(b=me,z=l),De>C+a&&Z===void 0&&(Z=me),l=De}return b===void 0&&(b=0,z=0,Z=Math.ceil(a/c)),Z===void 0&&(Z=E.length-1),Z=Math.min(Z+1,E.length-1),{scrollHeight:l,start:b,end:Z,offset:z}},[I,P,C,E,Ee,a]),ie=V.scrollHeight,he=V.start,Se=V.end,Ie=V.offset;ce.current.start=he,ce.current.end=Se;var nt=t.useState({width:0,height:a}),ke=H(nt,2),A=ke[0],at=ke[1],it=function(l){at({width:l.width||l.offsetWidth,height:l.height||l.offsetHeight})},Oe=t.useRef(),$e=t.useRef(),lt=t.useMemo(function(){return Ze(A.width,h)},[A.width,h]),ot=t.useMemo(function(){return Ze(A.height,ie)},[A.height,ie]),we=ie-a,ze=t.useRef(we);ze.current=we;function ut(i){var l=i;return Number.isNaN(ze.current)||(l=Math.min(l,ze.current)),l=Math.max(l,0),l}var Ne=C<=0,Ye=C>=we,ct=rt(Ne,Ye),_e=function(){return{x:k?-re:re,y:C}},Le=t.useRef(_e()),He=Ae(function(){if(T){var i=_e();(Le.current.x!==i.x||Le.current.y!==i.y)&&(T(i),Le.current=i)}});function Fe(i,l){var b=i;l?(Ge.flushSync(function(){J(b)}),He()):N(b)}function st(i){var l=i.currentTarget.scrollTop;l!==C&&N(l),y==null||y(i),He()}var Te=function(l){var b=l,z=h-A.width;return b=Math.max(b,0),b=Math.min(b,z),b},ft=Ae(function(i,l){l?(Ge.flushSync(function(){J(function(b){var z=b+(k?-i:i);return Te(z)})}),He()):N(function(b){var z=b+i;return z})}),vt=Ct(P,Ne,Ye,!!h,ft),We=H(vt,2),Ce=We[0],Xe=We[1];Pt(P,$,function(i,l){return ct(i,l)?!1:(Ce({preventDefault:function(){},deltaY:i}),!0)}),Re(function(){function i(b){P&&b.preventDefault()}var l=$.current;return l.addEventListener("wheel",Ce),l.addEventListener("DOMMouseScroll",Xe),l.addEventListener("MozMousePixelScroll",i),function(){l.removeEventListener("wheel",Ce),l.removeEventListener("DOMMouseScroll",Xe),l.removeEventListener("MozMousePixelScroll",i)}},[P]),Re(function(){h&&J(function(i){return Te(i)})},[A.width,h]);var Ve=function(){var l,b;(l=Oe.current)===null||l===void 0||l.delayHidden(),(b=$e.current)===null||b===void 0||b.delayHidden()},Be=Lt($,E,ae,c,w,function(){return de(!0)},N,Ve);t.useImperativeHandle(o,function(){return{getScrollInfo:_e,scrollTo:function(l){function b(z){return z&&Pe(z)==="object"&&("left"in z||"top"in z)}b(l)?(l.left!==void 0&&J(Te(l.left)),Be(l.top)):Be(l)}}}),Re(function(){if(_){var i=E.slice(he,Se+1);_(i,E)}},[he,Se,E]);var dt=kt(E,w,ae,c),ht=X==null?void 0:X({start:he,end:Se,virtual:I,offsetX:re,offsetY:Ie,rtl:k,getSize:dt}),St=Et(E,he,Se,h,ve,n,L),ge=null;a&&(ge=Y(D({},g?"height":"maxHeight",a),Nt),P&&(ge.overflowY="hidden",h&&(ge.overflowX="hidden"),be&&(ge.pointerEvents="none")));var Ke={};return k&&(Ke.dir="rtl"),t.createElement("div",et({style:Y(Y({},M),{},{position:"relative"}),className:Q},Ke,K),t.createElement(Qe,{onResize:it},t.createElement(p,{className:"".concat(u,"-holder"),style:ge,ref:$,onScroll:st,onMouseEnter:Ve},t.createElement(tt,{prefixCls:u,height:ie,offsetX:re,offsetY:Ie,scrollWidth:h,onInnerResize:de,ref:ee,innerProps:W,rtl:k,extra:ht},St))),I&&ie>a&&t.createElement(qe,{ref:Oe,prefixCls:u,scrollOffset:C,scrollRange:ie,rtl:k,onScroll:Fe,onStartMove:O,onStopMove:F,spinSize:ot,containerSize:A.height,style:x==null?void 0:x.verticalScrollBar,thumbStyle:x==null?void 0:x.verticalScrollBarThumb}),I&&h>A.width&&t.createElement(qe,{ref:$e,prefixCls:u,scrollOffset:re,scrollRange:h,rtl:k,onScroll:Fe,onStartMove:O,onStopMove:F,spinSize:lt,containerSize:A.width,horizontal:!0,style:x==null?void 0:x.horizontalScrollBar,thumbStyle:x==null?void 0:x.horizontalScrollBarThumb}))}var Ft=t.forwardRef(Yt);Ft.displayName="List";export{Ft as L};
