import{b7 as ne,d as f,r as ie,j as R}from"./index-4c9f8422.js";import{C as ae,D as re,F as oe,w as se,H as le,I,b as D,A as k,f as P,g as B,u as he,J as ue,c as ce,S as de,K as me,G as $,M as H,T as N,R as fe}from"./Rectangle-53553a31.js";import{a as ve,b as V,c as pe,d as ye,e as ge,f as be,h as xe,i as O,g as Ae}from"./_baseAssignValue-c42b89aa.js";import{_ as Ee,a as Oe,b as ze}from"./_baseClone-2b689ef3.js";import{P as we}from"./Polygon-cfcceeb5.js";import"./index-74b21621.js";var _e=ve,Ce=ae;function Se(i,t){return t.length<2?i:_e(i,Ce(t,0,-1))}var Le=Se,Ie=V,De=re,Ne=Le,Te=pe;function je(i,t){return t=Ie(t,i),i=Ne(i,t),i==null||delete i[Te(De(t))]}var Fe=je,Me=ye;function Ke(i){return Me(i)?void 0:i}var Re=Ke,ke=oe;function Pe(i){var t=i==null?0:i.length;return t?ke(i,1):[]}var Be=Pe,$e=Be,Ge=ge,Ue=be;function We(i){return Ue(Ge(i,void 0,$e),i+"")}var He=We,Ve=xe,qe=ze,Ye=Fe,Xe=V,Je=Ee,Ze=Re,Qe=He,et=Oe,tt=1,nt=2,it=4,at=Qe(function(i,t){var a={};if(i==null)return a;var e=!1;t=Ve(t,function(r){return r=Xe(r,i),e||(e=r.length>1),r}),Je(i,et(i),a),e&&(a=qe(a,tt|nt|it,Ze));for(var n=t.length;n--;)Ye(a,t[n]);return a}),rt=at;const ot=ne(rt);var st=["#1890FF","#66B5FF","#41D9C7","#2FC25B","#6EDB8F","#9AE65C","#FACC14","#E6965C","#57AD71","#223273","#738AE6","#7564CC","#8543E0","#A877ED","#5C8EE6","#13C2C2","#70E0E0","#5CA3E6","#3436C7","#8082FF","#DD81E6","#F04864","#FA7D92","#D598D9"],lt=["width","height","className","style","children","type"];function b(i){"@babel/helpers - typeof";return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(i)}function z(){return z=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(i[e]=a[e])}return i},z.apply(this,arguments)}function ht(i,t){if(i==null)return{};var a=ut(i,t),e,n;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);for(n=0;n<r.length;n++)e=r[n],!(t.indexOf(e)>=0)&&Object.prototype.propertyIsEnumerable.call(i,e)&&(a[e]=i[e])}return a}function ut(i,t){if(i==null)return{};var a={};for(var e in i)if(Object.prototype.hasOwnProperty.call(i,e)){if(t.indexOf(e)>=0)continue;a[e]=i[e]}return a}function ct(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function G(i,t){for(var a=0;a<t.length;a++){var e=t[a];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(i,Y(e.key),e)}}function dt(i,t,a){return t&&G(i.prototype,t),a&&G(i,a),Object.defineProperty(i,"prototype",{writable:!1}),i}function mt(i,t,a){return t=w(t),ft(i,q()?Reflect.construct(t,a||[],w(i).constructor):t.apply(i,a))}function ft(i,t){if(t&&(b(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vt(i)}function vt(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function q(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(q=function(){return!!i})()}function w(i){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},w(i)}function pt(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),t&&F(i,t)}function F(i,t){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e},F(i,t)}function U(i,t){var a=Object.keys(i);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(i);t&&(e=e.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),a.push.apply(a,e)}return a}function d(i){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?U(Object(a),!0).forEach(function(e){y(i,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(a)):U(Object(a)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(a,e))})}return i}function y(i,t,a){return t=Y(t),t in i?Object.defineProperty(i,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[t]=a,i}function Y(i){var t=yt(i,"string");return b(t)=="symbol"?t:t+""}function yt(i,t){if(b(i)!="object"||!i)return i;var a=i[Symbol.toPrimitive];if(a!==void 0){var e=a.call(i,t||"default");if(b(e)!="object")return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(i)}var x="value",T=function i(t){var a=t.depth,e=t.node,n=t.index,r=t.valueKey,o=e.children,s=a+1,l=o&&o.length?o.map(function(u,c){return i({depth:s,node:u,index:c,valueKey:r})}):null,h;return o&&o.length?h=l.reduce(function(u,c){return u+c[x]},0):h=H(e[r])||e[r]<=0?0:e[r],d(d({},e),{},y(y(y({children:l},x,h),"depth",a),"index",n))},gt=function(t){return{x:t.x,y:t.y,width:t.width,height:t.height}},bt=function(t,a){var e=a<0?0:a;return t.map(function(n){var r=n[x]*e;return d(d({},n),{},{area:H(r)||r<=0?0:r})})},xt=function(t,a,e){var n=a*a,r=t.area*t.area,o=t.reduce(function(h,u){return{min:Math.min(h.min,u.area),max:Math.max(h.max,u.area)}},{min:1/0,max:0}),s=o.min,l=o.max;return r?Math.max(n*l*e/r,r/(n*s*e)):1/0},At=function(t,a,e,n){var r=a?Math.round(t.area/a):0;(n||r>e.height)&&(r=e.height);for(var o=e.x,s,l=0,h=t.length;l<h;l++)s=t[l],s.x=o,s.y=e.y,s.height=r,s.width=Math.min(r?Math.round(s.area/r):0,e.x+e.width-o),o+=s.width;return s.width+=e.x+e.width-o,d(d({},e),{},{y:e.y+r,height:e.height-r})},Et=function(t,a,e,n){var r=a?Math.round(t.area/a):0;(n||r>e.width)&&(r=e.width);for(var o=e.y,s,l=0,h=t.length;l<h;l++)s=t[l],s.x=e.x,s.y=o,s.width=r,s.height=Math.min(r?Math.round(s.area/r):0,e.y+e.height-o),o+=s.height;return s&&(s.height+=e.y+e.height-o),d(d({},e),{},{x:e.x+r,width:e.width-r})},W=function(t,a,e,n){return a===e.width?At(t,a,e,n):Et(t,a,e,n)},j=function i(t,a){var e=t.children;if(e&&e.length){var n=gt(t),r=[],o=1/0,s,l,h=Math.min(n.width,n.height),u=bt(e,n.width*n.height/t[x]),c=u.slice();for(r.area=0;c.length>0;)r.push(s=c[0]),r.area+=s.area,l=xt(r,h,a),l<=o?(c.shift(),o=l):(r.area-=r.pop().area,n=W(r,h,n,!1),h=Math.min(n.width,n.height),r.length=r.area=0,o=1/0);return r.length&&(n=W(r,h,n,!0),r.length=r.area=0),d(d({},t),{},{children:u.map(function(m){return i(m,a)})})}return t},Ot={isTooltipActive:!1,isAnimationFinished:!1,activeNode:null,formatRoot:null,currentRoot:null,nestIndex:[]},M=function(i){function t(){var a;ct(this,t);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return a=mt(this,t,[].concat(n)),y(a,"state",d({},Ot)),y(a,"handleAnimationEnd",function(){var o=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),O(o)&&o()}),y(a,"handleAnimationStart",function(){var o=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),O(o)&&o()}),a}return pt(t,i),dt(t,[{key:"handleMouseEnter",value:function(e,n){n.persist();var r=this.props,o=r.onMouseEnter,s=r.children,l=I(s,N);l?this.setState({isTooltipActive:!0,activeNode:e},function(){o&&o(e,n)}):o&&o(e,n)}},{key:"handleMouseLeave",value:function(e,n){n.persist();var r=this.props,o=r.onMouseLeave,s=r.children,l=I(s,N);l?this.setState({isTooltipActive:!1,activeNode:null},function(){o&&o(e,n)}):o&&o(e,n)}},{key:"handleClick",value:function(e){var n=this.props,r=n.onClick,o=n.type;if(o==="nest"&&e.children){var s=this.props,l=s.width,h=s.height,u=s.dataKey,c=s.aspectRatio,m=T({depth:0,node:d(d({},e),{},{x:0,y:0,width:l,height:h}),index:0,valueKey:u}),v=j(m,c),p=this.state.nestIndex;p.push(e),this.setState({formatRoot:v,currentRoot:m,nestIndex:p})}r&&r(e)}},{key:"handleNestIndex",value:function(e,n){var r=this.state.nestIndex,o=this.props,s=o.width,l=o.height,h=o.dataKey,u=o.aspectRatio,c=T({depth:0,node:d(d({},e),{},{x:0,y:0,width:s,height:l}),index:0,valueKey:h}),m=j(c,u);r=r.slice(0,n+1),this.setState({formatRoot:m,currentRoot:e,nestIndex:r})}},{key:"renderItem",value:function(e,n,r){var o=this,s=this.props,l=s.isAnimationActive,h=s.animationBegin,u=s.animationDuration,c=s.animationEasing,m=s.isUpdateAnimationActive,v=s.type,p=s.animationId,g=s.colorPanel,X=this.state.isAnimationFinished,A=n.width,_=n.height,C=n.x,S=n.y,J=n.depth,K=parseInt("".concat((Math.random()*2-1)*A),10),L={};return(r||v==="nest")&&(L={onMouseEnter:this.handleMouseEnter.bind(this,n),onMouseLeave:this.handleMouseLeave.bind(this,n),onClick:this.handleClick.bind(this,n)}),l?f.createElement(k,{begin:h,duration:u,isActive:l,easing:c,key:"treemap-".concat(p),from:{x:C,y:S,width:A,height:_},to:{x:C,y:S,width:A,height:_},onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(E){var Z=E.x,Q=E.y,ee=E.width,te=E.height;return f.createElement(k,{from:"translate(".concat(K,"px, ").concat(K,"px)"),to:"translate(0, 0)",attributeName:"transform",begin:h,easing:c,isActive:l,duration:u},f.createElement(D,L,function(){return J>2&&!X?null:o.constructor.renderContentItem(e,d(d({},n),{},{isAnimationActive:l,isUpdateAnimationActive:!m,width:ee,height:te,x:Z,y:Q}),v,g)}()))}):f.createElement(D,L,this.constructor.renderContentItem(e,d(d({},n),{},{isAnimationActive:!1,isUpdateAnimationActive:!1,width:A,height:_,x:C,y:S}),v,g))}},{key:"renderNode",value:function(e,n){var r=this,o=this.props,s=o.content,l=o.type,h=d(d(d({},P(this.props,!1)),n),{},{root:e}),u=!n.children||!n.children.length,c=this.state.currentRoot,m=(c.children||[]).filter(function(v){return v.depth===n.depth&&v.name===n.name});return!m.length&&e.depth&&l==="nest"?null:f.createElement(D,{key:"recharts-treemap-node-".concat(h.x,"-").concat(h.y,"-").concat(h.name),className:"recharts-treemap-depth-".concat(n.depth)},this.renderItem(s,h,u),n.children&&n.children.length?n.children.map(function(v){return r.renderNode(n,v)}):null)}},{key:"renderAllNodes",value:function(){var e=this.state.formatRoot;return e?this.renderNode(e,e):null}},{key:"renderTooltip",value:function(){var e=this.props,n=e.children,r=e.nameKey,o=I(n,N);if(!o)return null;var s=this.props,l=s.width,h=s.height,u=this.state,c=u.isTooltipActive,m=u.activeNode,v={x:0,y:0,width:l,height:h},p=m?{x:m.x+m.width/2,y:m.y+m.height/2}:null,g=c&&m?[{payload:m,name:B(m,r,""),value:B(m,x)}]:[];return f.cloneElement(o,{viewBox:v,active:c,coordinate:p,label:"",payload:g})}},{key:"renderNestIndex",value:function(){var e=this,n=this.props,r=n.nameKey,o=n.nestIndexContent,s=this.state.nestIndex;return f.createElement("div",{className:"recharts-treemap-nest-index-wrapper",style:{marginTop:"8px",textAlign:"center"}},s.map(function(l,h){var u=Ae(l,r,"root"),c=null;return f.isValidElement(o)&&(c=f.cloneElement(o,l,h)),O(o)?c=o(l,h):c=u,f.createElement("div",{onClick:e.handleNestIndex.bind(e,l,h),key:"nest-index-".concat(he()),className:"recharts-treemap-nest-index-box",style:{cursor:"pointer",display:"inline-block",padding:"0 7px",background:"#000",color:"#fff",marginRight:"3px"}},c)}))}},{key:"render",value:function(){if(!ue(this))return null;var e=this.props,n=e.width,r=e.height,o=e.className,s=e.style,l=e.children,h=e.type,u=ht(e,lt),c=P(u,!1);return f.createElement("div",{className:ce("recharts-wrapper",o),style:d(d({},s),{},{position:"relative",cursor:"default",width:n,height:r}),role:"region"},f.createElement(de,z({},c,{width:n,height:h==="nest"?r-30:r}),this.renderAllNodes(),me(l)),this.renderTooltip(),h==="nest"&&this.renderNestIndex())}}],[{key:"getDerivedStateFromProps",value:function(e,n){if(e.data!==n.prevData||e.type!==n.prevType||e.width!==n.prevWidth||e.height!==n.prevHeight||e.dataKey!==n.prevDataKey||e.aspectRatio!==n.prevAspectRatio){var r=T({depth:0,node:{children:e.data,x:0,y:0,width:e.width,height:e.height},index:0,valueKey:e.dataKey}),o=j(r,e.aspectRatio);return d(d({},n),{},{formatRoot:o,currentRoot:r,nestIndex:[r],prevAspectRatio:e.aspectRatio,prevData:e.data,prevWidth:e.width,prevHeight:e.height,prevDataKey:e.dataKey,prevType:e.type})}return null}},{key:"renderContentItem",value:function(e,n,r,o){if(f.isValidElement(e))return f.cloneElement(e,n);if(O(e))return e(n);var s=n.x,l=n.y,h=n.width,u=n.height,c=n.index,m=null;h>10&&u>10&&n.children&&r==="nest"&&(m=f.createElement(we,{points:[{x:s+2,y:l+u/2},{x:s+6,y:l+u/2+3},{x:s+2,y:l+u/2+6}]}));var v=null,p=se(n.name);h>20&&u>20&&p.width<h&&p.height<u&&(v=f.createElement("text",{x:s+8,y:l+u/2+7,fontSize:14},n.name));var g=o||st;return f.createElement("g",null,f.createElement(le,z({fill:n.depth<2?g[c%g.length]:"rgba(255,255,255,0)",stroke:"#fff"},ot(n,"children"),{role:"img"})),m,v)}}])}(ie.PureComponent);y(M,"displayName","Treemap");y(M,"defaultProps",{aspectRatio:.5*(1+Math.sqrt(5)),dataKey:"value",type:"flat",isAnimationActive:!$.isSsr,isUpdateAnimationActive:!$.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"linear"});const zt=[{name:"axis",children:[{name:"Axes",size:1302},{name:"Axis",size:24593},{name:"AxisGridLine",size:652},{name:"AxisLabel",size:636},{name:"CartesianAxes",size:6703}]},{name:"controls",children:[{name:"AnchorControl",size:2138},{name:"ClickControl",size:3824},{name:"Control",size:1353},{name:"ControlList",size:4665},{name:"DragControl",size:2649},{name:"ExpandControl",size:2832},{name:"HoverControl",size:4896},{name:"IControl",size:763},{name:"PanZoomControl",size:5222},{name:"SelectionControl",size:7862},{name:"TooltipControl",size:8435}]},{name:"data",children:[{name:"Data",size:20544},{name:"DataList",size:19788},{name:"DataSprite",size:10349},{name:"EdgeSprite",size:3301},{name:"NodeSprite",size:19382},{name:"render",children:[{name:"ArrowType",size:698},{name:"EdgeRenderer",size:5569},{name:"IRenderer",size:353},{name:"ShapeRenderer",size:2247}]},{name:"ScaleBinding",size:11275},{name:"Tree",size:7147},{name:"TreeBuilder",size:9930}]},{name:"events",children:[{name:"DataEvent",size:7313},{name:"SelectionEvent",size:6880},{name:"TooltipEvent",size:3701},{name:"VisualizationEvent",size:2117}]},{name:"legend",children:[{name:"Legend",size:20859},{name:"LegendItem",size:4614},{name:"LegendRange",size:10530}]},{name:"operator",children:[{name:"distortion",children:[{name:"BifocalDistortion",size:4461},{name:"Distortion",size:6314},{name:"FisheyeDistortion",size:3444}]},{name:"encoder",children:[{name:"ColorEncoder",size:3179},{name:"Encoder",size:4060},{name:"PropertyEncoder",size:4138},{name:"ShapeEncoder",size:1690},{name:"SizeEncoder",size:1830}]},{name:"filter",children:[{name:"FisheyeTreeFilter",size:5219},{name:"GraphDistanceFilter",size:3165},{name:"VisibilityFilter",size:3509}]},{name:"IOperator",size:1286},{name:"label",children:[{name:"Labeler",size:9956},{name:"RadialLabeler",size:3899},{name:"StackedAreaLabeler",size:3202}]},{name:"layout",children:[{name:"AxisLayout",size:6725},{name:"BundledEdgeRouter",size:3727},{name:"CircleLayout",size:9317},{name:"CirclePackingLayout",size:12003},{name:"DendrogramLayout",size:4853},{name:"ForceDirectedLayout",size:8411},{name:"IcicleTreeLayout",size:4864},{name:"IndentedTreeLayout",size:3174},{name:"Layout",size:7881},{name:"NodeLinkTreeLayout",size:12870},{name:"PieLayout",size:2728},{name:"RadialTreeLayout",size:12348},{name:"RandomLayout",size:870},{name:"StackedAreaLayout",size:9121},{name:"TreeMapLayout",size:9191}]},{name:"Operator",size:2490},{name:"OperatorList",size:5248},{name:"OperatorSequence",size:4190},{name:"OperatorSwitch",size:2581},{name:"SortOperator",size:2023}]}],wt=()=>R.jsx(fe,{width:"100%",height:600,children:R.jsx(M,{width:400,height:200,data:zt,dataKey:"size",aspectRatio:4/3,stroke:"#fff",fill:"#8884d8"})}),Nt=wt;export{Nt as default};
//# sourceMappingURL=treemap-a2e76fa0.js.map
