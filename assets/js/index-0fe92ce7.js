import{r as T,k as X,n as G,t as l,bd as de,aC as ne,bf as q,bg as $,j as t,D as ke,cw as Z,c5 as S,W as O,i as H,br as Y,cn as ue,a as N,au as J,ba as Ce,d0 as ce,aN as Te,aM as we,p as ee,aY as ie,o as Ie,cR as Ee,aA as W,aB as De,d1 as Pe,B as A,m as z,bi as Be,at as Re,av as Fe,ai as ze}from"./index-4a9fd3ee.js";import{P as Me,a as Le,U as $e}from"./UpdateForm-3c627e82.js";import{r as _,d as Ae,L as U,E as Oe,g as qe,a as ve,b as V,I as Ne,i as He,P as We,M as Ke}from"./Table-89507baa.js";import{u as _e,s as Ve,g as fe,p as le,c as Q,b as me,h as Qe,o as Xe}from"./index-c6c68954.js";import{C as M}from"./index-4fc22d68.js";import{D as te}from"./index-868a6a6f.js";import"./index-cc9f7af4.js";import"./index-78665652.js";import"./useBubbleLock-337a6700.js";import"./Table-8440df97.js";import"./index-6754a59d.js";import"./zh_CN-995af3a1.js";import"./styleChecker-7ad94b41.js";import"./List-58fb8fe3.js";import"./Tree-06fea204.js";import"./conductUtil-e33340cb.js";import"./index-ed0db928.js";import"./index-3b76d0ac.js";import"./index-26e67e92.js";import"./Select-e3655e44.js";import"./useIcons-20e746bf.js";import"./index-eae1d799.js";import"./iconUtil-33ad5816.js";import"./index-2c596980.js";import"./isEmpty-13e34a86.js";import"./memoize-fc43d13d.js";import"./_baseIsEqual-adc6fefa.js";import"./_baseFlatten-98b793e0.js";import"./index-48c65d86.js";import"./index-8d1c80d3.js";import"./index-e84ceca4.js";import"./Cascader-40daa4a1.js";import"./_baseAssignValue-b14e28ad.js";import"./_baseClone-ecb799ad.js";import"./ColorPicker-58919f04.js";import"./ColorPicker-3db6ce11.js";import"./index-633c3adc.js";import"./index-ea5eeff3.js";import"./customParseFormat-b73306f3.js";import"./SinglePicker-26298eb6.js";import"./index-d905bec8.js";import"./index-4fbab9e4.js";import"./Image-77a74c66.js";import"./_flatRest-b8a40679.js";import"./index-dcf3f006.js";import"./Rate-4062f331.js";import"./index-ee27caa8.js";import"./index-8e32393d.js";import"./TreeSelect-6f9bfbc1.js";import"./createForOfIteratorHelper-c3ee8562.js";import"./isoWeek-230f248d.js";import"./index-6240ca87.js";import"./Steps-12ed2e0f.js";var Ge=function(e){return(ne.warn||ne.warning)(e)};function Ye(r){var e=r.data,a=r.row;return l(l({},e),a)}function Je(r){var e=T.useRef(null),a=r.type||"single",n=_e(),i=X([],{value:r.editableKeys,onChange:r.onChange?function(d){var x;r==null||(x=r.onChange)===null||x===void 0||x.call(r,d,r.dataSource)}:void 0}),v=G(i,2),u=v[0],g=v[1],p=T.useMemo(function(){var d=a==="single"?u==null?void 0:u.slice(0,1):u;return new Set(d)},[(u||[]).join(","),a]),y=T.useCallback(function(d){return!!(u!=null&&u.includes(_(d)))},[(u||[]).join(",")]),c=function(x,s){var h;return p.size>0&&a==="single"?(Ge(r.onlyOneLineEditorAlertMessage||n.getMessage("editableTable.onlyOneLineEditor","只能同时编辑一行")),!1):(e.current=(h=s??de(r.dataSource,Array.isArray(x)?x:[x]))!==null&&h!==void 0?h:null,p.add(_(x)),g(Array.from(p)),!0)},k=function(x){return p.delete(_(x)),g(Array.from(p)),!0},D=function(){var d=q($().mark(function x(s,h,P,B){var E,R;return $().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,r==null||(E=r.onCancel)===null||E===void 0?void 0:E.call(r,s,h,P,B);case 2:if(R=b.sent,R!==!1){b.next=5;break}return b.abrupt("return",!1);case 5:return b.abrupt("return",!0);case 6:case"end":return b.stop()}},x)}));return function(s,h,P,B){return d.apply(this,arguments)}}(),w=function(){var d=q($().mark(function x(s,h,P){var B,E,R;return $().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,r==null||(B=r.onSave)===null||B===void 0?void 0:B.call(r,s,h,P);case 2:if(E=b.sent,E!==!1){b.next=5;break}return b.abrupt("return",!1);case 5:return b.next=7,k(s);case 7:return R={data:r.dataSource,row:h,key:s,childrenColumnName:r.childrenColumnName||"children"},r.setDataSource(Ye(R)),b.abrupt("return",!0);case 10:case"end":return b.stop()}},x)}));return function(s,h,P){return d.apply(this,arguments)}}(),f=n.getMessage("editableTable.action.save","保存"),o=n.getMessage("editableTable.action.delete","删除"),F=n.getMessage("editableTable.action.cancel","取消"),I=T.useCallback(function(d,x){var s=l({recordKey:d,cancelEditable:k,onCancel:D,onSave:w,editableKeys:u,setEditableRowKeys:g,saveText:f,cancelText:F,preEditRowRef:e,deleteText:o,deletePopconfirmMessage:"".concat(n.getMessage("deleteThisLine","删除此项"),"?"),editorType:"Map"},x),h=Ae(r.dataSource,s);return r.actionRender?r.actionRender(r.dataSource,s,{save:h.save,delete:h.delete,cancel:h.cancel}):[h.save,h.delete,h.cancel]},[u&&u.join(","),r.dataSource]);return{editableKeys:u,setEditableRowKeys:g,isEditable:y,actionRender:I,startEditable:c,cancelEditable:k}}var ae=function(e){var a=e.padding;return t.jsx("div",{style:{padding:a||"0 24px"},children:t.jsx(ke,{style:{margin:0}})})},Ue={xs:2,sm:2,md:4,lg:4,xl:6,xxl:6},Ze=function(e){var a=e.size,n=e.active,i=T.useMemo(function(){return{lg:!0,md:!0,sm:!1,xl:!1,xs:!1,xxl:!1}},[]),v=Z()||i,u=Object.keys(v).filter(function(y){return v[y]===!0})[0]||"md",g=a===void 0?Ue[u]||6:a,p=function(c){return c===0?0:g>2?42:16};return t.jsx(M,{bordered:!1,style:{marginBlockEnd:16},children:t.jsx("div",{style:{width:"100%",justifyContent:"space-between",display:"flex"},children:new Array(g).fill(null).map(function(y,c){return t.jsxs("div",{style:{borderInlineStart:g>2&&c===1?"1px solid rgba(0,0,0,0.06)":void 0,paddingInlineStart:p(c),flex:1,marginInlineEnd:c===0?16:0},children:[t.jsx(S,{active:n,paragraph:!1,title:{width:100,style:{marginBlockStart:0}}}),t.jsx(S.Button,{active:n,style:{height:48}})]},c)})})})},et=function(e){var a=e.active;return t.jsxs(t.Fragment,{children:[t.jsx(M,{bordered:!1,style:{borderRadius:0},styles:{body:{padding:24}},children:t.jsxs("div",{style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[t.jsx("div",{style:{maxWidth:"100%",flex:1},children:t.jsx(S,{active:a,title:{width:100,style:{marginBlockStart:0}},paragraph:{rows:1,style:{margin:0}}})}),t.jsx(S.Button,{active:a,size:"small",style:{width:165,marginBlockStart:12}})]})}),t.jsx(ae,{})]})},tt=function(e){var a=e.size,n=e.active,i=n===void 0?!0:n,v=e.actionButton;return t.jsxs(M,{bordered:!1,styles:{body:{padding:0}},children:[new Array(a).fill(null).map(function(u,g){return t.jsx(et,{active:!!i},g)}),v!==!1&&t.jsx(M,{bordered:!1,style:{borderStartEndRadius:0,borderTopLeftRadius:0},styles:{body:{display:"flex",alignItems:"center",justifyContent:"center"}},children:t.jsx(S.Button,{style:{width:102},active:i,size:"small"})})]})},re=function(e){var a=e.active;return t.jsxs("div",{style:{marginBlockEnd:16},children:[t.jsx(S,{paragraph:!1,title:{width:185}}),t.jsx(S.Button,{active:a,size:"small"})]})},at=function(e){var a=e.active;return t.jsx(M,{bordered:!1,style:{borderBottomRightRadius:0,borderBottomLeftRadius:0},styles:{body:{paddingBlockEnd:8}},children:t.jsxs(O,{style:{width:"100%",justifyContent:"space-between"},children:[t.jsx(S.Button,{active:a,style:{width:200},size:"small"}),t.jsxs(O,{children:[t.jsx(S.Button,{active:a,size:"small",style:{width:120}}),t.jsx(S.Button,{active:a,size:"small",style:{width:80}})]})]})})},rt=function(e){var a=e.active,n=a===void 0?!0:a,i=e.statistic,v=e.actionButton,u=e.toolbar,g=e.pageHeader,p=e.list,y=p===void 0?5:p;return t.jsxs("div",{style:{width:"100%"},children:[g!==!1&&t.jsx(re,{active:n}),i!==!1&&t.jsx(Ze,{size:i,active:n}),(u!==!1||y!==!1)&&t.jsxs(M,{bordered:!1,styles:{body:{padding:0}},children:[u!==!1&&t.jsx(at,{active:n}),y!==!1&&t.jsx(tt,{size:y,active:n,actionButton:v})]})]})};const nt=rt;var he={xs:1,sm:2,md:3,lg:3,xl:3,xxl:4},it=function(e){var a=e.active;return t.jsxs("div",{style:{marginBlockStart:32},children:[t.jsx(S.Button,{active:a,size:"small",style:{width:100,marginBlockEnd:16}}),t.jsxs("div",{style:{width:"100%",justifyContent:"space-between",display:"flex"},children:[t.jsxs("div",{style:{flex:1,marginInlineEnd:24,maxWidth:300},children:[t.jsx(S,{active:a,paragraph:!1,title:{style:{marginBlockStart:0}}}),t.jsx(S,{active:a,paragraph:!1,title:{style:{marginBlockStart:8}}}),t.jsx(S,{active:a,paragraph:!1,title:{style:{marginBlockStart:8}}})]}),t.jsx("div",{style:{flex:1,alignItems:"center",justifyContent:"center"},children:t.jsxs("div",{style:{maxWidth:300,margin:"auto"},children:[t.jsx(S,{active:a,paragraph:!1,title:{style:{marginBlockStart:0}}}),t.jsx(S,{active:a,paragraph:!1,title:{style:{marginBlockStart:8}}})]})})]})]})},lt=function(e){var a=e.size,n=e.active,i=T.useMemo(function(){return{lg:!0,md:!0,sm:!1,xl:!1,xs:!1,xxl:!1}},[]),v=Z()||i,u=Object.keys(v).filter(function(p){return v[p]===!0})[0]||"md",g=a===void 0?he[u]||3:a;return t.jsx("div",{style:{width:"100%",justifyContent:"space-between",display:"flex"},children:new Array(g).fill(null).map(function(p,y){return t.jsxs("div",{style:{flex:1,paddingInlineStart:y===0?0:24,paddingInlineEnd:y===g-1?0:24},children:[t.jsx(S,{active:n,paragraph:!1,title:{style:{marginBlockStart:0}}}),t.jsx(S,{active:n,paragraph:!1,title:{style:{marginBlockStart:8}}}),t.jsx(S,{active:n,paragraph:!1,title:{style:{marginBlockStart:8}}})]},y)})})},se=function(e){var a=e.active,n=e.header,i=n===void 0?!1:n,v=T.useMemo(function(){return{lg:!0,md:!0,sm:!1,xl:!1,xs:!1,xxl:!1}},[]),u=Z()||v,g=Object.keys(u).filter(function(y){return u[y]===!0})[0]||"md",p=he[g]||3;return t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{display:"flex",background:i?"rgba(0,0,0,0.02)":"none",padding:"24px 8px"},children:[new Array(p).fill(null).map(function(y,c){return t.jsx("div",{style:{flex:1,paddingInlineStart:i&&c===0?0:20,paddingInlineEnd:32},children:t.jsx(S,{active:a,paragraph:!1,title:{style:{margin:0,height:24,width:i?"75px":"100%"}}})},c)}),t.jsx("div",{style:{flex:3,paddingInlineStart:32},children:t.jsx(S,{active:a,paragraph:!1,title:{style:{margin:0,height:24,width:i?"75px":"100%"}}})})]}),t.jsx(ae,{padding:"0px 0px"})]})},st=function(e){var a=e.active,n=e.size,i=n===void 0?4:n;return t.jsxs(M,{bordered:!1,children:[t.jsx(S.Button,{active:a,size:"small",style:{width:100,marginBlockEnd:16}}),t.jsx(se,{header:!0,active:a}),new Array(i).fill(null).map(function(v,u){return t.jsx(se,{active:a},u)}),t.jsx("div",{style:{display:"flex",justifyContent:"flex-end",paddingBlockStart:16},children:t.jsx(S,{active:a,paragraph:!1,title:{style:{margin:0,height:32,float:"right",maxWidth:"630px"}}})})]})},ot=function(e){var a=e.active;return t.jsxs(M,{bordered:!1,style:{borderStartEndRadius:0,borderTopLeftRadius:0},children:[t.jsx(S.Button,{active:a,size:"small",style:{width:100,marginBlockEnd:16}}),t.jsx(lt,{active:a}),t.jsx(it,{active:a})]})},dt=function(e){var a=e.active,n=a===void 0?!0:a,i=e.pageHeader,v=e.list;return t.jsxs("div",{style:{width:"100%"},children:[i!==!1&&t.jsx(re,{active:n}),t.jsx(ot,{active:n}),v!==!1&&t.jsx(ae,{}),v!==!1&&t.jsx(st,{active:n,size:v})]})};const ut=dt;var ct=function(e){var a=e.active,n=a===void 0?!0:a,i=e.pageHeader;return t.jsxs("div",{style:{width:"100%"},children:[i!==!1&&t.jsx(re,{active:n}),t.jsx(M,{children:t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",padding:128},children:[t.jsx(S.Avatar,{size:64,style:{marginBlockEnd:32}}),t.jsx(S.Button,{active:n,style:{width:214,marginBlockEnd:8}}),t.jsx(S.Button,{active:n,style:{width:328},size:"small"}),t.jsxs(O,{style:{marginBlockStart:24},children:[t.jsx(S.Button,{active:n,style:{width:116}}),t.jsx(S.Button,{active:n,style:{width:116}})]})]})})]})};const vt=ct;var ft=["type"],mt=function(e){var a=e.type,n=a===void 0?"list":a,i=H(e,ft);return n==="result"?t.jsx(vt,l({},i)):n==="descriptions"?t.jsx(ut,l({},i)):t.jsx(nt,l({},i))};const ht=mt;var gt=function(e,a){var n=a||{},i=n.onRequestError,v=n.effects,u=n.manual,g=n.dataSource,p=n.defaultDataSource,y=n.onDataSourceChange,c=X(p,{value:g,onChange:y}),k=G(c,2),D=k[0],w=k[1],f=X(a==null?void 0:a.loading,{value:a==null?void 0:a.loading,onChange:a==null?void 0:a.onLoadingChange}),o=G(f,2),F=o[0],I=o[1],d=function(h){w(h),I(!1)},x=function(){var s=q($().mark(function h(){var P,B,E;return $().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(!F){m.next=2;break}return m.abrupt("return");case 2:return I(!0),m.prev=3,m.next=6,e();case 6:if(m.t0=m.sent,m.t0){m.next=9;break}m.t0={};case 9:P=m.t0,B=P.data,E=P.success,E!==!1&&d(B),m.next=23;break;case 15:if(m.prev=15,m.t1=m.catch(3),i!==void 0){m.next=21;break}throw new Error(m.t1);case 21:i(m.t1);case 22:I(!1);case 23:return m.prev=23,I(!1),m.finish(23);case 26:case"end":return m.stop()}},h,null,[[3,15,23,26]])}));return function(){return s.apply(this,arguments)}}();return T.useEffect(function(){u||x()},[].concat(Y(v||[]),[u])),{dataSource:D,setDataSource:w,loading:F,reload:function(){return x()}}};const pt=gt;var xt=["valueEnum","render","renderText","mode","plain","dataIndex","request","params","editable"],yt=["request","columns","params","dataSource","onDataSourceChange","formProps","editable","loading","onLoadingChange","actionRef","onRequestError","emptyText","contentStyle"],bt=function(e,a){var n=e.dataIndex;if(n){var i=Array.isArray(n)?de(a,n):a[n];if(i!==void 0||i!==null)return i}return e.children},oe=function(e){var a,n=e.valueEnum,i=e.action,v=e.index,u=e.text,g=e.entity,p=e.mode,y=e.render,c=e.editableUtils,k=e.valueType,D=e.plain,w=e.dataIndex,f=e.request,o=e.renderFormItem,F=e.params,I=e.emptyText,d=ve.useFormInstance(),x=(a=le.useToken)===null||a===void 0?void 0:a.call(le),s=x.token,h={text:u,valueEnum:n,mode:p||"read",proFieldProps:{emptyText:I,render:y?function(E){return y==null?void 0:y(E,g,v,i,l(l({},e),{},{type:"descriptions"}))}:void 0},ignoreFormItem:!0,valueType:k,request:f,params:F,plain:D};if(p==="read"||!p||k==="option"){var P=V(e.fieldProps,void 0,l(l({},e),{},{rowKey:w,isEditable:!1}));return t.jsx(Q,l(l({name:w},h),{},{fieldProps:P}))}var B=function(){var R,m=V(e.formItemProps,d,l(l({},e),{},{rowKey:w,isEditable:!0})),b=V(e.fieldProps,d,l(l({},e),{},{rowKey:w,isEditable:!0}));return t.jsxs("div",{style:{display:"flex",gap:s.marginXS,alignItems:"baseline"},children:[t.jsx(Ne,l(l({name:w},m),{},{style:l({margin:0},(m==null?void 0:m.style)||{}),initialValue:u||(m==null?void 0:m.initialValue),children:t.jsx(Q,l(l({},h),{},{proFieldProps:l({},h.proFieldProps),renderFormItem:o?function(){return o==null?void 0:o(l(l({},e),{},{type:"descriptions"}),{isEditable:!0,recordKey:w,record:d.getFieldValue([w].flat(1)),defaultRender:function(){return t.jsx(Q,l(l({},h),{},{fieldProps:b}))},type:"descriptions"},d)}:void 0,fieldProps:b}))})),t.jsx("div",{style:{display:"flex",maxHeight:s.controlHeight,alignItems:"center",gap:s.marginXS},children:c==null||(R=c.actionRender)===null||R===void 0?void 0:R.call(c,w||v,{cancelText:t.jsx(Te,{}),saveText:t.jsx(we,{}),deleteText:!1})})]})};return t.jsx("div",{style:{marginTop:-5,marginBottom:-5,marginLeft:0,marginRight:0},children:B()})},jt=function(e,a,n,i,v){var u,g=[],p=fe(ce,"5.8.0")>=0,y=e==null||(u=e.map)===null||u===void 0?void 0:u.call(e,function(c,k){var D,w,f;if(N.isValidElement(c))return p?{children:c}:c;var o=c;o.valueEnum,o.render;var F=o.renderText,I=o.mode;o.plain;var d=o.dataIndex;o.request,o.params;var x=o.editable,s=H(o,xt),h=(D=bt(c,a))!==null&&D!==void 0?D:s.children,P=F?F(h,a,k,n):h,B=typeof s.title=="function"?s.title(c,"descriptions",null):s.title,E=typeof s.valueType=="function"?s.valueType(a||{},"descriptions"):s.valueType,R=i==null?void 0:i.isEditable(d||k),m=I||R?"edit":"read",b=i&&m==="read"&&x!==!1&&(x==null?void 0:x(P,a,k))!==!1,L=b?O:N.Fragment,j=m==="edit"?P:qe(P,c,P),C=p&&E!=="option"?l(l({},s),{},{key:s.key||((w=s.label)===null||w===void 0?void 0:w.toString())||k,label:(B||s.label||s.tooltip)&&t.jsx(U,{label:B||s.label,tooltip:s.tooltip,ellipsis:c.ellipsis}),children:t.jsxs(L,{children:[T.createElement(oe,l(l({},c),{},{key:c==null?void 0:c.key,dataIndex:c.dataIndex||k,mode:m,text:j,valueType:E,entity:a,index:k,emptyText:v,action:n,editableUtils:i})),b&&t.jsx(J,{onClick:function(){i==null||i.startEditable(d||k)}})]})}):T.createElement(te.Item,l(l({},s),{},{key:s.key||((f=s.label)===null||f===void 0?void 0:f.toString())||k,label:(B||s.label||s.tooltip)&&t.jsx(U,{label:B||s.label,tooltip:s.tooltip,ellipsis:c.ellipsis})}),t.jsxs(L,{children:[t.jsx(oe,l(l({},c),{},{dataIndex:c.dataIndex||k,mode:m,text:j,valueType:E,entity:a,index:k,action:n,editableUtils:i})),b&&E!=="option"&&t.jsx(J,{onClick:function(){i==null||i.startEditable(d||k)}})]}));return E==="option"?(g.push(C),null):C}).filter(function(c){return c});return{options:g!=null&&g.length?g:null,children:y}},ge=function(e){return t.jsx(te.Item,l(l({},e),{},{children:e.children}))};ge.displayName="ProDescriptionsItem";var St=function(e){return e.children},pe=function(e){var a,n=e.request,i=e.columns,v=e.params,u=e.dataSource,g=e.onDataSourceChange,p=e.formProps,y=e.editable,c=e.loading,k=e.onLoadingChange,D=e.actionRef,w=e.onRequestError;e.emptyText;var f=e.contentStyle,o=H(e,yt),F=T.useContext(ue.ConfigContext),I=pt(q($().mark(function b(){var L;return $().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(!n){C.next=6;break}return C.next=3,n(v||{});case 3:C.t0=C.sent,C.next=7;break;case 6:C.t0={data:{}};case 7:return L=C.t0,C.abrupt("return",L);case 9:case"end":return C.stop()}},b)})),{onRequestError:w,effects:[Ve(v)],manual:!n,dataSource:u,loading:c,onLoadingChange:k,onDataSourceChange:g}),d=Je(l(l({},e.editable),{},{childrenColumnName:void 0,dataSource:I.dataSource,setDataSource:I.setDataSource}));if(T.useEffect(function(){D&&(D.current=l({reload:I.reload},d))},[I,D,d]),I.loading||I.loading===void 0&&n)return t.jsx(ht,{type:"descriptions",list:!1,pageHeader:!1});var x=function(){var L=Ce(e.children).filter(Boolean).map(function(j){if(!N.isValidElement(j))return j;var C=j==null?void 0:j.props,K=C.valueEnum,xe=C.valueType,ye=C.dataIndex,be=C.ellipsis,je=C.copyable,Se=C.request;return!xe&&!K&&!ye&&!Se&&!be&&!je&&j.type.displayName!=="ProDescriptionsItem"?j:l(l({},j==null?void 0:j.props),{},{entity:u})});return[].concat(Y(i||[]),Y(L)).filter(function(j){return!j||j!=null&&j.valueType&&["index","indexBorder"].includes(j==null?void 0:j.valueType)?!1:!(j!=null&&j.hideInDescriptions)}).sort(function(j,C){return C.order||j.order?(C.order||0)-(j.order||0):(C.index||0)-(j.index||0)})},s=jt(x(),I.dataSource||{},(D==null?void 0:D.current)||I,y?d:void 0,e.emptyText),h=s.options,P=s.children,B=y?ve:St,E=null;(o.title||o.tooltip||o.tip)&&(E=t.jsx(U,{label:o.title,tooltip:o.tooltip||o.tip}));var R=F.getPrefixCls("pro-descriptions"),m=fe(ce,"5.8.0")>=0;return t.jsx(Oe,{children:t.jsx(B,l(l({form:(a=e.editable)===null||a===void 0?void 0:a.form,component:!1,submitter:!1},p),{},{onFinish:void 0,children:t.jsx(te,l(l({className:R},o),{},{contentStyle:l({minWidth:0},f||{}),extra:o.extra?t.jsxs(O,{children:[h,o.extra]}):h,title:E,items:m?P:void 0,children:m?null:P}))}),"form")})};pe.Item=ge;var kt=function(e){return ee({},e.componentCls,{position:"fixed",insetInlineEnd:0,bottom:0,zIndex:99,display:"flex",alignItems:"center",width:"100%",paddingInline:24,paddingBlock:0,boxSizing:"border-box",lineHeight:"64px",backgroundColor:Qe(e.colorBgElevated,.6),borderBlockStart:"1px solid ".concat(e.colorSplit),"-webkit-backdrop-filter":"blur(8px)",backdropFilter:"blur(8px)",color:e.colorText,transition:"all 0.2s ease 0s","&-left":{flex:1,color:e.colorText},"&-right":{color:e.colorText,"> *":{marginInlineEnd:8,"&:last-child":{marginBlock:0,marginInline:0}}}})};function Ct(r){return me("ProLayoutFooterToolbar",function(e){var a=l(l({},e),{},{componentCls:".".concat(r)});return[kt(a)]})}function Tt(r,e){var a=e.stylish;return me("ProLayoutFooterToolbarStylish",function(n){var i=l(l({},n),{},{componentCls:".".concat(r)});return a?[ee({},"".concat(i.componentCls),a==null?void 0:a(i))]:[]})}var wt=["children","className","extra","portalDom","style","renderContent"],It=function(e){var a=e.children,n=e.className,i=e.extra,v=e.portalDom,u=v===void 0?!0:v,g=e.style,p=e.renderContent,y=H(e,wt),c=T.useContext(ue.ConfigContext),k=c.getPrefixCls,D=c.getTargetContainer,w=e.prefixCls||k("pro"),f="".concat(w,"-footer-bar"),o=Ct(f),F=o.wrapSSR,I=o.hashId,d=T.useContext(Et),x=T.useMemo(function(){var R=d.hasSiderMenu,m=d.isMobile,b=d.siderWidth;if(R)return b?m?"100%":"calc(100% - ".concat(b,"px)"):"100%"},[d.collapsed,d.hasSiderMenu,d.isMobile,d.siderWidth]),s=T.useMemo(function(){return(typeof window>"u"?"undefined":ie(window))===void 0||(typeof document>"u"?"undefined":ie(document))===void 0?null:(D==null?void 0:D())||document.body},[]),h=Tt("".concat(f,".").concat(f,"-stylish"),{stylish:e.stylish}),P=t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"".concat(f,"-left ").concat(I).trim(),children:i}),t.jsx("div",{className:"".concat(f,"-right ").concat(I).trim(),children:a})]});T.useEffect(function(){return!d||!(d!=null&&d.setHasFooterToolbar)?function(){}:(d==null||d.setHasFooterToolbar(!0),function(){var R;d==null||(R=d.setHasFooterToolbar)===null||R===void 0||R.call(d,!1)})},[]);var B=t.jsx("div",l(l({className:Ie(n,I,f,ee({},"".concat(f,"-stylish"),!!e.stylish)),style:l({width:x},g)},Xe(y,["prefixCls"])),{},{children:p?p(l(l(l({},e),d),{},{leftWidth:x}),P):P})),E=!He()||!u||!s?B:Ee.createPortal(B,s,f);return h.wrapSSR(F(t.jsx(N.Fragment,{children:E},f)))},Et=T.createContext({});const Dt={size:"default",showSizeChanger:!0,defaultPageSize:10},Pt=r=>W.post(De+"/user/list",r);async function Bt(r){return W.post("/api/rule",{method:"POST",data:{method:"update",...r||{}}})}async function Rt(r){return W.post("/api/rule",{method:"POST",data:{method:"post",...r||{}}})}async function Ft(r){return W.post("/api/rule",{method:"POST",data:{method:"delete",...r||{}}})}const zt=async r=>{const e=z.loading("正在添加");try{return await Rt({...r}),e(),z.success("Added successfully"),!0}catch{return e(),z.error("Adding failed, please try again!"),!1}},Mt=async r=>{const e=z.loading("Configuring");try{return await Bt({}),e(),z.success("Configuration is successful"),!0}catch{return e(),z.error("Configuration failed, please try again!"),!1}},Lt=async r=>{const e=z.loading("正在删除");if(!r)return!0;try{return await Ft({key:r.map(a=>a.id)}),e(),z.success("Deleted successfully and will refresh soon"),!0}catch{return e(),z.error("Delete failed, please try again"),!1}},La=()=>{const r=T.useRef(),[e,a]=T.useState(!1),[n,i]=T.useState([]),[v,u]=T.useState(),[g,p]=T.useState(!1),[y,c]=T.useState(!1),k=[{title:"用户名",dataIndex:"username",copyable:!0,width:200,render:(f,o)=>t.jsx("a",{onClick:()=>{u(o),p(!0)},children:f})},{title:"性别",dataIndex:"gender",width:150,valueEnum:{1:{text:"男"},2:{text:"女"}}},{title:"年龄",dataIndex:"age",width:150},{title:"状态",dataIndex:"status",hideInForm:!0,valueEnum:{0:{text:"正常",status:"Default"},1:{text:"在线",status:"Processing"},2:{text:"离线",status:"Success"},3:{text:"",status:"Error"}}},{title:"邮箱",dataIndex:"email",hideInSearch:!0},{title:"地址",dataIndex:"address",hideInSearch:!0},{title:"创建时间",key:"createTime",dataIndex:"createTime",valueType:"date",sorter:!0,hideInSearch:!0},{title:"创建时间",dataIndex:"createTime",valueType:"dateRange",hideInTable:!0,search:{transform:f=>({startTime:f[0],endTime:f[1]})}},{title:"操作",key:"option",fixed:"right",width:250,render:(f,o)=>D(o)}],D=f=>[t.jsx(A,{type:"link",size:"small",icon:t.jsx(Re,{}),onClick:()=>{u(f),p(!0)},children:"查看"},"view"),t.jsx(A,{type:"link",size:"small",icon:t.jsx(J,{}),children:"编辑"},"edit"),t.jsx(A,{type:"link",size:"small",danger:!0,icon:t.jsx(Fe,{}),children:"删除"},"delete")],w=()=>[t.jsx(A,{type:"primary",icon:t.jsx(ze,{}),onClick:()=>{a(!0)},children:"新建"},"button")];return t.jsxs(t.Fragment,{children:[t.jsx(We,{className:"ant-pro-table-scroll",columns:k,actionRef:r,bordered:!0,cardBordered:!0,scroll:{x:1e3,y:"100%"},request:async f=>{const{data:o}=await Pt(f);return Pe(o)},columnsState:{persistenceKey:"use-pro-table-key",persistenceType:"localStorage"},rowKey:"id",search:{labelWidth:"auto"},pagination:Dt,dateFormatter:"string",headerTitle:"使用 ProTable",toolBarRender:w,rowSelection:{onChange:(f,o)=>{i(o)}}}),(n==null?void 0:n.length)>0&&t.jsxs(It,{extra:t.jsxs("div",{children:["已选择 ",t.jsx("a",{style:{fontWeight:600},children:n.length})," 项   ",t.jsxs("span",{children:["The total number is ",n.reduce((f,o)=>f+o.age,0)," age"]})]}),children:[t.jsx(A,{onClick:async()=>{var f,o;await Lt(n),i([]),(o=(f=r.current)==null?void 0:f.reloadAndRest)==null||o.call(f)},children:"Batch deletion"}),t.jsx(A,{type:"primary",children:"Batch approval"})]}),t.jsxs(Ke,{title:"新建",width:"400px",open:e,onOpenChange:a,onFinish:async f=>{await zt(f)&&(a(!1),r.current&&r.current.reload())},children:[t.jsx(Me,{rules:[{required:!0,message:"Rule name is required"}],width:"md",name:"name"}),t.jsx(Le,{width:"md",name:"desc"})]}),t.jsx($e,{onSubmit:async f=>{z.info("成功，，，"),await Mt()&&(c(!1),u(void 0),r.current&&r.current.reload())},onCancel:()=>{z.info("取消，，，"),c(!1),g||u(void 0)},updateModalOpen:y,values:v||{}}),t.jsx(Be,{width:600,open:g,onClose:()=>{u(void 0),p(!1)},closable:!1,children:(v==null?void 0:v.username)&&t.jsx(pe,{column:2,title:v==null?void 0:v.username,request:async()=>({data:v||{}}),params:{id:v==null?void 0:v.username},columns:k})})]})};export{La as default};
