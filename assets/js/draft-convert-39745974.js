import{g as He}from"./@ant-design-63539318.js";import{i as H}from"./invariant-eb99d777.js";import{a as f}from"./react-12b51ca5.js";import{s as A}from"./react-dom-e71a48dd.js";import{D as x}from"./draft-js-4a534bd1.js";import{g as N,f as me}from"./@babel-c46ce09a.js";import{i as M}from"./immutable-c67c16cb.js";function Te(e,t,r,n,a,u){var c=n-r,g=t+r<=e.offset;if(g)return Object.assign({},e,{offset:e.offset+c});var v=t>=e.offset&&t+r<=e.offset+e.length;if(v)return Object.assign({},e,{length:e.length+c});var d=e.offset>=t&&e.offset+e.length<=t+r&&a>0;if(d)return Object.assign({},e,{offset:e.offset+a});var m=e.offset<t&&e.offset+e.length<=t+r&&e.offset+e.length>t&&a>0;if(m)return[Object.assign({},e,{length:t-e.offset}),Object.assign({},e,{offset:t+a,length:e.offset-t+e.length})];var l=e.offset>=t&&e.offset+e.length>t+r&&t+r>e.offset&&u>0;return l?[Object.assign({},e,{offset:e.offset+a,length:t+r-e.offset}),Object.assign({},e,{offset:t+r+a+u,length:e.offset+e.length-(t+r)})]:e}const $=function(e,t){return e.offset===t.offset?t.length-e.length:e.offset-t.offset};var le={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","\n":"<br/>"};const Le=function(e){for(var t=N(e.text),r=e.entityRanges.sort($),n=e.inlineStyleRanges.sort($),a="",u=function(v){var d=t[v];if(le[d]!==void 0){var m=le[d],l=N(a).length;a+=m;var p=function(s){return Te(s,l,d.length,m.length,0,0)};r=r.map(p),n=n.map(p)}else a+=d},c=0;c<t.length;c++)u(c);return Object.assign({},e,{text:a,inlineStyleRanges:n,entityRanges:r})};var je=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"];function F(e){if(je.indexOf(e.type)!==-1)return A.renderToStaticMarkup(e);var t=A.renderToStaticMarkup(f.cloneElement(e,{},"\r")).split("\r");return H(t.length>1,"convertToHTML: Element of type ".concat(e.type," must render children")),H(t.length<3,"convertToHTML: Element of type ".concat(e.type," cannot use carriage return character")),{start:t[0],end:t[1]}}function De(e){return f.isValidElement(e)&&f.Children.count(e.props.children)>0}function J(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(e==null||typeof e=="string")return e;if(f.isValidElement(e)){if(De(e))return A.renderToStaticMarkup(e);var r=F(e);if(t!==null&&me(r)==="object"){var n=r.start,a=r.end;return n+t+a}return r}if(H(Object.prototype.hasOwnProperty.call(e,"start")&&Object.prototype.hasOwnProperty.call(e,"end"),"convertToHTML: received conversion data without either an HTML string, ReactElement or an object with start/end tags"),t!==null){var u=e.start,c=e.end;return u+t+c}return e}var se=function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"start";if(f.isValidElement(t)){var n=F(t);if(typeof n=="string")return 0;var a=n[r].length,u=f.Children.toArray(t.props.children)[0];return a+(u&&f.isValidElement(u)?e(u,r):0)}return me(t)==="object"&&t[r]?t[r].length:0},oe=function(){var t=arguments.length>1?arguments[1]:void 0;return t};const Ne=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:oe,n=N(e.text),a=r;if(r.__isMiddleware&&(a=r(oe)),Object.prototype.hasOwnProperty.call(e,"entityRanges")&&e.entityRanges.length>0){for(var u=e.entityRanges.sort($),c=e.inlineStyleRanges,g=function(m){var l=u[m],p=t[l.key],i=n.slice(l.offset,l.offset+l.length).join(""),s=a(p,i),h=J(s,i),o=void 0;h||h===""?o=N(h):o=i;var b=se(s,"start"),R=se(s,"end"),E=function(T,y){return y>m||Object.prototype.hasOwnProperty.call(T,"style")?Te(T,l.offset,l.length,o.length,b,R):T},C=function(T){return T.reduce(function(y,S,I){var w=E(S,I);return Array.isArray(w)?y.concat(w):y.concat([w])},[])};u=C(u),c=C(c),n=[].concat(N(n.slice(0,l.offset)),N(o),N(n.slice(l.offset+l.length)))},v=0;v<u.length;v++)g(v);return Object.assign({},e,{text:n.join(""),inlineStyleRanges:c,entityRanges:u})}return e},fe=function(e){return function(t){return typeof e=="function"?e(t):e[t]}},Ee=function(e,t){return function(){var r=e.apply(void 0,arguments);return r??t.apply(void 0,arguments)}};function ce(e){switch(e){case"BOLD":return f.createElement("strong",null);case"ITALIC":return f.createElement("em",null);case"UNDERLINE":return f.createElement("u",null);case"CODE":return f.createElement("code",null);default:return{start:"",end:""}}}var ee=function(t,r){return t.filter(function(n){return!r.some(function(a){return a.style===n.style})})},Ie=function(t,r){return r.reduceRight(function(n,a){var u=n[n.length-1];return H(u.style===a.style,"Style ".concat(u.style," to be removed doesn't match expected ").concat(a.style)),n.slice(0,-1)},t)},Pe=function(t,r){return r.filter(function(n){return t>=n.offset&&t<n.offset+n.length})},_e=function(t,r){var n=t.offset<=r.offset,a=t.offset+t.length>=r.offset+r.length;return n&&a},Fe=function(t,r){var n=r.offset+r.length,a=t.offset+t.length;return n-a},ke=function(t,r){for(var n=0;n<t.length;)if(r.every(_e.bind(null,t[n])))n++;else return t.slice(n);return[]},We=function(t,r,n){return r+J(t(n.style)).start},Ae=function(t,r,n){return J(t(n.style)).end+r},Me=function(t){return function(r){return t(r)}};Me.__isMiddleware=!0;const $e=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Me;H(e!=null,"Expected raw block to be non-null");var r;t.__isMiddleware===!0?r=t(ce):r=Ee(fe(t),fe(ce));for(var n="",a=[],u=e.inlineStyleRanges.sort($),c=N(e.text),g=0;g<c.length;g++){var v=Pe(g,u),d=ee(a,v),m=ee(v,a),l=ee(a,d),p=ke(l,m),i=p.concat(m).sort(Fe),s=i.reduce(We.bind(null,r),""),h=d.concat(p).reduce(Ae.bind(null,r),"");n+=h+s+c[g],a=Ie(a,p.concat(d)),a=a.concat(i),H(a.length===v.length,"Character ".concat(g,": ").concat(a.length-v.length," styles left on stack that should no longer be there"))}return n=a.reduceRight(function(o,b){return o+J(r(b.style)).end},n),n},te=function(e){return function(t){return typeof e=="function"?e(t):e[t.type]}};function Ge(e){return f.isValidElement(e)&&f.Children.count(e.props.children)>0}function Ke(e){return H(e!=null,"Expected block HTML value to be non-null"),typeof e=="string"?e:f.isValidElement(e)?Ge(e)?A.renderToStaticMarkup(e):F(e):Object.prototype.hasOwnProperty.call(e,"element")&&f.isValidElement(e.element)?Object.assign({},e,F(e.element)):(H(Object.prototype.hasOwnProperty.call(e,"start")&&Object.prototype.hasOwnProperty.call(e,"end"),"convertToHTML: received block information without either a ReactElement or an object with start/end tags"),e)}function _(e,t){if(H(e!=null,"Expected block HTML value to be non-null"),typeof e.nest=="function"){var r=F(e.nest(t)),n=r.start,a=r.end;return Object.assign({},e,{nestStart:n,nestEnd:a})}if(f.isValidElement(e.nest)){var u=F(e.nest),c=u.start,g=u.end;return Object.assign({},e,{nestStart:c,nestEnd:g})}return H(Object.prototype.hasOwnProperty.call(e,"nestStart")&&Object.prototype.hasOwnProperty.call(e,"nestEnd"),"convertToHTML: received block information without either a ReactElement or an object with start/end tags"),e}var Ve=["1","a","i"];const de={unstyled:f.createElement("p",null),paragraph:f.createElement("p",null),"header-one":f.createElement("h1",null),"header-two":f.createElement("h2",null),"header-three":f.createElement("h3",null),"header-four":f.createElement("h4",null),"header-five":f.createElement("h5",null),"header-six":f.createElement("h6",null),"code-block":f.createElement("pre",null),blockquote:f.createElement("blockquote",null),"unordered-list-item":{element:f.createElement("li",null),nest:f.createElement("ul",null)},"ordered-list-item":{element:f.createElement("li",null),nest:function(t){var r=Ve[t%3];return f.createElement("ol",{type:r})}},media:f.createElement("figure",null),atomic:f.createElement("figure",null)};var qe=function(t,r){return r},ve=function(t){var r=t.styleToHTML,n=r===void 0?{}:r,a=t.blockToHTML,u=a===void 0?{}:a,c=t.entityToHTML,g=c===void 0?qe:c;return function(v){H(v!=null,"Expected contentState to be non-null");var d;u.__isMiddleware===!0?d=u(te(de)):d=Ee(te(u),te(de));var m=x.convertToRaw(v),l=[],p=m.blocks.map(function(i){var s=i.type,h=i.depth,o="",b="",R=d(i);if(!R)throw new Error("convertToHTML: missing HTML definition for block with type ".concat(i.type));if(!R.nest)o=l.reduceRight(function(S,I){return S+_(d(I),h).nestEnd},""),l=[];else for(;h+1!==l.length||s!==l[h].type;)if(h+1===l.length){var E=l[h];o+=_(d(E),h).nestEnd,b+=_(d(i),h).nestStart,l[h]=i}else if(h+1<l.length){var C=l[l.length-1];o+=_(d(C),h).nestEnd,l=l.slice(0,-1)}else b+=_(d(i),h).nestStart,l.push(i);var O=$e(Ne(Le(i),m.entityMap,g),n),T=Ke(d(i)),y;return typeof T=="string"?y=T:y=T.start+O+T.end,O.length===0&&Object.prototype.hasOwnProperty.call(T,"empty")&&(f.isValidElement(T.empty)?y=A.renderToStaticMarkup(T.empty):y=T.empty),o+b+y}).join("");return p=l.reduce(function(i,s){return i+_(d(s),s.depth).nestEnd},p),p}};const Ue=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===1&&Object.prototype.hasOwnProperty.call(t[0],"_map")&&t[0].getBlockMap!=null?ve({}).apply(void 0,t):ve.apply(void 0,t)};var pe=function(t){var r=document.implementation.createHTMLDocument("");return r.documentElement.innerHTML=t,r};function be(e){var t;if(typeof DOMParser<"u"){var r=new DOMParser;t=r.parseFromString(e,"text/html"),(t===null||t.body===null)&&(t=pe(e))}else t=pe(e);return t.body}var Xe="&nbsp;",G=" ",xe=4,ze=new RegExp("\r","g"),Ye=new RegExp(`
`,"g"),Je=new RegExp(Xe,"g"),Qe=new RegExp("\r","g"),Se=["p","h1","h2","h3","h4","h5","h6","li","blockquote","pre"],Ze={b:"BOLD",code:"CODE",del:"STRIKETHROUGH",em:"ITALIC",i:"ITALIC",s:"STRIKETHROUGH",strike:"STRIKETHROUGH",strong:"BOLD",u:"UNDERLINE"},z=function(t,r){return t&&t.__isMiddleware===!0?t(r):t},Be=function(t,r,n){},et=function(t,r,n){return n},he=function(t,r){},ge=function(t){return[]},k=function(t){if(t!=null)return t;throw new Error("Got unexpected null or undefined")},tt=function(t){return t.replace(Qe,"")};function re(){return{text:"",inlines:[],entities:[],blocks:[]}}function rt(e){var t=new Array(1);return e&&(t[0]=e),{text:G,inlines:[M.OrderedSet()],entities:t,blocks:[]}}function Y(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:M.Map();return r===!0?{text:"\r",inlines:[M.OrderedSet()],entities:new Array(1),blocks:[{type:e,data:n,depth:Math.max(0,Math.min(xe,t))}],isNewline:!0}:{text:`
`,inlines:[M.OrderedSet()],entities:new Array(1),blocks:[]}}function ne(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:M.Map();return{text:"\r",inlines:[M.OrderedSet()],entities:new Array(1),blocks:[{type:e,data:r,depth:Math.max(0,Math.min(xe,t))}]}}function W(e,t){switch(e){case"h1":return"header-one";case"h2":return"header-two";case"h3":return"header-three";case"h4":return"header-four";case"h5":return"header-five";case"h6":return"header-six";case"li":return t==="ol"?"ordered-list-item":"unordered-list-item";case"blockquote":return"blockquote";case"pre":return"code-block";case"div":case"p":return"unstyled";default:return null}}function nt(e,t,r){return W(e,r)}function we(e,t,r){var n=Ze[e];if(n)r=r.add(n).toOrderedSet();else if(t instanceof HTMLElement){var a=t;r=r.withMutations(function(u){a.style.fontWeight==="bold"&&u.add("BOLD"),a.style.fontStyle==="italic"&&u.add("ITALIC"),a.style.textDecoration==="underline"&&u.add("UNDERLINE"),a.style.textDecoration==="line-through"&&u.add("STRIKETHROUGH")}).toOrderedSet()}return r}function at(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:M.OrderedSet();return we(e,t,r)}function ae(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=t.text.slice(0,1),a=e.text.slice(-1),u=a==="\r"&&n==="\r",c=e.text!=="\r"&&t.text!=="\r",g=e.text==="\r"&&!e.isNewline&&t.isNewline;if(u&&(c||g)&&(e.text=e.text.slice(0,-1),e.inlines.pop(),e.entities.pop(),e.blocks.pop()),e.text.slice(-1)==="\r"&&r===!0){if(t.text===G||t.text===`
`)return e;(n===G||n===`
`)&&(t.text=t.text.slice(1),t.inlines.shift(),t.entities.shift())}var v=e.text.length===0&&t.isNewline;return{text:e.text+t.text,inlines:e.inlines.concat(t.inlines),entities:e.entities.concat(t.entities),blocks:e.blocks.concat(t.blocks),isNewline:v}}function it(e){return Se.some(function(t){return e.indexOf("<".concat(t))!==-1})}function Ce(e,t,r,n,a,u,c,g,v,d,m,l,p,i,s,h){var o=e.nodeName.toLowerCase(),b=!1,R="unstyled";if(o==="#text"){var E=e.textContent;if(E.trim()===""&&n===null)return re();if(E.trim()===""&&n!=="code-block")return rt(h);n!=="code-block"&&(E=E.replace(Ye,G));var C=Array(E.length).fill(h),O=0,T=v(E,m,l,p,i).sort($);return T.forEach(function(q){var Oe=q.entity,Re=q.offset,U=q.length,P=q.result,B=Re+O;P==null&&(P=E.substr(B,U));var X=E.split("");X.splice.bind(X,B,U).apply(X,P.split("")),E=X.join(""),C.splice.bind(C,B,U).apply(C,Array(P.length).fill(Oe)),O+=P.length-U}),{text:E,inlines:Array(E.length).fill(t),entities:C,blocks:[]}}if(o==="br"){var y=n;return y===null?Y("unstyled",u,!0):Y(y||"unstyled",u,s.flat)}var S=re(),I=null;t=we(o,e,t),t=c(o,e,t),(o==="ul"||o==="ol")&&(r&&(u+=1),r=o,n=null);var w=d(o,e,r,n),j,K;if(w===!1)return re();if(w=w||{},typeof w=="string"?(j=w,K=M.Map()):(j=typeof w=="string"?w:w.type,K=w.data?M.Map(w.data):M.Map()),!n&&(a.indexOf(o)!==-1||j))S=ne(j||W(o,r),u,K),n=j||W(o,r),b=!0;else if(r&&(n==="ordered-list-item"||n==="unordered-list-item")&&o==="li"){var ie=W(o,r);S=ne(ie,u),n=ie,b=!0,R=r==="ul"?"unordered-list-item":"ordered-list-item"}else n&&n!=="atomic"&&j==="atomic"&&(n=j,b=!0,S=Y(j,u,!0,K));var L=e.firstChild;L==null&&h&&(j==="atomic"||n==="atomic")&&(L=document.createTextNode("a")),L!=null&&(o=L.nodeName.toLowerCase());for(var ue=null;L;){ue=g(o,L,m,l,p,i),I=Ce(L,t,r,n,a,u,c,g,v,d,m,l,p,i,s,ue||h),S=ae(S,I,s.flat);var V=L.nextSibling;if(V&&a.indexOf(o)>=0&&n){var D=d(o,L,r,n),Q=void 0,Z=void 0;D!==!1&&(D=D||{},typeof D=="string"?(Q=D,Z=M.Map()):(Q=D.type||W(o,r),Z=D.data?M.Map(D.data):M.Map()),S=ae(S,Y(Q,u,s.flat,Z),s.flat))}V&&(o=V.nodeName.toLowerCase()),L=V}return b&&(S=ae(S,ne(R,u,M.Map()),s.flat)),S}function ut(e,t,r,n,a,u,c,g,v,d,m){e=e.trim().replace(ze,"").replace(Je,G);var l=m(e);if(!l)return null;var p=it(e)?Se.concat(["div"]):["div"],i=Ce(l,M.OrderedSet(),"ul",null,p,-1,t,r,n,a,u,c,g,v,d);return i.text.indexOf("\r")===0&&(i={text:i.text.slice(1),inlines:i.inlines.slice(1),entities:i.entities.slice(1),blocks:i.blocks}),i.text.slice(-1)==="\r"&&(i.text=i.text.slice(0,-1),i.inlines=i.inlines.slice(0,-1),i.entities=i.entities.slice(0,-1),i.blocks.pop()),i.blocks.length===0&&i.blocks.push({type:"unstyled",data:M.Map(),depth:0}),i.text.split("\r").length===i.blocks.length+1&&i.blocks.unshift({type:"unstyled",data:M.Map(),depth:0}),i}function lt(e,t,r,n,a,u,c,g,v,d,m,l){var p=ut(e,t,r,n,a,u,c,g,v,d,m);if(p==null)return[];var i=0;return p.text.split("\r").map(function(s,h){s=tt(s);var o=i+s.length,b=k(p).inlines.slice(i,o),R=k(p).entities.slice(i,o),E=M.List(b.map(function(C,O){var T={style:C,entity:null};return R[O]&&(T.entity=R[O]),x.CharacterMetadata.create(T)}));return i=o+1,new x.ContentBlock({key:l(),type:k(p).blocks[h].type,data:k(p).blocks[h].data,depth:k(p).blocks[h].depth,text:s,characterList:E})})}var ye=function(t){var r=t.htmlToStyle,n=r===void 0?et:r,a=t.htmlToEntity,u=a===void 0?he:a,c=t.textToEntity,g=c===void 0?ge:c,v=t.htmlToBlock,d=v===void 0?Be:v;return function(m){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{flat:!1},p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:be,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:x.genKey,s=x.ContentState.createFromText(""),h=function(){if(s.createEntity){var y;return s=(y=s).createEntity.apply(y,arguments),s.getLastCreatedEntityKey()}return x.Entity.create.apply(x.Entity,arguments)},o=function(){if(s.getEntity){var y;return(y=s).getEntity.apply(y,arguments)}return x.Entity.get.apply(x.Entity,arguments)},b=function(){if(s.mergeEntityData){var y;s=(y=s).mergeEntityData.apply(y,arguments);return}x.Entity.mergeData.apply(x.Entity,arguments)},R=function(){if(s.replaceEntityData){var y;s=(y=s).replaceEntityData.apply(y,arguments);return}x.Entity.replaceData.apply(x.Entity,arguments)},E=lt(m,z(n,at),z(u,he),z(g,ge),z(d,nt),h,o,b,R,l,p,i),C=x.BlockMapBuilder.createFromArray(E),O=E[0].getKey();return s.merge({blockMap:C,selectionBefore:x.SelectionState.createEmpty(O),selectionAfter:x.SelectionState.createEmpty(O)})}};const st=function(){return arguments.length>=1&&typeof(arguments.length<=0?void 0:arguments[0])=="string"?ye({}).apply(void 0,arguments):ye.apply(void 0,arguments)},ot=Object.freeze(Object.defineProperty({__proto__:null,convertFromHTML:st,convertToHTML:Ue,parseHTML:be},Symbol.toStringTag,{value:"Module"})),yt=He(ot);export{yt as r};
