{"version":3,"file":"index-7096d77f.js","sources":["../../../src/views/system/roleManage/index.tsx"],"sourcesContent":["import { Button, Card, Form, Input, Modal, Select, Space, TableProps, Transfer, Tree } from 'antd'\r\nimport MultiTable from '@/components/Tables'\r\nimport { forwardRef, useEffect, useImperativeHandle, useRef, useState } from 'react'\r\nimport { roleList, roleTransferList } from '@/api/modules/system/roleManage'\r\nimport { useSelector } from 'react-redux'\r\nimport { RootState } from '@/redux'\r\nimport { FormInstance } from 'antd/lib'\r\n\r\nfunction formateDate(time: string) {\r\n\tif (!time) return ''\r\n\tlet date = new Date(Number(time))\r\n\treturn date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate() + ' ' + date.getHours() + ':' + date.getMinutes() + ':' + date.getSeconds()\r\n}\r\n\r\nconst RoleManage: React.FC = () => {\r\n\t// Table属性\r\n\tconst [rolelist, setRolelist] = useState([])\r\n\tconst [selectedRowKeys, setSelectedRowKeys] = useState<any>([])\r\n\tconst [selectedIds, setSelectedIds] = useState([])\r\n\tconst [selectedItem, setSelectedItem] = useState<any>({})\r\n\r\n\tconst menuConfig = useSelector((state: RootState) => state.auth.authMenuList)\r\n\t// console.log(menuConfig);\r\n\r\n\tconst [formRole] = Form.useForm() // 创建的角色的 Form表单\r\n\tconst [formPerm] = Form.useForm()\r\n\tconst [formUser] = Form.useForm()\r\n\r\n\tconst [isRoleVisible, setIsRoleVisible] = useState(false) // 创建角色的 Modal\r\n\r\n\tconst [isPermVisible, setIsPermVisible] = useState(false) // 设置权限弹窗\r\n\tconst [detailInfo, setdetailInfo] = useState({}) // 单选用户信息\r\n\tconst [menuInfo, setmenuInfo] = useState([]) // 用户的菜单列表\r\n\r\n\tconst [isUserVisible, setIsUserVisible] = useState(false)\r\n\tconst [transferData, settransferData] = useState([])\r\n\tconst [targetKeys, settargetKeys] = useState([])\r\n\tconst [isAuthClosed, setIsAuthClosed] = useState<any>(null)\r\n\tconst [detailUserInfo, setdetailUserInfo] = useState({}) // 单选用户信息\r\n\r\n\tconst getStatusV = useRef<any>()\r\n\r\n\t// 获取角色列表\r\n\tuseEffect(() => {\r\n\t\t;(async function () {\r\n\t\t\troleList().then((result: any) => {\r\n\t\t\t\tconsole.log(result)\r\n\t\t\t\tconst list = result.data.list.map((item: any, i: number) => ({ ...item, key: i }))\r\n\t\t\t\tsetRolelist(list)\r\n\t\t\t})\r\n\t\t})()\r\n\t}, [])\r\n\r\n\tconst column: TableProps['columns'] = [\r\n\t\t// {\r\n\t\t//   title: \"角色iD\",\r\n\t\t//   dataIndex: \"id\"\r\n\t\t// },\r\n\t\t{\r\n\t\t\ttitle: '角色名称',\r\n\t\t\tdataIndex: 'role_name',\r\n\t\t\talign: 'center',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '使用状态',\r\n\t\t\tdataIndex: 'status',\r\n\t\t\talign: 'center',\r\n\t\t\trender: (status: number) => {\r\n\t\t\t\treturn status === 1 ? '启用' : '停用'\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '授权人',\r\n\t\t\talign: 'center',\r\n\t\t\tdataIndex: 'authorize_user_name',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '创建时间',\r\n\t\t\talign: 'center',\r\n\t\t\tdataIndex: 'create_time',\r\n\t\t\trender: formateDate,\r\n\t\t\t// width: 150\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '授权时间',\r\n\t\t\talign: 'center',\r\n\t\t\tdataIndex: 'authorize_time',\r\n\t\t\trender: formateDate,\r\n\t\t\t// width: 150\r\n\t\t},\r\n\t]\r\n\r\n\tconst updateSelectedItem = (selectedRowKeys: any, selectedRows: any, selectedIds: any) => {\r\n\t\tif (selectedIds) {\r\n\t\t\tsetSelectedRowKeys(selectedRowKeys)\r\n\t\t\tsetSelectedIds(selectedIds)\r\n\t\t\tsetSelectedItem(selectedRows)\r\n\t\t} else {\r\n\t\t\tsetSelectedRowKeys(selectedRowKeys)\r\n\t\t\tsetSelectedItem(selectedRows)\r\n\t\t}\r\n\t}\r\n\r\n\t// 弹窗：角色创建\r\n\tconst createRoleBtn = () => {\r\n\t\tsetIsRoleVisible(true)\r\n\t}\r\n\t// 弹窗：角色提交\r\n\tconst createRoleSubmit = () => {\r\n\t\tconst formData = formRole.getFieldsValue() // {role_name: '张三', status: 0}\r\n\t\t// 1.提交到接口中\r\n\t\t// 2.获取返回值\r\n\t\t// 3.重新获取数据\r\n\t\t// 4.关闭弹窗\r\n\t\tformRole.resetFields()\r\n\t\tsetIsRoleVisible(false)\r\n\t}\r\n\r\n\t// 弹窗：设置权限\r\n\tconst setPermBtn = () => {\r\n\t\tif (JSON.stringify(selectedItem) == '{}') {\r\n\t\t\tModal.info({ title: '信息', content: '请选择一个角色' })\r\n\t\t\treturn\r\n\t\t}\r\n\t\tsetIsPermVisible(true)\r\n\t\tsetdetailInfo(selectedItem)\r\n\t\tsetmenuInfo(selectedItem.menus)\r\n\t}\r\n\t// 弹窗：权限提交\r\n\tconst setPermSubmit = () => {\r\n\t\tlet formData = formPerm.getFieldsValue() // {role_name2: '客服专员', status2: 1, menu: undefined}\r\n\t\t// console.log('提交权限菜单：', formData);\r\n\t\tformData.role_id = selectedItem.id\r\n\t\tformData.menus = menuInfo\r\n\t\tformData.authorize_time = Date.now()\r\n\t\t// 1.提交到后台接口\r\n\t\t// 2.接口返回成功，重新获取数据\r\n\t\t// 3.初始化表单值\r\n\t\tformPerm.resetFields()\r\n\t\t// 4.关闭弹窗\r\n\t\tsetIsPermVisible(false)\r\n\t}\r\n\r\n\t// 弹窗：用户授权按钮\r\n\tconst userPermBtn = async () => {\r\n\t\tif (JSON.stringify(selectedItem) == '{}') {\r\n\t\t\tModal.info({ title: '信息', content: '未选中任何项目' })\r\n\t\t\treturn\r\n\t\t}\r\n\t\t// 获取角色用户列表 > 筛选目标用户\r\n\t\tconst results: any = await roleTransferList(selectedItem.id) // 根据iD获取该角色原有用户\r\n\t\t// console.log(\"results\", results);\r\n\t\tconst transferData: any = []\r\n\t\tconst targetKeys: any = []\r\n\t\tif (results.data.length > 0) {\r\n\t\t\tconst dataSource = results.data\r\n\t\t\tfor (let index = 0; index < dataSource.length; index++) {\r\n\t\t\t\tconst element = dataSource[index]\r\n\t\t\t\tconst data = {\r\n\t\t\t\t\tkey: element.user_id,\r\n\t\t\t\t\ttitle: element.user_name,\r\n\t\t\t\t\tstatus: element.status,\r\n\t\t\t\t}\r\n\t\t\t\tif (data.status === 1) {\r\n\t\t\t\t\ttargetKeys.push(data.key)\r\n\t\t\t\t}\r\n\t\t\t\ttransferData.push(data)\r\n\t\t\t}\r\n\t\t}\r\n\t\tsettransferData(transferData)\r\n\t\tsettargetKeys(targetKeys)\r\n\r\n\t\t// 设置弹窗、权限、用户信息\r\n\t\tsetdetailUserInfo(selectedItem)\r\n\t\tsetIsAuthClosed(false)\r\n\t\tsetIsUserVisible(true)\r\n\t}\r\n\t// 弹窗：用户授权 提交\r\n\tconst userPermSubmit = () => {\r\n\t\tlet data: any = {}\r\n\t\tdata.user_ids = targetKeys || []\r\n\t\tdata.role_id = selectedItem.id\r\n\t\tdata.authorize_time = Date.now()\r\n\t\t// 将 data 传递到服务端\r\n\t\t// 重置表单值\r\n\t\tformUser.resetFields()\r\n\t\t// 关闭弹窗\r\n\t\tsetIsUserVisible(false)\r\n\t}\r\n\t// console.log(\"statePros\", detailInfo, menuInfo);\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Card\r\n\t\t\t\textra={\r\n\t\t\t\t\t<Space size=\"middle\">\r\n\t\t\t\t\t\t<Button type=\"primary\" onClick={createRoleBtn}>\r\n\t\t\t\t\t\t\t创建角色\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Button type={selectedItem.id ? 'primary' : 'default'} onClick={setPermBtn} disabled={!selectedItem.id}>\r\n\t\t\t\t\t\t\t设置权限\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Button type={selectedItem.id ? 'primary' : 'default'} onClick={userPermBtn} disabled={!selectedItem.id}>\r\n\t\t\t\t\t\t\t用户授权\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t{/* <Button type=\"dashed\" onClick={() => { \r\n\t\t\t\t\t\t\tconsole.log(getStatusV.current);\r\n\t\t\t\t\t\t}}>\r\n              用户授权组件状态值\r\n            </Button> */}\r\n\t\t\t\t\t</Space>\r\n\t\t\t\t}>\r\n\t\t\t\t<MultiTable\r\n\t\t\t\t\tcolumns={column}\r\n\t\t\t\t\tdataSource={rolelist}\r\n\t\t\t\t\tselectedRowKeys={selectedRowKeys}\r\n\t\t\t\t\tselectedIds={selectedIds}\r\n\t\t\t\t\tselectedItem={selectedItem}\r\n\t\t\t\t\tpagination={{}}\r\n\t\t\t\t\tupdateSelectedItem={updateSelectedItem}\r\n\t\t\t\t/>\r\n\t\t\t</Card>\r\n\t\t\t<Modal\r\n\t\t\t\ttitle=\"创建角色\"\r\n\t\t\t\topen={isRoleVisible}\r\n\t\t\t\tonOk={createRoleSubmit}\r\n\t\t\t\tonCancel={() => {\r\n\t\t\t\t\tformRole.resetFields()\r\n\t\t\t\t\tsetIsRoleVisible(false)\r\n\t\t\t\t}}>\r\n\t\t\t\t<RoleForm form={formRole} />\r\n\t\t\t</Modal>\r\n\t\t\t<Modal\r\n\t\t\t\twidth={600}\r\n\t\t\t\ttitle=\"权限设置\"\r\n\t\t\t\topen={isPermVisible}\r\n\t\t\t\tonOk={setPermSubmit}\r\n\t\t\t\tonCancel={() => {\r\n\t\t\t\t\tformPerm.resetFields()\r\n\t\t\t\t\tsetIsPermVisible(false)\r\n\t\t\t\t}}>\r\n\t\t\t\t<PermEditForm\r\n\t\t\t\t\tform={formPerm}\r\n\t\t\t\t\tdetailInfo={detailInfo}\r\n\t\t\t\t\tmenuInfo={menuInfo || []}\r\n\t\t\t\t\tpatchMenuInfo={(checkedKeys: any) => {\r\n\t\t\t\t\t\tsetmenuInfo(checkedKeys)\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tmenuConfig={menuConfig}\r\n\t\t\t\t/>\r\n\t\t\t</Modal>\r\n\t\t\t<Modal\r\n\t\t\t\ttitle=\"用户授权\"\r\n\t\t\t\twidth={800}\r\n\t\t\t\topen={isUserVisible}\r\n\t\t\t\tonOk={userPermSubmit}\r\n\t\t\t\tonCancel={() => {\r\n\t\t\t\t\tformUser.resetFields()\r\n\t\t\t\t\tsetIsUserVisible(false)\r\n\t\t\t\t}}>\r\n\t\t\t\t<RoleAuthForm\r\n\t\t\t\t\tform={formUser}\r\n\t\t\t\t\tisClose={isAuthClosed}\r\n\t\t\t\t\tdetailUserInfo={detailUserInfo}\r\n\t\t\t\t\ttargetKeys={targetKeys}\r\n\t\t\t\t\ttransferData={transferData}\r\n\t\t\t\t\tpatchUserInfo={(targetKeys: any) => {\r\n\t\t\t\t\t\tsettargetKeys(targetKeys)\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tref={getStatusV}\r\n\t\t\t\t/>\r\n\t\t\t</Modal>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nfunction RoleForm({ form }: { form: FormInstance }): React.ReactNode {\r\n\tconst formItemLayout = {\r\n\t\tlabelCol: { span: 5 },\r\n\t\twrapperCol: { span: 16 },\r\n\t}\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Card>\r\n\t\t\t\t<Form form={form} {...formItemLayout} initialValues={{ status: 1 }}>\r\n\t\t\t\t\t<Form.Item label=\"角色名称\" name=\"role_name\">\r\n\t\t\t\t\t\t<Input type=\"text\" placeholder=\"请输入角色名称\" />\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t<Form.Item label=\"状态\" name=\"status\">\r\n\t\t\t\t\t\t<Select>\r\n\t\t\t\t\t\t\t<Select.Option value={1}>开启</Select.Option>\r\n\t\t\t\t\t\t\t<Select.Option value={0}>关闭</Select.Option>\r\n\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t</Form>\r\n\t\t\t</Card>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nfunction PermEditForm({ form, detailInfo, menuInfo, patchMenuInfo, menuConfig }: any): React.ReactNode {\r\n\tconst renderBtnTreedNode = (menu: any, parentKey = '') => {\r\n\t\tconst btnTreeNode: any = []\r\n\t\tmenu.btnList.forEach((item: any) => {\r\n\t\t\t// console.log(parentKey + \"-btn-\" + item.key);\r\n\t\t\tbtnTreeNode.push(<Tree.TreeNode title={item.meta.title} key={parentKey + '-btn-' + item.path} className=\"op-role-tree\" />)\r\n\t\t})\r\n\t\treturn btnTreeNode\r\n\t}\r\n\r\n\tconst renderTreeNode = (renderMenu: [], key: string): any => {\r\n\t\t// console.log(\"renderMenu\", renderMenu);\r\n\t\treturn renderMenu.map((item: any) => {\r\n\t\t\tlet parentKey = item.path\r\n\t\t\t// console.log(\"parentKey\", parentKey);\r\n\t\t\tif (item.children) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Tree.TreeNode title={item.meta.title} key={parentKey} className=\"op-role-tree\">\r\n\t\t\t\t\t\t{renderTreeNode(item.children, parentKey)}\r\n\t\t\t\t\t</Tree.TreeNode>\r\n\t\t\t\t)\r\n\t\t\t} else if (item.btnList) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Tree.TreeNode title={item.meta.title} key={parentKey} className=\"op-role-tree\">\r\n\t\t\t\t\t\t{renderBtnTreedNode(item, parentKey)}\r\n\t\t\t\t\t</Tree.TreeNode>\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\treturn <Tree.TreeNode title={item.meta.title} key={parentKey} />\r\n\t\t})\r\n\t}\r\n\r\n\t// 优化一下、渲染菜单列表\r\n\tconst renderTreeNode2 = (menuList: [], key: string): any => {\r\n\t\treturn menuList.reduce((prev: any, curr: any): any => {\r\n\t\t\tlet parentKey = curr.path\r\n\t\t\tprev.push(\r\n\t\t\t\t<Tree.TreeNode title={curr.meta.title} key={parentKey}>\r\n\t\t\t\t\t{curr.children ? renderTreeNode2(curr.children, '') : null}\r\n\t\t\t\t</Tree.TreeNode>\r\n\t\t\t)\r\n\t\t\treturn prev\r\n\t\t}, [])\r\n\t}\r\n\r\n\tconst formItemLayout = { labelCol: { span: 4 }, wrapperCol: { span: 16 } }\r\n\treturn (\r\n\t\t<Form form={form} layout=\"horizontal\" {...formItemLayout} initialValues={{ status2: 1, role_name2: detailInfo.role_name }}>\r\n\t\t\t<Card>\r\n\t\t\t\t<Form.Item label=\"角色名称\" name=\"role_name2\">\r\n\t\t\t\t\t<Input disabled maxLength={8} placeholder={detailInfo.role_name} />\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"状态\" name=\"status2\">\r\n\t\t\t\t\t<Select>\r\n\t\t\t\t\t\t<Select.Option value={1}>启用</Select.Option>\r\n\t\t\t\t\t\t<Select.Option value={0}>停用</Select.Option>\r\n\t\t\t\t\t</Select>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"菜单\" name=\"menu\">\r\n\t\t\t\t\t<Tree\r\n\t\t\t\t\t\tcheckable\r\n\t\t\t\t\t\tdefaultExpandAll\r\n\t\t\t\t\t\tonCheck={(checkedKeys: any) => {\r\n\t\t\t\t\t\t\tpatchMenuInfo(checkedKeys)\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tcheckedKeys={menuInfo || []}>\r\n\t\t\t\t\t\t<Tree.TreeNode title=\"平台权限\" key=\"platform_all\">\r\n\t\t\t\t\t\t\t{renderTreeNode(menuConfig, '')}\r\n\t\t\t\t\t\t</Tree.TreeNode>\r\n\t\t\t\t\t</Tree>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t</Card>\r\n\t\t</Form>\r\n\t)\r\n}\r\n\r\nfunction RoleAuthForm({ form, isClose, detailUserInfo, targetKeys, transferData, patchUserInfo, ref }: any): React.ReactNode {\r\n\tconst [status, setstatus] = useState(11)\r\n\tconst statusValue = () => {\r\n\t\tsetstatus(status + 1)\r\n\t\treturn status\r\n\t}\r\n\t// useImperativeHandle(ref, createHandle, [deps])\r\n\tuseImperativeHandle(ref, () => ({ status, statusValue }))\r\n\r\n\tconst filterOption = (inputValue: any, option: any) => {\r\n\t\treturn option.title.indexOf(inputValue) > -1\r\n\t}\r\n\tconst handleChange = (targetKeys: any): void => {\r\n\t\tpatchUserInfo(targetKeys)\r\n\t}\r\n\tconst formItemLayout = {\r\n\t\tlabelCol: { span: 5 },\r\n\t\twrapperCol: { span: 18 },\r\n\t}\r\n\t// console.log(targetKeys);\r\n\treturn (\r\n\t\t<Form form={form} layout=\"horizontal\" {...formItemLayout} initialValues={{ transfer: targetKeys }}>\r\n\t\t\t<Form.Item name=\"role_name3\" label=\"角色名称\">\r\n\t\t\t\t<Input disabled maxLength={8} placeholder={detailUserInfo.role_name} />\r\n\t\t\t</Form.Item>\r\n\t\t\t<Form.Item name=\"transfer\" label=\"选择用户：\">\r\n\t\t\t\t<Transfer\r\n\t\t\t\t\tlistStyle={{ width: 200, height: 400 }}\r\n\t\t\t\t\tdataSource={transferData}\r\n\t\t\t\t\tshowSearch\r\n\t\t\t\t\ttitles={['待选用户', '已选用户']}\r\n\t\t\t\t\tfilterOption={filterOption}\r\n\t\t\t\t\ttargetKeys={targetKeys}\r\n\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\trender={(item: any) => item.title}\r\n\t\t\t\t/>\r\n\t\t\t</Form.Item>\r\n\t\t</Form>\r\n\t)\r\n}\r\n\r\nexport default RoleManage\r\n"],"names":["formateDate","time","date","RoleManage","rolelist","setRolelist","useState","selectedRowKeys","setSelectedRowKeys","selectedIds","setSelectedIds","selectedItem","setSelectedItem","menuConfig","useSelector","state","formRole","Form","formPerm","formUser","isRoleVisible","setIsRoleVisible","isPermVisible","setIsPermVisible","detailInfo","setdetailInfo","menuInfo","setmenuInfo","isUserVisible","setIsUserVisible","transferData","settransferData","targetKeys","settargetKeys","isAuthClosed","setIsAuthClosed","detailUserInfo","setdetailUserInfo","getStatusV","useRef","useEffect","roleList","result","list","item","i","column","status","updateSelectedItem","selectedRows","createRoleBtn","createRoleSubmit","setPermBtn","Modal","setPermSubmit","formData","userPermBtn","results","roleTransferList","dataSource","index","element","data","userPermSubmit","jsxs","Fragment","jsx","Card","Space","Button","MultiTable","RoleForm","PermEditForm","checkedKeys","RoleAuthForm","form","formItemLayout","Input","Select","patchMenuInfo","renderBtnTreedNode","menu","parentKey","btnTreeNode","Tree","renderTreeNode","renderMenu","key","isClose","patchUserInfo","ref","setstatus","statusValue","useImperativeHandle","filterOption","inputValue","option","handleChange","Transfer"],"mappings":"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"}