import{r,j as T}from"./react-12b51ca5.js";import{_ as K}from"./mathjs-5ee3c32f.js";import{L as j}from"./antd-e2492052.js";const M=(e,n)=>{const a=r.useRef();r.useEffect(()=>{a.current=n},[n]),r.useEffect(()=>{if(!!!(typeof window<"u"&&window.document&&window.document.createElement)||!window.addEventListener)return;const h=u=>a.current(u);return window.addEventListener(e,h),()=>{window.removeEventListener(e,h)}},[e])},o=K,P={add:(...e)=>e.reduce((n,a)=>Number(o.format(o.chain(o.bignumber(n)).add(o.bignumber(a)).done()))),subtract:(...e)=>e.reduce((n,a)=>Number(o.format(o.chain(o.bignumber(n)).subtract(o.bignumber(a)).done()))),multiply:(...e)=>e.reduce((n,a)=>Number(o.format(o.chain(o.bignumber(n)).multiply(o.bignumber(a)).done()))),divide:(...e)=>e.reduce((n,a)=>Number(o.format(o.chain(o.bignumber(n)).divide(o.bignumber(a)).done())))};function $(e){const{id:n,heghtAuto:a=!1,xScroll:y=!1,yScroll:h=!1,scroll:u,dataSource:g,columns:x,pagination:f,selectedRowKeys:R,rowSelection:C,updateSelectedItem:b,updatePage:p}=e,[W,k]=r.useState({}),z=g==null?void 0:g.length,[v,I]=r.useState(u==null?void 0:u.x),[B,L]=r.useState(u==null?void 0:u.y);r.useEffect(()=>{if(y&&n){const t=document.getElementById(n);if(t){const i=e.columns.filter(s=>s.width).map(s=>Number(s.width)).reduce((s,w)=>s+w,0),l=e.columns.filter(s=>!s.width).map(s=>s.title.toString().length),c=(Math.max(...l)+1)*12+8*2+2,d=l.length*c;I(Math.max(t.getBoundingClientRect().width,i+d))}}},[y,n]);const S=r.useCallback(()=>{if(h&&n){const t=document.getElementById(n);if(t){const i=t.getElementsByClassName("ant-table-thead")[0];if(i){const l=t.getBoundingClientRect().height,c=i.getBoundingClientRect().height,d=P.subtract(l,c);L(d),setTimeout(()=>{const s=t.getElementsByClassName("ant-table-body")[0];s&&(s.style.height=d+"px");const w=t.getElementsByClassName("ant-table-placeholder")[0];w&&(w.style.height=d+"px")},30)}}}},[h,n,z]);r.useEffect(()=>{S()},[S]),M("resize",S);const _=r.useCallback((t,i)=>{if(C==="checkbox")e.selectedRowKeys,e.selectedIds,e.selectedItem;else{let l=[i];const c=e.selectedRowKeys;if(c&&c[0]===i)return;b&&b(l,t||{})}},[]),N=r.useCallback((t,i)=>{let l=C,c=[];l==="checkbox"&&(i.forEach(d=>{c.push(d.id)}),k({selectedRowKeys:t,selectedIds:c,selectedItem:i[0]})),b&&b(t,i[0],c)},[]),E={type:"radio",selectedRowKeys:R,onChange:N,onSelect:(t,i,l)=>{}};let m=C;return[!1,null].includes(m)?m=!1:m==="checkbox"?E.type="checkbox":m="radio",T.jsx(j,{...e,bordered:!0,size:"small",columns:x,dataSource:g,rowSelection:m?E:void 0,onRow:(t,i)=>({onClick(){m&&_(t,i)}}),scroll:{x:v,y:B},pagination:{size:"small",onChange:(t,i)=>p&&p(t,i),onShowSizeChange:(t,i)=>{},current:f.page,pageSize:f.pageSize,pageSizeOptions:["3","5","10","15","20","30","50"],total:f.totalCount,showTotal:()=>`共 ${f.totalCount} 条`,showQuickJumper:!0,showSizeChanger:!0}})}export{$ as T};
