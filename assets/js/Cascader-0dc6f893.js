import{r as o,br as ee,o as re,k as H,aY as We,h as G,i as ke,K as oe,n as Ae,g as Ie,d1 as be,_ as hn}from"./index-2feda05c.js";import{u as pn,b as gn,B as mn}from"./Select-0713b6de.js";import{c as Cn,h as Le}from"./conductUtil-b5be0d61.js";var ge=o.createContext(null),fe="__rc_cascader_search_mark__",Sn=function(a,n,t){var r=t.label;return n.some(function(i){return String(i[r]).toLowerCase().includes(a.toLowerCase())})},bn=function(a,n,t,r){return n.map(function(i){return i[r.label]}).join(" / ")};const yn=function(e,a,n,t,r,i){var u=r.filter,l=u===void 0?Sn:u,c=r.render,s=c===void 0?bn:c,m=r.limit,d=m===void 0?50:m,h=r.sort;return o.useMemo(function(){var C=[];if(!e)return[];function v(g,k){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;g.forEach(function(p){if(!(!h&&d!==!1&&d>0&&C.length>=d)){var A=[].concat(ee(k),[p]),D=p[n.children],K=M||p.disabled;if((!D||D.length===0||i)&&l(e,A,{label:n.label})){var V;C.push(re(re({},p),{},(V={disabled:K},H(V,n.label,s(e,A,t,n)),H(V,fe,A),H(V,n.children,void 0),V)))}D&&v(p[n.children],A,K)}})}return v(a,[]),h&&C.sort(function(g,k){return h(g[fe],k[fe],e,n)}),d!==!1&&d>0?C.slice(0,d):C},[e,a,n,t,s,i,l,h,d])};var De="__RC_CASCADER_SPLIT__",He="SHOW_PARENT",Fe="SHOW_CHILD";function ne(e){return e.join(De)}function he(e){return e.map(ne)}function kn(e){return e.split(De)}function Be(e){var a=e||{},n=a.label,t=a.value,r=a.children,i=t||"value";return{label:n||"label",value:i,key:i,children:r||"children"}}function Ce(e,a){var n,t;return(n=e.isLeaf)!==null&&n!==void 0?n:!((t=e[a.children])!==null&&t!==void 0&&t.length)}function Vn(e){var a=e.parentElement;if(a){var n=e.offsetTop-a.offsetTop;n-a.scrollTop<0?a.scrollTo({top:n}):n+e.offsetHeight-a.scrollTop>a.offsetHeight&&a.scrollTo({top:n+e.offsetHeight-a.offsetHeight})}}function Ue(e,a){return e.map(function(n){var t;return(t=n[fe])===null||t===void 0?void 0:t.map(function(r){return r[a.value]})})}function xn(e){return Array.isArray(e)&&Array.isArray(e[0])}function ye(e){return e?xn(e)?e:(e.length===0?[]:[e]).map(function(a){return Array.isArray(a)?a:[a]}):[]}function je(e,a,n){var t=new Set(e),r=a();return e.filter(function(i){var u=r[i],l=u?u.parent:null,c=u?u.children:null;return u&&u.node.disabled?!0:n===Fe?!(c&&c.some(function(s){return s.key&&t.has(s.key)})):!(l&&!l.node.disabled&&t.has(l.key))})}function pe(e,a,n){for(var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,r=a,i=[],u=function(){var s,m,d,h=e[l],C=(s=r)===null||s===void 0?void 0:s.findIndex(function(g){var k=g[n.value];return t?String(k)===String(h):k===h}),v=C!==-1?(m=r)===null||m===void 0?void 0:m[C]:null;i.push({value:(d=v==null?void 0:v[n.value])!==null&&d!==void 0?d:h,index:C,option:v}),r=v==null?void 0:v[n.children]},l=0;l<e.length;l+=1)u();return i}const On=function(e,a,n,t,r){return o.useMemo(function(){var i=r||function(u){var l=t?u.slice(-1):u,c=" / ";return l.every(function(s){return["string","number"].includes(We(s))})?l.join(c):l.reduce(function(s,m,d){var h=o.isValidElement(m)?o.cloneElement(m,{key:d}):m;return d===0?[h]:[].concat(ee(s),[c,h])},[])};return e.map(function(u){var l,c=pe(u,a,n),s=i(c.map(function(d){var h,C=d.option,v=d.value;return(h=C==null?void 0:C[n.label])!==null&&h!==void 0?h:v}),c.map(function(d){var h=d.option;return h})),m=ne(u);return{label:s,value:m,key:m,valueCells:u,disabled:(l=c[c.length-1])===null||l===void 0||(l=l.option)===null||l===void 0?void 0:l.disabled}})},[e,a,n,r,t])};function Je(e,a){return o.useCallback(function(n){var t=[],r=[];return n.forEach(function(i){var u=pe(i,e,a);u.every(function(l){return l.option})?r.push(i):t.push(i)}),[r,t]},[e,a])}const _n=function(e,a){var n=o.useRef({options:null,info:null}),t=o.useCallback(function(){return n.current.options!==e&&(n.current.options=e,n.current.info=Cn(e,{fieldNames:a,initWrapper:function(i){return re(re({},i),{},{pathKeyEntities:{}})},processEntity:function(i,u){var l=i.nodes.map(function(c){return c[a.value]}).join(De);u.pathKeyEntities[l]=i,i.key=l}})),n.current.info.pathKeyEntities},[a,e]);return t};function Xe(e,a){var n=o.useMemo(function(){return a||[]},[a]),t=_n(n,e),r=o.useCallback(function(i){var u=t();return i.map(function(l){var c=u[l].nodes;return c.map(function(s){return s[e.value]})})},[t,e]);return[n,t,r]}function Pn(e){return o.useMemo(function(){if(!e)return[!1,{}];var a={matchInputWidth:!0,limit:50};return e&&We(e)==="object"&&(a=re(re({},a),e)),a.limit<=0&&delete a.limit,[!0,a]},[e])}function Ye(e,a,n,t,r,i,u,l){return function(c){if(!e)a(c);else{var s=ne(c),m=he(n),d=he(t),h=m.includes(s),C=r.some(function(V){return ne(V)===s}),v=n,g=r;if(C&&!h)g=r.filter(function(V){return ne(V)!==s});else{var k=h?m.filter(function(V){return V!==s}):[].concat(ee(m),[s]),M=i(),p;if(h){var A=Le(k,{checked:!1,halfCheckedKeys:d},M);p=A.checkedKeys}else{var D=Le(k,!0,M);p=D.checkedKeys}var K=je(p,i,l);v=u(K)}a([].concat(ee(g),ee(v)))}}}function qe(e,a,n,t,r){return o.useMemo(function(){var i=r(a),u=G(i,2),l=u[0],c=u[1];if(!e||!a.length)return[l,[],c];var s=he(l),m=n(),d=Le(s,!0,m),h=d.checkedKeys,C=d.halfCheckedKeys;return[t(h),t(C),c]},[e,a,n,t,r])}var wn=o.memo(function(e){var a=e.children;return a},function(e,a){return!a.open});function En(e){var a,n=e.prefixCls,t=e.checked,r=e.halfChecked,i=e.disabled,u=e.onClick,l=e.disableCheckbox,c=o.useContext(ge),s=c.checkable,m=typeof s!="boolean"?s:null;return o.createElement("span",{className:ke("".concat(n),(a={},H(a,"".concat(n,"-checked"),t),H(a,"".concat(n,"-indeterminate"),!t&&r),H(a,"".concat(n,"-disabled"),i||l),a)),onClick:u},m)}var Ge="__cascader_fix_label__";function Mn(e){var a=e.prefixCls,n=e.multiple,t=e.options,r=e.activeValue,i=e.prevValuePath,u=e.onToggleOpen,l=e.onSelect,c=e.onActive,s=e.checkedSet,m=e.halfCheckedSet,d=e.loadingKeys,h=e.isSelectable,C=e.searchValue,v="".concat(a,"-menu"),g="".concat(a,"-menu-item"),k=o.useContext(ge),M=k.fieldNames,p=k.changeOnSelect,A=k.expandTrigger,D=k.expandIcon,K=k.loadingIcon,V=k.dropdownMenuColumnStyle,S=k.optionRender,E=A==="hover",x=o.useMemo(function(){return t.map(function(f){var b,P=f.disabled,N=f.disableCheckbox,$=f[fe],I=(b=f[Ge])!==null&&b!==void 0?b:f[M.label],F=f[M.value],B=Ce(f,M),J=$?$.map(function(z){return z[M.value]}):[].concat(ee(i),[F]),_=ne(J),U=d.includes(_),j=s.has(_),W=m.has(_);return{disabled:P,label:I,value:F,isLeaf:B,isLoading:U,checked:j,halfChecked:W,option:f,disableCheckbox:N,fullPath:J,fullPathKey:_}})},[t,s,M,m,d,i]);return o.createElement("ul",{className:v,role:"menu"},x.map(function(f){var b,P=f.disabled,N=f.label,$=f.value,I=f.isLeaf,F=f.isLoading,B=f.checked,J=f.halfChecked,_=f.option,U=f.fullPath,j=f.fullPathKey,W=f.disableCheckbox,z=function(){if(!(P||C)){var X=ee(U);E&&I&&X.pop(),c(X)}},Q=function(){h(_)&&l(U,I)},ae;return typeof _.title=="string"?ae=_.title:typeof N=="string"&&(ae=N),o.createElement("li",{key:j,className:ke(g,(b={},H(b,"".concat(g,"-expand"),!I),H(b,"".concat(g,"-active"),r===$||r===j),H(b,"".concat(g,"-disabled"),P),H(b,"".concat(g,"-loading"),F),b)),style:V,role:"menuitemcheckbox",title:ae,"aria-checked":B,"data-path-key":j,onClick:function(){z(),!W&&(!n||I)&&Q()},onDoubleClick:function(){p&&u(!1)},onMouseEnter:function(){E&&z()},onMouseDown:function(X){X.preventDefault()}},n&&o.createElement(En,{prefixCls:"".concat(a,"-checkbox"),checked:B,halfChecked:J,disabled:P||W,disableCheckbox:W,onClick:function(X){W||(X.stopPropagation(),Q())}}),o.createElement("div",{className:"".concat(g,"-content")},S?S(_):N),!F&&D&&!I&&o.createElement("div",{className:"".concat(g,"-expand-icon")},D),F&&K&&o.createElement("div",{className:"".concat(g,"-loading-icon")},K))}))}const In=function(e,a){var n=o.useContext(ge),t=n.values,r=t[0],i=o.useState([]),u=G(i,2),l=u[0],c=u[1];return o.useEffect(function(){a&&!e&&c(r||[])},[a,r]),[l,c]},Ln=function(e,a,n,t,r,i,u){var l=u.direction,c=u.searchValue,s=u.toggleOpen,m=u.open,d=l==="rtl",h=o.useMemo(function(){for(var V=-1,S=a,E=[],x=[],f=t.length,b=Ue(a,n),P=function(B){var J=S.findIndex(function(_,U){return(b[U]?ne(b[U]):_[n.value])===t[B]});if(J===-1)return 1;V=J,E.push(V),x.push(t[B]),S=S[V][n.children]},N=0;N<f&&S&&!P(N);N+=1);for(var $=a,I=0;I<E.length-1;I+=1)$=$[E[I]][n.children];return[x,V,$,b]},[t,n,a]),C=G(h,4),v=C[0],g=C[1],k=C[2],M=C[3],p=function(S){r(S)},A=function(S){var E=k.length,x=g;x===-1&&S<0&&(x=E);for(var f=0;f<E;f+=1){x=(x+S+E)%E;var b=k[x];if(b&&!b.disabled){var P=v.slice(0,-1).concat(M[x]?ne(M[x]):b[n.value]);p(P);return}}},D=function(){if(v.length>1){var S=v.slice(0,-1);p(S)}else s(!1)},K=function(){var S,E=((S=k[g])===null||S===void 0?void 0:S[n.children])||[],x=E.find(function(b){return!b.disabled});if(x){var f=[].concat(ee(v),[x[n.value]]);p(f)}};o.useImperativeHandle(e,function(){return{onKeyDown:function(S){var E=S.which;switch(E){case oe.UP:case oe.DOWN:{var x=0;E===oe.UP?x=-1:E===oe.DOWN&&(x=1),x!==0&&A(x);break}case oe.LEFT:{if(c)break;d?K():D();break}case oe.RIGHT:{if(c)break;d?D():K();break}case oe.BACKSPACE:{c||D();break}case oe.ENTER:{if(v.length){var f=k[g],b=(f==null?void 0:f[fe])||[];b.length?i(b.map(function(P){return P[n.value]}),b[b.length-1]):i(v,k[g])}break}case oe.ESC:s(!1),m&&S.stopPropagation()}},onKeyUp:function(){}}})};var ze=o.forwardRef(function(e,a){var n,t,r,i=e.prefixCls,u=e.multiple,l=e.searchValue,c=e.toggleOpen,s=e.notFoundContent,m=e.direction,d=e.open,h=o.useRef(),C=m==="rtl",v=o.useContext(ge),g=v.options,k=v.values,M=v.halfValues,p=v.fieldNames,A=v.changeOnSelect,D=v.onSelect,K=v.searchOptions,V=v.dropdownPrefixCls,S=v.loadData,E=v.expandTrigger,x=V||i,f=o.useState([]),b=G(f,2),P=b[0],N=b[1],$=function(y){if(!(!S||l)){var O=pe(y,g,p),w=O.map(function(ce){var te=ce.option;return te}),R=w[w.length-1];if(R&&!Ce(R,p)){var ue=ne(y);N(function(ce){return[].concat(ee(ce),[ue])}),S(w)}}};o.useEffect(function(){P.length&&P.forEach(function(L){var y=kn(L),O=pe(y,g,p,!0).map(function(R){var ue=R.option;return ue}),w=O[O.length-1];(!w||w[p.children]||Ce(w,p))&&N(function(R){return R.filter(function(ue){return ue!==L})})})},[g,P,p]);var I=o.useMemo(function(){return new Set(he(k))},[k]),F=o.useMemo(function(){return new Set(he(M))},[M]),B=In(u,d),J=G(B,2),_=J[0],U=J[1],j=function(y){U(y),$(y)},W=function(y){var O=y.disabled,w=Ce(y,p);return!O&&(w||A||u)},z=function(y,O){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;D(y),!u&&(O||A&&(E==="hover"||w))&&c(!1)},Q=o.useMemo(function(){return l?K:g},[l,K,g]),ae=o.useMemo(function(){for(var L=[{options:Q}],y=Q,O=Ue(y,p),w=function(){var ce=_[R],te=y.find(function(Ve,Se){return(O[Se]?ne(O[Se]):Ve[p.value])===ce}),se=te==null?void 0:te[p.children];if(!(se!=null&&se.length))return 1;y=se,L.push({options:se})},R=0;R<_.length&&!w();R+=1);return L},[Q,_,p]),T=function(y,O){W(O)&&z(y,Ce(O,p),!0)};Ln(a,Q,p,_,j,T,{direction:m,searchValue:l,toggleOpen:c,open:d}),o.useEffect(function(){for(var L=0;L<_.length;L+=1){var y,O=_.slice(0,L+1),w=ne(O),R=(y=h.current)===null||y===void 0?void 0:y.querySelector('li[data-path-key="'.concat(w.replace(/\\{0,2}"/g,'\\"'),'"]'));R&&Vn(R)}},[_]);var X=!((n=ae[0])!==null&&n!==void 0&&(n=n.options)!==null&&n!==void 0&&n.length),le=[(t={},H(t,p.value,"__EMPTY__"),H(t,Ge,s),H(t,"disabled",!0),t)],ve=re(re({},e),{},{multiple:!X&&u,onSelect:z,onActive:j,onToggleOpen:c,checkedSet:I,halfCheckedSet:F,loadingKeys:P,isSelectable:W}),ie=X?[{options:le}]:ae,q=ie.map(function(L,y){var O=_.slice(0,y),w=_[y];return o.createElement(Mn,Ae({key:y},ve,{searchValue:l,prefixCls:x,options:L.options,prevValuePath:O,activeValue:w}))});return o.createElement(wn,{open:d},o.createElement("div",{className:ke("".concat(x,"-menus"),(r={},H(r,"".concat(x,"-menu-empty"),X),H(r,"".concat(x,"-rtl"),C),r)),ref:h},q))}),An=o.forwardRef(function(e,a){var n=pn();return o.createElement(ze,Ae({},e,n,{ref:a}))});function Dn(){}function Rn(e){var a,n=e,t=n.prefixCls,r=t===void 0?"rc-cascader":t,i=n.style,u=n.className,l=n.options,c=n.checkable,s=n.defaultValue,m=n.value,d=n.fieldNames,h=n.changeOnSelect,C=n.onChange,v=n.showCheckedStrategy,g=n.loadData,k=n.expandTrigger,M=n.expandIcon,p=M===void 0?">":M,A=n.loadingIcon,D=n.direction,K=n.notFoundContent,V=K===void 0?"Not Found":K,S=!!c,E=Ie(s,{value:m,postState:ye}),x=G(E,2),f=x[0],b=x[1],P=o.useMemo(function(){return Be(d)},[JSON.stringify(d)]),N=Xe(P,l),$=G(N,3),I=$[0],F=$[1],B=$[2],J=Je(I,P),_=qe(S,f,F,B,J),U=G(_,3),j=U[0],W=U[1],z=U[2],Q=be(function(ie){if(b(ie),C){var q=ye(ie),L=q.map(function(w){return pe(w,I,P).map(function(R){return R.option})}),y=S?q:q[0],O=S?L:L[0];C(y,O)}}),ae=Ye(S,Q,j,W,z,F,B,v),T=be(function(ie){ae(ie)}),X=o.useMemo(function(){return{options:I,fieldNames:P,values:j,halfValues:W,changeOnSelect:h,onSelect:T,checkable:c,searchOptions:[],dropdownPrefixCls:null,loadData:g,expandTrigger:k,expandIcon:p,loadingIcon:A,dropdownMenuColumnStyle:null}},[I,P,j,W,h,T,c,g,k,p,A]),le="".concat(r,"-panel"),ve=!I.length;return o.createElement(ge.Provider,{value:X},o.createElement("div",{className:ke(le,(a={},H(a,"".concat(le,"-rtl"),D==="rtl"),H(a,"".concat(le,"-empty"),ve),a),u),style:i},ve?V:o.createElement(ze,{prefixCls:r,searchValue:null,multiple:S,toggleOpen:Dn,open:!0,direction:D})))}var Tn=["id","prefixCls","fieldNames","defaultValue","value","changeOnSelect","onChange","displayRender","checkable","autoClearSearchValue","searchValue","onSearch","showSearch","expandTrigger","options","dropdownPrefixCls","loadData","popupVisible","open","popupClassName","dropdownClassName","dropdownMenuColumnStyle","dropdownStyle","popupPlacement","placement","onDropdownVisibleChange","onPopupVisibleChange","expandIcon","loadingIcon","children","dropdownMatchSelectWidth","showCheckedStrategy","optionRender"],Re=o.forwardRef(function(e,a){var n=e.id,t=e.prefixCls,r=t===void 0?"rc-cascader":t,i=e.fieldNames,u=e.defaultValue,l=e.value,c=e.changeOnSelect,s=e.onChange,m=e.displayRender,d=e.checkable,h=e.autoClearSearchValue,C=h===void 0?!0:h,v=e.searchValue,g=e.onSearch,k=e.showSearch,M=e.expandTrigger,p=e.options,A=e.dropdownPrefixCls,D=e.loadData,K=e.popupVisible,V=e.open,S=e.popupClassName,E=e.dropdownClassName,x=e.dropdownMenuColumnStyle,f=e.dropdownStyle,b=e.popupPlacement,P=e.placement,N=e.onDropdownVisibleChange,$=e.onPopupVisibleChange,I=e.expandIcon,F=I===void 0?">":I,B=e.loadingIcon,J=e.children,_=e.dropdownMatchSelectWidth,U=_===void 0?!1:_,j=e.showCheckedStrategy,W=j===void 0?He:j,z=e.optionRender,Q=hn(e,Tn),ae=gn(n),T=!!d,X=Ie(u,{value:l,postState:ye}),le=G(X,2),ve=le[0],ie=le[1],q=o.useMemo(function(){return Be(i)},[JSON.stringify(i)]),L=Xe(q,p),y=G(L,3),O=y[0],w=y[1],R=y[2],ue=Ie("",{value:v,postState:function(Y){return Y||""}}),ce=G(ue,2),te=ce[0],se=ce[1],Ve=function(Y,de){se(Y),de.source!=="blur"&&g&&g(Y)},Se=Pn(k),Te=G(Se,2),Qe=Te[0],Ke=Te[1],xe=yn(te,O,q,A||r,Ke,c),Ze=Je(O,q),en=qe(T,ve,w,R,Ze),Oe=G(en,3),me=Oe[0],_e=Oe[1],Pe=Oe[2],nn=o.useMemo(function(){var Z=he(me),Y=je(Z,w,W);return[].concat(ee(Pe),ee(R(Y)))},[me,w,R,Pe,W]),an=On(nn,O,q,T,m),Ne=be(function(Z){if(ie(Z),s){var Y=ye(Z),de=Y.map(function(vn){return pe(vn,O,q).map(function(fn){return fn.option})}),Ee=T?Y:Y[0],Me=T?de:de[0];s(Ee,Me)}}),tn=Ye(T,Ne,me,_e,Pe,w,R,W),we=be(function(Z){(!T||C)&&se(""),tn(Z)}),rn=function(Y,de){if(de.type==="clear"){Ne([]);return}var Ee=de.values[0],Me=Ee.valueCells;we(Me)},on=V!==void 0?V:K,ln=E||S,un=P||b,cn=function(Y){N==null||N(Y),$==null||$(Y)},sn=o.useMemo(function(){return{options:O,fieldNames:q,values:me,halfValues:_e,changeOnSelect:c,onSelect:we,checkable:d,searchOptions:xe,dropdownPrefixCls:A,loadData:D,expandTrigger:M,expandIcon:F,loadingIcon:B,dropdownMenuColumnStyle:x,optionRender:z}},[O,q,me,_e,c,we,d,xe,A,D,M,F,B,x,z]),$e=!(te?xe:O).length,dn=te&&Ke.matchInputWidth||$e?{}:{minWidth:"auto"};return o.createElement(ge.Provider,{value:sn},o.createElement(mn,Ae({},Q,{ref:a,id:ae,prefixCls:r,autoClearSearchValue:C,dropdownMatchSelectWidth:U,dropdownStyle:re(re({},dn),f),displayValues:an,onDisplayValuesChange:rn,mode:T?"multiple":void 0,searchValue:te,onSearch:Ve,showSearch:Qe,OptionList:An,emptyOptions:$e,open:on,dropdownClassName:ln,placement:un,onDropdownVisibleChange:cn,getRawInputElement:function(){return J}})))});Re.SHOW_PARENT=He;Re.SHOW_CHILD=Fe;Re.Panel=Rn;export{Re as C,Rn as P};
