import{c as tt,h as at,b as J,d as X,e as q,g as ne,f as ht}from"./@babel-c46ce09a.js";import{c as se}from"./classnames-3ded05b8.js";import{K as B,h as bt,d as yt,i as Ct}from"./rc-util-8976b5fa.js";import{r as t}from"./react-12b51ca5.js";var de=t.createContext({min:0,max:0,direction:"ltr",step:1,includedStart:0,includedEnd:0,tabIndex:0,keyboard:!0,styles:{},classNames:{}});function He(e,u,r){return(e-u)/(r-u)}function Te(e,u,r,f){var o=He(u,r,f),c={};switch(e){case"rtl":c.right="".concat(o*100,"%"),c.transform="translateX(50%)";break;case"btt":c.bottom="".concat(o*100,"%"),c.transform="translateY(50%)";break;case"ttb":c.top="".concat(o*100,"%"),c.transform="translateY(-50%)";break;default:c.left="".concat(o*100,"%"),c.transform="translateX(-50%)";break}return c}function he(e,u){return Array.isArray(e)?e[u]:e}var St=["prefixCls","value","valueIndex","onStartMove","style","render","dragging","onOffsetChange","onChangeComplete"],kt=t.forwardRef(function(e,u){var r,f,o=e.prefixCls,c=e.value,s=e.valueIndex,b=e.onStartMove,M=e.style,S=e.render,y=e.dragging,C=e.onOffsetChange,m=e.onChangeComplete,g=tt(e,St),n=t.useContext(de),d=n.min,i=n.max,l=n.direction,a=n.disabled,h=n.keyboard,F=n.range,R=n.tabIndex,H=n.ariaLabelForHandle,T=n.ariaLabelledByForHandle,L=n.ariaValueTextFormatterForHandle,_=n.styles,w=n.classNames,N="".concat(o,"-handle"),A=function(E){a||b(E,s)},j=function(E){if(!a&&h){var x=null;switch(E.which||E.keyCode){case B.LEFT:x=l==="ltr"||l==="btt"?-1:1;break;case B.RIGHT:x=l==="ltr"||l==="btt"?1:-1;break;case B.UP:x=l!=="ttb"?1:-1;break;case B.DOWN:x=l!=="ttb"?-1:1;break;case B.HOME:x="min";break;case B.END:x="max";break;case B.PAGE_UP:x=2;break;case B.PAGE_DOWN:x=-2;break}x!==null&&(E.preventDefault(),C(x,s))}},Q=function(E){switch(E.which||E.keyCode){case B.LEFT:case B.RIGHT:case B.UP:case B.DOWN:case B.HOME:case B.END:case B.PAGE_UP:case B.PAGE_DOWN:m==null||m();break}},U=Te(l,c,d,i),Y=t.createElement("div",at({ref:u,className:se(N,(r={},J(r,"".concat(N,"-").concat(s+1),F),J(r,"".concat(N,"-dragging"),y),r),w.handle),style:X(X(X({},U),M),_.handle),onMouseDown:A,onTouchStart:A,onKeyDown:j,onKeyUp:Q,tabIndex:a?null:he(R,s),role:"slider","aria-valuemin":d,"aria-valuemax":i,"aria-valuenow":c,"aria-disabled":a,"aria-label":he(H,s),"aria-labelledby":he(T,s),"aria-valuetext":(f=he(L,s))===null||f===void 0?void 0:f(c),"aria-orientation":l==="ltr"||l==="rtl"?"horizontal":"vertical"},g));return S&&(Y=S(Y,{index:s,prefixCls:o,value:c,dragging:y})),Y}),Mt=["prefixCls","style","onStartMove","onOffsetChange","values","handleRender","draggingIndex"],Et=t.forwardRef(function(e,u){var r=e.prefixCls,f=e.style,o=e.onStartMove,c=e.onOffsetChange,s=e.values,b=e.handleRender,M=e.draggingIndex,S=tt(e,Mt),y=t.useRef({});return t.useImperativeHandle(u,function(){return{focus:function(m){var g;(g=y.current[m])===null||g===void 0||g.focus()}}}),t.createElement(t.Fragment,null,s.map(function(C,m){return t.createElement(kt,at({ref:function(n){n?y.current[m]=n:delete y.current[m]},dragging:M===m,prefixCls:r,style:he(f,m),key:m,value:C,valueIndex:m,onStartMove:o,onOffsetChange:c,render:b},S))}))});function pe(e){var u="touches"in e?e.touches[0]:e;return{pageX:u.pageX,pageY:u.pageY}}function xt(e,u,r,f,o,c,s,b,M){var S=t.useState(null),y=q(S,2),C=y[0],m=y[1],g=t.useState(-1),n=q(g,2),d=n[0],i=n[1],l=t.useState(r),a=q(l,2),h=a[0],F=a[1],R=t.useState(r),H=q(R,2),T=H[0],L=H[1],_=t.useRef(null),w=t.useRef(null);t.useEffect(function(){d===-1&&F(r)},[r,d]),t.useEffect(function(){return function(){document.removeEventListener("mousemove",_.current),document.removeEventListener("mouseup",w.current),document.removeEventListener("touchmove",_.current),document.removeEventListener("touchend",w.current)}},[]);var N=function($,E){h.some(function(x,G){return x!==$[G]})&&(E!==void 0&&m(E),F($),s($))},A=function($,E){if($===-1){var x=T[0],G=T[T.length-1],ve=f-x,le=o-G,W=E*(o-f);W=Math.max(W,ve),W=Math.min(W,le);var be=c(x+W);W=be-x;var Z=T.map(function(te){return te+W});N(Z)}else{var ue=(o-f)*E,ee=ne(h);ee[$]=T[$];var p=M(ee,ue,$,"dist");N(p.values,p.value)}},j=t.useRef(A);j.current=A;var Q=function($,E,x){$.stopPropagation();var G=x||r,ve=G[E];i(E),m(ve),L(G);var le=pe($),W=le.pageX,be=le.pageY,Z=function(p){p.preventDefault();var te=pe(p),Ne=te.pageX,Pe=te.pageY,ye=Ne-W,Ce=Pe-be,Se=e.current.getBoundingClientRect(),ke=Se.width,Me=Se.height,I;switch(u){case"btt":I=-Ce/Me;break;case"ttb":I=Ce/Me;break;case"rtl":I=-ye/ke;break;default:I=ye/ke}j.current(E,I)},ue=function ee(p){p.preventDefault(),document.removeEventListener("mouseup",ee),document.removeEventListener("mousemove",Z),document.removeEventListener("touchend",ee),document.removeEventListener("touchmove",Z),_.current=null,w.current=null,i(-1),b()};document.addEventListener("mouseup",ue),document.addEventListener("mousemove",Z),document.addEventListener("touchend",ue),document.addEventListener("touchmove",Z),_.current=Z,w.current=ue},U=t.useMemo(function(){var Y=ne(r).sort(function(E,x){return E-x}),$=ne(h).sort(function(E,x){return E-x});return Y.every(function(E,x){return E===$[x]})?h:r},[r,h]);return[d,C,U,Q]}function Rt(e,u,r,f,o,c){var s=t.useCallback(function(g){var n=isFinite(g)?g:e;return n=Math.min(u,g),n=Math.max(e,n),n},[e,u]),b=t.useCallback(function(g){if(r!==null){var n=e+Math.round((s(g)-e)/r)*r,d=function(h){return(String(h).split(".")[1]||"").length},i=Math.max(d(r),d(u),d(e)),l=Number(n.toFixed(i));return e<=l&&l<=u?l:null}return null},[r,e,u,s]),M=t.useCallback(function(g){var n=s(g),d=f.map(function(a){return a.value});r!==null&&d.push(b(g)),d.push(e,u);var i=d[0],l=u-e;return d.forEach(function(a){var h=Math.abs(n-a);h<=l&&(i=a,l=h)}),i},[e,u,f,r,s,b]),S=function g(n,d,i){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit";if(typeof d=="number"){var a,h=n[i],F=h+d,R=[];f.forEach(function(w){R.push(w.value)}),R.push(e,u),R.push(b(h));var H=d>0?1:-1;l==="unit"?R.push(b(h+H*r)):R.push(b(F)),R=R.filter(function(w){return w!==null}).filter(function(w){return d<0?w<=h:w>=h}),l==="unit"&&(R=R.filter(function(w){return w!==h}));var T=l==="unit"?h:F;a=R[0];var L=Math.abs(a-T);if(R.forEach(function(w){var N=Math.abs(w-T);N<L&&(a=w,L=N)}),a===void 0)return d<0?e:u;if(l==="dist")return a;if(Math.abs(d)>1){var _=ne(n);return _[i]=a,g(_,d-H,i,l)}return a}else{if(d==="min")return e;if(d==="max")return u}},y=function(n,d,i){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",a=n[i],h=S(n,d,i,l);return{value:h,changed:h!==a}},C=function(n){return c===null&&n===0||typeof c=="number"&&n<c},m=function(n,d,i){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",a=n.map(M),h=a[i],F=S(a,d,i,l);if(a[i]=F,o===!1){var R=c||0;i>0&&a[i-1]!==h&&(a[i]=Math.max(a[i],a[i-1]+R)),i<a.length-1&&a[i+1]!==h&&(a[i]=Math.min(a[i],a[i+1]-R))}else if(typeof c=="number"||c===null){for(var H=i+1;H<a.length;H+=1)for(var T=!0;C(a[H]-a[H-1])&&T;){var L=y(a,1,H);a[H]=L.value,T=L.changed}for(var _=i;_>0;_-=1)for(var w=!0;C(a[_]-a[_-1])&&w;){var N=y(a,-1,_-1);a[_-1]=N.value,w=N.changed}for(var A=a.length-1;A>0;A-=1)for(var j=!0;C(a[A]-a[A-1])&&j;){var Q=y(a,-1,A-1);a[A-1]=Q.value,j=Q.changed}for(var U=0;U<a.length-1;U+=1)for(var Y=!0;C(a[U+1]-a[U])&&Y;){var $=y(a,1,U+1);a[U+1]=$.value,Y=$.changed}}return{value:a[i],values:a}};return[M,m]}function $t(e){var u=e.prefixCls,r=e.style,f=e.children,o=e.value,c=e.onClick,s=t.useContext(de),b=s.min,M=s.max,S=s.direction,y=s.includedStart,C=s.includedEnd,m=s.included,g="".concat(u,"-text"),n=Te(S,o,b,M);return t.createElement("span",{className:se(g,J({},"".concat(g,"-active"),m&&y<=o&&o<=C)),style:X(X({},n),r),onMouseDown:function(i){i.stopPropagation()},onClick:function(){c(o)}},f)}function wt(e){var u=e.prefixCls,r=e.marks,f=e.onClick,o="".concat(u,"-mark");return r.length?t.createElement("div",{className:o},r.map(function(c){var s=c.value,b=c.style,M=c.label;return t.createElement($t,{key:s,prefixCls:o,style:b,value:s,onClick:f},M)})):null}function Ft(e){var u=e.prefixCls,r=e.value,f=e.style,o=e.activeStyle,c=t.useContext(de),s=c.min,b=c.max,M=c.direction,S=c.included,y=c.includedStart,C=c.includedEnd,m="".concat(u,"-dot"),g=S&&y<=r&&r<=C,n=X(X({},Te(M,r,s,b)),typeof f=="function"?f(r):f);return g&&(n=X(X({},n),typeof o=="function"?o(r):o)),t.createElement("span",{className:se(m,J({},"".concat(m,"-active"),g)),style:n})}function _t(e){var u=e.prefixCls,r=e.marks,f=e.dots,o=e.style,c=e.activeStyle,s=t.useContext(de),b=s.min,M=s.max,S=s.step,y=t.useMemo(function(){var C=new Set;if(r.forEach(function(g){C.add(g.value)}),f&&S!==null)for(var m=b;m<=M;)C.add(m),m+=S;return Array.from(C)},[b,M,S,f,r]);return t.createElement("div",{className:"".concat(u,"-step")},y.map(function(C){return t.createElement(Ft,{prefixCls:u,key:C,value:C,style:o,activeStyle:c})}))}function et(e){var u,r=e.prefixCls,f=e.style,o=e.start,c=e.end,s=e.index,b=e.onStartMove,M=e.replaceCls,S=t.useContext(de),y=S.direction,C=S.min,m=S.max,g=S.disabled,n=S.range,d=S.classNames,i="".concat(r,"-track"),l=He(o,C,m),a=He(c,C,m),h=function(T){!g&&b&&b(T,-1)},F={};switch(y){case"rtl":F.right="".concat(l*100,"%"),F.width="".concat(a*100-l*100,"%");break;case"btt":F.bottom="".concat(l*100,"%"),F.height="".concat(a*100-l*100,"%");break;case"ttb":F.top="".concat(l*100,"%"),F.height="".concat(a*100-l*100,"%");break;default:F.left="".concat(l*100,"%"),F.width="".concat(a*100-l*100,"%")}var R=M||se(i,(u={},J(u,"".concat(i,"-").concat(s+1),s!==null&&n),J(u,"".concat(r,"-track-draggable"),b),u),d.track);return t.createElement("div",{className:R,style:X(X({},F),f),onMouseDown:h,onTouchStart:h})}function Nt(e){var u=e.prefixCls,r=e.style,f=e.values,o=e.startPoint,c=e.onStartMove,s=t.useContext(de),b=s.included,M=s.range,S=s.min,y=s.styles,C=s.classNames,m=t.useMemo(function(){if(!M){if(f.length===0)return[];var n=o??S,d=f[0];return[{start:Math.min(n,d),end:Math.max(n,d)}]}for(var i=[],l=0;l<f.length-1;l+=1)i.push({start:f[l],end:f[l+1]});return i},[f,M,o,S]),g=null;return(C.tracks||y.tracks)&&(g=t.createElement(et,{index:null,prefixCls:u,start:m[0].start,end:m[m.length-1].end,replaceCls:se(C.tracks,"".concat(u,"-tracks")),style:y.tracks})),b?t.createElement(t.Fragment,null,g,m.map(function(n,d){var i=n.start,l=n.end;return t.createElement(et,{index:d,prefixCls:u,style:X(X({},he(r,d)),y.track),start:i,end:l,key:d,onStartMove:c})})):null}var Ht=t.forwardRef(function(e,u){var r,f=e.prefixCls,o=f===void 0?"rc-slider":f,c=e.className,s=e.style,b=e.classNames,M=e.styles,S=e.disabled,y=S===void 0?!1:S,C=e.keyboard,m=C===void 0?!0:C,g=e.autoFocus,n=e.onFocus,d=e.onBlur,i=e.min,l=i===void 0?0:i,a=e.max,h=a===void 0?100:a,F=e.step,R=F===void 0?1:F,H=e.value,T=e.defaultValue,L=e.range,_=e.count,w=e.onChange,N=e.onBeforeChange,A=e.onAfterChange,j=e.onChangeComplete,Q=e.allowCross,U=Q===void 0?!0:Q,Y=e.pushable,$=Y===void 0?!1:Y,E=e.draggableTrack,x=e.reverse,G=e.vertical,ve=e.included,le=ve===void 0?!0:ve,W=e.startPoint,be=e.trackStyle,Z=e.handleStyle,ue=e.railStyle,ee=e.dotStyle,p=e.activeDotStyle,te=e.marks,Ne=e.dots,Pe=e.handleRender,ye=e.tabIndex,Ce=ye===void 0?0:ye,Se=e.ariaLabelForHandle,ke=e.ariaLabelledByForHandle,Me=e.ariaValueTextFormatterForHandle,I=t.useRef(),Re=t.useRef(),$e=t.useMemo(function(){return G?x?"ttb":"btt":x?"rtl":"ltr"},[x,G]),K=t.useMemo(function(){return isFinite(l)?l:0},[l]),fe=t.useMemo(function(){return isFinite(h)?h:100},[h]),oe=t.useMemo(function(){return R!==null&&R<=0?1:R},[R]),rt=t.useMemo(function(){return typeof $=="boolean"?$?oe:!1:$>=0?$:!1},[$,oe]),we=t.useMemo(function(){var P=Object.keys(te||{});return P.map(function(k){var v=te[k],O={value:Number(k)};return v&&ht(v)==="object"&&!t.isValidElement(v)&&("label"in v||"style"in v)?(O.style=v.style,O.label=v.label):O.label=v,O}).filter(function(k){var v=k.label;return v||typeof v=="number"}).sort(function(k,v){return k.value-v.value})},[te]),nt=Rt(K,fe,oe,we,U,rt),Ae=q(nt,2),Fe=Ae[0],Be=Ae[1],lt=bt(T,{value:H}),Xe=q(lt,2),ae=Xe[0],ut=Xe[1],z=t.useMemo(function(){var P=ae==null?[]:Array.isArray(ae)?ae:[ae],k=q(P,1),v=k[0],O=v===void 0?K:v,D=ae===null?[]:[O];if(L){if(D=ne(P),_||ae===void 0){var V=_>=0?_+1:2;for(D=D.slice(0,V);D.length<V;){var ie;D.push((ie=D[D.length-1])!==null&&ie!==void 0?ie:K)}}D.sort(function(ce,re){return ce-re})}return D.forEach(function(ce,re){D[re]=Fe(ce)}),D},[ae,L,K,_,Fe]),Ee=t.useRef(z);Ee.current=z;var me=function(k){return L?k:k[0]},De=function(k){var v=ne(k).sort(function(O,D){return O-D});w&&!Ct(v,Ee.current,!0)&&w(me(v)),ut(v)},Ye=function(){A==null||A(me(Ee.current)),yt(!A,"[rc-slider] `onAfterChange` is deprecated. Please use `onChangeComplete` instead."),j==null||j(me(Ee.current))},ot=xt(Re,$e,z,K,fe,Fe,De,Ye,Be),_e=q(ot,4),Ue=_e[0],it=_e[1],Le=_e[2],Ke=_e[3],je=function(k,v){if(!y){var O=0,D=fe-K;z.forEach(function(ie,ce){var re=Math.abs(k-ie);re<=D&&(D=re,O=ce)});var V=ne(z);V[O]=k,L&&!z.length&&_===void 0&&V.push(k),N==null||N(me(V)),De(V),v&&Ke(v,O,V)}},ct=function(k){k.preventDefault();var v=Re.current.getBoundingClientRect(),O=v.width,D=v.height,V=v.left,ie=v.top,ce=v.bottom,re=v.right,Qe=k.clientX,Ze=k.clientY,xe;switch($e){case"btt":xe=(ce-Ze)/D;break;case"ttb":xe=(Ze-ie)/D;break;case"rtl":xe=(re-Qe)/O;break;default:xe=(Qe-V)/O}var gt=K+xe*(fe-K);je(Fe(gt),k)},st=t.useState(null),Ge=q(st,2),Oe=Ge[0],We=Ge[1],dt=function(k,v){if(!y){var O=Be(z,k,v);N==null||N(me(z)),De(O.values),We(O.value)}};t.useEffect(function(){if(Oe!==null){var P=z.indexOf(Oe);P>=0&&I.current.focus(P)}We(null)},[Oe]);var vt=t.useMemo(function(){return E&&oe===null?!1:E},[E,oe]),Ie=function(k,v){Ke(k,v),N==null||N(me(Ee.current))},ze=Ue!==-1;t.useEffect(function(){if(!ze){var P=z.lastIndexOf(it);I.current.focus(P)}},[ze]);var ge=t.useMemo(function(){return ne(Le).sort(function(P,k){return P-k})},[Le]),ft=t.useMemo(function(){return L?[ge[0],ge[ge.length-1]]:[K,ge[0]]},[ge,L,K]),Ve=q(ft,2),qe=Ve[0],Je=Ve[1];t.useImperativeHandle(u,function(){return{focus:function(){I.current.focus(0)},blur:function(){var k=document,v=k.activeElement;Re.current.contains(v)&&(v==null||v.blur())}}}),t.useEffect(function(){g&&I.current.focus(0)},[]);var mt=t.useMemo(function(){return{min:K,max:fe,direction:$e,disabled:y,keyboard:m,step:oe,included:le,includedStart:qe,includedEnd:Je,range:L,tabIndex:Ce,ariaLabelForHandle:Se,ariaLabelledByForHandle:ke,ariaValueTextFormatterForHandle:Me,styles:M||{},classNames:b||{}}},[K,fe,$e,y,m,oe,le,qe,Je,L,Ce,Se,ke,Me,M,b]);return t.createElement(de.Provider,{value:mt},t.createElement("div",{ref:Re,className:se(o,c,(r={},J(r,"".concat(o,"-disabled"),y),J(r,"".concat(o,"-vertical"),G),J(r,"".concat(o,"-horizontal"),!G),J(r,"".concat(o,"-with-marks"),we.length),r)),style:s,onMouseDown:ct},t.createElement("div",{className:se("".concat(o,"-rail"),b==null?void 0:b.rail),style:X(X({},ue),M==null?void 0:M.rail)}),t.createElement(Nt,{prefixCls:o,style:be,values:ge,startPoint:W,onStartMove:vt?Ie:null}),t.createElement(_t,{prefixCls:o,marks:we,dots:Ne,style:ee,activeStyle:p}),t.createElement(Et,{ref:I,prefixCls:o,style:Z,values:Le,draggingIndex:Ue,onStartMove:Ie,onOffsetChange:dt,onFocus:n,onBlur:d,handleRender:Pe,onChangeComplete:Ye}),t.createElement(wt,{prefixCls:o,marks:we,onClick:je})))});export{Ht as S};
