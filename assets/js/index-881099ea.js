import{a as u,p as P,K as O,r as $,_ as xe,o as p,n as te,q as ne,t as He,bJ as Ie,w as _e,x as $e,y as Ee,E as Ve,aJ as Ne,bK as pe,an as Oe}from"./index-d95cf114.js";function De(e,t){var r=e.disabled,a=e.prefixCls,l=e.character,C=e.characterRender,i=e.index,E=e.count,d=e.value,y=e.allowHalf,b=e.focused,m=e.onHover,f=e.onClick,H=function(w){m(w,i)},I=function(w){f(w,i)},V=function(w){w.keyCode===O.ENTER&&f(w,i)},S=i+1,c=new Set([a]);d===0&&i===0&&b?c.add("".concat(a,"-focused")):y&&d+.5>=S&&d<S?(c.add("".concat(a,"-half")),c.add("".concat(a,"-active")),b&&c.add("".concat(a,"-focused"))):(S<=d?c.add("".concat(a,"-full")):c.add("".concat(a,"-zero")),S===d&&b&&c.add("".concat(a,"-focused")));var R=typeof l=="function"?l(e):l,h=u.createElement("li",{className:P(Array.from(c)),ref:t},u.createElement("div",{onClick:r?null:I,onKeyDown:r?null:V,onMouseMove:r?null:H,role:"radio","aria-checked":d>i?"true":"false","aria-posinset":i+1,"aria-setsize":E,tabIndex:r?-1:0},u.createElement("div",{className:"".concat(a,"-first")},R),u.createElement("div",{className:"".concat(a,"-second")},R)));return C&&(h=C(h,e)),h}const Fe=u.forwardRef(De);function Me(){var e=$.useRef({});function t(a){return e.current[a]}function r(a){return function(l){e.current[a]=l}}return[t,r]}function Le(e){var t=e.pageXOffset,r="scrollLeft";if(typeof t!="number"){var a=e.document;t=a.documentElement[r],typeof t!="number"&&(t=a.body[r])}return t}function Te(e){var t,r,a=e.ownerDocument,l=a.body,C=a&&a.documentElement,i=e.getBoundingClientRect();return t=i.left,r=i.top,t-=C.clientLeft||l.clientLeft||0,r-=C.clientTop||l.clientTop||0,{left:t,top:r}}function je(e){var t=Te(e),r=e.ownerDocument,a=r.defaultView||r.parentWindow;return t.left+=Le(a),t.left}var Ke=["prefixCls","className","defaultValue","value","count","allowHalf","allowClear","character","characterRender","disabled","direction","tabIndex","autoFocus","onHoverChange","onChange","onFocus","onBlur","onKeyDown","onMouseLeave"];function Be(e,t){var r,a=e.prefixCls,l=a===void 0?"rc-rate":a,C=e.className,i=e.defaultValue,E=e.value,d=e.count,y=d===void 0?5:d,b=e.allowHalf,m=b===void 0?!1:b,f=e.allowClear,H=f===void 0?!0:f,I=e.character,V=I===void 0?"â˜…":I,S=e.characterRender,c=e.disabled,R=e.direction,h=R===void 0?"ltr":R,x=e.tabIndex,w=x===void 0?0:x,re=e.autoFocus,_=e.onHoverChange,D=e.onChange,F=e.onFocus,M=e.onBlur,L=e.onKeyDown,T=e.onMouseLeave,oe=xe(e,Ke),le=Me(),k=p(le,2),ce=k[0],ie=k[1],j=u.useRef(null),z=function(){if(!c){var n;(n=j.current)===null||n===void 0||n.focus()}};u.useImperativeHandle(t,function(){return{focus:z,blur:function(){if(!c){var n;(n=j.current)===null||n===void 0||n.blur()}}}});var se=te(i||0,{value:E}),A=p(se,2),K=A[0],ue=A[1],fe=te(null),W=p(fe,2),de=W[0],B=W[1],X=function(n,g){var s=h==="rtl",o=n+1;if(m){var Z=ce(n),ee=je(Z),ae=Z.clientWidth;(s&&g-ee>ae/2||!s&&g-ee<ae/2)&&(o-=.5)}return o},N=function(n){ue(n),D==null||D(n)},ve=u.useState(!1),G=p(ve,2),ge=G[0],J=G[1],me=function(){J(!0),F==null||F()},Ce=function(){J(!1),M==null||M()},he=u.useState(null),q=p(he,2),Q=q[0],U=q[1],ye=function(n,g){var s=X(g,n.pageX);s!==de&&(U(s),B(null)),_==null||_(s)},Y=function(n){c||(U(null),B(null),_==null||_(void 0)),n&&(T==null||T(n))},be=function(n,g){var s=X(g,n.pageX),o=!1;H&&(o=s===K),Y(),N(o?0:s),B(o?s:null)},Se=function(n){var g=n.keyCode,s=h==="rtl",o=K;g===O.RIGHT&&o<y&&!s?(m?o+=.5:o+=1,N(o),n.preventDefault()):g===O.LEFT&&o>0&&!s||g===O.RIGHT&&o>0&&s?(m?o-=.5:o-=1,N(o),n.preventDefault()):g===O.LEFT&&o<y&&s&&(m?o+=.5:o+=1,N(o),n.preventDefault()),L==null||L(n)};u.useEffect(function(){re&&!c&&z()},[]);var Re=new Array(y).fill(0).map(function(v,n){return u.createElement(Fe,{ref:ie(n),index:n,count:y,disabled:c,prefixCls:"".concat(l,"-star"),allowHalf:m,value:Q===null?K:Q,onClick:be,onHover:ye,key:v||n,character:V,characterRender:S,focused:ge})}),we=P(l,C,(r={},ne(r,"".concat(l,"-disabled"),c),ne(r,"".concat(l,"-rtl"),h==="rtl"),r));return u.createElement("ul",He({className:we,onMouseLeave:Y,tabIndex:c?-1:w,onFocus:c?null:me,onBlur:c?null:Ce,onKeyDown:c?null:Se,ref:j,role:"radiogroup"},Ie(oe,{aria:!0,data:!0,attr:!0})),Re)}const Pe=u.forwardRef(Be),ke=e=>{const{componentCls:t}=e;return{[`${t}-star`]:{position:"relative",display:"inline-block",color:"inherit",cursor:"pointer","&:not(:last-child)":{marginInlineEnd:e.marginXS},"> div":{transition:`all ${e.motionDurationMid}, outline 0s`,"&:hover":{transform:e.starHoverScale},"&:focus":{outline:0},"&:focus-visible":{outline:`${Ve(e.lineWidth)} dashed ${e.starColor}`,transform:e.starHoverScale}},"&-first, &-second":{color:e.starBg,transition:`all ${e.motionDurationMid}`,userSelect:"none"},"&-first":{position:"absolute",top:0,insetInlineStart:0,width:"50%",height:"100%",overflow:"hidden",opacity:0},[`&-half ${t}-star-first, &-half ${t}-star-second`]:{opacity:1},[`&-half ${t}-star-first, &-full ${t}-star-second`]:{color:"inherit"}}}},ze=e=>({[`&-rtl${e.componentCls}`]:{direction:"rtl"}}),Ae=e=>{const{componentCls:t}=e;return{[t]:Object.assign(Object.assign(Object.assign(Object.assign({},Ee(e)),{display:"inline-block",margin:0,padding:0,color:e.starColor,fontSize:e.starSize,lineHeight:1,listStyle:"none",outline:"none",[`&-disabled${t} ${t}-star`]:{cursor:"default","> div:hover":{transform:"scale(1)"}}}),ke(e)),ze(e))}},We=e=>({starColor:e.yellow6,starSize:e.controlHeightLG*.5,starHoverScale:"scale(1.1)",starBg:e.colorFillContent}),Xe=_e("Rate",e=>{const t=$e(e,{});return[Ae(t)]},We);var Ge=globalThis&&globalThis.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(r[a[l]]=e[a[l]]);return r};const Je=$.forwardRef((e,t)=>{const{prefixCls:r,className:a,rootClassName:l,style:C,tooltips:i,character:E=$.createElement(pe,null)}=e,d=Ge(e,["prefixCls","className","rootClassName","style","tooltips","character"]),y=(R,h)=>{let{index:x}=h;return i?$.createElement(Oe,{title:i[x]},R):R},{getPrefixCls:b,direction:m,rate:f}=$.useContext(Ne),H=b("rate",r),[I,V,S]=Xe(H),c=Object.assign(Object.assign({},f==null?void 0:f.style),C);return I($.createElement(Pe,Object.assign({ref:t,character:E,characterRender:y},d,{className:P(a,l,V,S,f==null?void 0:f.className),style:c,prefixCls:H,direction:m})))}),Qe=Je;export{Qe as R};
