{"version":3,"file":"Modal-9a6022be.js","sources":["../../../src/views/system/dept/component/Modal.tsx"],"sourcesContent":["import { Button, Col, Form, Input, InputNumber, Modal, Radio, Row, TreeSelect } from 'antd';\r\nimport { useEffect, useState } from 'react';\r\n\r\nconst ModalComponent = (Props: any) => {\r\n\tconst {\r\n\t\tform, // form\r\n\t\tmenuList, // 菜单\r\n\r\n\t\tmodalTitle: title, // 标题\r\n\t\tmodalType: type, // 类型\r\n\t\tmodalIsVisible, // 显示\r\n\t\tmodalMenuInfo: data, // 菜单信息\r\n\r\n\t\tsetModalIsVisible, // 设置显示\r\n\r\n\t\thandleModalSubmit, // 提交\r\n\t} = Props;\r\n\r\n\tconst [isTop, setIsTop] = useState('是');\r\n\tconst [value, setValue] = useState<string>('');\r\n\r\n\tuseEffect(() => {\r\n\t\tform.setFieldsValue({\r\n\t\t\tisTop: type === 'create' ? '是' : data?.parent_id == 0 ? '是' : '否',\r\n\t\t\tparent_id: type === 'create' ? null : data?.parent_id,\r\n\t\t\temail: type === 'create' ? null : data?.email,\r\n\t\t\tleader: type === 'create' ? null : data?.leader,\r\n\t\t\tname: type === 'create' ? null : data?.name,\r\n\t\t\tphone: type === 'create' ? null : data?.phone,\r\n\t\t\tsort: type === 'create' ? null : data?.sort,\r\n\t\t\tstatus: type === 'create' ? '启用' : data?.status,\r\n\t\t});\r\n\t\tsetIsTop(type === 'create' ? '是' : data?.parent_id == 0 ? '是' : '否');\r\n\t\tsetValue(type === 'create' ? '' : data?.parent_id);\r\n\t}, [data, type]);\r\n\r\n\t// & 这里可以提取 公共\r\n\t// * 处理菜单结构：  处理成TreeSelect需要的格式\r\n\tconst handleMenu = (menuConfig: any, type: string) => {\r\n\t\treturn menuConfig?.map((item: any) => {\r\n\t\t\tconst option: any = {\r\n\t\t\t\tvalue: item.name || null,\r\n\t\t\t\tlabel: item.name || null,\r\n\t\t\t};\r\n\t\t\tif (item.children && item.children.length) {\r\n\t\t\t\toption.children = handleMenu(item.children, 'children');\r\n\t\t\t}\r\n\t\t\treturn option;\r\n\t\t});\r\n\t};\r\n\tconst treeData = handleMenu(menuList, '');\r\n\r\n\t// 取消\r\n\tconst OnCancel = () => {\r\n\t\tsetModalIsVisible(false);\r\n\t};\r\n\t// * Modal 提交\r\n\tconst Submit = () => {\r\n\t\tform.submit();\r\n\t};\r\n\t// * Form 提交\r\n\tconst FormOnFinish = () => {\r\n\t\t// console.log('提交');\r\n\t\tconst formList = form.getFieldsValue();\r\n\t\tformList.isTop = isTop; // 是否 是顶级上级\r\n\t\tif (isTop == '是') formList.parent_id = 0; // 父 id\r\n\t\tif (isTop == '否') formList.parent_id = value;\r\n\t\tif (type == 'edit') {\r\n\t\t\tformList._id = data.unique;\r\n\t\t}\r\n\t\tconsole.log('parent_id', isTop, '+', formList.parent_id);\r\n\t\thandleModalSubmit && handleModalSubmit(type, formList);\r\n\t};\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\ttitle={title}\r\n\t\t\twidth={800}\r\n\t\t\topen={modalIsVisible}\r\n\t\t\tonCancel={OnCancel}\r\n\t\t\tfooter={[\r\n\t\t\t\t<Button loading={false} onClick={OnCancel}>\r\n\t\t\t\t\t取消\r\n\t\t\t\t</Button>,\r\n\t\t\t\t<Button key='link' type='primary' loading={false} onClick={Submit}>\r\n\t\t\t\t\t提交\r\n\t\t\t\t</Button>,\r\n\t\t\t]}\r\n\t\t>\r\n\t\t\t<Form form={form} onFinish={FormOnFinish} layout='horizontal' size='middle' labelCol={{ span: 6 }} wrapperCol={{ span: 16 }}>\r\n\t\t\t\t<Row gutter={16}>\r\n\t\t\t\t\t<Col span={12}>\r\n\t\t\t\t\t\t<Form.Item label='部门名称' name='name' rules={[{ required: true, message: '必填：部门名称' }]}>\r\n\t\t\t\t\t\t\t<Input variant='outlined' placeholder='请输入部门名称' maxLength={30} />\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col span={12}>\r\n\t\t\t\t\t\t<Form.Item label='部门排序' name='sort' rules={[{ required: true, message: '必填：部门排序' }]}>\r\n\t\t\t\t\t\t\t<InputNumber variant='outlined' placeholder='请输入' maxLength={30} />\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col span={12}>\r\n\t\t\t\t\t\t<Form.Item label='负责人' name='leader' rules={[{ required: false, message: '' }]}>\r\n\t\t\t\t\t\t\t<Input variant='outlined' placeholder='请输入负责人' maxLength={30} />\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col span={12}>\r\n\t\t\t\t\t\t<Form.Item label='联系电话' name='phone' rules={[{ required: false, message: '' }]}>\r\n\t\t\t\t\t\t\t<Input variant='outlined' placeholder='请输入联系电话' maxLength={30} />\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col span={12}>\r\n\t\t\t\t\t\t<Form.Item label='邮箱' name='email' rules={[{ required: false, message: '' }]}>\r\n\t\t\t\t\t\t\t<Input variant='outlined' placeholder='请输入邮箱' maxLength={30} />\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</Col>\r\n\r\n\t\t\t\t\t<Col span={12}>\r\n\t\t\t\t\t\t<Form.Item label='部门状态' name='status' rules={[{ required: false, message: '' }]}>\r\n\t\t\t\t\t\t\t<Radio.Group\r\n\t\t\t\t\t\t\t\tname='radiogroup'\r\n\t\t\t\t\t\t\t\tdefaultValue='启用'\r\n\t\t\t\t\t\t\t\toptions={[\r\n\t\t\t\t\t\t\t\t\t{ value: '启用', label: '启用' },\r\n\t\t\t\t\t\t\t\t\t{ value: '停用', label: '停用' },\r\n\t\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col span={24} pull={3}>\r\n\t\t\t\t\t\t<Form.Item label='部门描述' name='desc' rules={[{ required: false, message: '' }]}>\r\n\t\t\t\t\t\t\t<Input.TextArea rows={3} placeholder='请输入部门描述' maxLength={6} />\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col span={24} pull={3}>\r\n\t\t\t\t\t\t<Form.Item label='是否顶级部门' name='isTop' rules={[{ required: true, message: '' }]}>\r\n\t\t\t\t\t\t\t<Radio.Group\r\n\t\t\t\t\t\t\t\toptions={['是', '否']}\r\n\t\t\t\t\t\t\t\tdefaultValue='是'\r\n\t\t\t\t\t\t\t\tonChange={(item: any) => {\r\n\t\t\t\t\t\t\t\t\tsetIsTop(item.target.value);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tvalue={isTop}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t{isTop == '是' && (\r\n\t\t\t\t\t\t<Col span={24} pull={3}>\r\n\t\t\t\t\t\t\t<Form.Item />\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{isTop == '否' && (\r\n\t\t\t\t\t\t<Col span={24} pull={3}>\r\n\t\t\t\t\t\t\t<Form.Item label='上级部门' name='parent_id' rules={[{ required: true, message: '必须：上级部门' }]}>\r\n\t\t\t\t\t\t\t\t<TreeSelect\r\n\t\t\t\t\t\t\t\t\tstyle={{ width: '100%' }}\r\n\t\t\t\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\t\t\t\tplaceholder='请选择上级部门'\r\n\t\t\t\t\t\t\t\t\tallowClear\r\n\t\t\t\t\t\t\t\t\tonChange={newValue => {\r\n\t\t\t\t\t\t\t\t\t\tsetValue(newValue);\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\ttreeData={treeData}\r\n\t\t\t\t\t\t\t\t\tdropdownStyle={{ maxHeight: 500, overflow: 'auto' }}\r\n\t\t\t\t\t\t\t\t\tclassName='custom-tree-dropdown'\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Row>\r\n\t\t\t</Form>\r\n\t\t</Modal>\r\n\t);\r\n};\r\nexport default ModalComponent;\r\n"],"names":["ModalComponent","Props","form","menuList","title","type","modalIsVisible","data","setModalIsVisible","handleModalSubmit","isTop","setIsTop","useState","value","setValue","useEffect","handleMenu","menuConfig","item","option","treeData","OnCancel","Submit","FormOnFinish","formList","jsx","Modal","Button","Form","jsxs","Row","Col","Input","InputNumber","Radio","TreeSelect","newValue"],"mappings":"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"}