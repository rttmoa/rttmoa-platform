import{g as at,d as st,e as M,f as b,n as $,H as K}from"./markmap-common-57ec1c02.js";import"./d3-transition-b37040bd.js";import{t as A,d as ot,i as lt}from"./d3-zoom-d13b3c8c.js";import{o as ht}from"./d3-scale-629d1929.js";import{c as ct}from"./d3-scale-chromatic-5a959b62.js";import{s as dt}from"./d3-selection-6113bbad.js";import{a as ut}from"./d3-shape-67142881.js";import{m as Y,g as I,h as pt}from"./d3-array-530277c9.js";/*! @gera2ld/jsx-dom v2.2.2 | ISC License */const W=1,U=2,ft="http://www.w3.org/2000/svg",B="http://www.w3.org/1999/xlink",mt={show:B,actuate:B,href:B},gt=e=>typeof e=="string"||typeof e=="number",yt=e=>(e==null?void 0:e.vtype)===W,xt=e=>(e==null?void 0:e.vtype)===U;function j(e,t){let n;if(typeof e=="string")n=W;else if(typeof e=="function")n=U;else throw new Error("Invalid VNode type");return{vtype:n,type:e,props:t}}function vt(e){return e.children}const zt={isSvg:!1};function F(e,t){Array.isArray(t)||(t=[t]),t=t.filter(Boolean),t.length&&e.append(...t)}function kt(e,t,n){for(const r in t)if(!(r==="key"||r==="children"||r==="ref"))if(r==="dangerouslySetInnerHTML")e.innerHTML=t[r].__html;else if(r==="innerHTML"||r==="textContent"||r==="innerText"||r==="value"&&["textarea","select"].includes(e.tagName)){const a=t[r];a!=null&&(e[r]=a)}else r.startsWith("on")?e[r.toLowerCase()]=t[r]:bt(e,r,t[r],n.isSvg)}const St={className:"class",labelFor:"for"};function bt(e,t,n,r){if(t=St[t]||t,n===!0)e.setAttribute(t,"");else if(n===!1)e.removeAttribute(t);else{const a=r?mt[t]:void 0;a!==void 0?e.setAttributeNS(a,t,n):e.setAttribute(t,n)}}function wt(e){return e.reduce((t,n)=>t.concat(n),[])}function N(e,t){return Array.isArray(e)?wt(e.map(n=>N(n,t))):T(e,t)}function T(e,t=zt){if(e==null||typeof e=="boolean")return null;if(e instanceof Node)return e;if(xt(e)){const{type:n,props:r}=e;if(n===vt){const s=document.createDocumentFragment();if(r.children){const l=N(r.children,t);F(s,l)}return s}const a=n(r);return T(a,t)}if(gt(e))return document.createTextNode(`${e}`);if(yt(e)){let n;const{type:r,props:a}=e;if(!t.isSvg&&r==="svg"&&(t=Object.assign({},t,{isSvg:!0})),t.isSvg?n=document.createElementNS(ft,r):n=document.createElement(r),kt(n,a,t),a.children){let l=t;t.isSvg&&r==="foreignObject"&&(l=Object.assign({},l,{isSvg:!1}));const o=N(a.children,l);o!=null&&F(n,o)}const{ref:s}=a;return typeof s=="function"&&s(n),n}throw new Error("mount: Invalid Vnode!")}function O(e){return T(e)}function Et(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function Xt(){return this.eachAfter(Et)}function Ct(e){var t=this,n,r=[t],a,s,l;do for(n=r.reverse(),r=[];t=n.pop();)if(e(t),a=t.children,a)for(s=0,l=a.length;s<l;++s)r.push(a[s]);while(r.length);return this}function jt(e){for(var t=this,n=[t],r,a;t=n.pop();)if(e(t),r=t.children,r)for(a=r.length-1;a>=0;--a)n.push(r[a]);return this}function Rt(e){for(var t=this,n=[t],r=[],a,s,l;t=n.pop();)if(r.push(t),a=t.children,a)for(s=0,l=a.length;s<l;++s)n.push(a[s]);for(;t=r.pop();)e(t);return this}function Mt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,a=r&&r.length;--a>=0;)n+=r[a].value;t.value=n})}function $t(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function At(e){for(var t=this,n=Bt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var a=r.length;e!==n;)r.splice(a,0,e),e=e.parent;return r}function Bt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),a=null;for(e=n.pop(),t=r.pop();e===t;)a=e,e=n.pop(),t=r.pop();return a}function Ot(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Ht(){var e=[];return this.each(function(t){e.push(t)}),e}function Nt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Dt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function L(e,t){var n=new R(e),r=+e.value&&(n.value=e.value),a,s=[n],l,o,c,f;for(t==null&&(t=Lt);a=s.pop();)if(r&&(a.value=+a.data.value),(o=t(a.data))&&(f=o.length))for(a.children=new Array(f),c=f-1;c>=0;--c)s.push(l=a.children[c]=new R(o[c])),l.parent=a,l.depth=a.depth+1;return n.eachBefore(It)}function Tt(){return L(this).eachBefore(Yt)}function Lt(e){return e.children}function Yt(e){e.data=e.data.data}function It(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function R(e){this.data=e,this.depth=this.height=0,this.parent=null}R.prototype=L.prototype={constructor:R,count:Xt,each:Ct,eachAfter:Rt,eachBefore:jt,sum:Mt,sort:$t,path:At,ancestors:Ot,descendants:Ht,leaves:Nt,links:Dt,copy:Tt};const Ft="d3-flextree",Pt="2.1.2",Vt="build/d3-flextree.js",Kt="index",Wt={name:"Chris Maloney",url:"http://chrismaloney.org"},Ut="Flexible tree layout algorithm that allows for variable node sizes.",Zt=["d3","d3-module","layout","tree","hierarchy","d3-hierarchy","plugin","d3-plugin","infovis","visualization","2d"],Gt="https://github.com/klortho/d3-flextree",_t="WTFPL",qt={type:"git",url:"https://github.com/klortho/d3-flextree.git"},Jt={clean:"rm -rf build demo test","build:demo":"rollup -c --environment BUILD:demo","build:dev":"rollup -c --environment BUILD:dev","build:prod":"rollup -c --environment BUILD:prod","build:test":"rollup -c --environment BUILD:test",build:"rollup -c",lint:"eslint index.js src","test:main":"node test/bundle.js","test:browser":"node test/browser-tests.js",test:"npm-run-all test:*",prepare:"npm-run-all clean build lint test"},Qt={"d3-hierarchy":"^1.1.5"},te={"babel-plugin-external-helpers":"^6.22.0","babel-preset-es2015-rollup":"^3.0.0",d3:"^4.13.0","d3-selection-multi":"^1.0.1",eslint:"^4.19.1",jsdom:"^11.6.2","npm-run-all":"^4.1.2",rollup:"^0.55.3","rollup-plugin-babel":"^2.7.1","rollup-plugin-commonjs":"^8.0.2","rollup-plugin-copy":"^0.2.3","rollup-plugin-json":"^2.3.0","rollup-plugin-node-resolve":"^3.0.2","rollup-plugin-uglify":"^3.0.0","uglify-es":"^3.3.9"},ee={name:Ft,version:Pt,main:Vt,module:Kt,"jsnext:main":"index",author:Wt,description:Ut,keywords:Zt,homepage:Gt,license:_t,repository:qt,scripts:Jt,dependencies:Qt,devDependencies:te},{version:ne}=ee,re=Object.freeze({children:e=>e.children,nodeSize:e=>e.data.size,spacing:0});function G(e){const t=Object.assign({},re,e);function n(o){const c=t[o];return typeof c=="function"?c:()=>c}function r(o){const c=l(s(),o,f=>f.children);return c.update(),c.data}function a(){const o=n("nodeSize"),c=n("spacing");return class Z extends L.prototype.constructor{constructor(h){super(h)}copy(){const h=l(this.constructor,this,p=>p.children);return h.each(p=>p.data=p.data.data),h}get size(){return o(this)}spacing(h){return c(this,h)}get nodes(){return this.descendants()}get xSize(){return this.size[0]}get ySize(){return this.size[1]}get top(){return this.y}get bottom(){return this.y+this.ySize}get left(){return this.x-this.xSize/2}get right(){return this.x+this.xSize/2}get root(){const h=this.ancestors();return h[h.length-1]}get numChildren(){return this.hasChildren?this.children.length:0}get hasChildren(){return!this.noChildren}get noChildren(){return this.children===null}get firstChild(){return this.hasChildren?this.children[0]:null}get lastChild(){return this.hasChildren?this.children[this.numChildren-1]:null}get extents(){return(this.children||[]).reduce((h,p)=>Z.maxExtents(h,p.extents),this.nodeExtents)}get nodeExtents(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}static maxExtents(h,p){return{top:Math.min(h.top,p.top),bottom:Math.max(h.bottom,p.bottom),left:Math.min(h.left,p.left),right:Math.max(h.right,p.right)}}}}function s(){const o=a(),c=n("nodeSize"),f=n("spacing");return class extends o{constructor(h){super(h),Object.assign(this,{x:0,y:0,relX:0,prelim:0,shift:0,change:0,lExt:this,lExtRelX:0,lThr:null,rExt:this,rExtRelX:0,rThr:null})}get size(){return c(this.data)}spacing(h){return f(this.data,h.data)}get x(){return this.data.x}set x(h){this.data.x=h}get y(){return this.data.y}set y(h){this.data.y=h}update(){return _(this),q(this),this}}}function l(o,c,f){const h=(p,y)=>{const d=new o(p);Object.assign(d,{parent:y,depth:y===null?0:y.depth+1,height:0,length:1});const x=f(p)||[];return d.children=x.length===0?null:x.map(v=>h(v,d)),d.children&&Object.assign(d,d.children.reduce((v,m)=>({height:Math.max(v.height,m.height+1),length:v.length+m.length}),d)),d};return h(c,null)}return Object.assign(r,{nodeSize(o){return arguments.length?(t.nodeSize=o,r):t.nodeSize},spacing(o){return arguments.length?(t.spacing=o,r):t.spacing},children(o){return arguments.length?(t.children=o,r):t.children},hierarchy(o,c){const f=typeof c>"u"?t.children:c;return l(a(),o,f)},dump(o){const c=n("nodeSize"),f=h=>p=>{const y=h+"  ",d=h+"    ",{x,y:v}=p,m=c(p),g=p.children||[],k=g.length===0?" ":`,${y}children: [${d}${g.map(f(d)).join(d)}${y}],${h}`;return`{ size: [${m.join(", ")}],${y}x: ${x}, y: ${v}${k}},`};return f(`
`)(o)}}),r}G.version=ne;const _=(e,t=0)=>(e.y=t,(e.children||[]).reduce((n,r)=>{const[a,s]=n;_(r,e.y+e.ySize);const l=(a===0?r.lExt:r.rExt).bottom;a!==0&&ae(e,a,s);const o=pe(l,a,s);return[a+1,o]},[0,null]),ie(e),ue(e),e),q=(e,t,n)=>{typeof t>"u"&&(t=-e.relX-e.prelim,n=0);const r=t+e.relX;return e.relX=r+e.prelim-n,e.prelim=0,e.x=n+e.relX,(e.children||[]).forEach(a=>q(a,r,e.x)),e},ie=e=>{(e.children||[]).reduce((t,n)=>{const[r,a]=t,s=r+n.shift,l=a+s+n.change;return n.relX+=l,[s,l]},[0,0])},ae=(e,t,n)=>{const r=e.children[t-1],a=e.children[t];let s=r,l=r.relX,o=a,c=a.relX,f=!0;for(;s&&o;){s.bottom>n.lowY&&(n=n.next);const h=l+s.prelim-(c+o.prelim)+s.xSize/2+o.xSize/2+s.spacing(o);(h>0||h<0&&f)&&(c+=h,se(a,h),oe(e,t,n.index,h)),f=!1;const p=s.bottom,y=o.bottom;p<=y&&(s=he(s),s&&(l+=s.relX)),p>=y&&(o=le(o),o&&(c+=o.relX))}!s&&o?ce(e,t,o,c):s&&!o&&de(e,t,s,l)},se=(e,t)=>{e.relX+=t,e.lExtRelX+=t,e.rExtRelX+=t},oe=(e,t,n,r)=>{const a=e.children[t],s=t-n;if(s>1){const l=r/s;e.children[n+1].shift+=l,a.shift-=l,a.change-=r-l}},le=e=>e.hasChildren?e.firstChild:e.lThr,he=e=>e.hasChildren?e.lastChild:e.rThr,ce=(e,t,n,r)=>{const a=e.firstChild,s=a.lExt,l=e.children[t];s.lThr=n;const o=r-n.relX-a.lExtRelX;s.relX+=o,s.prelim-=o,a.lExt=l.lExt,a.lExtRelX=l.lExtRelX},de=(e,t,n,r)=>{const a=e.children[t],s=a.rExt,l=e.children[t-1];s.rThr=n;const o=r-n.relX-a.rExtRelX;s.relX+=o,s.prelim-=o,a.rExt=l.rExt,a.rExtRelX=l.rExtRelX},ue=e=>{if(e.hasChildren){const t=e.firstChild,n=e.lastChild,r=(t.prelim+t.relX-t.xSize/2+n.relX+n.prelim+n.xSize/2)/2;Object.assign(e,{prelim:r,lExt:t.lExt,lExtRelX:t.lExtRelX,rExt:n.rExt,rExtRelX:n.rExtRelX})}},pe=(e,t,n)=>{for(;n!==null&&e>=n.lowY;)n=n.next;return{lowY:e,index:t,next:n}},fe=".markmap{font:300 16px/20px sans-serif}.markmap-link{fill:none}.markmap-node>circle{cursor:pointer}.markmap-foreign{display:inline-block}.markmap-foreign a{color:#0097e6}.markmap-foreign a:hover{color:#00a8ff}.markmap-foreign code{padding:.25em;font-size:calc(1em - 2px);color:#555;background-color:#f0f0f0;border-radius:2px}.markmap-foreign pre{margin:0}.markmap-foreign pre>code{display:block}.markmap-foreign del{text-decoration:line-through}.markmap-foreign em{font-style:italic}.markmap-foreign strong{font-weight:700}.markmap-foreign mark{background:#ffeaa7}",me=".markmap-container{position:absolute;width:0;height:0;top:-100px;left:-100px;overflow:hidden}.markmap-container>.markmap-foreign{display:inline-block}.markmap-container>.markmap-foreign>div:last-child,.markmap-container>.markmap-foreign>div:last-child :not(pre){white-space:nowrap}.markmap-container>.markmap-foreign>div:last-child code{white-space:inherit}";function P(e){const t=e.data;return Math.max(4-2*t.depth,1.5)}function V(e,t){const n=pt(e,t);return e[n]}function H(e){e.stopPropagation()}function ge(){return{transformHtml:new K}}const ye=new K,xe=ht(ct),J=typeof navigator<"u"&&navigator.userAgent.includes("Macintosh"),Q=class D{constructor(t,n){this.options=D.defaultOptions,this.revokers=[],this.handleZoom=r=>{const{transform:a}=r;this.g.attr("transform",a)},this.handlePan=r=>{r.preventDefault();const a=A(this.svg.node()),s=a.translate(-r.deltaX/a.k,-r.deltaY/a.k);this.svg.call(this.zoom.transform,s)},this.handleClick=(r,a)=>{let s=this.options.toggleRecursively;(J?r.metaKey:r.ctrlKey)&&(s=!s),this.toggleNode(a.data,s)},this.viewHooks=ge(),this.svg=t.datum?t:dt(t),this.styleNode=this.svg.append("style"),this.zoom=ot().filter(r=>this.options.scrollForPan&&r.type==="wheel"?r.ctrlKey&&!r.button:(!r.ctrlKey||r.type==="wheel")&&!r.button).on("zoom",this.handleZoom),this.setOptions(n),this.state={id:this.options.id||this.svg.attr("id")||at(),minX:0,maxX:0,minY:0,maxY:0},this.g=this.svg.append("g"),this.revokers.push(ye.tap(()=>{this.setData()}))}getStyleContent(){const{style:t}=this.options,{id:n}=this.state,r=typeof t=="function"?t(n):"";return[this.options.embedGlobalCSS&&fe,r].filter(Boolean).join(`
`)}updateStyle(){this.svg.attr("class",st(this.svg.attr("class"),"markmap",this.state.id));const t=this.getStyleContent();this.styleNode.text(t)}toggleNode(t,n=!1){var r,a;const s=(r=t.payload)!=null&&r.fold?0:1;n?M(t,(l,o)=>{l.payload={...l.payload,fold:s},o()}):t.payload={...t.payload,fold:(a=t.payload)!=null&&a.fold?0:1},this.renderData(t)}initializeData(t){let n=0;const{color:r,nodeMinHeight:a,maxWidth:s,initialExpandLevel:l}=this.options,{id:o}=this.state,c=O(j("div",{className:`markmap-container markmap ${o}-g`})),f=O(j("style",{children:[this.getStyleContent(),me].join(`
`)}));document.body.append(c,f);const h=s?`max-width: ${s}px`:"";let p=0;M(t,(d,x,v)=>{var m,g,k;d.children=(m=d.children)==null?void 0:m.map(w=>({...w})),n+=1;const S=O(j("div",{className:"markmap-foreign",style:h,children:j("div",{dangerouslySetInnerHTML:{__html:d.content}})}));c.append(S),d.state={...d.state,id:n,el:S.firstChild},d.state.path=[(g=v==null?void 0:v.state)==null?void 0:g.path,d.state.id].filter(Boolean).join("."),r(d);const E=((k=d.payload)==null?void 0:k.fold)===2;E?p+=1:(p||l>=0&&d.depth>=l)&&(d.payload={...d.payload,fold:1}),x(),E&&(p-=1)});const y=Array.from(c.childNodes).map(d=>d.firstChild);this.viewHooks.transformHtml.call(this,y),y.forEach(d=>{var x;(x=d.parentNode)==null||x.append(d.cloneNode(!0))}),M(t,(d,x,v)=>{var m;const g=d.state,k=g.el.getBoundingClientRect();d.content=g.el.innerHTML,g.size=[Math.ceil(k.width)+1,Math.max(Math.ceil(k.height),a)],g.key=[(m=v==null?void 0:v.state)==null?void 0:m.id,g.id].filter(Boolean).join(".")+d.content,x()}),c.remove(),f.remove()}setOptions(t){this.options={...this.options,...t},this.options.zoom?this.svg.call(this.zoom):this.svg.on(".zoom",null),this.options.pan?this.svg.on("wheel",this.handlePan):this.svg.on("wheel",null)}setData(t,n){n&&this.setOptions(n),t&&(this.state.data=t),this.state.data&&(this.initializeData(this.state.data),this.updateStyle(),this.renderData())}renderData(t){if(!this.state.data)return;const{spacingHorizontal:n,paddingX:r,spacingVertical:a,autoFit:s,color:l}=this.options,o=G({}).children(i=>{var u;if(!((u=i.payload)!=null&&u.fold))return i.children}).nodeSize(i=>{const[u,z]=i.data.state.size;return[z,u+(u?r*2:0)+n]}).spacing((i,u)=>i.parent===u.parent?a:a*2),c=o.hierarchy(this.state.data);o(c);const f=c.descendants().reverse(),h=c.links(),p=ut(),y=Y(f,i=>i.x-i.xSize/2),d=I(f,i=>i.x+i.xSize/2),x=Y(f,i=>i.y),v=I(f,i=>i.y+i.ySize-n);Object.assign(this.state,{minX:y,maxX:d,minY:x,maxY:v}),s&&this.fit();const m=t&&f.find(i=>i.data===t)||c,g=m.data.state.x0??m.x,k=m.data.state.y0??m.y,S=this.g.selectAll(b("g")).data(f,i=>i.data.state.key),E=S.enter().append("g").attr("data-depth",i=>i.data.depth).attr("data-path",i=>i.data.state.path).attr("transform",i=>`translate(${k+m.ySize-i.ySize},${g+m.xSize/2-i.xSize})`),w=this.transition(S.exit());w.select("line").attr("x1",i=>i.ySize-n).attr("x2",i=>i.ySize-n),w.select("foreignObject").style("opacity",0),w.attr("transform",i=>`translate(${m.y+m.ySize-i.ySize},${m.x+m.xSize/2-i.xSize})`).remove();const X=S.merge(E).attr("class",i=>{var u;return["markmap-node",((u=i.data.payload)==null?void 0:u.fold)&&"markmap-fold"].filter(Boolean).join(" ")});this.transition(X).attr("transform",i=>`translate(${i.y},${i.x-i.xSize/2})`);const tt=X.selectAll(b("line")).data(i=>[i],i=>i.data.state.key).join(i=>i.append("line").attr("x1",u=>u.ySize-n).attr("x2",u=>u.ySize-n),i=>i,i=>i.remove());this.transition(tt).attr("x1",-1).attr("x2",i=>i.ySize-n+2).attr("y1",i=>i.xSize).attr("y2",i=>i.xSize).attr("stroke",i=>l(i.data)).attr("stroke-width",P);const et=X.selectAll(b("circle")).data(i=>{var u;return(u=i.data.children)!=null&&u.length?[i]:[]},i=>i.data.state.key).join(i=>i.append("circle").attr("stroke-width","1.5").attr("cx",u=>u.ySize-n).attr("cy",u=>u.xSize).attr("r",0).on("click",(u,z)=>this.handleClick(u,z)).on("mousedown",H),i=>i,i=>i.remove());this.transition(et).attr("r",6).attr("cx",i=>i.ySize-n).attr("cy",i=>i.xSize).attr("stroke",i=>l(i.data)).attr("fill",i=>{var u;return(u=i.data.payload)!=null&&u.fold&&i.data.children?l(i.data):"#fff"});const nt=X.selectAll(b("foreignObject")).data(i=>[i],i=>i.data.state.key).join(i=>{const u=i.append("foreignObject").attr("class","markmap-foreign").attr("x",r).attr("y",0).style("opacity",0).on("mousedown",H).on("dblclick",H);return u.append("xhtml:div").select(function(z){const C=z.data.state.el.cloneNode(!0);return this.replaceWith(C),C}).attr("xmlns","http://www.w3.org/1999/xhtml"),u},i=>i,i=>i.remove()).attr("width",i=>Math.max(0,i.ySize-n-r*2)).attr("height",i=>i.xSize);this.transition(nt).style("opacity",1);const rt=this.g.selectAll(b("path")).data(h,i=>i.target.data.state.key).join(i=>{const u=[k+m.ySize-n,g+m.xSize/2];return i.insert("path","g").attr("class","markmap-link").attr("data-depth",z=>z.target.data.depth).attr("data-path",z=>z.target.data.state.path).attr("d",p({source:u,target:u}))},i=>i,i=>{const u=[m.y+m.ySize-n,m.x+m.xSize/2];return this.transition(i).attr("d",p({source:u,target:u})).remove()});this.transition(rt).attr("stroke",i=>l(i.target.data)).attr("stroke-width",i=>P(i.target)).attr("d",i=>{const u=i.source,z=i.target,C=[u.y+u.ySize-n,u.x+u.xSize/2],it=[z.y,z.x+z.xSize/2];return p({source:C,target:it})}),f.forEach(i=>{i.data.state.x0=i.x,i.data.state.y0=i.y})}transition(t){const{duration:n}=this.options;return t.transition().duration(n)}async fit(){const t=this.svg.node(),{width:n,height:r}=t.getBoundingClientRect(),{fitRatio:a}=this.options,{minX:s,maxX:l,minY:o,maxY:c}=this.state,f=c-o,h=l-s,p=Math.min(n/f*a,r/h*a,2),y=lt.translate((n-f*p)/2-o*p,(r-h*p)/2-s*p).scale(p);return this.transition(this.svg).call(this.zoom.transform,y).end().catch($)}async ensureView(t,n){let r;if(this.g.selectAll(b("g")).each(function(g){g.data===t&&(r=g)}),!r)return;const a=this.svg.node(),{spacingHorizontal:s}=this.options,l=a.getBoundingClientRect(),o=A(a),[c,f]=[r.y,r.y+r.ySize-s+2].map(g=>g*o.k+o.x),[h,p]=[r.x-r.xSize/2,r.x+r.xSize/2].map(g=>g*o.k+o.y),y={left:0,right:0,top:0,bottom:0,...n},d=[y.left-c,l.width-y.right-f],x=[y.top-h,l.height-y.bottom-p],v=d[0]*d[1]>0?V(d,Math.abs)/o.k:0,m=x[0]*x[1]>0?V(x,Math.abs)/o.k:0;if(v||m){const g=o.translate(v,m);return this.transition(this.svg).call(this.zoom.transform,g).end().catch($)}}async rescale(t){const n=this.svg.node(),{width:r,height:a}=n.getBoundingClientRect(),s=r/2,l=a/2,o=A(n),c=o.translate((s-o.x)*(1-t)/o.k,(l-o.y)*(1-t)/o.k).scale(t);return this.transition(this.svg).call(this.zoom.transform,c).end().catch($)}destroy(){this.svg.on(".zoom",null),this.svg.html(null),this.revokers.forEach(t=>{t()})}static create(t,n,r=null){const a=new D(t,n);return r&&(a.setData(r),a.fit()),a}};Q.defaultOptions={autoFit:!1,color:e=>{var t;return xe(`${((t=e.state)==null?void 0:t.path)||""}`)},duration:500,embedGlobalCSS:!0,fitRatio:.95,maxWidth:0,nodeMinHeight:16,paddingX:8,scrollForPan:J,spacingHorizontal:80,spacingVertical:5,initialExpandLevel:-1,zoom:!0,pan:!0,toggleRecursively:!1};let Ce=Q;export{Ce as F};
