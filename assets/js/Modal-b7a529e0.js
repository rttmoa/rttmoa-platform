import{r as m,j as e,a4 as V,B as g,ar as a,R as _,C as n,ae as o,as as F}from"./index-6ab6cade.js";import{R as f}from"./index-a5098ef4.js";import{T as M}from"./index-dbd4e165.js";import"./index-d1e96b4a.js";import"./useBubbleLock-0d556991.js";import"./TreeSelect-54a254f8.js";import"./Select-74f8e578.js";import"./List-556d4d6b.js";import"./conductUtil-0f9ba3c8.js";import"./createForOfIteratorHelper-2ec8257d.js";import"./Tree-27289865.js";import"./useShowArrow-628cd2bf.js";import"./useIcons-bfa037c0.js";import"./iconUtil-3c2f21e2.js";import"./index-1b2860a7.js";const U=b=>{const{form:d,menuList:I,modalTitle:v,modalType:r,modalIsVisible:q,modalMenuInfo:l,setModalIsVisible:T,handleModalSubmit:p}=b,[t,u]=m.useState("是"),[c,w]=m.useState("");m.useEffect(()=>{d.setFieldsValue({isTop:r==="create"?"是":"否",parent_id:l==null?void 0:l.name,email:r==="create"?"":l==null?void 0:l.email,leader:r==="create"?"":l==null?void 0:l.leader,name:r==="create"?"":l==null?void 0:l.name,phone:r==="create"?"":l==null?void 0:l.phone,sort:r==="create"?"":l==null?void 0:l.sort,status:r==="create"?"":l==null?void 0:l.status}),u(r==="create"?"是":"否")},[l,r]);const h=(s,S)=>s==null?void 0:s.map(i=>{const j={value:i.name||null,label:i.name||null};return i.children&&i.children.length&&(j.children=h(i.children)),j}),y=h(I),x=()=>{T(!1)},C=()=>{d.submit()},L=()=>{const s=d.getFieldsValue();s.isTop=t,t=="是"&&(s.parent_id=0),t=="否"&&(s.parent_id=c),r=="edit"&&(s._id=l.unique),s.parent_id,p&&p(r,s)};return e.jsx(V,{title:v,width:800,open:q,onCancel:x,footer:[e.jsx(g,{loading:!1,onClick:x,children:"取消"}),e.jsx(g,{type:"primary",loading:!1,onClick:C,children:"提交"},"link")],children:e.jsx(a,{form:d,onFinish:L,layout:"horizontal",size:"middle",labelCol:{span:6},wrapperCol:{span:16},children:e.jsxs(_,{gutter:16,children:[e.jsx(n,{span:12,children:e.jsx(a.Item,{label:"部门名称",name:"name",rules:[{required:!0,message:"必填：部门名称"}],children:e.jsx(o,{variant:"outlined",placeholder:"请输入部门名称",maxLength:30})})}),e.jsx(n,{span:12,children:e.jsx(a.Item,{label:"部门排序",name:"sort",rules:[{required:!0,message:"必填：部门排序"}],children:e.jsx(F,{variant:"outlined",placeholder:"请输入部门排序",maxLength:30})})}),e.jsx(n,{span:12,children:e.jsx(a.Item,{label:"负责人",name:"leader",rules:[{required:!1,message:""}],children:e.jsx(o,{variant:"outlined",placeholder:"请输入负责人",maxLength:30})})}),e.jsx(n,{span:12,children:e.jsx(a.Item,{label:"联系电话",name:"phone",rules:[{required:!1,message:""}],children:e.jsx(o,{variant:"outlined",placeholder:"请输入联系电话",maxLength:30})})}),e.jsx(n,{span:12,children:e.jsx(a.Item,{label:"邮箱",name:"email",rules:[{required:!1,message:""}],children:e.jsx(o,{variant:"outlined",placeholder:"请输入邮箱",maxLength:30})})}),e.jsx(n,{span:12,children:e.jsx(a.Item,{label:"部门状态",name:"status",rules:[{required:!1,message:""}],children:e.jsx(f.Group,{name:"radiogroup",defaultValue:"启用",options:[{value:"启用",label:"启用"},{value:"停用",label:"停用"}]})})}),e.jsx(n,{span:24,pull:3,children:e.jsx(a.Item,{label:"部门描述",name:"desc",rules:[{required:!1,message:""}],children:e.jsx(o.TextArea,{rows:3,placeholder:"请输入部门描述",maxLength:6})})}),e.jsx(n,{span:24,pull:3,children:e.jsx(a.Item,{label:"是否顶级部门",name:"isTop",rules:[{required:!0,message:""}],children:e.jsx(f.Group,{options:["是","否"],defaultValue:"是",onChange:s=>{u(s.target.value)},value:t})})}),t=="是"&&e.jsx(n,{span:24,pull:3,children:e.jsx(a.Item,{})}),t=="否"&&e.jsx(n,{span:24,pull:3,children:e.jsx(a.Item,{label:"上级部门",name:"parent_id",rules:[{required:!0,message:"必须：上级部门"}],children:e.jsx(M,{style:{width:"100%"},value:c,placeholder:"请选择上级部门",allowClear:!0,onChange:s=>{w(s)},treeData:y,dropdownStyle:{maxHeight:500,overflow:"auto"},className:"custom-tree-dropdown"})})})]})})})};export{U as default};
//# sourceMappingURL=Modal-b7a529e0.js.map
