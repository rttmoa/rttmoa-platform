import{g as Je}from"./@ant-design-63539318.js";import{c as ce,j as Me,k as xe,a as be,_ as Oe,f as me,e as D,d as f,b as T,l as Te,h as Xe}from"./@babel-c46ce09a.js";import{c as Ye}from"./classnames-3ded05b8.js";import{c as pe,z as Ce,H as te,q as Ze,o as et,a1 as tt}from"./rc-util-8976b5fa.js";import{r as u}from"./react-12b51ca5.js";var nt=["children"],Ne=u.createContext({});function rt(t){var e=t.children,n=ce(t,nt);return u.createElement(Ne.Provider,{value:n},e)}var at=function(t){Me(n,t);var e=xe(n);function n(){return be(this,n),e.apply(this,arguments)}return Oe(n,[{key:"render",value:function(){return this.props.children}}]),n}(u.Component),K="none",X="appear",Y="enter",Z="leave",_e="none",L="prepare",z="start",H="active",Ee="end",De="prepared";function ke(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit".concat(t)]="webkit".concat(e),n["Moz".concat(t)]="moz".concat(e),n["ms".concat(t)]="MS".concat(e),n["O".concat(t)]="o".concat(e.toLowerCase()),n}function it(t,e){var n={animationend:ke("Animation","AnimationEnd"),transitionend:ke("Transition","TransitionEnd")};return t&&("AnimationEvent"in e||delete n.animationend.animation,"TransitionEvent"in e||delete n.transitionend.transition),n}var ot=it(pe(),typeof window<"u"?window:{}),Ue={};if(pe()){var ut=document.createElement("div");Ue=ut.style}var ee={};function Ve(t){if(ee[t])return ee[t];var e=ot[t];if(e)for(var n=Object.keys(e),r=n.length,i=0;i<r;i+=1){var s=n[i];if(Object.prototype.hasOwnProperty.call(e,s)&&s in Ue)return ee[t]=e[s],ee[t]}return""}var we=Ve("animationend"),je=Ve("transitionend"),Fe=!!(we&&je),Pe=we||"animationend",Re=je||"transitionend";function Le(t,e){if(!t)return null;if(me(t)==="object"){var n=e.replace(/-\w/g,function(r){return r[1].toUpperCase()});return t[n]}return"".concat(t,"-").concat(e)}const st=function(t){var e=u.useRef(),n=u.useRef(t);n.current=t;var r=u.useCallback(function(a){n.current(a)},[]);function i(a){a&&(a.removeEventListener(Re,r),a.removeEventListener(Pe,r))}function s(a){e.current&&e.current!==a&&i(e.current),a&&a!==e.current&&(a.addEventListener(Re,r),a.addEventListener(Pe,r),e.current=a)}return u.useEffect(function(){return function(){i(e.current)}},[]),[s,i]};var Ie=pe()?u.useLayoutEffect:u.useEffect;const ct=function(){var t=u.useRef(null);function e(){Ce.cancel(t.current)}function n(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;e();var s=Ce(function(){i<=1?r({isCanceled:function(){return s!==t.current}}):n(r,i-1)});t.current=s}return u.useEffect(function(){return function(){e()}},[]),[n,e]};var vt=[L,z,H,Ee],ft=[L,De],Ke=!1,dt=!0;function $e(t){return t===H||t===Ee}const lt=function(t,e,n){var r=te(_e),i=D(r,2),s=i[0],a=i[1],m=ct(),E=D(m,2),o=E[0],c=E[1];function v(){a(L,!0)}var d=e?ft:vt;return Ie(function(){if(s!==_e&&s!==Ee){var l=d.indexOf(s),S=d[l+1],k=n(s);k===Ke?a(S,!0):S&&o(function(M){function C(){M.isCanceled()||a(S,!0)}k===!0?C():Promise.resolve(k).then(C)})}},[t,s]),u.useEffect(function(){return function(){c()}},[]),[v,s]};function mt(t,e,n,r){var i=r.motionEnter,s=i===void 0?!0:i,a=r.motionAppear,m=a===void 0?!0:a,E=r.motionLeave,o=E===void 0?!0:E,c=r.motionDeadline,v=r.motionLeaveImmediately,d=r.onAppearPrepare,l=r.onEnterPrepare,S=r.onLeavePrepare,k=r.onAppearStart,M=r.onEnterStart,C=r.onLeaveStart,U=r.onAppearActive,V=r.onEnterActive,N=r.onLeaveActive,w=r.onAppearEnd,P=r.onEnterEnd,_=r.onLeaveEnd,O=r.onVisibleChanged,ne=te(),$=D(ne,2),R=$[0],j=$[1],A=te(K),F=D(A,2),p=F[0],x=F[1],B=te(null),G=D(B,2),re=G[0],Q=G[1],ae=u.useRef(!1),ie=u.useRef(null);function J(){return n()}var Se=u.useRef(!1);function ye(){x(K,!0),Q(null,!0)}function he(g){var y=J();if(!(g&&!g.deadline&&g.target!==y)){var h=Se.current,b;p===X&&h?b=w==null?void 0:w(y,g):p===Y&&h?b=P==null?void 0:P(y,g):p===Z&&h&&(b=_==null?void 0:_(y,g)),p!==K&&h&&b!==!1&&ye()}}var ze=st(he),He=D(ze,1),We=He[0],Ae=function(y){var h,b,q;switch(y){case X:return h={},T(h,L,d),T(h,z,k),T(h,H,U),h;case Y:return b={},T(b,L,l),T(b,z,M),T(b,H,V),b;case Z:return q={},T(q,L,S),T(q,z,C),T(q,H,N),q;default:return{}}},W=u.useMemo(function(){return Ae(p)},[p]),qe=lt(p,!t,function(g){if(g===L){var y=W[L];return y?y(J()):Ke}if(I in W){var h;Q(((h=W[I])===null||h===void 0?void 0:h.call(W,J(),null))||null)}return I===H&&(We(J()),c>0&&(clearTimeout(ie.current),ie.current=setTimeout(function(){he({deadline:!0})},c))),I===De&&ye(),dt}),ge=D(qe,2),Be=ge[0],I=ge[1],Ge=$e(I);Se.current=Ge,Ie(function(){j(e);var g=ae.current;ae.current=!0;var y;!g&&e&&m&&(y=X),g&&e&&s&&(y=Y),(g&&!e&&o||!g&&v&&!e&&o)&&(y=Z);var h=Ae(y);y&&(t||h[L])?(x(y),Be()):x(K)},[e]),u.useEffect(function(){(p===X&&!m||p===Y&&!s||p===Z&&!o)&&x(K)},[m,s,o]),u.useEffect(function(){return function(){ae.current=!1,clearTimeout(ie.current)}},[]);var oe=u.useRef(!1);u.useEffect(function(){R&&(oe.current=!0),R!==void 0&&p===K&&((oe.current||R)&&(O==null||O(R)),oe.current=!0)},[R,p]);var ue=re;return W[L]&&I===z&&(ue=f({transition:"none"},ue)),[p,I,ue,R??e]}function pt(t){var e=t;me(t)==="object"&&(e=t.transitionSupport);function n(i,s){return!!(i.motionName&&e&&s!==!1)}var r=u.forwardRef(function(i,s){var a=i.visible,m=a===void 0?!0:a,E=i.removeOnLeave,o=E===void 0?!0:E,c=i.forceRender,v=i.children,d=i.motionName,l=i.leavedClassName,S=i.eventProps,k=u.useContext(Ne),M=k.motion,C=n(i,M),U=u.useRef(),V=u.useRef();function N(){try{return U.current instanceof HTMLElement?U.current:tt(V.current)}catch{return null}}var w=mt(C,m,N,i),P=D(w,4),_=P[0],O=P[1],ne=P[2],$=P[3],R=u.useRef($);$&&(R.current=!0);var j=u.useCallback(function(Q){U.current=Q,Ze(s,Q)},[s]),A,F=f(f({},S),{},{visible:m});if(!v)A=null;else if(_===K)$?A=v(f({},F),j):!o&&R.current&&l?A=v(f(f({},F),{},{className:l}),j):c||!o&&!l?A=v(f(f({},F),{},{style:{display:"none"}}),j):A=null;else{var p,x;O===L?x="prepare":$e(O)?x="active":O===z&&(x="start");var B=Le(d,"".concat(_,"-").concat(x));A=v(f(f({},F),{},{className:Ye(Le(d,_),(p={},T(p,B,B&&x),T(p,d,typeof d=="string"),p)),style:ne}),j)}if(u.isValidElement(A)&&et(A)){var G=A,re=G.ref;re||(A=u.cloneElement(A,{ref:j}))}return u.createElement(at,{ref:V},A)});return r.displayName="CSSMotion",r}const Qe=pt(Fe);var ve="add",fe="keep",de="remove",se="removed";function Et(t){var e;return t&&me(t)==="object"&&"key"in t?e=t:e={key:t},f(f({},e),{},{key:String(e.key)})}function le(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return t.map(Et)}function St(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=[],r=0,i=e.length,s=le(t),a=le(e);s.forEach(function(o){for(var c=!1,v=r;v<i;v+=1){var d=a[v];if(d.key===o.key){r<v&&(n=n.concat(a.slice(r,v).map(function(l){return f(f({},l),{},{status:ve})})),r=v),n.push(f(f({},d),{},{status:fe})),r+=1,c=!0;break}}c||n.push(f(f({},o),{},{status:de}))}),r<i&&(n=n.concat(a.slice(r).map(function(o){return f(f({},o),{},{status:ve})})));var m={};n.forEach(function(o){var c=o.key;m[c]=(m[c]||0)+1});var E=Object.keys(m).filter(function(o){return m[o]>1});return E.forEach(function(o){n=n.filter(function(c){var v=c.key,d=c.status;return v!==o||d!==de}),n.forEach(function(c){c.key===o&&(c.status=fe)})}),n}var yt=["component","children","onVisibleChanged","onAllRemoved"],ht=["status"],At=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function gt(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Qe,n=function(r){Me(s,r);var i=xe(s);function s(){var a;be(this,s);for(var m=arguments.length,E=new Array(m),o=0;o<m;o++)E[o]=arguments[o];return a=i.call.apply(i,[this].concat(E)),T(Te(a),"state",{keyEntities:[]}),T(Te(a),"removeKey",function(c){var v=a.state.keyEntities,d=v.map(function(l){return l.key!==c?l:f(f({},l),{},{status:se})});return a.setState({keyEntities:d}),d.filter(function(l){var S=l.status;return S!==se}).length}),a}return Oe(s,[{key:"render",value:function(){var m=this,E=this.state.keyEntities,o=this.props,c=o.component,v=o.children,d=o.onVisibleChanged,l=o.onAllRemoved,S=ce(o,yt),k=c||u.Fragment,M={};return At.forEach(function(C){M[C]=S[C],delete S[C]}),delete S.keys,u.createElement(k,S,E.map(function(C,U){var V=C.status,N=ce(C,ht),w=V===ve||V===fe;return u.createElement(e,Xe({},M,{key:N.key,visible:w,eventProps:N,onVisibleChanged:function(_){if(d==null||d(_,{key:N.key}),!_){var O=m.removeKey(N.key);O===0&&l&&l()}}}),function(P,_){return v(f(f({},P),{},{index:U}),_)})}))}}],[{key:"getDerivedStateFromProps",value:function(m,E){var o=m.keys,c=E.keyEntities,v=le(o),d=St(c,v);return{keyEntities:d.filter(function(l){var S=c.find(function(k){var M=k.key;return l.key===M});return!(S&&S.status===se&&l.status===de)})}}}]),s}(u.Component);return T(n,"defaultProps",{component:"div"}),n}const Tt=gt(Fe),Ct=Object.freeze(Object.defineProperty({__proto__:null,CSSMotionList:Tt,Provider:rt,default:Qe},Symbol.toStringTag,{value:"Module"})),Mt=Je(Ct);export{Qe as C,rt as M,Tt as a,Mt as r};
