import{b,r as l,j as n,B as w,a7 as k,aO as E,an as h,I as C}from"./.pnpm-e6eae8df.js";const y=b.createContext(null),v=({index:i,...a})=>{const[s]=h.useForm();return n.jsx(h,{form:s,component:!1,children:n.jsx(y.Provider,{value:s,children:n.jsx("tr",{...a})})})},I=({title:i,editable:a,children:s,dataIndex:d,record:c,handleSave:f,...p})=>{const[o,g]=l.useState(!1),u=l.useRef(null),m=l.useContext(y);l.useEffect(()=>{o&&u.current.focus()},[o]);const e=()=>{g(!o),m.setFieldsValue({[d]:c[d]})},t=async()=>{try{const x=await m.validateFields();e(),f({...c,...x})}catch{}};let r=s;return a&&(r=o?n.jsx(h.Item,{style:{margin:0},name:d,rules:[{required:!0,message:`${i} is required.`}],children:n.jsx(C,{ref:u,onPressEnter:t,onBlur:t})}):n.jsx("div",{className:"editable-cell-value-wrap",style:{paddingRight:24},onClick:e,children:s})),n.jsx("td",{...p,children:r})},D=({isShow:i})=>{const[a,s]=l.useState([{key:"0",name:"Edward King 0",age:"32",address:"London, Park Lane no. 0"},{key:"1",name:"Edward King 1",age:"32",address:"London, Park Lane no. 1"}]),[d,c]=l.useState(2),f=e=>{const t=a.filter(r=>r.key!==e);s(t)},p=[{title:"name",dataIndex:"name",width:"30%",editable:!0},{title:"age",dataIndex:"age"},{title:"address",dataIndex:"address"},{title:"operation",dataIndex:"operation",render:(e,t)=>a.length>=1?n.jsx(E,{title:"Sure to delete?",onConfirm:()=>f(t.key),children:n.jsx("a",{children:"Delete"})}):null}],o=()=>{const e={key:d,name:`Edward King ${d}`,age:"32",address:`London, Park Lane no. ${d}`};s([...a,e]),c(d+1)},g=e=>{const t=[...a],r=t.findIndex(j=>e.key===j.key),x=t[r];t.splice(r,1,{...x,...e}),s(t)},u={body:{row:v,cell:I}},m=p.map(e=>e.editable?{...e,onCell:t=>({record:t,editable:e.editable,dataIndex:e.dataIndex,title:e.title,handleSave:g})}:e);return i&&n.jsxs("div",{children:[n.jsx(w,{onClick:o,type:"primary",style:{marginBottom:16},children:"Add a row"}),n.jsx(k,{components:u,rowClassName:()=>"editable-row",bordered:!0,dataSource:a,columns:m})]})};export{D as default};
