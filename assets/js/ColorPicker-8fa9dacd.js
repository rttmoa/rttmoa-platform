import{r as f,K as H,a as o,t as k,M as j,O as Q,du as G,dv as I,dw as U,J as Z,dx as F,dy as V,N as B,dz as ee,dA as te,dB as re}from"./index-6ab6cade.js";function ne(t){var e="touches"in t?t.touches[0]:t,r=document.documentElement.scrollLeft||document.body.scrollLeft||window.pageXOffset,u=document.documentElement.scrollTop||document.body.scrollTop||window.pageYOffset;return{pageX:e.pageX-r,pageY:e.pageY-u}}function J(t){var e=t.targetRef,r=t.containerRef,u=t.direction,n=t.onDragChange,a=t.onDragChangeComplete,m=t.calculate,c=t.color,d=t.disabledDrag,p=f.useState({x:0,y:0}),h=H(p,2),C=h[0],R=h[1],g=f.useRef(null),v=f.useRef(null);f.useEffect(function(){R(m())},[c]),f.useEffect(function(){return function(){document.removeEventListener("mousemove",g.current),document.removeEventListener("mouseup",v.current),document.removeEventListener("touchmove",g.current),document.removeEventListener("touchend",v.current),g.current=null,v.current=null}},[]);var E=function(l){var i=ne(l),X=i.pageX,Y=i.pageY,y=r.current.getBoundingClientRect(),O=y.x,_=y.y,$=y.width,z=y.height,N=e.current.getBoundingClientRect(),L=N.width,w=N.height,A=L/2,P=w/2,D=Math.max(0,Math.min(X-O,$))-A,s=Math.max(0,Math.min(Y-_,z))-P,T={x:D,y:u==="x"?C.y:s};if(L===0&&w===0||L!==w)return!1;n==null||n(T)},x=function(l){l.preventDefault(),E(l)},b=function(l){l.preventDefault(),document.removeEventListener("mousemove",g.current),document.removeEventListener("mouseup",v.current),document.removeEventListener("touchmove",g.current),document.removeEventListener("touchend",v.current),g.current=null,v.current=null,a==null||a()},M=function(l){document.removeEventListener("mousemove",g.current),document.removeEventListener("mouseup",v.current),!d&&(E(l),document.addEventListener("mousemove",x),document.addEventListener("mouseup",b),document.addEventListener("touchmove",x),document.addEventListener("touchend",b),g.current=x,v.current=b)};return[C,M]}var K=function(e){var r=e.size,u=r===void 0?"default":r,n=e.color,a=e.prefixCls;return o.createElement("div",{className:k("".concat(a,"-handler"),j({},"".concat(a,"-handler-sm"),u==="small")),style:{backgroundColor:n}})},W=function(e){var r=e.children,u=e.style,n=e.prefixCls;return o.createElement("div",{className:"".concat(n,"-palette"),style:Q({position:"relative"},u)},r)},q=f.forwardRef(function(t,e){var r=t.children,u=t.x,n=t.y;return o.createElement("div",{ref:e,style:{position:"absolute",left:"".concat(u,"%"),top:"".concat(n,"%"),zIndex:1,transform:"translate(-50%, -50%)"}},r)}),ae=function(e){var r=e.color,u=e.onChange,n=e.prefixCls,a=e.onChangeComplete,m=e.disabled,c=f.useRef(),d=f.useRef(),p=f.useRef(r),h=G(function(E){var x=I({offset:E,targetRef:d,containerRef:c,color:r});p.current=x,u(x)}),C=J({color:r,containerRef:c,targetRef:d,calculate:function(){return U(r)},onDragChange:h,onDragChangeComplete:function(){return a==null?void 0:a(p.current)},disabledDrag:m}),R=H(C,2),g=R[0],v=R[1];return o.createElement("div",{ref:c,className:"".concat(n,"-select"),onMouseDown:v,onTouchStart:v},o.createElement(W,{prefixCls:n},o.createElement(q,{x:g.x,y:g.y,ref:d},o.createElement(K,{color:r.toRgbString(),prefixCls:n})),o.createElement("div",{className:"".concat(n,"-saturation"),style:{backgroundColor:"hsl(".concat(r.toHsb().h,",100%, 50%)"),backgroundImage:"linear-gradient(0deg, #000, transparent),linear-gradient(90deg, #fff, hsla(0, 0%, 100%, 0))"}})))},oe=function(e,r){var u=Z(e,{value:r}),n=H(u,2),a=n[0],m=n[1],c=f.useMemo(function(){return F(a)},[a]);return[c,m]},le=function(e){var r=e.colors,u=e.children,n=e.direction,a=n===void 0?"to right":n,m=e.type,c=e.prefixCls,d=f.useMemo(function(){return r.map(function(p,h){var C=F(p);return m==="alpha"&&h===r.length-1&&(C=new V(C.setA(1))),C.toRgbString()}).join(",")},[r,m]);return o.createElement("div",{className:"".concat(c,"-gradient"),style:{position:"absolute",inset:0,background:"linear-gradient(".concat(a,", ").concat(d,")")}},u)},ce=function(e){var r=e.prefixCls,u=e.colors,n=e.disabled,a=e.onChange,m=e.onChangeComplete,c=e.color,d=e.type,p=f.useRef(),h=f.useRef(),C=f.useRef(c),R=function(i){return d==="hue"?i.getHue():i.a*100},g=G(function(l){var i=I({offset:l,targetRef:h,containerRef:p,color:c,type:d});C.current=i,a(R(i))}),v=J({color:c,targetRef:h,containerRef:p,calculate:function(){return U(c,d)},onDragChange:g,onDragChangeComplete:function(){m(R(C.current))},direction:"x",disabledDrag:n}),E=H(v,2),x=E[0],b=E[1],M=o.useMemo(function(){if(d==="hue"){var l=c.toHsb();l.s=1,l.b=1,l.a=1;var i=new V(l);return i}return c},[c,d]),S=o.useMemo(function(){return u.map(function(l){return"".concat(l.color," ").concat(l.percent,"%")})},[u]);return o.createElement("div",{ref:p,className:k("".concat(r,"-slider"),"".concat(r,"-slider-").concat(d)),onMouseDown:b,onTouchStart:b},o.createElement(W,{prefixCls:r},o.createElement(q,{x:x.x,y:x.y,ref:h},o.createElement(K,{size:"small",color:M.toHexString(),prefixCls:r})),o.createElement(le,{colors:S,type:d,prefixCls:r})))};function ue(t){return f.useMemo(function(){var e=t||{},r=e.slider;return[r||ce]},[t])}var ie=[{color:"rgb(255, 0, 0)",percent:0},{color:"rgb(255, 255, 0)",percent:17},{color:"rgb(0, 255, 0)",percent:33},{color:"rgb(0, 255, 255)",percent:50},{color:"rgb(0, 0, 255)",percent:67},{color:"rgb(255, 0, 255)",percent:83},{color:"rgb(255, 0, 0)",percent:100}],de=f.forwardRef(function(t,e){var r=t.value,u=t.defaultValue,n=t.prefixCls,a=n===void 0?te:n,m=t.onChange,c=t.onChangeComplete,d=t.className,p=t.style,h=t.panelRender,C=t.disabledAlpha,R=C===void 0?!1:C,g=t.disabled,v=g===void 0?!1:g,E=t.components,x=ue(E),b=H(x,1),M=b[0],S=oe(u||re,r),l=H(S,2),i=l[0],X=l[1],Y=f.useMemo(function(){return i.setA(1).toRgbString()},[i]),y=function(s,T){r||X(s),m==null||m(s,T)},O=function(s){return new V(i.setHue(s))},_=function(s){return new V(i.setA(s/100))},$=function(s){y(O(s),{type:"hue",value:s})},z=function(s){y(_(s),{type:"alpha",value:s})},N=function(s){c&&c(O(s))},L=function(s){c&&c(_(s))},w=k("".concat(a,"-panel"),d,j({},"".concat(a,"-panel-disabled"),v)),A={prefixCls:a,disabled:v,color:i},P=o.createElement(o.Fragment,null,o.createElement(ae,B({onChange:y},A,{onChangeComplete:c})),o.createElement("div",{className:"".concat(a,"-slider-container")},o.createElement("div",{className:k("".concat(a,"-slider-group"),j({},"".concat(a,"-slider-group-disabled-alpha"),R))},o.createElement(M,B({},A,{type:"hue",colors:ie,min:0,max:359,value:i.getHue(),onChange:$,onChangeComplete:N})),!R&&o.createElement(M,B({},A,{type:"alpha",colors:[{percent:0,color:"rgba(255, 0, 4, 0)"},{percent:100,color:Y}],min:0,max:100,value:i.a*100,onChange:z,onChangeComplete:L}))),o.createElement(ee,{color:i.toRgbString(),prefixCls:a})));return o.createElement("div",{className:w,style:p,ref:e},typeof h=="function"?h(P):P)});export{de as C};
//# sourceMappingURL=ColorPicker-8fa9dacd.js.map
